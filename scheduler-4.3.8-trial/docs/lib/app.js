(()=>{var Ca=Object.defineProperty;var wa=(a,e,t)=>e in a?Ca(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var rn=(a,e,t)=>(wa(a,typeof e!="symbol"?e+"":e,t),t);var x=class{static cacheFlags(e=navigator.platform,t=navigator.userAgent){let r=this;r._isLinux=Boolean(e.match(/Linux/)),r._isMac=Boolean(e.match(/Mac/)),r._isWindows=Boolean(e.match(/Win32/)),r._isIE11=Boolean(t.match(/rv:11/)),r._edgeVersion=r.getVersion(t,/Edge?\/(\d+)\./),r._isEdge=r._edgeVersion>0&&r._edgeVersion<80,r._isEdge||(r._edgeVersion=0),r._isWebkit=Boolean(t.match(/WebKit/))&&!r._isEdge,r._firefoxVersion=r.getVersion(t,/Firefox\/(\d+)\./),r._isFirefox=r._firefoxVersion>0,r._chromeVersion=r._isEdge?0:r.getVersion(t,/Chrom(?:e|ium)\/(\d+)\./),r._isChrome=r._chromeVersion>0,r._isSafari=Boolean(t.match(/Safari/))&&!r._isChrome&&!r._isEdge,r._isMobileSafari=Boolean(t.match(/Mobile.*Safari/)),r._isAndroid=Boolean(t.match(/Android/g));try{document.querySelector(":scope"),r.supportsQueryScope=!r._isFirefox}catch{r.supportsQueryScope=!1}r._supportsPassive=!1;try{document.addEventListener("__notvalid__",null,{get passive(){r._supportsPassive=!0}})}catch{}}static get supportsOverflowClip(){if(this._supportsOverflowClip==null){let e=document.createElement("div");e.style.overflow="clip",e.style.display="none",document.documentElement.appendChild(e),this._supportsOverflowClip=e.ownerDocument.defaultView.getComputedStyle(e).getPropertyValue("overflow")==="clip",e.remove()}return this._supportsOverflowClip}static get supportsSticky(){return!this._isIE11}static getVersion(e,t){let r=e.match(t);return r?parseInt(r[1]):0}static get isTouchDevice(){return"_isTouchDevice"in this?this._isTouchDevice:window.matchMedia("(pointer:coarse)").matches}static get supportsPointerEvents(){return Boolean(window.PointerEvent||window.MSPointerEvent)}static get isHoverableDevice(){return this._isHoverableDevice===void 0&&(this._isHoverableDevice=window.matchMedia("(any-hover: hover)").matches),this._isHoverableDevice}static get isBrowserEnv(){return typeof window!="undefined"}static get isMac(){return this._isMac}static get isWindows(){return this._isWindows}static get isLinux(){return this._isLinux}static get isAndroid(){return this._isAndroid}static get isIE11(){return this._isIE11}static get isEdge(){return this._isEdge}static get edgeVersion(){return this._edgeVersion}static get isWebkit(){return this._isWebkit}static get isChrome(){return this._isChrome}static get chromeVersion(){return this._chromeVersion}static get isFirefox(){return this._isFirefox}static get firefoxVersion(){return this._firefoxVersion}static get isSafari(){return this._isSafari}static get isMobileSafari(){return this._isMobileSafari}static get supportsPassive(){return this._supportsPassive}static get storageAvailable(){let e,t;try{return e=localStorage,t="__storage_test__",e.setItem(t,t),e.removeItem(t),!0}catch(r){return r instanceof DOMException&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e.length!==0}}static setLocalStorageItem(e,t){this.storageAvailable&&localStorage.setItem(e,t)}static getLocalStorageItem(e){return this.storageAvailable&&localStorage.getItem(e)}static removeLocalStorageItem(e){this.storageAvailable&&localStorage.removeItem(e)}static searchParam(e,t=null,r=document.location.search){let i=new RegExp(`[?&]${e}=?([^&]*)`),s=r.match(i);return s&&s[1]||t}static getCookie(e){let t=encodeURIComponent(e)+"=",r=document.cookie.split(";");for(let i=0;i<r.length;i++){let s=r[i];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return decodeURIComponent(s.substring(t.length,s.length))}return""}static download(e,t){let r=document.createElement("a");r.download=e,r.href=t||e,r.style.cssText="display:none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}static downloadBlob(e,t){let r=window.URL.createObjectURL(e);this.download(t,r),window.URL.revokeObjectURL(r)}static get queryString(){let e=new URL(window.location.href).searchParams;return Object.fromEntries?.(e.entries())}static get global(){return this.isBrowserEnv?window:typeof global!="undefined"?global:globalThis||{}}static copyToClipboard(e){let t=!0,r=document.createElement("textarea");r.value=e,r.style.height=r.style.width=0,document.body.appendChild(r),r.select();try{document.execCommand("copy")}catch{t=!1}return r.remove(),t}static isBryntumOnline(e){return e=Array.isArray(e)?e:[e],Boolean(/^(www\.)?bryntum\.com/.test(window.location.host)||e?.some(t=>this.queryString[t]!=null))}};x.isBrowserEnv&&x.cacheFlags();var kr=!1;try{kr=Boolean(x.global.parent&&x.global.parent.Siesta||typeof process!="undefined"&&(x.global.StartTest||x.global.Siesta))}catch{}kr&&(x._isHoverableDevice=!0);var z=class{static setVersion(e,t){e=e.toLowerCase(),$e[e]={version:t,isNewerThan(s){return s<t},isOlderThan(s){return s>t}};let r="";typeof productName!="undefined"&&(r=productName);let i=`${r}.${e}${t.replace(/\./g,"-")}`;if(x.isBrowserEnv&&!x.global.bryntum.silenceBundleException)if(window.bryntum[i]===!0)if(kr)window.BUNDLE_EXCEPTION=!0;else throw new Error(`Bryntum bundle included twice, check cache-busters and file types (.js).
Simultaneous imports from "*.module.js" and "*.umd.js" bundles are not allowed.`);else window.bryntum[i]=!0}static getVersion(e){if(e=e.toLowerCase(),!$e[e])throw new Error("No version specified! Please check that you import VersionHelper right into the class from where you call `deprecate` function.");return $e[e].version}static checkVersion(e,t,r){let i=$e.getVersion(e),s;switch(r){case"<":s=i<t;break;case"<=":s=i<=t;break;case"=":s=i===t;break;case">=":s=i>=t;break;case">":s=i>t;break}return s}static deprecate(e,t,r){if($e.checkVersion(e,t,"<"))console.warn(`Deprecation warning: You are using a deprecated API which will change in v${t}. ${r}`);else throw new Error(`Deprecated API use. ${r}`)}static get isTestEnv(){return kr}static get isDebug(){return!1}},$e=z;x.isBrowserEnv&&((window.bryntum||(window.bryntum={})).getVersion=$e.getVersion.bind($e),window.bryntum.checkVersion=$e.checkVersion.bind($e),window.bryntum.deprecate=$e.deprecate.bind($e),window.bryntum.isTestEnv=$e.isTestEnv);var sn,nn,on,ln,an=/([a-z])([A-Z])/g,va=/[\n\r]/g,xa=/[.*+?^${}()|[\]\\]/g,Ea=/[&<]/,Sa=/(^[^a-z]+[^\w]+)/gi,Da=/\s+/,Ta=(a,e)=>nn[e.toLowerCase()]||String.fromCharCode(parseInt(e.substr(2),10)),Ra=(a,e)=>sn[e],Ma=(a,e,t)=>`${e}-${t.toLowerCase()}`,Fa=(a,e,t)=>`${e} ${t.toLowerCase()}`,ka=a=>a?`_x${[...a].map(e=>e.charCodeAt(0).toString(16)).join("")}`:"__blank__",cn={},dn={},M=class{static capitalize(e){return e&&e[0].toUpperCase()+e.substr(1)}static capitalizeFirstLetter(e){return z.deprecate("Core","5.0.0","Deprecated in favor of `capitalize()`, will be removed in 5.0"),e?e[0].toUpperCase()+e.substr(1):null}static lowercaseFirstLetter(e){return z.deprecate("Core","5.0.0","Deprecated in favor of `uncapitalize()`, will be removed in 5.0"),e?e[0].toLowerCase()+e.substr(1):null}static uncapitalize(e){return e&&e[0].toLowerCase()+e.substr(1)}static hyphenate(e){let t=cn[e];return t||(cn[e]=e.replace(an,Ma))}static separate(e){let t=dn[e];return t||(dn[e]=this.capitalize(e.replace(an,Fa)))}static createId(e){return String(e).replace(Sa,ka)}static escapeRegExp(e,t){let r=e.replace(xa,"\\$&");return t!==void 0&&(r=new RegExp(r,t)),r}static decodeHtml(e){return e&&String(e).replace(ln,Ta)}static encodeHtml(e){return e&&String(e).replace(on,Ra)}static encodeHtmlBR(e){return M.encodeHtml(e)?.replace(va,"<br>")}static isHtml(e){return typeof e=="string"&&Ea.test(e||"")}static initHtmlEntities(e){e=e||{"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#39;"};let t=Object.keys(e);sn=e,nn=t.reduce((r,i)=>(r[e[i]]=i,r),{}),on=new RegExp(`([${t.map(r=>"[-]".includes(r)?"\\"+r:r).join("")}])`,"g"),ln=new RegExp(`(${Object.values(e).join("|")}|&#[0-9]+;)`,"ig")}static safeJsonParse(e){let t=null;try{t=JSON.parse(e)}catch{}return t}static safeJsonStringify(e,t=null,r=null){let i=null;try{i=JSON.stringify(e,t,r)}catch{}return i}static joinPaths(e,t="/"){return e.join(t).replace(new RegExp("\\"+t+"+","g"),t)}static split(e,t=Da){let r=e;return typeof r=="string"&&(r=e.trim(),r=r?r.split(t):[]),r}static xss(e,...t){let r=[],i=t.length;for(r[i]=e[i];i-- >0;)r[i]=e[i]+M.encodeHtml(t[i]);return r.join("")}static xssBR(e,...t){let r=[],i=t.length;for(r[i]=e[i];i-- >0;)r[i]=e[i]+M.encodeHtmlBR(t[i]);return r.join("")}};M.initHtmlEntities();var{toString:Oa}=Object.prototype,{isFrozen:un}=Object,La=/\s*<\s*/,Ia=/\s*>\s*/,fn={},ja=/\[object ([^\]]+)]/,hn={},mn=Object.freeze({}),I=class{static assign(e,...t){for(let r,i,s=0;s<t.length;s++)if(r=t[s],r)for(i in r)e[i]=r[i];return e}static assignIf(e,...t){for(let r,i,s=0;s<t.length;s++)if(r=t[s],r)for(i in r)(!(i in e)||e[i]===void 0)&&(e[i]=r[i]);return e}static blend(e,t,r){r=r||fn,e=e||{};let{clone:i=I.clone,merge:s=I.blend}=r;if(Array.isArray(t)){if(t.length>1)return t.forEach(n=>{e=I.blend(e,n,r)}),e;t=t[0]}if(t){let n,o,l;for(o in t)l=t[o],l&&ot.isObject(l)&&(n=e[o],r.key=o,n&&ot.isObject(n)?(un(n)&&(e[o]=n=i(n,r)),l=s(n,l,r)):l=un(l)?l:i(l,r)),e[o]=l}return e}static clone(e,t){let r=e,i;if(e&&typeof e=="object")if(t&&typeof t=="object"&&t&&(t=null),ot.isObject(e)){r={};for(i in e)r[i]=ot.clone(e[i])}else if(Array.isArray(e))for(r=[],i=e.length;i-- >0;)r[i]=ot.clone(e[i]);else ot.isDate(e)?r=new Date(e.getTime()):t&&(r=t(e));return r}static createTruthyKeys(e){let t=M.split(e),r=t&&{};if(t)for(let i of t)i&&(r[i]=!0);return r}static getPath(e,t){return t.split(".").reduce((r,i)=>(r||mn)[i],e)}static getPathDefault(e,t,r){let i=Array.isArray(t)?t:typeof t=="string"?t.split("."):[t],s=i.length-1;return i.reduce((n,o,l)=>(r&&!(o in n)&&(n[o]=l===s?r:{}),(n||mn)[o]),e)}static hasPath(e,t){return t.split(".").every(r=>r in e?(e=e[r],!0):!1)}static getTruthyKeys(e){let t=[];for(let r in e)e[r]&&t.push(r);return t}static getTruthyValues(e){let t=[];for(let r in e)e[r]&&t.push(e[r]);return t}static isClass(e){return typeof e=="function"&&e.prototype?.constructor===e}static isDate(e){return Boolean(e&&e.getUTCDate)&&ot.typeOf(e)==="date"}static isPromise(e){if(Promise&&Promise.resolve)return Promise.resolve(e)===e||typeof e?.then=="function";throw new Error("Promise not supported in your environment")}static isEmpty(e){if(e&&typeof e=="object")for(let t in e)return!1;return!0}static isObject(e){let t=e?.constructor;return Boolean(t?t===Object||t.getPrototypeOf&&t.prototype&&!Object.getPrototypeOf(t.prototype):e&&typeof e=="object")}static isInstantiated(e){return e?typeof e=="object"&&!I.isObject(e):!1}static merge(e,...t){return I.blend(e,t)}static mergeItems(e,t,r){r=r||fn;let i,s,n,o,l,c,d,{merge:u=I.blend,rebuild:f=!I.ES6_OBJECT_ORDER}=r;if(e=e||{},Array.isArray(t))t.forEach(h=>{e=I.mergeItems(e,h,r)});else if(t){for(l in t)if(d=t[l],i=null,l.includes(">")?([l,i]=l.split(Ia),s=0):l.includes("<")&&([i,l]=l.split(La),s=1),l in e)d&&e[l]&&u&&(r.key=l,d=u(e[l],d,r)),e[l]=d;else if(!i)e[l]=d,o?.set(l,o.size);else{if(!o){o=new Map,n=0;for(let h in e)o.set(h,n++)}if(n=o.get(i),e[l]=d,n==null&&s)n=o.size;else{c=!f&&(c||[]),n=(n||0)+s;for(let h of o){let[m,p]=h;n<=p&&(c&&(c[o.size-p-1]=m),o.set(m,p+1))}if(c)for(;c.length;){let h=c.pop(),m=e[h];delete e[h],e[h]=m}}o.set(l,n)}if(f&&o){let h=Array.from(o.entries()).sort((p,y)=>p[1]-y[1]),m=e;e={};for(let p,y=0;y<h.length;++y)p=h[y][0],e[p]=m[p]}}return e}static setPath(e,t,r){return t.split(".").reduce((i,s,n,o)=>n===o.length-1?i[s]=r:(i[s]instanceof Object||(i[s]={}),i[s]),e),e}static typeOf(e){let t=typeof e,r,i;return t==="object"?e===null?t="null":(i=Oa.call(e),(t=hn[i])||(r=ja.exec(i),hn[i]=t=r?r[1].toLowerCase():i)):e!==e&&(t="nan"),t}},ot=I;ot.ES6_OBJECT_ORDER=(()=>{let a={a:1,b:2};return a.c=3,delete a.b,a.b=20,Object.keys(a)[1]==="c"})();var{defineProperty:Or,getOwnPropertyDescriptor:gn}=Reflect,{hasOwnProperty:pn,toString:Ri}=Object.prototype,Mi=Symbol("instanceProperties"),yn=Symbol("configuring"),Ot=Symbol("lazyConfigValues"),bn=Ri.call(new Date),Ha=/\s+/,Aa=(a,e)=>(a[e]=1,a),Q=class{static get(e,t){let{cache:r}=this,i=r[e]||(r[e]=new Q(e)),s=i,n;return t&&(n=Q.makeCacheKey(e,t),(s=n&&r[n])||(s=i.extend(t),n&&(r[n]=s))),s}constructor(e){let t=this,r=e[0].toUpperCase()+e.substr(1);t.base=t,t.name=e,t.field="_"+e,t.capName=r,t.changer="change"+r,t.initializing="initializing"+r,t.updater="update"+r}get descriptor(){let e=this._descriptor;return(!e||!pn.call(this,"_descriptor"))&&(this._descriptor=e=this.makeDescriptor()),e}get initDescriptor(){let e=this._initDescriptor;return(!e||!pn.call(this,"_initDescriptor"))&&(this._initDescriptor=e=this.makeInitter()),e}equal(e,t){return e===t}extend(e){let t=Object.assign(Object.create(this),e),{equal:r,merge:i}=e,{equalityMethods:s}=Q;return typeof r=="string"&&(r.endsWith("[]")?t.equal=Q.makeArrayEquals(s[r.substr(0,r.length-2)]):t.equal=s[r]),typeof i=="string"&&(t.merge=Q.mergeMethods[i]),t}define(e){let t=gn(e,this.name),r=this.descriptor;t&&t.get&&(r=Object.assign({},r),r.get=t.get),Or(e,this.name,r)}defineInitter(e,t){let{name:r}=this,i=e[Mi],s,n;!i[r]&&(n=gn(e,r))&&!("value"in n)&&(i[r]=n),Or(e,r,this.initDescriptor),this.lazy&&(s=e[Ot]||(e[Ot]={$counter_:0}),s[r]=t,++s.$counter_)}static makeArrayEquals(e){return(t,r)=>{let i,s=t&&r&&t.length===(i=r.length);if(s&&Array.isArray(t)&&Array.isArray(r))if(e)for(;s&&i-- >0;)s=e(t[i],r[i]);else for(;s&&i-- >0;)s=t[i]===r[i];else s=e?e(t,r):t===r;return s}}static makeCacheKey(e,t){let r=Object.keys(t).sort();for(let i,s,n,o=r.length;o-- >0;)if(n=t[i=r[o]],n==null&&n===!1)r.splice(o,1);else{if(s=typeof n,s==="function")return null;s==="string"?r[o]=`${i}:"${n}"`:s==="number"&&(r[o]=`${i}:${n}`)}return r.length?`${e}>${r.join("|")}`:e}makeDescriptor(){let e=this,{base:t,field:r,changer:i,updater:s,name:n}=e;return t!==e&&t.equal===e.equal?t.descriptor:{get(){return this.configObserver?.get(n,this),this[r]},set(o){let l=this,c=l[r],d,u;if(typeof o=="string"){let f=o;o.startsWith("up.")?f=l.owner?.resolveProperty(o.substr(3)):o.startsWith("this.")&&(f=l.resolveProperty(o.substr(5))),f!==void 0&&typeof f!="function"&&(o=f)}l[i]&&(d=(u=l[i](o,c))===void 0,d||(o=u,c=l[r])),!d&&!(e.equal===Cn?c===o:e.equal(c,o))&&(l[r]=o,d=!0,l[s]&&l[s](o,c)),d&&!l.onConfigChange.$nullFn&&l.onConfigChange({name:n,value:o,was:c,config:e})}}}makeInitter(){let e=this;return e!==e.base?e.lazy?e.makeLazyInitter():e.base.initDescriptor:e.makeBasicInitter()}makeBasicInitter(){let e=this,{initializing:t,name:r}=e;return{configurable:!0,get(){let i=this;return e.removeInitter(i),i[t]=!0,i[r]=i[yn][r],i[t]=!1,i.configDone[r]=!0,i[r]},set(i){e.removeInitter(this),this.configDone[r]=!0,this[r]=i}}}makeLazyInitter(){let e=this,{initializing:t,name:r}=e;return{configurable:!0,get(){let i=this,s=i[Ot][r];return e.removeInitter(i),i.isDestroying||(i[t]=!0,i[r]=s,i[t]=!1),i[r]},set(i){e.removeInitter(this),this[r]=i}}}removeInitter(e){let{name:t}=this,r=e[Mi][t];r?Or(e,t,r):delete e[t],this.lazy&&(--e[Ot].$counter_||delete e[Ot])}setDefault(e,t){Or(e.prototype,this.field,{configurable:!0,writable:!0,value:t})}merge(e,t){return t&&e&&I.isObject(t)&&I.isObject(e)&&(e=I.merge(I.clone(t),e)),e}},{prototype:Lr}=Q,{equal:Cn}=Lr;Q.symbols={configuring:yn,instanceProperties:Mi,lazyConfigs:Ot};Q.cache=Object.create(null);Q.equalityMethods={array:Q.makeArrayEquals(),date(a,e){return a===e?!0:a&&e&&Ri.call(a)===bn&&Ri.call(e)===bn?a.getTime()===e.getTime():!1},strict:Q.equal=Cn};Q.mergeMethods={distinct(a,e){let t=e?e.slice():[];if(a!=null)if(I.isObject(a))if(e===void 0)t=a;else{let r,i;for(r in a)i=t.indexOf(r),a[r]?i<0&&t.push(r):i>-1&&t.splice(i,1)}else Array.isArray(a)?a.forEach(r=>!t.includes(r)&&t.push(r)):t.includes(a)||t.push(a);return t},merge:Q.merge=Lr.merge,classList(a,e){if(typeof a=="string"){if(!a.length)return e;a=a.split(Ha).reduce(Aa,{})}return Q.merge(a,e)},objects(a,e){return a===!0?e||{}:Q.merge(a,e)},replace(a){return a},items(a,e){return I.mergeItems(e,a,{merge:(t,r)=>Lr.merge(r,t)})}};Object.assign(Lr,{_descriptor:null,_initDescriptor:null,lazy:!1,nullify:!1,render:!1});var wn=class{constructor(e){e&&Object.assign(this,e)}getInherited(e,t=!0){let r=this[e];return e in this||(r=this.super?.getInherited(e,t),(r||t)&&(this[e]=r=Object.create(r||null))),r}},{getPrototypeOf:vn}=Object,{defineProperty:Fi}=Reflect,{hasOwnProperty:qe}=Object.prototype,Ir=Symbol("classMetaData"),xn=Symbol("mixinTag"),ki=Symbol("originalConfig"),Ff=Symbol("createdAt"),lt=Q.symbols.configuring,Pa=Q.symbols.instanceProperties,$a=Q.symbols.lazyConfigs,Na={merge:"replace",simple:!0},En=()=>{},Sn=a=>new wn(a),Dn={},_a=Object.freeze({}),Ba=Object.freeze([]),S=class{static get isBase(){return!0}get isBase(){return!0}static get declarable(){return["declarable","configurable","defaultConfig","properties","prototypeProperties"]}constructor(...e){let t=this,r=t.constructor;t.$meta.class!==r&&En(r.$meta),t.construct(...e),t.afterConstruct()}static new(...e){return new this(I.merge({},...e))}construct(...e){e[0]!==null&&this.configure(...e),this.afterConfigure()}static destroy(...e){let t=r=>{r?.destroy?r.destroy():Array.isArray(r)&&r.forEach(t)};t(e)}destroy(){let e=this,{id:t}=e;e.isDestroying=!0,e.destroy=En,e.doDestroy(),Object.setPrototypeOf(e,null);for(let r in e)r!=="destroy"&&r!=="isDestroying"&&delete e[r];delete e[ki],e.isDestroyed=!0,e.id=t}_thisIsAUsedExpression(e){}static get $$name(){return qe.call(this,"$name")&&this.$name||qe.call(this,"_$name")&&this._$name||this.name}get $$name(){return this.constructor.$$name}startConfigure(e){}finishConfigure(e){}afterConfigure(){}afterConstruct(){}callback(e,t,r=Ba){let{handler:i,thisObj:s}=this.resolveCallback(e,t==="this"?this:t)||_a;return i?.apply(s,r)}resolveProperty(e){let t=this;for(;t;){if(I.hasPath(t,e))return I.getPath(t,e);t=t.owner}}resolveCallback(e,t=this,r=!0){if(e.substring){if(e.endsWith("?")&&(r=!1,e=e.substring(0,e.length-1)),e.startsWith("up.")){for(e=e.substring(3),t=this.owner;t&&!t[e];t=t.owner);if(!t)return}else e.startsWith("this.")&&(e=e.substring(5),t=this);if(!t||!(t instanceof Object)||typeof t[e]!="function")return;e=t[e]}return{handler:e,thisObj:t}}bindCallback(e,t=this){if(e){let{handler:r,thisObj:i}=this.resolveCallback(e,t);if(r)return r.bind(i)}}delay(e,t){e=this.setTimeout?e:e.bind(this),(this.setTimeout?this:x.global)[typeof t=="number"?"setTimeout":"requestAnimationFrame"](e,t)}doDestroy(){let e=this,{nullify:t}=e.$meta;if(t)for(let r=0;r<t.length;++r)e[t[r].field]!=null&&(e[t[r].name]=null)}destroyProperties(...e){let t=this,r,i;for(r of e)r in t&&(!t[lt]||!t[lt][r])&&(i=t[r],i&&i.destroy&&i.destroy(),delete t[r])}configure(e={}){let t=this,{beforeConfigure:r}=e,i=t.$meta.configs,s=t.getDefaultConfiguration(),n,o,l;t.initialConfig=e,t.isConfiguring=!0,Object.assign(t,t.getProperties());for(o in e)l=e[o],n=i[o],s[o]=n?n.merge(l,s[o],null):l;r&&(delete s.beforeConfigure,r(t,s)),t.setConfig(t[ki]=s,!0),t.isConfiguring=!1}getConfig(e){return this[e]}setConfig(e,t){let r=this,i=r[lt],s=i?r.configDone:r.configDone={},n=r.$meta.configs,o,l;r[Pa]={},r[lt]=i?Object.setPrototypeOf(Object.assign({},e),i):e;for(l in e)e[l]!=null||qe.call(e,l)?(o=n[l]||Q.get(l),o.defineInitter(r,e[l]),t?o.lazy&&(s[l]=!0):s[l]=!1):s[l]=!0;t&&r.startConfigure(e);for(l in e)s[l]||(r[l]=e[l]);return i?r[lt]=i:delete r[lt],t&&r.finishConfigure(e),r}hasConfig(e){let t=this,r=t[$a],i=t[lt],s=t["_"+e]!=null,n=r?.[e]!=null,o=Boolean(!t.configDone[e]&&i&&(i[e]!=null||qe.call(i,e)));return s||n||o}triggerConfig(e){let{configDone:t}=this,r=this[lt],i=r&&(r[e]!=null||qe.call(r,e))?!t[e]:null;return i&&this.getConfig(e),i}onConfigChange(){}get config(){let e={},t=this[ki];for(let r in t)e[r]=t[r];return e}static initClass(){return this.$meta.class}static get $meta(){let e=this,t=e[Ir];return qe.call(e,Ir)||(e[Ir]=t=Sn(),t.class=e,e.setupClass(t)),t}static onClassMixedIn(){}static mergeConfigs(e,...t){let r=this.$meta.configs,i=I.clone(e)||{},s,n,o,l;for(n=0;n<t.length;++n)if(s=t[n],s)for(o in s)l=s[o],r[o]?l=r[o].merge(l,i[o]):i[o]&&l&&(l=Q.merge(l,i[o])),i[o]=l;return i}static mixin(...e){let t=this,r;for(r=0;r<e.length;++r){let i=e[r],s=i[xn]||(i[xn]=Symbol("mixinTag"));t[s]||(t=i(t),t[s]=!0,qe.call(t,"onClassMixedIn")&&t.onClassMixedIn())}return t}static setupClass(e){let t=e.class,r=vn(t).$meta,i=t.$$name,s=r.names,n=t.prototype;if(Fi(n,"$meta",{value:e}),Object.assign(e,{super:r,config:Object.create(r.config),configs:Object.create(r.configs),declarables:r.declarables,forkConfigs:r.forkConfigs,hierarchy:Object.freeze([...r.hierarchy,t]),names:s.includes(i)?s:Object.freeze([...s,i]),properties:r.properties,nullify:r.nullify?.slice()}),s!==e.names){let o="is"+i;qe.call(n,o)||Fi(n,o,{value:!0}),qe.call(t,o)||Fi(t,o,{value:!0})}for(let o,l,c=0;c<e.declarables.length;++c)o=e.declarables[c],qe.call(t,o)&&(l=Dn[o]||(Dn[o]=`setup${M.capitalize(o)}`),t[l](t,e))}static setupConfigs(e,t,r){let i=e.config,s=e.configs,n=e.class,{nullify:o}=e,l,c,d,u,f,h;for(let m in t)f=t[m],r?(l=s[m])?f=l.merge(f,i[m],e):l=Q.get(m,Na):(c=d=u=void 0,f&&typeof f=="object"&&"$config"in f&&(d=f.$config,d&&!I.isObject(d)&&(d=I.createTruthyKeys(d)),u="default"in f,c=u?f.default:c,f=f.value),(l=s[m])?(h=l.nullify,d&&(l=l.extend(d)),f=l.merge(f,i[m],e)):(l=Q.get(m,d),l.define(n.prototype),u=!(l.field in n.prototype),h=!1),u&&l.setDefault(n,c),l.nullify&&!h&&(o||(o=e.nullify||(e.nullify=[]))).push(l)),f&&(I.isObject(f)||Array.isArray(f))&&!Object.isFrozen(f)&&(e.forkConfigs=!0),s[m]=l,i[m]=f}static setupConfigurable(e,t){e.setupConfigs(t,e.configurable,!1)}static setupDefaultConfig(e,t){e.setupConfigs(t,e.defaultConfig,!0)}static setupDeclarable(e,t){let r=e.declarable,i=t.declarables,s,n;for(n=0;n<r.length;++n)i.includes(r[n])||(s||(t.declarables=s=i=i.slice()),i.push(r[n]))}static setupProperties(e,t){t.properties=t.super.properties.slice(),t.properties.push(e),Object.freeze(t.properties)}static setupPrototypeProperties(e){Object.assign(e.prototype,e.prototypeProperties)}getDefaultConfiguration(){return this.constructor.getDefaultConfiguration()}static getDefaultConfiguration(){let e=this.$meta,t=e.forkConfigs?S.fork(e.config):Object.create(e.config);if(z.isTestEnv&&x.isBrowserEnv&&t.testConfig&&x.global.__applyTestConfigs)for(let r in t.testConfig)t[r]=t.testConfig[r];return t}static fork(e){let t=e,r,i;if(e&&I.isObject(e)&&!Object.isFrozen(e)){t=Object.create(e);for(r in e)i=e[r],i&&(I.isObject(i)?t[r]=S.fork(i):Array.isArray(i)&&(t[r]=i.slice()))}return t}getProperties(){let e=this.$meta.properties,t={};for(let r=0;r<e.length;r++)Object.assign(t,e[r].properties);return t}static get superclass(){return vn(this)}classHierarchy(e){let t=this.$meta.hierarchy,r=e?t.indexOf(e):0;return r>0?t.slice(r):t}static isOfTypeName(e){return this.$meta.names.includes(e)}detachListeners(e){let t=this.$detachers;if(t=t?.[e],t)for(;t.length;)t.pop()()}trackDetacher(e,t){let r=this.$detachers||(this.$detachers={});(r[e]||(r[e]=[])).push(t)}untrackDetachers(e){let t=this.$detachers;if(t)for(let r in t){let i=t[r];for(let s=i.length;s-- >0;)i[s].eventer===e&&i.splice(s,1)}}},Oi=S.prototype;Oi.onConfigChange.$nullFn=!0;S[Ir]=Oi.$meta=Sn({class:S,config:Object.freeze({}),configs:Object.create(null),declarables:S.declarable,forkConfigs:!1,hierarchy:Object.freeze([S]),names:Object.freeze(["Base"]),nullify:null,properties:Object.freeze([]),super:null});Object.assign(Oi,{$detachers:null,configObserver:null,isDestroyed:!1,isDestroying:!1});z.setVersion("core","4.3.8");var Va=/^(\w+)=(.*)$/,za=globalThis.DocsBrowserInstance&&x.queryString?.__resourceRoot||"",Wa=function(a){let e={},t=a.split("&");for(let r of t){let[i,s,n]=Va.exec(r),o=decodeURIComponent(s),l=decodeURIComponent(n);if(i){let c=e[o];c?(Array.isArray(c)||(c=e[o]=[c]),c.push(l)):e[o]=l}}return e},ue=class{static get(e,t){return this.fetch(e,t)}static post(e,t,r={}){return!(t instanceof FormData)&&typeof t!="string"&&(t=JSON.stringify(t),r.headers=r.headers||{},r.headers["Content-Type"]=r.headers["Content-Type"]||"application/json"),this.fetch(e,Object.assign({method:"POST",body:t},r))}static fetch(e,t={}){let r;if(typeof AbortController!="undefined"&&(r=new AbortController,Object.assign(t,{abortController:r,signal:r.signal})),"credentials"in t||(t.credentials="include"),t.queryParams){let s=Object.entries(t.queryParams);s.length&&(e+=(e.includes("?")?"&":"?")+s.map(([n,o])=>`${n}=${encodeURIComponent(o)}`).join("&"))}let i=new Promise((s,n)=>{fetch(za+e,t).then(o=>{t.parseJson?o.json().then(l=>{o.parsedJson=l,s(o)}).catch(l=>{o.parsedJson=null,o.error=l,n(o)}):s(o)}).catch(o=>{o.stack=i.stack,o.name!=="AbortError"&&n(o)})});return i.stack=new Error().stack,i.abort=function(){r?.abort()},i}static mockUrl(e,t){let r=this;(r.mockAjaxMap||(r.mockAjaxMap={}))[e]=t,ue.originalFetch||(ue.originalFetch=ue.fetch),ue.fetch=r.mockAjaxFetch.bind(r)}static mockAjaxFetch(e,t){let r=e.split("?"),i=this.mockAjaxMap[r[0]],s=null;if(i){typeof i=="function"&&(i=i(r[0],r[1]&&Wa(r[1]),t));try{s=t.parseJson&&JSON.parse(i.responseText)}catch(n){s=null,i.error=n}return i=Object.assign({status:200,ok:!0,headers:new Headers,statusText:"OK",url:e,parsedJson:s,text:()=>new Promise(n=>{n(i.responseText)}),json:()=>new Promise(n=>{n(s)})},i),new Promise(function(n,o){i.synchronous?n(i):setTimeout(function(){n(i)},"delay"in i?i.delay:100)})}else return ue.originalFetch(e,t)}};var U=class{static clean(e){return e.reduce((t,r)=>(r!=null&&!(Array.isArray(r)&&r.length===0)&&r!==""&&t.push(r),t),[])}static from(e,t,r){let i=[];if(e)for(let s of e)(!t||t(s))&&i.push(r?r(s):s);return i}static remove(e,...t){let r,i,s=!1;for(let n=0;n<t.length;n++)i=t[n],(r=e.indexOf(i))!==-1&&(e.splice(r,1),s=!0);return s}static findInsertionIndex(e,t,r=this.lexicalCompare,i){let s=t.length,n,o;return i<s&&(n=i>0?r(t[i-1],e):0,o=i<s-1?r(e,t[i]):0,n<1&&o<1)?i:this.binarySearch(t,e,r)}static findLast(e,t,r){for(let{length:i}=e,s=i-1;s>=0;s--)if(t.call(r,e[s],s,e))return e[s]}static binarySearch(e,t,r=0,i=e.length,s=this.lexicalCompare){let n=e.length,o,l;for(r instanceof Function?(s=r,r=0):i instanceof Function&&(s=i,i=n),--i;r<=i;)o=r+i>>1,l=s(t,e[o]),l>=0?r=o+1:l<0&&(i=o-1);return r}magnitudeCompare(e,t){return e<t?-1:e>t?1:0}lexicalCompare(e,t){return e=String(e),t=String(t),e<t?-1:e>t?1:0}static fill(e,t={},r=null){let i=[],s=Array.isArray(t)?t:[t];for(let n=0;n<e;n++)for(let o of s){let l=Object.assign({},o);r&&r(l,n),i.push(l)}return i}static populate(e,t,r=!1){let i=[];for(let s=0;s<e;s++)i.push(t(s+(r?1:0)));return i}static include(e,t){e.includes(t)||e.push(t)}static unique(e){return[...new Set(e)]}static allowNegative(e){return new Proxy(e,{get(t,r,i){if(typeof r!="string")return Reflect.get(t,r,i);let s=Number(r);return Number.isNaN(s)?Reflect.get(t,r,i):t[s<0?t.length+s:s]},set(t,r,i,s){if(typeof r!="string")return Reflect.set(t,r,i,s);let n=Number(r);return Number.isNaN(n)?Reflect.set(t,r,i,s):(t[n<0?t.length+n:n]=i,!0)}})}static delta(e,t,r=!1){if(!t)return r?{toAdd:e,toRemove:[],toKeep:[]}:{onlyInA:e,onlyInB:[],inBoth:[]};let i=[],s=[],n=[];for(let o=0;o<e.length;o++){let l=e[o];t.includes(l)?n.push(l):i.push(l)}for(let o=0;o<t.length;o++){let l=t[o];n.includes(l)||s.push(l)}return r?{toAdd:i,toRemove:s,toKeep:n}:{onlyInA:i,onlyInB:s,inBoth:n}}};(a=>{let e=new Array(a),t={},r,i,s,n;for(r=0;r<a;++r)e[r]=[Math.floor(Math.random()*3)+1,r+1];for(e.sort((o,l)=>o[0]-l[0]),r=0;r<a&&!s;++r)[i,n]=e[r],s=t[i]>n,t[i]=n;if(s){let{prototype:o}=Array,{sort:l}=o,c=(u,f)=>u<f?-1:f<u?1:0;Object.defineProperty(o,"sort",{configurable:!0,value:function(f){let h=this,m=h.length,p,y;if(m>1){for(y=new Array(m),p=m;p-- >0;)y[p]=p;for(f=f||c,l.call(y,(C,w)=>f(h[C],h[w])||C-w),p=m;p-- >0;)y[p]=h[y[p]];for(p=m;p-- >0;)h[p]=y[p]}return h}})}})(600);var jr=class{static animationFrame(){return new Promise(e=>{requestAnimationFrame(e)})}static sleep(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}static yield(){return Promise.resolve()}};var{hasOwnProperty:Ga}=Object.prototype,W=class{static after(e,t,r,i,s){let n=typeof r=="string",o=s?.return!==!1,l=(...c)=>{let d=l.$nextHook.call(e,...c),u=i?.isDestroyed?void 0:o?n?i[r](d,...c):r.call(i,d,...c):n?i[r](...c):r.call(i,...c);return u===void 0?d:u};return W.hookMethod(e,t,l)}static before(e,t,r,i){let s=typeof r=="string",n=(...o)=>{let l=i?.isDestroyed?0:s?i[r](...o):r.call(i,...o);return l===!1?l:n.$nextHook.call(e,...o)};return W.hookMethod(e,t,n)}static curry(e){return function t(...r){return r.length>=e.length?e.apply(this,r):function(...i){return t.apply(this,r.concat(i))}}}static bindAll(e){for(let t in e)typeof e[t]=="function"&&(e[t]=e[t].bind(e))}static createInterceptor(e,t,r){return(...i)=>t.call(r,...i)!==!1?e.call(r,...i):!1}static createSequence(e,t,r){return(...i)=>{let s=e.call(r,...i),n=t.call(r,...i);return n===void 0?s:n}}static createThrottled(e,t,r,i,s){let n=-Number.MAX_VALUE,o,l,c=()=>{l=0,n=performance.now(),o.push.apply(o,i),e.apply(r,o)},d=function(...u){let f=performance.now()-n;o=u,f>=t?(clearTimeout(l),c()):(l||(l=setTimeout(c,t-f)),s&&(o.push.apply(o,i),s.apply(r,o)))};return d.cancel=()=>clearTimeout(l),d}static createBuffered(e,t,r,i){let s,n,o=()=>{n=0,l.isPending=!1,s.push.apply(s,i),e.apply(r,s)},l=function(...c){s=c,n&&clearTimeout(n),l.isPending=!0,n=setTimeout(o,t)};return l.cancel=()=>{l.isPending=!1,clearTimeout(n)},l}static hookMethod(e,t,r){return r.$nextHook=e[t],e[t]=r,()=>{if(Ga.call(e,t)){let i=e[t],s;if(i===r)Object.getPrototypeOf(e)?.[t]===r.$nextHook?delete e[t]:e[t]=r.$nextHook;else for(;s=i?.$nextHook;i=s)if(s===r){i.$nextHook=r.$nextHook;break}}}}static noThrow(e,t,r){let i=e[t];e[t]=(...s)=>{try{return i.apply(e,s)}catch(n){return r?.(n)}}}static returnTrue(){return!0}static animate(e,t,r,i="linear"){let s=!1,n=new Promise(o=>{let l=performance.now(),c=()=>{let d=Math.min((performance.now()-l)/e,1),u=r&&r.setTimeout?r:window;s||t.call(r,this.easingFunctions[i](d))===!1&&o(),s||d===1?u.requestAnimationFrame(()=>o()):u.requestAnimationFrame(c)};c()});return n.cancel=()=>(s=!0,!1),n}},Z=.5,at=1.70158,Ne=7.5625,Hr=1.525,Li=2/2.75,Ii=2.25/2.75,ji=1/2.75,Hi=1.5/2.75,Ai=2.5/2.75,Pi=2.625/2.75,$i=.75,Ni=.9375,_i=.984375,qa=1.70158,Ua=1.70158;W.easingFunctions={linear:a=>a,easeInQuad:a=>Math.pow(a,2),easeOutQuad:a=>-(Math.pow(a-1,2)-1),easeInOutQuad:a=>(a/=Z)<1?Z*Math.pow(a,2):-Z*((a-=2)*a-2),easeInCubic:a=>Math.pow(a,3),easeOutCubic:a=>Math.pow(a-1,3)+1,easeInOutCubic:a=>(a/=Z)<1?Z*Math.pow(a,3):Z*(Math.pow(a-2,3)+2),easeInQuart:a=>Math.pow(a,4),easeOutQuart:a=>-(Math.pow(a-1,4)-1),easeInOutQuart:a=>(a/=Z)<1?Z*Math.pow(a,4):-Z*((a-=2)*Math.pow(a,3)-2),easeInQuint:a=>Math.pow(a,5),easeOutQuint:a=>Math.pow(a-1,5)+1,easeInOutQuint:a=>(a/=Z)<1?Z*Math.pow(a,5):Z*(Math.pow(a-2,5)+2),easeInSine:a=>-Math.cos(a*(Math.PI/2))+1,easeOutSine:a=>Math.sin(a*(Math.PI/2)),easeInOutSine:a=>-Z*(Math.cos(Math.PI*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>a===0?0:a===1?1:(a/=Z)<1?Z*Math.pow(2,10*(a-1)):Z*(-Math.pow(2,-10*--a)+2),easeInCirc:a=>-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-Math.pow(a-1,2)),easeInOutCirc:a=>(a/=Z)<1?-Z*(Math.sqrt(1-a*a)-1):Z*(Math.sqrt(1-(a-=2)*a)+1),easeOutBounce:a=>a<ji?Ne*a*a:a<Li?Ne*(a-=Hi)*a+$i:a<Ai?Ne*(a-=Ii)*a+Ni:Ne*(a-=Pi)*a+_i,easeInBack:a=>a*a*((at+1)*a-at),easeOutBack:a=>(a=a-1)*a*((at+1)*a+at)+1,easeInOutBack:a=>{let e=qa;return(a/=Z)<1?Z*(a*a*(((e*=Hr)+1)*a-e)):Z*((a-=2)*a*(((e*=Hr)+1)*a+e)+2)},elastic:a=>-1*Math.pow(4,-8*a)*Math.sin((a*6-1)*(2*Math.PI)/2)+1,swingFromTo:a=>{let e=Ua;return(a/=Z)<1?Z*(a*a*(((e*=Hr)+1)*a-e)):Z*((a-=2)*a*(((e*=Hr)+1)*a+e)+2)},swingFrom:a=>a*a*((at+1)*a-at),swingTo:a=>(a-=1)*a*((at+1)*a+at)+1,bounce:a=>a<ji?Ne*a*a:a<Li?Ne*(a-=Hi)*a+$i:a<Ai?Ne*(a-=Ii)*a+Ni:Ne*(a-=Pi)*a+_i,bouncePast:a=>a<ji?Ne*a*a:a<Li?2-(Ne*(a-=Hi)*a+$i):a<Ai?2-(Ne*(a-=Ii)*a+Ni):2-(Ne*(a-=Pi)*a+_i),easeFromTo:a=>(a/=Z)<1?Z*Math.pow(a,4):-Z*((a-=2)*Math.pow(a,3)-2),easeFrom:a=>Math.pow(a,4),easeTo:a=>Math.pow(a,.25)};var{isArray:Tn}=Array,{hasOwnProperty:Ka}=Object.prototype,Rn={thisObj:1,detachable:1,once:1,detacher:1,prio:1,args:1,expires:1,buffer:1,throttle:1,name:1},Mn=(a,e)=>e.prio-a.prio,re=a=>class Bi extends(a||S){static get $name(){return"Events"}static get declarable(){return["deprecatedEvents"]}static setupDeprecatedEvents(t,r){let i=r.getInherited("deprecatedEvents"),s=t.deprecatedEvents;for(let n in s)i[n.toLowerCase()]=i[n]=s[n]}static get configurable(){return{listeners:{value:null,$config:{merge(t,r){if(t!==null){if(!t)return r;r&&(t=t?[t]:[],t.push[Tn(r)?"apply":"call"](t,r))}return t}}},bubbleEvents:null}}destroy(){this.trigger("beforeDestroy"),super.destroy()}construct(t,...r){(this.configuredListeners=t?.listeners)&&(t={...t},delete t.listeners),super.construct(t,...r),this.processConfiguredListeners()}processConfiguredListeners(){if(this.configuredListeners){let t=this,{isConfiguring:r}=t;t.isConfiguring=!1,t.listeners=t.configuredListeners,t.configuredListeners=null,t.isConfiguring=r}}doDestroy(){this.trigger("destroy"),this.removeAllListeners(),super.doDestroy()}static setupClass(t){super.setupClass(t),Bi.prototype.onListen.$nullFn=!0,Bi.prototype.onUnlisten.$nullFn=!0}addListener(t,r,i){if(Tn(t)){for(let o=0,{length:l}=t;o<l;o++)this.addListener(t[o],r);return}let s=this,n=s.$meta.getInherited("deprecatedEvents");if(typeof t=="string")return s.addListener({[t]:r,detachable:r.detachable!==!1,thisObj:i});{r=t.thisObj=t.thisObj!==void 0?t.thisObj:r;for(let d in t)if(!Rn[d]&&t[d]!=null){let u=d.toLowerCase(),f=n?.[u],h=s.eventListeners||(s.eventListeners={}),m=t[d],p=m.expires||t.expires,y={fn:typeof m=="object"?m.fn:m,thisObj:m.thisObj!==void 0?m.thisObj:r,args:m.args||t.args,prio:m.prio!==void 0?m.prio:t.prio!==void 0?t.prio:0,once:m.once!==void 0?m.once:t.once!==void 0?t.once:!1,buffer:m.buffer||t.buffer,throttle:m.throttle||t.throttle,catchAll:d==="catchAll"};if(f){let{product:w,invalidAsOfVersion:T,message:R}=f;z.deprecate(w,T,R)}if(p){let w=s.isDelayable?s:x.global,{alt:T}=p,R=T?p.delay:p;w.setTimeout(()=>{s.un(u,y),T&&!y.called&&s.callback(T,r)},R)}let C=h[u]||(h[u]=[]);C.$firing&&(h[u]=C=C.slice()),C.splice(U.findInsertionIndex(y,C,Mn,C.length),0,y),!s.onListen.$nullFn&&C.length<2&&s.onListen(u)}t.relayAll&&s.relayAll(t.relayAll),r&&r!==s&&s.attachAutoDetacher(t,r);let o=t.detachable!==!1,l=t.name,c=t.expires||o||l?()=>{s.isDestroyed||s.removeListener(t,r)}:null;if(c&&(c.eventer=s,c.listenerName=l,l&&r?.trackDetacher&&r.trackDetacher(l,c),t.expires&&s.delay(c,t.expires),o))return c}}on(...t){return this.addListener(...t)}un(...t){this.removeListener(...t)}get listeners(){return this.eventListeners}changeListeners(t){if(this.isConfiguring)t&&this.on(t,this);else{if(Array.isArray(t))for(let r=0,i=t[0],{length:s}=t;r<s;i=t[++r])"thisObj"in i||(t[r]=I.assign({thisObj:this},i));else t&&!("thisObj"in t)&&(t=I.assign({thisObj:this},t));return t}}updateListeners(t,r){r&&this.un(r),t&&this.on(t)}removeListener(t,r=t.thisObj,i){let s=this;if(typeof t=="string")return s.removeListener({[t]:r},i);Object.entries(t).forEach(([n,o])=>{if(!Rn[n]&&o!=null){n=n.toLowerCase();let l=s.eventListeners,c=s.findListener(n,o,r);if(c>=0){let d=l[n];d.length>1?(d.$firing&&(l[n]=d=d.slice()),d.splice(c,1)):(delete l[n],s.onUnlisten.$nullFn||s.onUnlisten(n))}}}),t.thisObj&&!t.thisObj.isDestroyed&&s.detachAutoDetacher(t)}findListener(t,r,i){let s=this.eventListeners?.[t],n=r.fn||r,o=r.thisObj||i;if(s){for(let l,c=0,{length:d}=s;c<d;c++)if(l=s[c],l.fn===n&&l.thisObj===o)return c}return-1}hasListener(t){return Boolean(this.eventListeners?.[t?.toLowerCase()])}relayAll(t,r,i=!0){this.relayAllTargets||(this.relayAllTargets=[]);let s=this.relayAllTargets;t.on("beforeDestroy",({source:n})=>{n===t&&s.filter(l=>l.through===t).forEach(l=>U.remove(s,l))}),s.push({through:t,prefix:r,transformCase:i})}removeAllListeners(){let t=this.eventListeners,r,i;for(let s in t){let n=t[s];for(r=n.length;r-- >0;){let o=n[r];this.removeListener(s,o),i=o.thisObj,i?.untrackDetachers&&i.untrackDetachers(this)}}}relayEvents(t,r,i=""){let s={detachable:!0};return r.forEach(n=>{s[n]=(o,...l)=>this.trigger(i+n,o,...l)}),t.on(s)}onListen(){}onUnlisten(){}destructorInterceptor(){let{autoDetachers:t,target:r,oldDestructor:i}=this;for(let s=0;s<t.length;s++){let{dispatcher:n,config:o}=t[s];n.isDestroyed||n.removeListener(o,r)}i.call(r)}attachAutoDetacher(t,r){let i=t.thisObj||r,s="doDestroy"in i?"doDestroy":"destroy";if(s in i){let{$autoDetachers:n}=i;n||(i.$autoDetachers=n=[]),i.$oldDestructor||(i.$oldDestructor=i[s],i[s]=this.destructorInterceptor.bind({autoDetachers:n,oldDestructor:i.$oldDestructor,target:i})),n.push({config:t,dispatcher:this})}else i[s]=()=>{this.removeListener(t)}}detachAutoDetacher(t){let r=t.thisObj;r.$oldDestructor&&!r.isDestroying&&(U.remove(r.$autoDetachers,r.$autoDetachers.find(i=>i.config===t&&i.dispatcher===this)),r.$autoDetachers.length||(r["doDestroy"in r?"doDestroy":"destroy"]=r.$oldDestructor,r.$oldDestructor=null))}await(t,r={checkLog:!0,resetLog:!0,args:null}){let i=this;r===!1&&(r={checkLog:!1});let{args:s}=r;return new Promise(n=>{if(r.checkLog&&i._triggered?.[t]&&(n(),r.resetLog&&i.clearLog(t)),s){let o=i.on({[t]:(...l)=>{Object.keys(s).every(d=>d in l[0]&&l[0][d]===s[d])&&(n(...l),r.resetLog&&i.clearLog(t),o())},prio:-1e4})}else i.on({[t]:(...o)=>{n(...o),r.resetLog&&i.clearLog(t)},prio:-1e4,once:!0})})}clearLog(t){this._triggered&&(t?delete this._triggered[t]:this._triggered={})}trigger(t,r){let i=this,s=t.toLowerCase(),{eventsSuspended:n,relayAllTargets:o,callOnFunctions:l}=i,c=i.eventListeners?.[s],d;if(i._triggered||(i._triggered={}),i._triggered[t]=!0,n)return n.shouldQueue&&n.queue.push(arguments),!0;if(i.eventListeners?.catchall&&((c=c?c.slice():[]).push(...i.eventListeners.catchall),c.sort(Mn)),!c&&!o&&!l)return!0;if(r?"source"in r||(Object.isExtensible(r)?r.source=i:r=Object.setPrototypeOf({source:i},r)):r={source:i},r.type!==s&&(r.constructor!==Object?Reflect.defineProperty(r,"type",{get:()=>s}):r.type=s),!("bubbles"in r)&&i.bubbleEvents?.[t]&&(r.bubbles=i.bubbleEvents[t]),l){let u="on"+M.capitalize(t);if(u in i){let f=i.callback(i[u],i,[r])===!1;if(!i.isDestroyed&&Ka.call(i,u)&&!i.pluginFunctionChain?.[u]){let h=Object.getPrototypeOf(i);if(u in h&&(f=h[u].call(i,r)===!1||f,i.isDestroyed))return}if(f)return!1}}if(c){let u=0,f;for(c.$firing=!0,u;u<c.length&&!i.isDestroyed&&f!==!1;u++){let h=c[u],m,p=h.thisObj;if(!p||!p.isDestroyed){if(h.called=!0,h.once&&i.removeListener(s,h),typeof h.fn=="string"){if(p&&(m=p[h.fn]),!m){let y=i.resolveCallback(h.fn);m=y.handler,p=y.thisObj}}else m=h.fn;if(h.buffer){if(!h.bufferFn){let y=Number(h.buffer);if(typeof y!="number"||isNaN(y))throw new Error(`Incorrect type for buffer, got "${y}" (expected a Number)`);h.bufferFn=W.createBuffered(m,y,h.thisObj,h.args)}m=h.bufferFn}if(h.throttle){let y=Number(h.throttle);if(typeof y!="number"||isNaN(y))throw new Error(`Incorrect type for throttle, got "${y}" (expected a Number)`);h.throttledFn||(h.throttledFn=W.createThrottled(m,y,h.thisObj,h.args)),m=h.throttledFn}f=m.call(p||i,...h.args||[],r),I.isPromise(f)&&(d||(d=[])).push(f)}}if(c.$firing=!1,f===!1)return f}return o&&o.forEach(u=>{let f=t;if(u.transformCase&&(f=M.capitalize(f)),u.prefix&&(f=u.prefix+f),u.through.trigger(f,r)===!1)return!1}),r.bubbles&&i.owner&&!i.owner.isDestroyed?i.owner.trigger(t,r):d?.length?new Promise(u=>{Promise.all(d).then(f=>{let h=!f.some(m=>m===!1);u(h)})}):!0}suspendEvents(t=!1){let r=this.eventsSuspended||(this.eventsSuspended={shouldQueue:t,queue:[],count:0});r.count++}resumeEvents(){let t=this.eventsSuspended;if(t&&--t.count==0&&(this.eventsSuspended=null,t.shouldQueue))for(let r of t.queue)this.trigger(...r);return!Boolean(this.eventsSuspended)}};var Je=class{static mergeLocales(...e){let t={};return e.forEach(r=>{Object.keys(r).forEach(i=>{typeof r[i]=="object"?t[i]={...t[i],...r[i]}:t[i]=r[i]})}),t}static trimLocale(e,t){let r=(i,s)=>{e[i]&&(s?e[i][s]&&delete e[i][s]:delete e[i])};Object.keys(t).forEach(i=>{Object.keys(t[i]).length>0?Object.keys(t[i]).forEach(s=>r(i,s)):r(i)})}static publishLocale(e,t){let r=window.bryntum=window.bryntum||{},i=r.locales=r.locales||{};i[e]=i[e]?this.mergeLocales(i[e],t):t}};var Fn=class extends re(S){static get defaultConfig(){return{locales:{},throwOnMissingLocale:z.isTestEnv}}construct(...e){let t=this;if(super.construct(...e),x.isBrowserEnv){let r=document.querySelector("script[data-default-locale]"),{locales:i}=window.bryntum||{};r&&(t.defaultLocaleName=r.dataset.defaultLocale),i&&(Object.keys(i).forEach(s=>{if(!s.startsWith("moment")){let n=i[s];n.extends?t.extendLocale(n.extends,n):n.localeName&&t.registerLocale(n.localeName,{desc:n.localeDesc,locale:n})}}),t.locale||t.defaultLocaleName!=="En"&&t.applyLocale(t.defaultLocaleName||Object.keys(t.locales)[0]))}}set locales(e){this._locales=e}get locales(){return this._locales}set locale(e){typeof e=="string"?this.applyLocale(e):(e.locale||(e={locale:e,localeName:e.localeName||"custom"}),this.registerLocale(e.localeName,e),this.applyLocale(e.localeName))}get locale(){return this._locale}registerLocale(e,t){let r=this,i=r.defaultLocaleName===e,s=r.locale?.localeName===e,n=Object.keys(r.locales).length===0,o=r.locales[e];o?(t.exclude&&(o.exclude=Je.mergeLocales(o.exclude||{},t.exclude)),o.locale=Je.mergeLocales(o.locale,t.locale)):(r.locales[e]=t,o=r.locales[e]),o.exclude&&Je.trimLocale(o.locale,o.exclude),(i||!r.defaultLocaleName&&(n||s))&&r.internalApplyLocale(o)}extendLocale(e,t){let r=this.locales[e];return r?(r.locale=Je.mergeLocales(r.locale,t),delete r.locale.extends,this.locale?.localeName===e&&this.applyLocale(e),!0):!1}internalApplyLocale(e){this._locale=e.locale,this.trigger("locale",e)}applyLocale(e,t=!1,r=!1){let i=this,s=i.locales[e];if(s?.locale&&i._locale===s.locale&&!t)return!0;if(!s){if(r)return!0;throw new Error(`Locale ${e} not registered`)}function n(){i.internalApplyLocale(s)}return s.locale?(n(),!0):new Promise((o,l)=>{i.loadLocale(s.path).then(c=>{c.text().then(d=>{new Function(d)(),x.isBrowserEnv&&(s.locale=window.bryntum.locales[e]),n(),o(s)})}).catch(c=>l(c))})}loadLocale(e){return ue.get(e)}set throwOnMissingLocale(e){this._throwOnMissingLocale=e}get throwOnMissingLocale(){return this._throwOnMissingLocale}},Ya=new Fn,X=Ya;var Xa=Object.getPrototypeOf(Object),kn=/L{.*?}/g,Ja=a=>a.replace(/{(\d+)}/gm,"[[$1]]"),On=a=>a.replace(/\[\[(\d+)]]/gm,"{$1}"),_e=a=>class Ue extends(a||S){static get $name(){return"Localizable"}static get configurable(){return{localeClass:null,localizableProperties:{value:[],$config:{merge:"distinct"}}}}static clsName(t){return typeof t=="string"?t:t===Xa?"Object":t.$$name||t.name||t.prototype?.$$name||t.prototype?.name}static parseLocaleString(t){let r=[],i;if(t?.includes("L{")){let s=/L{(.*?)}/g;for(t=Ja(t);(i=s.exec(t))!=null;){let n=/((.*?)\.)?(.+)/g.exec(i[1]);r.push({match:On(i[0]),localeKey:On(n[3]),localeClass:n[2]})}}return r.length>0?r:[{match:t,localeKey:t,localeClass:void 0}]}construct(t={},...r){super.construct(t,...r),X.on("locale",this.updateLocalization,this),this.updateLocalization()}get localeClass(){return this._localeClass||null}localizeProperty(t){let r=this,i=I.getPath(r,t),s=r.$meta.configs[t]?.localeKey;if(s){let n=Ue.localize(s,null,r.localeClass||r);n&&!(t in r.initialConfig)&&I.setPath(r,t,n)}else if(typeof i=="string"){r.originalLocales=r.originalLocales||{};let n=I.getPath(r.originalLocales,t);n===void 0&&(I.setPath(r.originalLocales,t,i),n=i),n&&I.setPath(r,t,r.optionalL(n))}}updateLocalization(){this.localizableProperties?.forEach(this.localizeProperty,this)}static getTranslation(t,r,i){let{locale:s}=X,n=null,o,l;if(s)for(let{match:c,localeKey:d,localeClass:u}of this.parseLocaleString(t)){let f=m=>{let p=s[m]?.[d];return p&&(typeof p=="function"?n=r!=null?p(r):p:typeof p=="object"||t===c?n=p:n=(n||t).replace(c,p),typeof p=="string"&&p.includes("L{")&&(n=this.getTranslation(p,r,i))),p},h=!1;for(l=i;l&&(o=Ue.clsName(l))&&!(h=f(o));l=Object.getPrototypeOf(l))if(typeof l=="string")break;!h&&u&&f(u)}return n}static localize(t,r=void 0,...i){i?.length===0&&(i=[this]);let s=null;return i.some(n=>(s=Ue.getTranslation(t,r,n),s!=null)),s}static L(t,r=void 0,...i){i?.length===0&&(i=[this]);let s=this.localize(t,r,...i);if(s==null&&X.throwOnMissingLocale&&X.locale&&t.includes("L{"))throw new Error(`Localization is not found for '${t}' in '${i.map(n=>Ue.clsName(n)).join(", ")}'. ${X.locale.localeName?`Locale : ${X.locale.localeName}`:""}`);return s??t}L(t,r){let{localeClass:i,constructor:s}=this;return i&&Ue.clsName(i)!==Ue.clsName(s)?Ue.L(t,r,i,s):Ue.L(t,r,s)}static optionalL(t,r=void 0,...i){let s=X.throwOnMissingLocale;X.throwOnMissingLocale=s&&kn.test(t),i?.length===0&&(i=[this]);let n=Ue.L(t,r,...i);return X.throwOnMissingLocale=s,n}optionalL(t,r){let i=X.throwOnMissingLocale;X.throwOnMissingLocale=i&&kn.test(t);let s=this.L(t,r);return X.throwOnMissingLocale=i,s}get localeManager(){return X}};var{toString:Ln}=Object.prototype,Qa=Ln.call(new Date),Za=new RegExp("\u200E","g"),Ar=new Date,In=1e3*60*60,Vi=(a,e)=>isNaN(a)||a==null?e:a,jn=a=>{let e=["11","12","13"].find(r=>a.endsWith(r)),t="th";if(!e){let r=a[a.length-1];t={1:"st",2:"nd",3:"rd"}[r]||"th"}return a+t},De=(a,e,t)=>{let i=($r[a]||($r[a]=new Intl.DateTimeFormat(Ct,e))).format(t);return x.isIE11&&(i=i.replace(Za,"")),i},Zt=(a,e,t,r=!1)=>{let i=De(a,e,t);return/am|pm/i.test(i)&&(i=i.replace(/^0/,""),r&&(i=i.replace(/:00/,""))),i},ec=(a,e)=>Math.floor((a.getTime()-e.getTime()-(a.getTimezoneOffset()-e.getTimezoneOffset())*Le.minute.millisecond)/Le.day.millisecond)+1,Hn=a=>a>=0?a:a+7,Ct="en-US",Qe=jn,Pr={},$r={},zi={},An=2020,Pn=0,$n=1,Fe={M:a=>a.getMonth()+1,Mo:a=>Qe(Fe.M(a).toString()),MM:a=>(a.getMonth()+1).toString().padStart(2,"0"),MMM:a=>De("MMM",{month:"short"},a),MMMM:a=>De("MMMM",{month:"long"},a),Q:a=>Math.ceil((a.getMonth()+1)/3),Qo:a=>Qe(Fe.Q(a).toString()),D:a=>a.getDate(),Do:a=>Qe(Fe.D(a).toString()),DD:a=>a.getDate().toString().padStart(2,"0"),DDD:a=>Math.ceil((new Date(a.getFullYear(),a.getMonth(),a.getDate(),12,0,0)-new Date(a.getFullYear(),0,0,12,0,0))/Le.day.millisecond),DDDo:a=>Qe(Fe.DDD(a).toString()),DDDD:a=>Fe.DDD(a).toString().padStart(3,"0"),d:a=>a.getDay(),do:a=>Qe(a.getDay().toString()),d1:a=>De("d1",{weekday:"narrow"},a).substr(0,1),dd:a=>Fe.ddd(a).substring(0,2),ddd:a=>De("ddd",{weekday:"short"},a),dddd:a=>De("dddd",{weekday:"long"},a),e:a=>a.getDay(),E:a=>a.getDay()+1,W:a=>D.getWeekNumber(a)[1],Wo:a=>Qe(Fe.W(a).toString()),WW:a=>Fe.W(a).toString().padStart(2,"0"),Y:a=>a.getFullYear(),YY:a=>a.getFullYear()%100,YYYY:a=>a.getFullYear(),A:a=>a.getHours()<12?"AM":"PM",a:a=>a.getHours()<12?"am":"pm",H:a=>a.getHours(),HH:a=>a.getHours().toString().padStart(2,"0"),h:a=>a.getHours()%12||12,hh:a=>Fe.h(a).toString().padStart(2,"0"),k:a=>a.getHours()||24,kk:a=>Fe.k(a).toString().padStart(2,"0"),K:a=>Zt("K",{hour:"numeric"},a),KK:a=>Zt("KK",{hour:"2-digit"},a),m:a=>a.getMinutes(),mm:a=>Fe.m(a).toString().padStart(2,"0"),s:a=>a.getSeconds(),ss:a=>Fe.s(a).toString().padStart(2,"0"),S:a=>Math.floor(a.getMilliseconds()/100).toString(),SS:a=>Math.floor(a.getMilliseconds()/10).toString().padStart(2,"0"),SSS:a=>a.getMilliseconds().toString().padStart(3,"0"),z:a=>De("z",{timeZoneName:"short"},a),zz:a=>De("zz",{timeZoneName:"long"},a),Z:a=>v.getGMTOffset(a),LT:a=>Zt("LT",{hour:"2-digit",minute:"2-digit"},a),LST:a=>Zt("LST",{hour:"numeric",minute:"2-digit"},a,!0),LTS:a=>Zt("LTS",{hour:"2-digit",minute:"2-digit",second:"2-digit"},a),L:a=>De("L",{year:"numeric",month:"2-digit",day:"2-digit"},a),l:a=>De("l",{year:"numeric",month:"numeric",day:"numeric"},a),LL:a=>De("LL",{year:"numeric",month:"long",day:"numeric"},a),ll:a=>De("ll",{year:"numeric",month:"short",day:"numeric"},a),LLL:a=>De("LLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"},a),lll:a=>De("lll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"},a),LLLL:a=>De("LLLL",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"long"},a),llll:a=>De("llll",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",weekday:"short"},a)},tc=Object.keys(Fe).sort((a,e)=>e.length-a.length),rc=`^(?:${tc.join("|")})`,Ce=()=>({}),ic=a=>fc.test(a),Wi=a=>ic(a)&&{milliseconds:parseInt(a.padEnd(3,"0").substring(0,3))},Gi={YYYY:a=>({year:parseInt(a)}),Y:a=>({year:parseInt(a)}),YY:a=>{let e=parseInt(a);return{year:e+(e>1968?1900:2e3)}},MM:a=>({month:parseInt(a)-1}),Mo:a=>({month:parseInt(a)-1}),DD:a=>({date:parseInt(a)}),M:a=>({month:parseInt(a)-1}),D:a=>({date:parseInt(a)}),Do:a=>({date:parseInt(a)}),DDD:Ce,MMM:Ce,MMMM:Ce,DDDo:Ce,DDDD:Ce,d:Ce,do:Ce,d1:Ce,dd:Ce,ddd:Ce,dddd:Ce,Q:Ce,Qo:Ce,W:Ce,Wo:Ce,WW:Ce,e:Ce,E:Ce,HH:a=>({hours:parseInt(a)}),hh:a=>({hours:parseInt(a)}),mm:a=>({minutes:parseInt(a)}),H:a=>({hours:parseInt(a)}),m:a=>({minutes:parseInt(a)}),ss:a=>({seconds:parseInt(a)}),s:a=>({seconds:parseInt(a)}),S:Wi,SS:Wi,SSS:Wi,A:a=>({amPm:a.toLowerCase()}),a:a=>({amPm:a.toLowerCase()}),L:"MM/DD/YYYY",LT:"HH:mm A",Z:a=>{if(!a||!Bn.test(a)&&a!=="Z")return null;let e=0;if(a!=="Z"){let t=Bn.exec(a);if(t){let r=t[1]==="+"?1:-1,i=parseInt(t[2])||0,s=parseInt(t[3])||0;e=r*(i*60+s)}else e=-1*new Date().getTimezoneOffset()}return{timeZone:e}}},sc=Object.keys(Gi).sort((a,e)=>e.length-a.length),Nn=new RegExp(`(${sc.join("|")})`),nc=new RegExp("(l|LL|ll|LLL|lll|LLLL|llll)"),Le={decade:{decade:1,year:10,quarter:40,month:120,week:520,day:3652,hour:24*3652,minute:1440*3652,second:86400*3652,millisecond:864e5*3652},year:{decade:.1,year:1,quarter:4,month:12,week:52,day:365,hour:24*365,minute:1440*365,second:86400*365,millisecond:864e5*365},quarter:{decade:1/40,year:1/4,quarter:1,month:3,week:4,day:91,hour:24*91,minute:1440*91,second:86400*91,millisecond:864e5*91},month:{decade:1/120,year:1/12,quarter:1/3,month:1,week:4,day:-30,hour:-24*30,minute:-1440*30,second:-86400*30,millisecond:-864e5*30},week:{decade:-1/520,year:-1/52,quarter:-1/13,month:-1/4,day:7,hour:168,minute:10080,second:604800,millisecond:6048e5},day:{decade:-1/3652,year:-1/365,quarter:-1/91,month:-1/30,week:1/7,hour:24,minute:1440,second:86400,millisecond:864e5},hour:{decade:-1/(3652*24),year:-1/(365*24),quarter:-1/(91*24),month:-1/(30*24),week:1/168,day:1/24,minute:60,second:3600,millisecond:36e5},minute:{decade:-1/(3652*1440),year:-1/(365*1440),quarter:-1/(91*1440),month:-1/(30*1440),week:1/10080,day:1/1440,hour:1/60,second:60,millisecond:6e4},second:{decade:-1/(3652*86400),year:-1/(365*86400),quarter:-1/(91*86400),month:-1/(30*86400),week:1/604800,day:1/86400,hour:1/3600,minute:1/60,millisecond:1e3},millisecond:{decade:-1/(3652*864e5),year:-1/(365*864e5),quarter:-1/(91*864e5),month:-1/(30*864e5),week:1/6048e5,day:1/864e5,hour:1/36e5,minute:1/6e4,second:1/1e3}},_n={ms:"millisecond",milliseconds:"millisecond",s:"second",seconds:"second",m:"minute",mi:"minute",min:"minute",minutes:"minute",h:"hour",hours:"hour",d:"day",days:"day",w:"week",weeks:"week",M:"month",mo:"month",mon:"month",months:"month",q:"quarter",quarters:"quarter",y:"year",years:"year",dec:"decade",decades:"decade"},oc=/^\s*([-+]?\d+(?:[.,]\d*)?|[-+]?(?:[.,]\d+))\s*([^\s]+)?/i,lc=/^\s*([-+]?\d+)(?![.,])\s*([^\s]+)?/i,Lt=["millisecond","second","minute","hour","day","week","month","quarter","year","decade"],ac=[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"],["dec"]],cc=["decade","year","month","week","day","hour","minute","second","millisecond"],dc=["milliseconds","seconds","minutes","hours","date","month","year"],uc=a=>{let e=parseFloat(a);return isNaN(e)?null:e},fc=/^[0-9]+$/,Bn=/([+-])(\d\d):*(\d\d)*$/,ct={millisecond:0,second:1,minute:2,hour:3,day:4,week:5,month:6,quarter:7,year:8,decade:9},hc={round(a,e=1){return Math.round(a/e)*e},floor(a,e=1){return Math.floor(a/e)*e},ceil(a,e=1){return Math.ceil(a/e)*e}},Vn={};var D=class extends _e(){static get $name(){return"DateHelper"}static set defaultFormat(e){v._defaultFormat=e}static get defaultFormat(){return v._defaultFormat||"YYYY-MM-DDTHH:mm:ssZ"}static set defaultParseFormat(e){this._defaultParseFormat=e}static get defaultParseFormat(){return this._defaultParseFormat||this._defaultFormat||"YYYY-MM-DDTHH:mm:ss.SSSZ"}static buildParser(e){let t=e.split(Nn),r=[];return t.length===1||nc.test(e)?[]:(t.reduce((i,s,n,o)=>{if(n!==0||s!=="")if(Nn.test(s)){let l=this.localize("L{parsers}")||{},c=l[s]||Gi[s];if(s==="Z"&&n<o.length-2)throw new Error(`Invalid format ${e} TimeZone (Z) must be last token`);if(typeof c=="string"){let d=v.buildParser(c),u=d.pop();delete u.last,r.push(...d),i=u}else i.pattern=s,i.fn=Gi[s]}else i.splitter=s,r.push(i),i={};else Object.prototype.hasOwnProperty.call(i,"pattern")&&r.push(i);return i},{}),r[r.length-1].last=!0,r)}static makeKey(e){e.getTime&&(e=e.getTime());let t=Vn[Math.trunc(e/In)];if(t)return t;Ar.setTime(e);let r=Ar.getMonth()+1,i=Ar.getDate();return Vn[Math.trunc(e/In)]=`${Ar.getFullYear()}-${r<10?"0"+r:r}-${i<10?"0"+i:i}`}static parseKey(e){return v.parse(e,"YYYY-MM-DD")}static parse(e,t=v.defaultParseFormat){if(e instanceof Date)return e;if(typeof e!="string"||!e)return null;let r={year:null,month:null,date:null,hours:null,minutes:null,seconds:null,milliseconds:null};t=t.replace(/S+/gm,"SSS");let i=zi[t],s;i||(i=zi[t]=v.buildParser(t)),i.reduce((o,l)=>{if(l.last)Object.assign(r,l.fn(o));else{let c;l.splitter==="T"&&o.indexOf("T")===-1?c=o.indexOf(" "):c=l.splitter!==""?o.indexOf(l.splitter):l.pattern&&l.pattern.length||-1;let d,u;if(c===-1||l.pattern==="SSS"&&o.match(/^\d+Z$/)){let f=o.split(/([Z\-+])/);f.length===1?(d=o,u=""):(d=f[0],u=`${f[1]}${f[2]}`)}else d=o.substring(0,c)||o,u=o.substring(c+l.splitter.length);if(l.fn){let f=l.fn(d);f?Object.assign(r,f):u=d+u}return u}},e),r.year&&!r.date&&(r.date=1);let n=v.create(r);return n?s=n:s=new Date(e),s}static create(e){let t={...e},r=isNaN(t.year),i=!1;if(!r){let n=!0;dc.forEach(o=>{(!(o in t)||isNaN(t[o]))&&(t[o]=0),n=n&&t[o]===null}),r=n}if(t.amPm==="pm"&&(t.hours=t.hours%12+12),"timeZone"in t&&(i=!0,t.minutes-=t.timeZone),r)return null;let s=[Vi(t.year,An),Vi(t.month,Pn),Vi(t.date,$n),t.hours,t.minutes,t.seconds,t.milliseconds];return i?new Date(Date.UTC(...s)):new Date(...s)}static toUTC(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()))}static format(e,t=v.defaultFormat){if(!e||isNaN(e))return null;let r=Pr[t],i="";if(!r){r=Pr[t]=[];for(let s=0;s<t.length;s++){let n=t.substr(s).match(rc),o=n?.[0];if(o){let l=this.localize("L{formats}")||{},c=l[o]||Fe[o];r.push(c),s+=o.length-1}else if(t[s]==="{"){let l=t.indexOf("}",s+1);l===-1?(r.push(t.substr(s+1)),s=t.length):(r.push(t.substring(s+1,l)),s=l)}else r.push(t[s])}}return r.forEach(s=>{typeof s=="string"?i+=s:i+=s(e)}),(x.isEdge||x.isIE11)&&(i=i.replace(/\u200E/g,"")),i}static asMilliseconds(e,t=null){return typeof e=="string"&&(t=e,e=1),v.as("millisecond",e,t)}static asMonths(e){let t=v.as("ms",v.daysInMonth(e),"day"),r=(e.valueOf()-v.startOf(e,"month").valueOf())/t;return e.getYear()*12+e.getMonth()+r}static monthsToDate(e){let t=Math.floor(e),r=e-t,i=new Date(0,t),s=v.as("ms",v.daysInMonth(i),"days");return i.setTime(i.getTime()+r*s),i}static formatDelta(e,t){let r,i;typeof t=="boolean"?r=t:t&&(r=t.abbrev);let s=this.getDelta(e,t),n=[],o=t?.separator||(r?"":" ");for(i in s)n.push(`${s[i]}${o}${i}`);return t?.asString===!1?n:n.join(", ")}static getDelta(e,t){let r,i,s,n,o;typeof t=="boolean"?r=t:t&&(r=t.abbrev,n=v.normalizeUnit(t.precision));let l={},c=r?v.getShortNameOfUnit:v.getLocalizedNameOfUnit;for(o of cc)if(i=v.as(o,e),s=n===o,i=Math[s?"round":"floor"](i),(i||s&&!l.length)&&(l[c.call(v,o,i!==1)]=i,e-=v.as("ms",i,o)),s||!e)break;return l}static as(e,t,r="ms"){return typeof t=="string"&&(t=v.parseDuration(t)),typeof t=="object"&&(r=t.unit,t=t.magnitude),e===r||(e=v.normalizeUnit(e),r=v.normalizeUnit(r),e===r)?t:ct[r]>ct[e]?t*Math.abs(Le[r][e]):t/Math.abs(Le[e][r])}static formatContainsHourInfo(e){let t=/(\\.)/g;return/([HhKkmSsAa]|LT|L{3,}|l{3,})/.test(e.replace(t,""))}static is24HourFormat(e){return v.format(v.getTime(13,0,0),e).includes("13")}static add(e,t,r="ms",i=!0){let s;if(typeof e=="string"?s=v.parse(e):i?s=new Date(e.getTime()):s=e,!r||t===0)return s;switch(r=v.normalizeUnit(r),r){case"millisecond":s.setTime(s.getTime()+t);break;case"second":s.setTime(s.getTime()+t*1e3);break;case"minute":s.setTime(s.getTime()+t*6e4);break;case"hour":s.setTime(s.getTime()+t*36e5);break;case"day":t%1==0?s.setDate(s.getDate()+t):s.setTime(s.getTime()+t*864e5),s.getHours()===23&&e.getHours()===0&&s.setHours(s.getHours()+1);break;case"week":s.setDate(s.getDate()+t*7);break;case"month":{let n=s.getDate();n>28&&(n=Math.min(n,v.getLastDateOfMonth(v.add(v.getFirstDateOfMonth(s),t,"month")).getDate())),s.setDate(n),s.setMonth(s.getMonth()+t);break}case"quarter":v.add(s,t*3,"month",!1);break;case"year":s.setFullYear(s.getFullYear()+t);break;case"decade":s.setFullYear(s.getFullYear()+t*10);break}return s}static diff(e,t,r="ms",i=!0){if(r=v.normalizeUnit(r),!e||!t)return 0;let s;switch(r){case"year":s=v.diff(e,t,"month")/12;break;case"quarter":s=v.diff(e,t,"month")/3;break;case"month":s=(t.getFullYear()-e.getFullYear())*12+(t.getMonth()-e.getMonth());break;case"week":s=v.diff(e,t,"day")/7;break;case"day":{let n=e.getTimezoneOffset()-t.getTimezoneOffset();s=(t-e+n*60*1e3)/864e5;break}case"hour":s=(t-e)/36e5;break;case"minute":s=(t-e)/6e4;break;case"second":s=(t-e)/1e3;break;case"millisecond":s=t-e;break}return i?s:Math.round(s)}static startOf(e,t="day",r=!0,i=v.weekStartDay){if(!e)return null;switch(t=v.normalizeUnit(t),r&&(e=v.clone(e)),t){case"year":return e.setMonth(0,1),e.setHours(0,0,0,0),e;case"quarter":return e.setMonth((v.get(e,"quarter")-1)*3,1),e.setHours(0,0,0,0),e;case"month":return e.setDate(1),e.setHours(0,0,0,0),e;case"week":{let s=e.getDay()-i;return e.setDate(e.getDate()-s),e.setHours(0,0,0,0),e}case"day":return e.setHours(0,0,0,0),e;case"hour":e.getMinutes()>0&&e.setMinutes(0);case"minute":e.getSeconds()>0&&e.setSeconds(0);case"second":e.getMilliseconds()>0&&e.setMilliseconds(0);case"millisecond":return e}}static endOf(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}static clone(e){return new Date(e.getTime())}static clearTime(e,t=!0){return e?(t&&(e=new Date(e.getTime())),e.setHours(0,0,0,0),e):null}static midnight(e,t){let r=v.clearTime(e);return t&&r<e&&(r=v.add(r,1,"d")),r}static getTimeOfDay(e,t="ms"){let r=e.getHours()*Le.hour.millisecond+e.getMinutes()*Le.minute.millisecond+e.getSeconds()*Le.second.millisecond+e.getMilliseconds();return t==="ms"?r:v.as(t,r,"ms")}static set(e,t,r){if(!t)return e;if(typeof t=="string")switch(v.normalizeUnit(t)){case"millisecond":(r!==0||e.getMilliseconds()>0)&&e.setMilliseconds(r);break;case"second":(r!==0||e.getSeconds()>0)&&e.setSeconds(r);break;case"minute":(r!==0||e.getMinutes()>0)&&e.setMinutes(r);break;case"hour":e.setHours(r);break;case"day":case"date":e.setDate(r);break;case"week":throw new Error("week not implemented");case"month":e.setMonth(r);break;case"quarter":e.setDate(1),e.setMonth((r-1)*3);break;case"year":e.setFullYear(r);break}else Object.entries(t).sort((i,s)=>ct[i[0]]-ct[s[0]]).forEach(([i,s])=>{v.set(e,i,s)});return e}static setDateToMidday(e,t=!0){return v.set(v.clearTime(e,t),"hour",12)}static constrain(e,t,r){return t!=null&&(e=v.max(e,t)),r==null?e:v.min(e,r)}static getTime(e,t=0,r=0,i=0){return e instanceof Date&&(i=e.getMilliseconds(),r=e.getSeconds(),t=e.getMinutes(),e=e.getHours()),new Date(An,Pn,$n,e,t,r,i)}static copyTimeValues(e,t){return e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds()),e.setMilliseconds(t.getMilliseconds()),e}static isDST(e){let t=e.getFullYear(),r=new Date(t,0,1),i=new Date(t,6,1);return e.getTimezoneOffset()<Math.max(r.getTimezoneOffset(),i.getTimezoneOffset())}static isBefore(e,t){return e<t}static isAfter(e,t){return e>t}static isEqual(e,t,r=null){return r===null?e&&t&&e.getTime()===t.getTime():v.startOf(e,r)-v.startOf(t,r)==0}static compare(e,t,r=null){return r&&(e=v.startOf(e,r),t=v.startOf(t,r)),e<t?-1:e>t?1:0}static isSameDate(e,t){return v.compare(e,t,"d")===0}static isStartOf(e,t){return v.isEqual(e,v.startOf(e,t))}static betweenLesser(e,t,r){return t.getTime()<=e.getTime()&&e.getTime()<r.getTime()}static betweenLesserEqual(e,t,r){return t.getTime()<=e.getTime()&&e.getTime()<=r.getTime()}static intersectSpans(e,t,r,i){return v.betweenLesser(e,r,i)||v.betweenLesser(r,e,t)}static compareUnits(e,t){return Math.sign(ct[e]-ct[t])}static timeSpanContains(e,t,r,i){return r-e>=0&&t-i>=0}static get weekStartDay(){return v._weekStartDay==null&&(v._weekStartDay=this.localize("L{weekStartDay}")||0),v._weekStartDay}static get nonWorkingDays(){return{...this.localize("L{nonWorkingDays}")}}static get nonWorkingDaysAsArray(){return Object.keys(this.nonWorkingDays).map(Number)}static get weekends(){return{...this.localize("L{weekends}")}}static get(e,t){switch(v.normalizeUnit(t)){case"millisecond":return e.getMilliseconds();case"second":return e.getSeconds();case"minute":return e.getMinutes();case"hour":return e.getHours();case"date":case"day":return e.getDate();case"week":return Fe.W(e);case"month":return e.getMonth();case"quarter":return Math.floor(e.getMonth()/3)+1;case"year":return e.getFullYear()}return null}static daysInYear(e){let t=e.getFullYear(),r=new Date(t+1,0,1)-new Date(t,0,1);return this.as("day",r)}static daysInMonth(e){let t=v.clone(e);return t.setDate(1),t.setMonth(e.getMonth()+1),t.setDate(0),t.getDate()}static hoursInDay(e){let t=e.getFullYear(),r=e.getMonth(),i=e.getDate(),s=new Date(t,r,i+1)-new Date(t,r,i);return this.as("hour",s)}static getNormalizedUnitDuration(e,t){let r;switch(t){case"month":r=v.asMilliseconds(v.daysInMonth(e),"day");break;case"year":r=v.asMilliseconds(v.daysInYear(e),"day");break;case"day":r=v.asMilliseconds(v.hoursInDay(e),"hour");break;default:r=v.asMilliseconds(t)}return r}static getFirstDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth(),1)}static getLastDateOfMonth(e){return new Date(e.getFullYear(),e.getMonth()+1,0)}static min(e,t){return e.getTime()<t.getTime()?e:t}static max(e,t){return e.getTime()>t.getTime()?e:t}static getNext(e,t,r=1,i=v.weekStartDay){if(t==="week"){let s=v.clone(e),n=s.getDay();return v.startOf(s,"day",!1),v.add(s,i-n+7*(r-(i<=n?0:1)),"day",!1),s.getDay()!==i&&v.add(s,1,"hour"),s}return v.startOf(v.add(e,r,t),t,!1)}static isValidDate(e){return v.isDate(e)&&!isNaN(e)}static isDate(e){return e&&Ln.call(e)===Qa}static getStartOfNextDay(e,t,r){let i=v.add(r?e:v.clearTime(e,t),1,"day");if(i.getDate()===e.getDate()){let s=v.add(v.clearTime(e,t),2,"day").getTimezoneOffset(),n=e.getTimezoneOffset();i=v.add(i,n-s,"minute")}return i}static getEndOfPreviousDay(e,t){let r=t?e:v.clearTime(e,!0);return r-e?r:v.add(r,-1,"day")}static getWeekDescription(e,t=e){let r=e.getMonth()===t.getMonth()?D.format(e,"MMMM"):`${D.format(e,"MMM")} - ${D.format(t,"MMM")}`,i=D.getWeekNumber(e);return`${i[1]}, ${r} ${i[0]}`}static getWeekNumber(e,t=D.weekStartDay){let r=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),11,31),s=Hn(r.getDay()-t),n=Hn(i.getDay()-t),o=ec(e,r),l;if(s<4?l=Math.floor((o+s-1)/7)+1:l=Math.floor((o+s-1)/7),l){let d=e.getFullYear();return l===53&&n<3&&(d++,l=1),[d,l]}let c=D.getWeekNumber(new Date(e.getFullYear()-1,11,31))[1];return[e.getFullYear()-1,c]}static formatCount(e,t){return t=v.normalizeUnit(t),e!==1&&(t+="s"),e+" "+t}static getUnitToBaseUnitRatio(e,t,r=!1){return e=v.normalizeUnit(e),t=v.normalizeUnit(t),e===t?1:Le[e]&&Le[e][t]&&(r||Le[e][t]>0)?1/v.as(t,1,e):Le[t]&&Le[t][e]&&(r||Le[t][e]>0)?v.as(e,1,t):-1}static getShortNameOfUnit(e){return e=v.parseTimeUnit(e),v.unitLookup[e].abbrev}static getLocalizedNameOfUnit(e,t=!1){let r=e.charAt(0)===e.charAt(0).toUpperCase();return e=v.normalizeUnit(e),e=v.parseTimeUnit(e),e=v.unitLookup[e][t?"plural":"single"],r&&(e=M.capitalize(e)),e}static normalizeUnit(e){if(!e)return null;let t=e.toLowerCase();return t==="date"||Lt.includes(t)?t:_n[e]||_n[t]}static getUnitByName(e){return v.normalizeUnit(e)||v.normalizeUnit(v.parseTimeUnit(e))}static getDurationInUnit(e,t,r,i){return v.diff(e,t,r,i)}static doesUnitsAlign(e,t){return!(e!==t&&t==="week")}static getSmallerUnit(e){return Lt[ct[v.normalizeUnit(e)]-1]||null}static getLargerUnit(e){return Lt[ct[v.normalizeUnit(e)]+1]||null}static round(e,t,r,i){return v.snap("round",e,t,r,i)}static floor(e,t,r,i){return v.snap("floor",e,t,r,i)}static ceil(e,t,r,i){return v.snap("ceil",e,t,r,i)}static snap(e,t,r,i,s=v.weekStartDay){let n=hc[e];if(typeof r=="string"&&(r=v.parseDuration(r)),I.isObject(r)){let o=r.magnitude||r.increment;switch(r.unit){case"week":{let l=t.getDay();return i=v.add(v.clearTime(t),l>=s?s-l:-(l-s+7),"day"),v[e](t,`${o*7} days`,i)}case"month":{t=v.asMonths(t);let l;return i?(i=v.asMonths(i),l=t+n(t-i,o)):l=n(t,o),v.monthsToDate(l)}case"quarter":return v[e](t,`${o*3} months`,i);case"year":return v[e](t,`${o*12} months`,i);case"decade":return v[e](t,`${o*10} years`,i)}r=v.as("ms",o,r.unit)}if(i){let o=v.as("ms",i.getTimezoneOffset()-t.getTimezoneOffset(),"ms");return new Date(i.valueOf()+n(v.diff(i,t,"ms")+o,r))}else{let o=t.getTimezoneOffset()*60*1e3;return new Date(n(t.valueOf()-o,r)+o)}}static parseDuration(e,t=!0,r){let i=t?oc:lc,s=i.exec(e);if(e==null||!s)return null;let n=uc(s[1]?.replace(",",".")),o=v.parseTimeUnit(s[2])||r;return o?{magnitude:n,unit:o}:null}static parseTimeUnit(e){let t=e==null?null:v.durationRegEx.exec(e.toLowerCase());if(!t)return null;for(let r=0;r<Lt.length;r++)if(t[r+1])return Lt[r]}static getGMTOffset(e=new Date){if(!e)return;let t=e.getTimezoneOffset();return t?(t>0?"-":"+")+Math.abs(Math.trunc(t/60)).toString().padStart(2,"0")+":"+Math.abs(t%60).toString().padStart(2,"0"):"Z"}static fillDayNames(){let e=new Date("2000-01-01T12:00:00"),t=v._dayNames||[],r=v._dayShortNames||[];t.length=0,r.length=0;for(let i=2;i<9;i++)e.setDate(i),t.push(v.format(e,"dddd")),r.push(v.format(e,"ddd"));v._dayNames=t,v._dayShortNames=r}static getDayNames(){return v._dayNames}static getDayName(e){return v._dayNames[e]}static getDayShortNames(){return v._dayShortNames}static getDayShortName(e){return v._dayShortNames[e]}static fillMonthNames(){let e=new Date("2000-01-15T12:00:00"),t=v._monthNames||[],r=v._monthShortNames||[];t.length=0,r.length=0;for(let i=0;i<12;i++)e.setMonth(i),t.push(v.format(e,"MMMM")),r.push(v.format(e,"MMM"));v._monthNames=t,v._monthShortNames=r}static getMonthShortNames(){return v._monthShortNames}static getMonthShortName(e){return v._monthShortNames[e]}static getMonthNames(){return v._monthNames}static getMonthName(e){return v._monthNames[e]}static set locale(e){Ct=e,$r={},Pr={}}static get locale(){return Ct}static setupDurationRegEx(e=[],t=[]){let r=this,i={},s="";for(let n=0;n<t.length;n++){let o=t[n],l=e[n];l.canonicalUnitName=Lt[n],i[l.single]=i[l.single.toUpperCase()]=i[l.canonicalUnitName]=i[l.canonicalUnitName.toUpperCase()]=l,s+=`${n?"|":""}(`;for(let c=0;c<o.length;c++)s+=`${o[c]}|`;if(Ct=r.localize("L{locale}")||"en-US",Ct!=="en-US"){let c=ac[n];for(let d=0;d<c.length;d++)s+=`${c[d]}|`}s+=`${l.single}|${l.plural}|${l.canonicalUnitName}|${l.canonicalUnitName}s)`}r.unitLookup=i,r.durationRegEx=new RegExp(`^(?:${s})$`)}static applyLocale(){let e=this,t=e.localize("L{unitAbbreviations}")||[],r=e.unitNames=e.localize("L{unitNames}");r!=="unitNames"&&(Ct=e.localize("L{locale}")||"en-US",Ct==="en-US"?Qe=jn:Qe=e.localize("L{ordinalSuffix}")||Qe,Pr={},zi={},$r={},v._weekStartDay=null,v.setupDurationRegEx(r,t),v.fillDayNames(),v.fillMonthNames())}},v=D;v.useIntlFormat=De;X.on({locale:"applyLocale",prio:1e3,thisObj:v});X.locale&&v.applyLocale();var{hasOwnProperty:Nr}=Object.prototype,er=a=>{let e=typeof a;if(e==="object"){if(a===null)return"null";if(Array.isArray(a))return"array";if(Object.prototype.toString.call(a)==="[object Date]")return"date";if(a.isBase)return"instance"}return e==="function"&&a.isBase?"class":e};var zn=1.005 .toFixed(2)==="1.01"?null:function(a,e){let t=a.toString().split("."),r=+(t[1]?t.join(".")+"1":t[0]);return a.toFixed.call(r,e)},b=class extends I{static transformArrayToNamedObject(e,t="ref"){let r={};return e.forEach((i,s)=>{let n=i[t]!=null&&i[t].toString().length?i[t]:s;r[n]=i}),r}static transformNamedObjectToArray(e,t="ref"){return Object.keys(e).filter(r=>e[r]).map(r=>{let i=e[r];return i[t]=r,i})}static isEqual(e,t,r=!1){if(e===null&&t!==null||e===void 0&&t!==void 0||t===null&&e!==null||t===void 0&&e!==void 0)return!1;if(e==null&&t==null||e===t)return!0;let i=typeof e;if(i===typeof t){switch(i){case"number":case"string":case"boolean":return e===t}switch(!0){case(e instanceof Date&&t instanceof Date):return e.getTime()===t.getTime();case(Array.isArray(e)&&Array.isArray(t)):return e.length===t.length?e.every((n,o)=>je.isEqual(n,t[o],r)):!1;case(i==="object"&&e.constructor.prototype===t.constructor.prototype):return r?je.isDeeplyEqual(e,t,r):JSON.stringify(e)===JSON.stringify(t)}}return String(e)===String(t)}static isDeeplyEqual(e,t,r={}){if(e===t)return!0;if(!e||!t)return!1;let i=je.keys(e,r.ignore),s=je.keys(t,r.ignore);if(i.length!==s.length)return!1;for(let n=0;n<i.length;n++){let o=i[n],l=s[n];if(o!==l)return!1;let c=e[o],d=t[l];if(!(r.shouldEvaluate&&r.shouldEvaluate(o,{value:c,object:e},{value:d,object:t})===!1)){if(r.evaluate){let u=r.evaluate(o,{value:c,object:e},{value:d,object:t});if(u===!1)return!1;if(u===!0)continue}if(!je.isEqual(c,d,r))return!1}}return!0}static isPartial(e,t){return e=String(e).toLowerCase(),t=String(t).toLowerCase(),e.indexOf(t)!==-1}static isLessThan(e,t){return e instanceof Date&&t instanceof Date?D.isBefore(e,t):e<t}static isMoreThan(e,t){return e instanceof Date&&t instanceof Date?D.isAfter(e,t):e>t}static fork(e){let t,r,i;if(e&&e.constructor===Object){t=Object.setPrototypeOf({},e);for(r in e)i=e[r],i&&(i.constructor===Object?t[r]=je.fork(i):i instanceof Array&&(t[r]=i.slice()))}else t=e;return t}static copyProperties(e,t,r){let i,s;for(s=0;s<r.length;s++)i=r[s],i in t&&(e[i]=t[i]);return e}static copyPropertiesIf(e,t,r){if(t)for(let i of r)i in e||(e[i]=t[i]);return e}static entries(e,t){let r=[],i=typeof t=="function";if(e)for(let s in e)(i?!t(s,e[s]):!t?.[s])&&r.push([s,e[s]]);return r}static fromEntries(e,t){if(t=t||{},e)for(let r=0;r<e.length;++r)t[e[r][0]]=e[r][1];return t}static keys(e,t,r){let i=[],s=typeof t=="function";if(e){let n=0;for(let o in e)(s?!t(o,e[o]):!t?.[o])&&(i.push(r?r(o,n):o),++n)}return i}static values(e,t,r){let i=[],s=typeof t=="function";if(e){let n=0;for(let o in e)(s?!t(o,e[o]):!t?.[o])&&(i.push(r?r(e[o],n):e[o]),++n)}return i}static allKeys(e){return z.deprecate("Core","5.0.0","Deprecated in favor of `keys()`; will be removed in 5.0"),b.keys(e)}static pathExists(e,t){return t.split(".").every(i=>!e||!(i in e)?!1:(e=e[i],!0))}static pathifyKeys(e){let t={};for(let r in e)if(Nr.call(e,r))if(e[r]instanceof Object){let i=this.pathifyKeys(e[r]);for(let s in i)t[`${r}.${s}`]=i[s]}else t[r]=e[r];return t}static deletePath(e,t){t.split(".").reduce((r,i,s,n)=>{if(r==null)return null;if(Nr.call(r,i))if(s===n.length-1)delete r[i];else return r[i]},e)}static coerce(e,t){let r=er(e),i=er(t),s=typeof e=="string";if(r!==i)switch(i){case"string":return String(e);case"number":return Number(e);case"boolean":return s&&(!e||e==="false"||e==="0")?!1:Boolean(e);case"null":return s&&(!e||e==="null")?null:!1;case"undefined":return s&&(!e||e==="undefined")?void 0:!1;case"date":return s&&isNaN(e)?D.parse(e):Date(Number(e))}return e}static wrapProperty(e,t,r,i,s=!0){let n={},o=Object.getPrototypeOf(e),l=Object.getOwnPropertyDescriptor(o,t);for(;!l&&o&&s;)o=Object.getPrototypeOf(o),o&&(l=Object.getOwnPropertyDescriptor(o,t));l?(l.set?n.set=c=>{l.set.call(e,c),i&&i.call(e,l.get.call(e))}:n.set=i,l.get?n.get=()=>{let c=l.get.call(e);return r&&(c=r.call(e,c)),c}:n.get=r):(n.set=c=>{e[`_${t}`]=c,i&&i.call(e,c)},n.get=()=>{let c=e[`_${t}`];return r&&(c=r.call(e,c)),c}),Object.defineProperty(e,t,n)}static getPropertyDescriptor(e,t){let r=null;for(let i=e;i&&!r&&!Nr.call(i,"isBase");i=Object.getPrototypeOf(i))r=Object.getOwnPropertyDescriptor(i,t);return r}static hasOwn(e,t){return e?Nr.call(e,t):!1}static cleanupProperties(e,t=!1){return Object.entries(e).forEach(([r,i])=>{t?i===void 0&&delete e[r]:i==null&&delete e[r]}),e}static removeAllProperties(e){return Object.keys(e).forEach(t=>delete e[t]),e}static assertType(e,t,r){let i=er(e);if(e!=null&&i!==t)throw new Error(`Incorrect type "${i}" for ${r}, expected "${t}"`)}static assertObject(e,t){je.assertType(e,"object",t)}static assertInstance(e,t){je.assertType(e,"instance",t)}static assertClass(e,t){je.assertType(e,"class",t)}static assertFunction(e,t){if(typeof e!="function"||e.isBase||e.$$name)throw new Error(`Incorrect type for ${t}, got "${e}" (expected a function)`)}static assertNumber(e,t){let r=Number(e);if(typeof e!="number"||isNaN(r))throw new Error(`Incorrect type for ${t}, got "${e}" (expected a Number)`)}static assertBoolean(e,t){je.assertType(e,"boolean",t)}static assertString(e,t){je.assertType(e,"string",t)}static assertArray(e,t){je.assertType(e,"array",t)}static toFixed(e,t){return zn?zn(e,t):e.toFixed(t)}static roundTo(e,t=1){return Math.round(e/t)*t}static round(e,t){if(t==null)return e;let r=10**t;return Math.round(e*r)/r}static getMapPath(e,t,r){let i=Array.isArray(t)?t:typeof t=="string"?t.split("."):[t],s=i.length===1,n=i[0],o=e.has(n)?e.get(n):e.set(n,s?r:{}).get(n);return s?o:je.getPathDefault(o,i.slice(1),r)}},je=b;var Wn=["border-top-width","border-right-width","border-bottom-width","border-left-width"],mc=["margin-top","margin-right","margin-bottom","margin-left"],gc=["padding-top","padding-right","padding-bottom","padding-left"],dt={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},_r={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},pc=Object.freeze({x:0,y:0}),yc=/^([trblc])(\d*)-([trblc])(\d*)$/i,bc=/^([trblc])(\d*)$/i,Br=["top","right","bottom","left"],qi={t:0,r:1,b:2,l:3},Ui=["b-t","l-r","t-b","r-l"],Cc={bt:1,tb:1,lr:1,rl:1},Gn=Object.freeze([0,0]),wc=["width","height"],Vr=(a,e=a,t=a,r=e)=>Array.isArray(a)?Vr.apply(null,a):[a,e,t,r];function vc(a){let e=yc.exec(a),t=parseInt(e[2]||50),r=parseInt(e[4]||50),i=e[1],s=e[3],n=Cc[i+s];return{myAlignmentPoint:i+t,myEdge:i,myOffset:t,targetAlignmentPoint:s+r,targetEdge:s,targetOffset:r,startZone:qi[s],edgeAligned:n}}function xc(a){return`${Br[(qi[a.myEdge]+2)%4][0]}${a.myOffset}-${Br[(qi[a.targetEdge]+2)%4][0]}${a.targetOffset}`}function Ec(a){return a==null?Gn:typeof a=="number"?[a,a]:a}var k=class{get isRectangle(){return!0}static from(e,t,r){if(e.isRectangle)return e;if(r===void 0&&typeof t=="boolean"&&(r=t,t=null),t){let{scrollLeft:u,scrollTop:f}=t;(x.isEdge||x.isSafari)&&t===document.body&&(u=f=0),t=k.from(t).translate(-u,-f)}else t=pc;let i=e===document||e===window,s=e===document.body&&document.body.offsetHeight===0,n=s&&e.getBoundingClientRect(),o=s?new k(n.left,n.top,n.width,document.body.parentElement.scrollHeight):i?new k(0,0,window.innerWidth,window.innerHeight):e.getBoundingClientRect(),l=r||i?[0,0]:[window.pageXOffset,window.pageYOffset],c=0,d=0;return(x.isIE11||x.isEdge&&e.namespaceURI?.match(/svg/))&&(c=e.dataset?.scaleX||0,d=e.dataset?.scaleY||0),new k(o.left+l[0]-t.x+c/2,o.top+l[1]-t.y+d/2,o.width-c,o.height-d)}static fromScreen(e,t){return k.from(e,t,!0)}static inner(e,t,r=!1){let i=this.from(e,t,r);if(document.body.contains(e)){let s=g.getStyleValue(e,Wn);i.x+=parseFloat(s[dt.l]),i.y+=parseFloat(s[dt.t]),i.right-=parseFloat(s[dt.r]),i.bottom-=parseFloat(s[dt.b])}return i}static content(e,t,r=!1){let i=this.from(e,t,r);if(document.body.contains(e)){let s=g.getStyleValue(e,Wn),n=g.getStyleValue(e,gc);i.x+=parseFloat(s[dt.l])+parseFloat(n[_r.l]),i.y+=parseFloat(s[dt.t])+parseFloat(n[_r.t]),i.right-=parseFloat(s[dt.r])+parseFloat(n[_r.r]),i.bottom-=parseFloat(s[dt.b])+parseFloat(n[_r.b])}return i}static client(e,t,r=!1){let i=this.content(e,t,r),s=g.scrollBarWidth,n;return s&&(e.scrollHeight>e.clientHeight&&g.getStyleValue(e,"overflow-y")!=="hidden"&&(n=parseFloat(g.getStyleValue(e,"padding-right")),i.right+=n-Math.max(n,s)),e.scrollWidth>e.clientWidth&&g.getStyleValue(e,"overflow-x")!=="hidden"&&(n=parseFloat(g.getStyleValue(e,"padding-bottom")),i.bottom+=n-Math.max(n,s))),i}static outer(e,t,r=!1){let i=this.from(e,t,r);if(document.body.contains(e)){let s=g.getStyleValue(e,mc);i.x-=parseFloat(s["margin-left"]),i.y-=parseFloat(s["margin-top"]),i.right+=parseFloat(s["margin-right"]),i.bottom+=parseFloat(s["margin-bottom"])}return i}static union(...e){let{x:t,y:r,right:i,bottom:s}=e[0],n;if(e.length>1)for(let o=1;o<e.length;o++)n=e[o],n.x<t&&(t=n.x),n.y<r&&(r=n.y),n.right>i&&(i=n.right),n.bottom>s&&(s=n.bottom);return new k(t,r,i-t,s-r)}roundPx(e=window.devicePixelRatio||1){let t=this;return t._x=g.roundPx(t._x,e),t._y=g.roundPx(t._y,e),t._width=g.roundPx(t._width,e),t._height=g.roundPx(t._height,e),t}static get $$name(){return hasOwnProperty.call(this,"$name")&&this.$name||hasOwnProperty.call(this,"_$name")&&this._$name||this.name}get $$name(){return this.constructor.$$name}constructor(e,t,r,i){b.assertNumber(e,"Rectangle.x"),b.assertNumber(t,"Rectangle.y"),b.assertNumber(r,"Rectangle.width"),b.assertNumber(i,"Rectangle.height");let s=this;s._x=e,s._y=t,s._width=r,s._height=i}clone(){let e=this,t=new k(e.x,e.y,e.width,e.height);return t.isAlignRectangle=e.isAlignRectangle,t.minHeight=e.minHeight,t.minWidth=e.minWidth,t}contains(e){let t=this;return e.isRectangle?e._x>=t._x&&e._y>=t._y&&e.right<=t.right&&e.bottom<=t.bottom:!1}intersect(e,t=!1,r=!1){let i=this,s=Math.max(i.y,e.y),n=Math.min(i.right,e.right),o=Math.min(i.bottom,e.bottom),l=Math.max(i.x,e.x);return(r?o>=s&&n>=l:o>s&&n>l)?t?!0:new k(l,s,n-l,o-s):!1}equals(e,t=!1){let r=t?i=>Math.round(i):i=>i;return e.isRectangle&&r(e.x)===r(this.x)&&r(e.y)===r(this.y)&&r(e.width)===r(this.width)&&r(e.height)===r(this.height)}translate(e,t){return this._x+=e||0,this._y+=t||0,this}moveTo(e,t){return e!=null&&(this._x=e),t!=null&&(this._y=t),this}getDelta(e){return[e.x-this.x,e.y-this.y]}get center(){return new k.Point(this.x+this.width/2,this.y+this.height/2)}set x(e){let t=e-this._x;this._x=e,this._width-=t}get x(){return this._x}set left(e){this.x=e}get left(){return this.x}set top(e){this.y=e}get top(){return this.y}set y(e){let t=e-this._y;this._y=e,this._height-=t}get y(){return this._y}set width(e){this._width=e}get width(){return this._width}set height(e){this._height=e}get height(){return this._height}set right(e){this._width=e-this._x}get right(){return this._x+this._width}set bottom(e){this._height=e-this._y}get bottom(){return this._y+this._height}get area(){return this.width*this.height}set minWidth(e){let t=this;isNaN(e)?t._minWidth=null:(t._minWidth=Number(e),t.isAlignRectangle||(t.width=Math.max(t.width,t._minWidth)))}get minWidth(){return this._minWidth}set minHeight(e){let t=this;isNaN(e)?t._minHeight=null:(t._minHeight=Number(e),t.isAlignRectangle||(t.height=Math.max(t.height,t._minHeight)))}get minHeight(){return this._minHeight}adjust(e,t,r,i){let s=this;return s.x+=e,s.y+=t,s.width+=r,s.height+=i,s}inflate(e,t=e,r=e,i=t){return Array.isArray(e)&&([e,t,r,i]=Vr(e)),this.adjust(-i,-e,t,r)}deflate(e,t=e,r=e,i=t){return Array.isArray(e)&&([e,t,r,i]=Vr(e)),this.adjust(i,e,-t,-r)}constrainTo(e,t){let r=this,i=r.height,s=r.y,n=r.minWidth||r.width,o=r.minHeight||r.height;if(r.height>=e.height){if(t&&o>e.height)return!1;r._y=e.y,r.height=e.height}if(r.width>=e.width){if(t&&n>e.width)return r.y=s,r.height=i,!1;r._x=e.x,r.width=e.width}let l=r.bottom-e.bottom;return l>0&&r.translate(0,-l),l=r.right-e.right,l>0&&r.translate(-l),l=e.y-r.y,l>0&&r.translate(0,l),l=e.x-r.x,l>0&&r.translate(l),r}alignTo(e){let t=this.clone(),{target:r,constrainTo:i,constrainPadding:s,matchSize:n}=e,o,l,c,d;if(r&&!r.isRectangle&&(r=k.from(r.element?r.element:r)),i){if(!i.isRectangle){d=i===window||i===document;let N="ignorePageScroll"in e?e.ignorePageScroll:!d;i=k.from(i.element?i.element:i,null,N)}s&&(s=Vr(s),s[0]=Math.min(s[0],r.top),s[1]=Math.min(s[1],i.right-r.right),s[2]=Math.min(s[0],i.bottom-r.bottom),s[3]=Math.min(s[0],r.left),i=i.deflate.apply(i.clone(),s))}let u=this,f=Ec(e.offset),{align:h,axisLock:m,anchorSize:p,anchorPosition:y}=e,C=vc(h),w=e.position||(r&&r.$$name==="Point"?r:null),T=i&&i.clone(),R=[],H=[{zone:l=C.startZone,align:h}],A=n&&wc[C.startZone&1],B=u[A];if(A&&m?t[A]=r[A]:!C.edgeAligned&&n&&(t.width=r.width,t.height=r.height),i&&t.constrainTo(i),i&&C.startZone!=null)if(m)H.push({zone:l=(l+2)%4,align:xc(C)}),m==="flexible"&&(H.push({zone:l=(C.startZone+1)%4,align:Ui[l]}),H.push({zone:l=(l+2)%4,align:Ui[l]}));else for(let N=1;N<4;N++)H.push({zone:l=(l+1)%4,align:Ui[l]});if(y){let N=C.startZone&1?"y":"x";o={[N]:y[N],edge:Br[(C.startZone+2)%4]}}if(T&&r&&(T.adjust(-r.width,-r.height,r.width,r.height),r.constrainTo(T)),t.minWidth=u.minWidth,t.minHeight=u.minHeight,w)t.moveTo(w.x,w.y),i&&t.constrainTo(i);else{let N=C.myEdge==="c"||C.targetEdge==="c",V=p&&!N?[p[1]+f[0],p[1]+f[1]]:f,j=r.getAlignmentPoint(C.targetAlignmentPoint,V),le=t.getAlignmentPoint(C.myAlignmentPoint);t.translate(j[0]-le[0],j[1]-le[1]);let G=t.intersect(r,!0);if(G)i&&t.constrainTo(i),c=C.startZone,t.translate(...V);else if(i&&!i.contains(t)){let q=t.clone(),J=[],$,he;o=null,R[0]=$=i.clone(),$.bottom=r.y-V[1],R[1]=$=i.clone(),$.x=r.right+V[0],R[2]=$=i.clone(),$.y=r.bottom+V[1],R[3]=$=i.clone(),$.right=r.x-V[0];for(let Me=0;Me<H.length;Me++){if(A&&Me==2&&(t[A]=B),$=R[c=H[Me].zone],t=t.alignTo({target:r,offsets:V,align:H[Me].align}),t.constrainTo($,!0)&&(J.push({result:t,zone:c}),!he||t.width<u.width||t.height<u.height)){t.align=H[Me].align;break}if(!he||$.area>he.area){let Se=t.clone();switch(c){case 0:Se.moveTo(null,$.bottom-Se.height);break;case 1:Se.moveTo($.left);break;case 2:Se.moveTo(null,$.top);break;case 3:Se.moveTo($.right-Se.width);break}he={area:$.area,result:Se,zone:c}}}J.length?(J.length>1&&!m&&J.sort((Me,Se)=>{let Fr=Math.sqrt((q.x-Me.result.x)**2+(q.y-Me.result.y)**2),ba=Math.sqrt((q.x-Se.result.x)**2+(q.y-Se.result.y)**2);return Fr-ba}),t=J[0].result,c=J[0].zone):(t=he.result,c=he.zone,d&&t.constrainTo(i))}else c=C.startZone;if(t.zone=c,t.overlap=G=t.intersect(r,!0),p&&!G){if(!o){let q=c&1,J=q?"y":"x",$=q?"bottom":"right",he=Math.max(r[J],t[J]),Me=Math.min(r[$],t[$]),Se=he+(Me-he)/2-p[0]/2,Fr=Se+p[0];Fr>t[$]&&(Se-=Fr-t[$]),Se<t[J]&&(Se+=t[J]-Se),o={[J]:Se-t[J],edge:Br[(c+2)%4]}}t.anchor=o}}return t}getAlignmentPoint(e,t=Gn){let r=this,i=bc.exec(e),s=i[1].toLowerCase(),n=Math.min(Math.max(parseInt(i[2]||50),0),100)/100;switch(s){case"t":return[r.x+r.width*n,r.y-t[1]];case"r":return[r.right+t[0],r.y+r.height*n];case"b":return[r.x+r.width*n,r.bottom+t[1]];case"l":return[r.x-t[0],r.y+r.height*n];case"c":return[r.x+r.width/2,r.y+r.height/2]}}highlight(){let e=this,t=g.createElement({parent:document.body,style:`position:absolute;z-index:9999999;pointer-events:none;
                            left:${e.x}px;top:${e.y}px;width:${e.width}px;height:${e.height}px`});return g.highlight(t).then(()=>t.remove())}toString(e=","){return[`${this.top}px`,`${this.right}px`,`${this.bottom}px`,`${this.left}px`].join(e)}};var wt=Symbol("value"),qn=Symbol("length"),P=class{static change(e,t,r,i="string"){r=P.normalize(r,"object");let s=P.normalize(e,"array").filter(n=>!r[n]);if(t){t=P.normalize(t,"array");for(let n=0;n<t.length;++n)s.includes(t[n])||s.push(t[n])}return P.normalize(s,i)}static from(e,t){return e&&(e.isDomClassList||(e=new P(e)),!e.value&&!t&&(e=null)),e||(t?new P:null)}static normalize(e,t="string"){e=e||"";let r=typeof e,i=t==="array",s=t==="object",n=!i&&!s,o=r==="string",l,c,d;for(r==="object"&&(e.nodeType===Element.ELEMENT_NODE&&typeof e.getAttribute=="function"?(e=e.getAttribute("class")||"",o=!0):e?.isDomClassList?e=e.values:e instanceof DOMTokenList?e=Array.from(e):e instanceof Map?e=Array.from(e.keys()).filter(u=>e.get(u)):e instanceof Set?e=Array.from(e.values()):Array.isArray(e)||(e=I.getTruthyKeys(e))),o&&(e=[...new Set(M.split(e))]),c=e.length;c-- >0;)l=e[c],l.length?l.includes(" ")&&e.splice(c,1,...M.split(l)):e.splice(c,1);if(i)d=e;else if(n)d=e.join(" ");else for(d=Object.create(null),c=0;c<e.length;++c)d[e[c]]=!0;return d}constructor(...e){this.process(1,e)}get isDomClassList(){return!0}clone(){return new P(this)}contains(e){return typeof e=="string"&&e?Boolean(this[e]):!1}toString(){return this.length?`${this.value} `:""}toJSON(){return this.toString()}trim(){return this.value}isEqual(e){let t=P.normalize(e,"array"),r=t.length;if(this.length===r){for(let i=0;i<r;i++)if(!this[t[i]])return!1;return!0}return!1}get value(){let e=this[wt],t;return e==null&&(t=I.getTruthyKeys(this),this[qn]=t.length,this[wt]=e=t.join(" ")),e}set value(e){let t=this,r=Object.keys(t),i=r.length;for(let s=0;s<i;s++)delete t[r[s]];e?t.process(1,[e]):delete t[wt]}get values(){return I.getTruthyKeys(this)}get length(){return this.value?this[qn]:0}process(e,t){for(let r,i,s=0;s<t.length;s++)if(t[s])if(r=t[s],I.isObject(r))for(i in r)this[i]=e?r[i]:!r[i];else for(r=P.normalize(t[s],"array"),i=0;i<r.length;++i)this[r[i]]=e;return delete this[wt],this}assign(e){for(let t in e)!this[t]!=!e[t]&&(this[t]=e[t],delete this[wt]);return this}add(...e){return this.process(1,e)}remove(...e){return this.process(0,e)}toggle(e,t=Boolean(!this[e])){if(t=Boolean(t),Boolean(this[e])!==t)return this[e]=t,delete this[wt],!0}split(){return I.getTruthyKeys(this)}forEach(e){return I.getTruthyKeys(this).forEach(e)}};P.prototype[wt]=null;var Sc=a=>a.floating,Ze=new class extends S.mixin(re){suspendFocusEvents(){zr=!0}resumeFocusEvents(){zr=!1}setupFocusListenersOnce(a,e){a&&!Ze.observedElements.has(a)&&(Ze.setupFocusListeners(a,e),Ze.observedElements.add(a))}setupFocusListeners(a=document,e,t=!1){let r={element:a,touchstart(i){!ut&&i.changedTouches.length===1?ut=i.changedTouches[0]:ut=null},touchend:{handler:i=>{ut&&(ut.identifier===e.contextMenuTouchId?(i.stopImmediatePropagation(),i.preventDefault()):i.changedTouches.length===1&&i.changedTouches[0].identifier===ut.identifier&&Ze.trigger("globaltap",{event:i}),ut=null)},passive:!1},mousedown:{handler:i=>{Wr="mouse",ut||Ze.trigger("globaltap",{event:i})},passive:!1},keydown(){Wr="key"},keypress(){Wr="key"},focusin(i){let{Widget:s}=Ze;if(s.resetFloatRootScroll(),zr)return;let n=i.relatedTarget?i.relatedTarget instanceof HTMLElement?i.relatedTarget:document.body:null,o=i.target||document.body,l=s.fromElement(n),c=s.fromElement(o),d=g.getCommonAncestor(l,c),u=!!(n&&o.compareDocumentPosition(n)&4),f=s.query(Dc),h=null;if(o&&o!==document.body?h=g.getActiveElement(o):h=g.getActiveElement(document),f&&(!c||!f.owns(c)&&!(f.element.compareDocumentPosition(c.element)&4&&c.up(Sc))))return f.focus();let m=Ki("focusout",n,i.target,l,c,u);for(let y=l;y&&y!==d;y=y.owner)if(!y.isDestroying&&y.onFocusOut&&(y.onFocusOut(m),i.target&&h!==g.getActiveElement(i.target)))return;if(d&&i.target===d.element)!d.isDestroying&&g.getActiveElement(d)===o&&d.focusElement&&d.focusElement!==d.element&&(d.element.contains(h)||d.setTimeout(()=>d.focus?.(),0));else{m=Ki("focusin",o,n,l,c,u);for(let y=c;y&&y!==d;y=y.owner)y.isDestroying||y.onFocusIn?.(m)}let p=g.getCommonAncestor(n?.nodeType===Element.ELEMENT_NODE?n:null,o)||o.parentNode;m=Ki("focusmove",o,n,l,c,u,{bubbles:!0}),p.dispatchEvent(m)},focusout(i){if(!zr&&(!i.relatedTarget||!Ze.Widget.fromElement(i.relatedTarget))){let s=i.relatedTarget&&i.relatedTarget instanceof HTMLElement?i.relatedTarget:null;r.focusin({target:s,relatedTarget:i.target})}},capture:!0,passive:!0};t&&Un?.(),Un=e.on(r)}get lastInteractionType(){return Wr}},Dc=a=>a.isVisible&&a.isTopModal;Ze.observedElements=new Set;var ut,zr=!1,Wr,Un;function Ki(a,e,t,r,i,s,n){let o=new CustomEvent(a,n);return Object.defineProperty(o,"_target",{get(){return e}}),Object.defineProperty(o,"relatedTarget",{get(){return t}}),o.fromWidget=r,o.toWidget=i,o.backwards=s,o}var ae=Ze;var Tc=14,Rc={align:"t0-t0"},tr=Node.ELEMENT_NODE,Gr=Node.TEXT_NODE,{isObject:Mc}=b,Kn=/[+-]?\d*\.?\d+[eE]?-?\d*/g,Ke=Kn.source,Fc=new RegExp(`matrix\\((?:${Ke}),\\s?(?:${Ke}),\\s?(?:${Ke}),\\s?(?:${Ke}),\\s?(${Ke}),\\s?(${Ke})`),kc=new RegExp("matrix3d\\((?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(?:-?\\d*),\\s?(-?\\d*),\\s?(-?\\d*)"),qr=new RegExp(`(?:${Fc.source})|(?:${kc.source})`),Oc=new RegExp(`translate(3d|X)?\\((${Ke})px(?:,\\s?(${Ke})px)?`),Lc=new RegExp(`translate(3d|Y)?\\((${Ke})px(?:,\\s?(${Ke})px)?`),Ic=/^[^a-z]+|[^\w:.-]+/gi,jc=/\s+/,Hc=/\s*;\s*/,Ac=/\s*:\s*/,Pc=/^-?((\d+(\.\d*)?)|(\.?\d+))$/,$c="$bryntum",Nc={elementData:"",for:"htmlFor",retainElement:""},_c={tag:1,html:1,text:1,children:1,tooltip:1,style:1,dataset:1,parent:1,nextSibling:1,ns:1,reference:1,class:1,className:1,unmatched:1,onlyChildren:1,listeners:1,compareHtml:1,syncOptions:1},Yn={length:1,parentRule:1,style:1},Bc={BUTTON:1,IFRAME:1,EMBED:1,INPUT:1,OBJECT:1,SELECT:1,TEXTAREA:1,HTML:x.isIE11?1:0,BODY:x.isIE11?0:1},He=window,te=document,Vc={},zc=[],Yi=Array.prototype.slice,Wc=Promise.resolve(),Gc=["font-size","font-size-adjust","font-style","font-weight","font-family","font-kerning","font-stretch","line-height","text-transform","text-decoration","letter-spacing","word-break"],qc=a=>a._hidden,Uc=a=>a.parentNode||a.host,Kc=(a,e,t)=>t.key==="children"?b.mergeItems(a,e,t):b.blend(a,e,t),Yc=a=>{let e=a.ownerDocument.defaultView.getComputedStyle(a);return e.getPropertyValue("display")!=="none"&&e.getPropertyValue("visibility")!=="hidden"},Xc=te.documentElement.getRootNode?a=>a.getRootNode():a=>{for(;a.parentNode;)a=a.parentNode;return a},Jc=a=>a.host&&a.host instanceof Element,It=a=>a&&(a===te.body||("offsetParent"in a?a.offsetParent:It(a.parentNode))),rr=a=>a&&(te.body.contains(a)||(Xi=Xc(a))&&Jc(Xi)&&rr(Xi.host)),Xn=a=>a instanceof Node?a:typeof a=="string"?F.createElementFromTemplate(a):F.createElement(a),ir=Object.create(null),Jn=(a,e)=>{let t=ir[a]||[M.hyphenate(a),e];return ir[a]||(ir[t[0]]=ir[a]=t),t},Qc=a=>a.ownerSVGElement?a.ownerSVGElement.parentNode:a.offsetParent;["top","right","bottom","left","width","height","maxWidth","maxHeight","minWidth","minHeight","borderSpacing","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft","fontSize","letterSpacing","lineHeight","outlineWidth","textIndent","wordSpacing"].forEach(a=>Jn(a,!0));var sr=null,Ur=0,vt=null,Xi,Ji,Qi,Qn,g=class{static isFocusable(e,t=!1){if(!t&&(!F.isVisible(e)||F.Widget.fromElement(e,qc)))return!1;let r=e.nodeName;return Bc[r]||(r==="A"||r==="LINK")&&!!e.href||e.getAttribute("tabIndex")!=null||e.contentEditable==="true"}static isInView(e,t=!1,r){if(!It(e))return!1;let i=r?.positioned&&g.getStyleValue(r.element,"position")!=="fixed",s=k.from(window),n=t?"contains":"intersect",{parentNode:o}=e,{parentElement:l}=o.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.getRootNode().host:e,c=l.ownerDocument.defaultView.getComputedStyle(l),d=Qc(e),u=i&&r.element.offsetParent,f=i&&k.from(u),h=c.overflowX!=="visible"||c.overflowY!=="visible";if(s.height=te.scrollingElement.scrollHeight,e===te.body)return s;let m=k.from(e,null,!0);for(let p=h?e.parentNode:d;m&&p!==te.documentElement;p=p.parentNode){p.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&p.host&&(p=p.host.parentNode);let y=p===te.body,C=p.ownerDocument.defaultView.getComputedStyle(p),w=y?s:k.inner(p,null,!0);(y||C.overflow!=="visible")&&(m=w[n](m,!1,!0))}return m&&i&&m.translate(te.scrollingElement.scrollLeft,te.scrollingElement.scrollTop),i&&m?m.translate(-f.x+u.scrollLeft,-f.y+u.scrollTop):m}static isVisible(e){let t=e.ownerDocument;for(;e;e=Uc(e)){if(e===t)return!0;if(e.nodeType===e.ELEMENT_NODE&&!Yc(e))return!1}return!1}static isDOMEvent(e){return e instanceof Event}static merge(e,...t){return b.blend(e,t,{merge:Kc})}static normalizeChildren(e,t,r){let i=e?.children,s,n,o,l,c;if(e?.syncOptions?.ignoreRefs&&(r=!0),i&&!(e instanceof Node))if(Array.isArray(i))for(n=0;n<i.length;++n)g.normalizeChildren(i[n],t,r);else{l=i,e.children=i=[];for(o in l)s=l[o],s?.isWidget&&(s=s.element),c=!o.startsWith("$")&&!g.isElement(s),c&&t?.(o,!r),s&&(s instanceof Node||(s.reference===!1?delete s.reference:c&&typeof s!="string"&&(s.reference=o),g.normalizeChildren(s,t,r)),i.push(s))}return e}static roundPx(e,t=window.devicePixelRatio||1){let r=1/t;return Math.round(e/r)*r}static isCustomElement(e){return Boolean(e?.shadowRoot)}static elementFromPoint(e,t){let r=document.elementFromPoint(e,t);return F.isCustomElement(r)&&(r=r.shadowRoot.elementFromPoint(e,t)||r),r}static childFromPoint(e,t,r,i=e){let s=r==null?t:new k(t,r,0,0),n=null;return Array.from(e.children).some(o=>{if(k.from(o,i).contains(s))return n=o.children.length&&F.childFromPoint(o,s,null,i)||o,!0}),n}static unitize(e,t,r="px"){let[i,s]=Jn(e);return t!=null&&(t=String(t),t=s&&Pc.test(t)?t+r:t),[i,t]}static get activeElement(){let e=document.activeElement;for(;e.shadowRoot;)e=e.shadowRoot.activeElement;return e}static getActiveElement(e){e?.isWidget&&(e=e.element);let t=(e?.getRootNode?.()||document).activeElement;for(;t?.shadowRoot;)t=t.shadowRoot.activeElement;return t}static getRootElement(e){let t=e.getRootNode?.();return t?.body||t||e.ownerDocument.body}static isValidFloatRootParent(e){return e===document.body||e.constructor.name==="ShadowRoot"}static getId(e){return e.id||(e.id="b-element-"+ ++Ur)}static getCommonAncestor(e,t){if(e===t)return e;for(;e&&!(e[e.isWidget?"owns":"contains"]?.(t)||e===t);)e=e.owner||e.parentNode;return e}static getElement(e){return e instanceof Element?e:te.querySelector(e)}static setAttributes(e,t){let r=F.getElement(e);if(r&&t)for(let i in t)t[i]!=null&&r.setAttribute(i,t[i])}static setLength(e,t,r){return arguments.length===1?r=typeof e=="number"?`${e}px`:e??"":(e=F.getElement(e),r=e.style[t]=typeof r=="number"?`${r}px`:r??""),r}static percentify(e,t=2){let r=Math.pow(10,t);return e==null||e===""||isNaN(e)?"":`${Math.round(e*r)/r}%`}static getChild(e,t){return x.supportsQueryScope?t=":scope>"+t:t=`#${e.id||(e.id="b-element-"+ ++Ur)} > ${t}`,e.querySelector(t)}static hasChild(e,t){return F.getChild(e,t)!=null}static children(e,t){return(t[0]===">"||t.startsWith("# "))&&(t[0]==="#"&&(t=t.substr(2)),x.supportsQueryScope?t=":scope "+t:t=`#${e.id||(e.id="b-element-"+ ++Ur)} ${t}`),Array.from(e.querySelectorAll(t))}static getChildElementCount(e){return e.childElementCount}static down(e,t){return e?e.matches&&e.matches(t)?e:(x.supportsQueryScope?t=":scope "+t:t=`#${e.id||(e.id="b-element-"+ ++Ur)} ${t}`,e.querySelector(t)):null}static isDescendant(e,t){e.contains||(e=e.body);let r=F.getRootElement(e),i=F.getRootElement(t);return r!==i&&i.host?F.isDescendant(r,i.host):e.contains(t)}static getEventElement(e,t="target"){return!e||F.isElement(e)?e:e[t]}static isElement(e){return e?.nodeType===document.ELEMENT_NODE&&F.isNode(e)}static isNode(e){return Boolean(e)&&typeof e.nodeType=="number"&&!Mc(e)}static forEachSelector(e,t,r){if(typeof e=="string")throw new Error("DomHelper.forEachSelector must provide a root element context (for shadow root scenario)");F.children(e,t).forEach(r)}static forEachChild(e,t){Array.from(e.children).forEach(t)}static removeEachSelector(e,t){F.forEachSelector(e,t,r=>r.remove())}static removeClsGlobally(e,...t){t.forEach(r=>F.forEachSelector(e,"."+r,i=>i.classList.remove(r)))}static isOrphaned(e){return!rr(e)}static up(e,t){return e&&e.closest(t)}static getAncestor(e,t,r=null){let i=!1,s,n=e;for(Array.isArray(t)||(t=[t]);n=n.parentElement;){if(t.includes(n)){i=!0;break}if(r&&n===r)break;s=n}return i?s||e:null}static getParents(e){let t=[];for(;e.parentElement;)t.push(e.parentElement),e=e.parentElement;return t}static makeValidId(e,t=""){return e==null?null:String(e).replace(Ic,t)}static createElement(e={},t,...r){let i=t,s,n,o,l,c,d,u,f,h,m,p;typeof i=="boolean"?(m=r[0],p=r[1],t={returnAll:i,refs:m,syncIdField:p}):t&&(c=t.ignoreRefs,h=t.refOwner,m=t.refs,i=t.returnAll,p=t.syncIdField,c&&(o=!0,c=c!=="children")),typeof e.parent=="string"&&(e.parent=document.getElementById(e.parent));let y=e.parent||e.nextSibling&&e.nextSibling.parentNode,{dataset:C,html:w,reference:T,syncOptions:R,text:H}=e;if(R&&(p=R.syncIdField||p,l=R.ignoreRefs,l&&(o=!0,c=l!=="children",t={...t,ignoreRefs:!0})),c&&(h=null),e.ns?s=te.createElementNS(e.ns,e.tag||"svg"):s=te.createElement(e.tag||"div"),H!=null?F.setInnerText(s,H):w!=null&&(w instanceof DocumentFragment?s.appendChild(w):s.innerHTML=w),e.tooltip&&F.Widget.attachTooltip(s,e.tooltip),e.style&&F.applyStyle(s,e.style),C)for(u in C)f=C[u],f!=null&&(s.dataset[u]=f);y&&y.insertBefore(s,e.nextSibling),h&&(s.$refOwnerId=h.id),T&&!c&&(h?(s.$reference=T,h.attachRef(T,s,e)):(m||(t=Object.assign({},t),t.refs=m={}),m[T]=s,s.setAttribute("data-reference",T)));let A=e.className||e.class,B=Object.keys(e);for(A&&s.setAttribute("class",P.normalize(A)),n=0;n<B.length;++n)u=B[n],f=e[u],(d=Nc[u])!=null?s[d||u]=f:!_c[u]&&u&&f!=null&&s.setAttribute(u,f);return t?.callback?.({action:"newElement",domConfig:e,targetElement:s,syncId:h?T:t.syncIdField&&e.dataset?.[t.syncIdField]}),i===!0?t.returnAll=i=[s]:Array.isArray(i)&&i.push(s),e.children&&(p&&(s.syncIdMap={}),e.children.forEach(N=>{if(N)if(typeof N=="string"){let V=document.createTextNode(N);h&&(V.$refOwnerId=h.id),s.appendChild(V)}else if(isNaN(N.nodeType)){N.parent=s,!N.ns&&e.ns&&(N.ns=e.ns);let V=F.createElement(N,{...t,ignoreRefs:e.syncOptions?.ignoreRef??o}),j=N.dataset?.[p];j!=null&&(s.syncIdMap[j]=V),delete N.parent}else s.appendChild(N)})),s.lastDomConfig=e,m||i||s}static createElementFromTemplate(e,t=Vc){let{array:r,raw:i,fragment:s}=t,n;if(F.supportsTemplate){if((Ji||(Ji=te.createElement("template"))).innerHTML=e,n=Ji.content,s)return n.cloneNode(!0)}else if((Qi||(Qi=new DOMParser)).parseFromString(e,"text/html"),n=Qi.parseFromString(e,"text/html").body,s){let o=n?n.childNodes:zc;for(n=document.createDocumentFragment();o.length;)n.appendChild(o[0]);return n}else n||(n={children:[],childNodes:[]});return i?n=n.childNodes:n=n.children,n.length===1&&!r?n[0]:Yi.call(n)}static insertFirst(e,t){return t&&t.nodeType!==tr&&t.tag&&(t=F.createElement(t)),e.insertBefore(t,e.firstElementChild)}static insertBefore(e,t,r){return t&&t.nodeType!==tr&&t.tag&&(t=F.createElement(t)),r?e.insertBefore(t,r):F.insertFirst(e,t)}static insertAt(e,t,r){let i=Array.from(e.children);if(r>=i.length)return F.append(e,t);let s=i[r];return F.insertBefore(e,t,s)}static append(e,t){if(t.forEach){if(Array.isArray(t)&&(t=t.map(r=>Xn(r))),e.append)e.append(...t);else{let r=document.createDocumentFragment();t.forEach(function(i){r.appendChild(i)}),e.appendChild(r)}return t}else return e.appendChild(Xn(t))}static getTranslateX(e){let t=e.style.transform,r=Oc.exec(t);return r?parseFloat(r[2]):(r=qr.exec(t)||qr.exec(F.getStyleValue(e,"transform")),r?parseFloat(r[1]||r[3]):0)}static getTranslateY(e){let t=e.style.transform,r=Lc.exec(t);if(r){let i=parseFloat(r[r[1]==="Y"?2:3]);return isNaN(i)?0:i}else return r=qr.exec(t)||qr.exec(F.getStyleValue(e,"transform")),r?parseFloat(r[2]||r[4]):0}static getTranslateXY(e){return[F.getTranslateX(e),F.getTranslateY(e)]}static getOffsetX(e,t=null){return t?e.getBoundingClientRect().left-t.getBoundingClientRect().left:e.offsetLeft}static getOffsetY(e,t=null){return t?e.getBoundingClientRect().top-t.getBoundingClientRect().top:e.offsetTop}static getOffsetXY(e,t=null){return[F.getOffsetX(e,t),F.getOffsetY(e,t)]}static focusWithoutScrolling(e){function t(i){i.forEach(({element:s,scrollLeft:n,scrollTop:o})=>{s.scrollLeft!==n&&(s.scrollLeft=n),s.scrollTop!==o&&(s.scrollTop=o)})}if(x.chromeVersion>=64||x.firefoxVersion>=68)e.focus({preventScroll:!0});else{let i=F.getParents(e),s=i.map(n=>({element:n,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}));e.focus(),x.isIE11?t(s):setTimeout(()=>t(s),0)}}static getPageX(e){return e.getBoundingClientRect().left+He.pageXOffset}static getPageY(e){return e.getBoundingClientRect().top+He.pageYOffset}static getExtremalSizePX(e,t){let r=M.hyphenate(t),i=r.split("-")[1],s=F.getStyleValue(e,r);return/%/.test(s)?e.parentElement?s=parseInt(F.getStyleValue(e.parentElement,i),10):s=NaN:s=parseInt(s,10),s}static setScale(e,t,r=t){let i=F.getStyleValue(e,"transform").split(/,\s*/);i.length>1?(i[0].startsWith("matrix3d")?(i[0]=`matrix3d(${t}`,i[5]=r):(i[0]=`matrix(${t}`,i[3]=r),e.style.transform=i.join(",")):e.style.transform=`scale(${t}, ${r})`}static setTranslateX(e,t){let r=F.getStyleValue(e,"transform").split(/,\s*/);t=F.roundPx(t),r.length>1?(r[r[0].startsWith("matrix3d")?12:4]=t,e.style.transform=r.join(",")):e.style.transform=`translateX(${t}px)`}static setTranslateY(e,t){let r=F.getStyleValue(e,"transform").split(/,\s*/);t=F.roundPx(t),r.length>1?(r[r[0].startsWith("matrix3d")?13:5]=t,e.style.transform=r.join(",")+")"):e.style.transform=`translateY(${t}px)`}static setTop(e,t){F.setLength(e,"top",t)}static setLeft(e,t){F.setLength(e,"left",t)}static setTranslateXY(e,t,r){if(t==null)return F.setTranslateY(e,r);if(r==null)return F.setTranslateX(e,t);t=F.roundPx(t),r=F.roundPx(r);let i=F.getStyleValue(e,"transform").split(/,\s*/),s=i[0].startsWith("matrix3d");i.length>1?(i[s?12:4]=t,i[s?13:5]=r,e.style.transform=i.join(",")+")"):e.style.transform=`translate(${t}px, ${r}px)`}static addTranslateX(e,t){F.setTranslateX(e,F.getTranslateX(e)+t)}static addTranslateY(e,t){F.setTranslateY(e,F.getTranslateY(e)+t)}static addLeft(e,t){F.setLeft(e,F.getOffsetX(e)+t)}static addTop(e,t){F.setTop(e,F.getOffsetY(e)+t)}static alignTo(e,t,r=Rc,i){t=t instanceof k?t:k.from(t,!0);let s=F.getTranslateXY(e),n=k.from(e,!0);i&&(n.roundPx(),t.roundPx());let o=n.alignTo(Object.assign(r,{target:t}));F.setTranslateXY(e,s[0]+o.x-n.x,s[1]+o.y-n.y)}static getStyleValue(e,t,r,i){let s=r?e.style:e.ownerDocument.defaultView.getComputedStyle(e,i);if(Array.isArray(t)){let n={};for(let o of t)n[o]=s.getPropertyValue(M.hyphenate(o));return n}return s.getPropertyValue(M.hyphenate(t))}static getEdgeSize(e,t,r){let i=t==="border"?"-width":"",s={raw:{}};for(let n of["top","right","bottom","left"])(!r||r.includes(n[0]))&&(s[n]=parseFloat(s.raw[n]=F.getStyleValue(e,`${t}-${n}${i}`)));return s.width=(s.left||0)+(s.right||0),s.height=(s.top||0)+(s.bottom||0),s}static parseStyle(e){if(typeof e=="string"){let t=e.split(Hc);e={};for(let r=0,{length:i}=t;r<i;r++){let s=t[r].split(Ac);e[s[0]]=s[1]}}return e||{}}static applyStyle(e,t,r=!1){if(typeof t=="string")r?(t.length||e.style.cssText.length)&&(e.style.cssText=t):e.style.cssText+=t;else if(t){r&&(e.style.cssText=""),t.style&&(typeof t.style=="string"?e.style.cssText=t.style:t=Object.assign({},t.style,t));let i,s;for(i in t)Yn[i]||([i,s]=g.unitize(i,t[i]),e.style.setProperty(i,s))}}static getCSSText(e){if(typeof e=="string")return e;let t="";for(let r in e)Yn[r]||(t+=`${M.hyphenate(r)}:${e[r]};`);return t}static addClasses(e,t){for(let r=0;r<t.length;r++)e.classList.add(t[r])}static removeClasses(e,t){for(let r=0;r<t.length;r++)e.classList.remove(t[r])}static toggleClasses(e,t,r=null){Array.isArray(t)||(t=[t]),r===!0?F.addClasses(e,t):r===!1?F.removeClasses(e,t):t.forEach(i=>e.classList.toggle(i))}static addTemporaryClass(e,t,r,i=window){r>0&&(e.classList.add(t),i.setTimeout(()=>e.classList.remove(t),r))}static getPropertyTransitionDuration(e,t){let r=window.getComputedStyle(e),i=r.transitionProperty.split(", "),s=r.transitionDuration.split(", "),n=i.indexOf(M.hyphenate(t)),o;return n!==-1&&(o=parseFloat(s[n])*1e3),o}static getAnimationDuration(e){return parseFloat(F.getStyleValue(e,"animation-duration"))*1e3}static highlight(e,t=window){return e instanceof k?e.highlight():new Promise(r=>{t.setTimeout(()=>{e.classList.add("b-fx-highlight"),t.setTimeout(()=>{e.classList.remove("b-fx-highlight"),r()},1e3)},0)})}static get scrollBarWidth(){if(sr===null&&te.body){let e=Qn||(Qn=F.createElement({parent:te.body,style:"position:absolute;top:-9999em;height:100px;overflow-y:scroll"}));e.parentNode!==te.body&&te.body.appendChild(e),sr=e.offsetWidth}return sr}static get scrollBarPadElement(){return{className:"b-yscroll-pad",children:[{className:"b-yscroll-pad-sizer"}]}}static resetScrollBarWidth(){sr=null}static measureText(e,t,r=!1,i=void 0){let s=F.getMeasureElement(t,i);s[r?"innerHTML":"innerText"]=e;let n=s.clientWidth;return s.className="",n}static measureSize(e,t,r=!0){if(!e)return 0;if(typeof e=="number")return e;if(!e.length)return 0;if(/^\d+(px)?$/.test(e))return parseInt(e);if(t){let i=F.getMeasureElement(t);i.innerHTML="",i.style.width=F.setLength(e);let s=r?i.offsetWidth:i.getBoundingClientRect().width;return i.style.width=i.className="",s}return/^\d+em$/.test(e)?parseInt(e)*Tc:isNaN(e)?0:parseInt(e)}static getMeasureElement(e,t=te.body){let r=He.getComputedStyle(e),i=t.offScreenDiv=t.offScreenDiv||F.createElement({parent:t,style:"position:fixed;top:-10000px;left:-10000px;visibility:hidden;contain:strict",className:"b-measure-element",children:[{style:"white-space:nowrap;display:inline-block;will-change:contents;width:auto;contain:none"}]},!0)[1];return Gc.forEach(s=>{i.style[s]!==r[s]&&(i.style[s]=r[s])}),i.className=e.className,i.parentElement.parentElement!==t&&t.appendChild(i.parentElement),i}static stripTags(e){return(F.$domParser||(F.$domParser=new DOMParser)).parseFromString(e,"text/html").body.textContent}static sync(e,t){if(typeof e=="string")if(e===""){t.innerHTML="";return}else e=F.createElementFromTemplate(e);return F.performSync(e,t),t}static performSync(e,t){return e.outerHTML!==t.outerHTML?(F.syncAttributes(e,t),F.syncContent(e,t),F.syncChildren(e,t),!0):!1}static getSyncAttributes(e){let t={},r=[];for(let i=0;i<e.attributes.length;i++){let s=e.attributes[i];if(s.specified){let n=s.name.toLowerCase();t[n]=s.value,r.push(n)}}return{attributes:t,names:r}}static syncAttributes(e,t){let{attributes:r,names:i}=F.getSyncAttributes(e),{attributes:s,names:n}=F.getSyncAttributes(t),o=i.includes("dataset"),l=i.filter(u=>!n.includes(u)),c=n.filter(u=>!i.includes(u)&&(!o||!u.startsWith("data-"))),d=i.filter(u=>n.includes(u));if(l.length>0)for(let u=0;u<l.length;u++){let f=l[u];f==="style"?F.applyStyle(t,r.style,!0):f==="dataset"?Object.assign(t.dataset,r.dataset):t.setAttribute(f,r[f])}if(c.length>0)for(let u=0;u<c.length;u++)t.removeAttribute(c[u]);if(d.length>0)for(let u=0;u<d.length;u++){let f=d[u];if(f==="style")F.applyStyle(t,r.style,!0);else if(f==="dataset")Object.assign(t.dataset,r.dataset);else if(f==="class"&&(r.class.isDomClassList||typeof r.class=="object")){let h;r.class.isDomClassList?h=r.class:h=new P(r.class),h.isEqual(s.class)||t.setAttribute("class",h)}else s[f]!==r[f]&&t.setAttribute(f,r[f])}}static syncContent(e,t){F.getChildElementCount(e)===0&&(t.innerText=e.innerText)}static setInnerText(e,t){let r=e.firstChild;r?.nodeType===Element.TEXT_NODE&&e.childNodes.length===1?r.data=t:e.textContent=t}static syncChildren(e,t){let r=this,i=Yi.call(e.childNodes),s=Yi.call(t.childNodes);for(;i.length;){let n=i.shift(),o=s.shift();if(n&&n.nodeType!==Gr&&n.nodeType!==tr)throw new Error(`Source node type ${n.nodeType} not supported by DomHelper.sync()`);if(o&&o.nodeType!==Gr&&o.nodeType!==tr)throw new Error(`Target node type ${o.nodeType} not supported by DomHelper.sync()`);if(!o)t.appendChild(n);else if(n.nodeType===o.nodeType)n.nodeType===Gr?o.data=n.data:n.tagName===o.tagName?r.performSync(n,o):(t.insertBefore(n,o),o.remove());else if(n.nodeType===Gr&&o.nodeType===tr)t.innerText=n.data.trim();else{let l=n.parentElement||n;throw new Error(`Currently no support for transforming nodeType.
${l.outerHTML}`)}}s.forEach(n=>{n.remove()})}static syncClassList(e,t){let r=e.classList,i=typeof t=="string",s=i?t.trim().split(jc):Array.isArray(t)?t:b.getTruthyKeys(t),n=s.length,o=r.length!==n,l;for(l=0;!o&&l<n;l++)o=!r.contains(s[l]);return o&&(e.className=i?t:s.join(" ")),o}static updateClassList(e,t){let{classList:r}=e,i,s,n=!1;for(i in t)s=Boolean(t[i]),r.contains(i)!==s&&(r[s?"add":"remove"](i),n=!0);return n}static setTheme(e,t){e=e.toLowerCase();let r=F.getThemeInfo(t).name.toLowerCase(),i=document.head.querySelector("#bryntum-theme:not([data-loading])")||document.head.querySelector(`[href*="${r}.css"]:not([data-loading])`);if(F.removeEachSelector(document.head,"#bryntum-theme[data-loading]"),!i?.href.includes(`${r}.css`))throw new Error(`Theme link for ${r} not found`);return i.href.includes(`${e}.css`)?Wc:new Promise((s,n)=>{let o=document.createElement("link"),l=i.nextSibling,c=F.getThemeInfo(t).name.toLowerCase(),d={theme:e,prev:c},u=()=>{delete o.dataset.loading,vt=null,i.remove(),ae.trigger("theme",d),s(d)},f=h=>{delete o.dataset.loading,n(h)};o.rel="stylesheet",o.id="bryntum-theme",o.addEventListener("load",u),o.addEventListener("error",f),o.dataset.loading="true",o.href=i.href.replace(c,e),l.parentNode.insertBefore(o,l)})}static get themeInfo(){return g.getThemeInfo()}static getThemeInfo(e){if(!vt){let t=F.createElement({parent:document.body,className:"b-theme-info"}),r=F.getStyleValue(t,"content",!1,":before");if(r)try{vt=JSON.parse(r.replace(/^["']|["']$|\\/g,""))}catch{vt=null}vt=vt||(e?{name:e}:null),t.remove()}return vt}static async transition({element:e,selector:t="[data-dom-transition]",duration:r,action:i,thisObj:s=this,addTransition:n={},removeTransition:o={}}){let l=new Set,c=Array.from(e.querySelectorAll(t)),d=new Map(c.map(m=>{let p=0,y=m.parentElement;for(;y&&y!==e;)p++,y=y.parentElement;m.$depth=p,m.scrollHeight>m.offsetHeight&&getComputedStyle(m).overflow==="auto"&&(m.$scrollTop=m.scrollTop,l.add(m));let{parentElement:C}=m,w=k.from(m,e),T=k.from(m,C),R=getComputedStyle(C),H=parseFloat(R.borderLeftWidth);return H&&(w.left-=H,T.left-=H),[m.id,{element:m,globalBounds:w,localBounds:T,depth:p,parentElement:C}]}));i.call(s);let u=Array.from(e.querySelectorAll(t)),f=new Map(u.map(m=>{let p=k.from(m,e),y=k.from(m,m.parentElement),C=window.getComputedStyle(m.parentElement),w=parseFloat(C.borderLeftWidth);return w&&(p.left-=w,y.left-=w),[m.id,{element:m,globalBounds:p,localBounds:y}]})),h=["position","top","left","width","height","padding","margin","zIndex","minWidth","minHeight","opacity","overflow"];for(let[m,p]of d){let y=f.get(m);if(y){let{element:C}=y,{style:w,parentElement:T}=C,R=parseInt(g.getStyleValue(C,"zIndex")),{globalBounds:H,localBounds:A,depth:B,parentElement:N}=p,V=N!==T;b.copyProperties(C.$initial={parentElement:T},w,h);let j;V?(y.bounds=y.globalBounds,j=H,e.appendChild(C)):(y.bounds=y.localBounds,j=A,N.appendChild(C));let le="hidden";l.has(C)&&(C.$scrollPlaceholder=g.createElement({parent:C,style:{height:C.scrollHeight}}),le="auto"),Object.assign(w,{position:"absolute",top:`${j.top}px`,left:`${j.left}px`,width:`${j.width}px`,height:`${j.height}px`,minWidth:0,minHeight:0,padding:0,margin:0,zIndex:B+(R||0),overflow:le}),y.processed=!0}else{let{element:C,localBounds:w,depth:T,parentElement:R}=p;C.$initial={removed:!0},Object.assign(C.style,{position:"absolute",top:`${w.top}px`,left:`${w.left}px`,width:`${w.width}px`,height:`${w.height}px`,minWidth:0,minHeight:0,padding:0,margin:0,zIndex:T,overflow:"hidden"}),R.appendChild(C),f.set(m,{element:C,bounds:w,removed:!0,processed:!0}),u.push(C)}}for(let[,m]of f)if(!m.processed){let{element:p}=m,{style:y,parentElement:C}=p,w=m.bounds=m.localBounds;p.classList.add("b-dom-transition-adding"),b.copyProperties(p.$initial={parentElement:C},y,h),Object.assign(y,{position:"absolute",top:n.top?0:`${w.top}px`,left:n.left?0:`${w.left}px`,width:n.width?0:`${w.width}px`,height:n.height?0:`${w.height}px`,opacity:n.opacity?0:null,zIndex:C.$depth+1,overflow:"hidden"})}for(let m of l)m.scrollTop=m.$scrollTop;e.classList.add("b-dom-transition"),e.firstElementChild.offsetWidth;for(let[,{element:m,bounds:p,removed:y}]of f)y?Object.assign(m.style,{top:o.top?0:`${p.top}px`,left:o.left?0:`${p.left}px`,width:o.width?0:`${p.width}px`,height:o.height?0:`${p.height}px`,opacity:o.opacity?0:m.$initial.opacity}):Object.assign(m.style,{top:`${p.top}px`,left:`${p.left}px`,width:`${p.width}px`,height:`${p.height}px`,opacity:m.$initial.opacity});await jr.sleep(r),e.classList.remove("b-dom-transition");for(let m of u)m.$initial&&(m.$initial.removed?m.remove():(b.copyProperties(m.style,m.$initial,h),m.$scrollPlaceholder&&(m.$scrollPlaceholder.remove(),delete m.$scrollPlaceholder),m.classList.remove("b-dom-transition-adding"),m.$initial.parentElement.appendChild(m)));for(let m of l)m.scrollTop=m.$scrollTop,delete m.$scrollTop}static async loadScript(e){return new Promise((t,r)=>{let i=document.createElement("script");i.src=e,i.onload=t,i.onerror=r,document.head.appendChild(i)})}static isNamedColor(e){return e&&!/^(#|hsl|rgb)/.test(e)}},F=g,Zn,Zc=()=>F.isTouchEvent=!1,eo=()=>{F.isTouchEvent=!0,clearTimeout(Zn),Zn=setTimeout(Zc,400)};te.addEventListener("touchstart",eo,!0);te.addEventListener("touchend",eo,!0);F.canonicalStyles=ir;F.supportsTemplate="content"in te.createElement("template");F.elementPropKey=$c;F.numberRe=Kn;if(!("children"in Node.prototype)){let a=e=>e.nodeType===e.ELEMENT_NODE;Object.defineProperty(Node.prototype,"children",{get:function(){return Array.prototype.filter.call(this.childNodes,a)}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){let e=(this.document||this.ownerDocument).querySelectorAll(a),t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});He.Element&&!Element.prototype.closest?Node.prototype.closest=Element.prototype.closest=function(a){let e=this;if(!te.documentElement.contains(e))return null;do{if(e.matches(a))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===e.ELEMENT_NODE);return null}:Node.prototype.closest=function(a){return this.parentNode?.closest(a)};(function(a){a.forEach(function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]);SVGElement.prototype.contains||(SVGElement.prototype.contains=function(a){do{if(this===a)return!0;a=a.parentNode}while(a);return!1});if(typeof He.CustomEvent!="function"){let a,e;He.CustomEvent=e=function(t,r={bubbles:!1,cancelable:!1,detail:void 0}){return a=te.createEvent("CustomEvent"),a.initCustomEvent(t,r.bubbles,r.cancelable,r.detail),a},e.prototype=He.Event.prototype,He.MouseEvent=e=function(t,r={bubbles:!1,cancelable:!1,detail:void 0}){return a=te.createEvent("MouseEvents"),a.initMouseEvent(t,r.bubbles,r.cancelable,te.defaultView||He,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,document),a},e.prototype=He.Event.prototype,He.KeyboardEvent=e=function(t,r={bubbles:!1,cancelable:!1,detail:void 0}){let i=`${r.shiftKey?"Shift ":""}${r.ctrlKey?"Control":""}`;return a=te.createEvent("KeyboardEvent"),a.initKeyboardEvent(t,r.bubbles,r.cancelable,te.defaultView||He,r.key,r.location,i,!1,""),a},e.prototype=He.Event.prototype}if(!Object.getOwnPropertyDescriptor(SVGElement.prototype,"dataset")||!Object.getOwnPropertyDescriptor(SVGElement.prototype,"dataset").get){let a={enumerable:!0,get:function(){"use strict";let e,t=this,r={},i,s,n,o,l=this.attributes,c=l.length,d=function(h){return h.charAt(1).toUpperCase()},u=function(){return this},f=function(h,m){return typeof m!="undefined"?this.setAttribute(h,m):this.removeAttribute(h)};for(e=0;e<c;e++)o=l[e],o?.name&&/^data-\w[\w-]*$/.test(o.name)&&(i=o.value,s=o.name,n=s.substr(5).replace(/-./g,d),Object.defineProperty(r,n,{enumerable:this.enumerable,get:u.bind(i||""),set:f.bind(t,s)}));return r}};Object.defineProperty(SVGElement.prototype,"dataset",a)}var{add:to,remove:ro}=DOMTokenList.prototype;DOMTokenList.prototype.add=function(a){Array.isArray(a)?a.forEach(e=>to.call(this,e)):to.call(this,...arguments)};DOMTokenList.prototype.remove=function(a){Array.isArray(a)?a.forEach(e=>ro.call(this,e)):ro.call(this,...arguments)};window.addEventListener("resize",()=>sr=null);var Be=class extends k{static from(e){let t=e.changedTouches;return new Be(t?t[0].screenX:e.screenX,t?t[0].screenY:e.pageY)}constructor(e,t){super(e,t,0,0)}constrain(e){return this.x=Math.min(Math.max(this.x,e.x),e.right-1),this.y=Math.min(Math.max(this.y,e.y),e.bottom-1),this}toArray(){return[this.x,this.y]}};Object.getPrototypeOf(Be).Point=Be;var ed=["clientX","clientY","pageX","pageY","screenX","screenY"],td={element:1,thisObj:1,once:1,delegate:1,delay:1,capture:1,passive:1,throttled:1,autoDetach:1,expires:1},rd={get:()=>!0},id={Spacebar:"Space",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown"},sd={Meta:1,Control:1,Alt:1},io=5;function so(a,e){let t,r;for(;(a=Object.getPrototypeOf(a))&&!r;)t=Object.getOwnPropertyDescriptor(a,e),r=t&&t.get;return r}var Zi=class{static normalizeEvent(e){return b.copyPropertiesIf(e,e.changedTouches[0]||e.touches[0],ed)}static getXY(e){return e.touches&&(e=e.touches[0]),[e.clientX,e.clientY]}static getDistanceBetween(e,t){let r=ie.getXY(e),i=ie.getXY(t);return Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2))}static getPagePoint(e){return new k.Point(e.pageX,e.pageY)}static getClientPoint(e){return new k.Point(e.clientX,e.clientY)}static addListener(e,t,r,i){return e.nodeType?typeof t=="string"?i=Object.assign({element:e,[t]:r},i):i=Object.assign({element:e},t):i=e,ie.on(i)}static on(e){let t=e.element,r=e.thisObj,i=[];for(let n in e)if(!td[n]){let o=e[n];typeof o!="object"&&(o={handler:o});let l=o.element||t;x.isTouchDevice&&!x.isAndroid&&n==="contextmenu"&&i.push(ie.addElementListener(l,"touchstart",{handler:ie.createContextMenuWrapper(o.handler,o.thisObj||r)},e)),i.push(ie.addElementListener(l,n,o,e))}let s=()=>{for(let n,o=0;o<i.length;o++)n=i[o],ie.removeEventListener(n[0],n[1],n[2]);i.length=0};return r&&e.autoDetach!==!1&&(r.doDestroy=W.createInterceptor(r.doDestroy,s,r)),s}static addElementListener(e,t,r,i){let s=ie.createHandler(e,t,r,i),n="passive"in r,o=r.expires||i.expires,l=r.capture||i.capture;if((n||"passive"in i)&&x.supportsPassive&&(l={capture:!!l,passive:n?r.passive:i.passive}),e.addEventListener(t,s,l),o){let c=r.thisObj||i.thisObj,d=c?.isDelayable?c:window,{alt:u}=o,f=u?o.delay:o,{spec:h}=s;h.expires=o,h.timerId=d[typeof f=="number"?"setTimeout":"requestAnimationFrame"](()=>{h.timerId=null,ie.removeEventListener(e,t,s),u&&!s.called&&(typeof u=="string"?c[u]:u).call(c)},f,`listener-timer-${performance.now()}`)}return[e,t,s,l]}static fixEvent(e){let{type:t}=e;if(t.startsWith("key")){let r=id[e.key];r&&Object.defineProperty(e,"key",{get:()=>r}),e.key===" "&&!e.code&&Object.defineProperty(e,"code",{get:()=>"Space"})}if(e.metaKey&&!e.ctrlKey&&Object.defineProperty(e,"ctrlKey",rd),e.target?.shadowRoot&&e.composedPath&&!x.isIE11&&!x.isEdge){let r=e.composedPath()[0],i=e.target;e.target!==r&&(Object.defineProperty(e,"target",{get:()=>r,configurable:!0}),Object.defineProperty(e,"originalTarget",{get:()=>i,configurable:!0}))}if(x.isChrome&&e.target&&"offsetX"in e&&(Object.getOwnPropertyDescriptor(e,"offsetX")||Object.defineProperty(e,"offsetX",{get:()=>{let r=so(e,"offsetX"),i=r.call(e),{target:s}=e,{offsetWidth:n}=s,o=Math.min(Math.max(i,0),n-1);return i<0||i>=n?o:i}}),Object.getOwnPropertyDescriptor(e,"offsetY")||Object.defineProperty(e,"offsetY",{get:()=>{let r=so(e,"offsetY"),i=r.call(e),{target:s}=e,{offsetHeight:n}=s,o=Math.min(Math.max(i,0),n-1);return i<0||i>=n?o:i}})),e.target?.nodeType===Element.DOCUMENT_NODE&&"clientX"in e){let r=g.elementFromPoint(e.clientX,e.clientY);Object.defineProperty(e,"target",{get:()=>r})}if(e.target?.nodeType===Element.TEXT_NODE){let r=e.target.parentElement;Object.defineProperty(e,"target",{get:()=>r})}if(e.relatedTarget?.nodeType===Element.TEXT_NODE){let r=e.target.parentElement;Object.defineProperty(e,"relatedTarget",{get:()=>r})}return t.startsWith("touch")&&e.touches.length&&this.normalizeEvent(e),e}static createHandler(e,t,r,i){let s=r.delay||i.delay,n=r.throttled||i.throttled,o=r.block||i.block,l=r.once||i.once,c=r.thisObj||i.thisObj,d=r.capture||i.capture,u=r.delegate||i.delegate,f=r.handler,h=(m,...p)=>{if(h.called=!0,!(ie.playingDemo&&m.isTrusted)&&!(c&&c.isDestroyed)){if(m=ie.fixEvent(m),u){let y=m.target.closest?.call&&m.target.closest(u);if(!y)return;Object.defineProperty(m,"currentTarget",{get:()=>y,configurable:!0})}(typeof f=="string"?c[f]:f).call(c,m,...p)}};if(o){let m=h,p,y;h=(C,...w)=>{let T=performance.now();(!p||C.target!==y||T-p>o)&&(y=C.target,p=T,m(C,...w))}}if(s!=null){let m=h,p=c&&c.setTimeout?c:window;h=(...y)=>{p.setTimeout(()=>{m(...y)},s)}}if(n!=null){let m,p=n;n.buffer&&(m=y=>n.alt.call(ie,ie.fixEvent(y)),p=n.buffer),c&&c.isDelayable?h=c.throttle(h,{delay:p,throttled:m}):h=W.createThrottled(h,p,c,null,m)}if(l){let m=h;h=(...p)=>{ie.removeEventListener(e,t,h),m(...p)}}return r.thisObj&&r.autoDetach!==!1&&(c.doDestroy=W.createInterceptor(c.doDestroy,()=>ie.removeEventListener(e,t,h),c)),h.spec={delay:s,throttled:n,block:o,once:l,thisObj:c,capture:d,delegate:u},h}static removeEventListener(e,t,r){let{expires:i,timerId:s,thisObj:n,capture:o}=r.spec;i?.alt&&s&&(n?.isDelayable?n:window)[typeof i.delay=="number"?"clearTimeout":"cancelAnimationFrame"](s),e.removeEventListener(t,r,o)}static onTransitionEnd({element:e,property:t,handler:r,mode:i="transition",duration:s=g[`get${i==="transition"?"Property":""}${M.capitalize(i)}Duration`](e,t),thisObj:n=window,args:o=[]}){let l,c=[e,t,...o],d=n.isDelayable?n:window,u=()=>{f(),n.isDestroyed||(n.callback?n.callback(r,n,c):r.apply(n,c))},f=ie.on({element:e,[`${i}end`]({propertyName:h,target:m}){h===t&&m===e&&(l&&(d.clearTimeout(l),l=null),u())}});return s!=null&&(l=d.setTimeout(u,s+50)),f}static async waitForTransitionEnd(e){return new Promise(t=>{e.handler=t,Zi.onTransitionEnd(e)})}static createContextMenuWrapper(e,t){return r=>{if(r.touches.length===1){let i=r.touches[0],s=setTimeout(()=>{o();let l=new MouseEvent("contextmenu",i);Object.defineProperty(l,"target",{get(){return i.target}}),typeof e=="string"&&(e=t[e]),l.browserEvent=r,e.call(t,l),ie.contextMenuTouchId=i.identifier},ie.longPressTime),n=({clientX:l,clientY:c,type:d})=>{let u=d==="touchend"||d==="pointerup";if(!u){let f=Math.abs(l-i.clientX),h=Math.abs(c-i.clientY);u=f>=io||h>=io}u&&(ie.contextMenuTouchId=null,o(),clearTimeout(s))},o=ie.on({element:document,touchmove:n,touchend:n,pointermove:n,pointerup:n,capture:!0})}}}static createDblClickWrapper(e,t,r){let i,s,n;return()=>{s||(s=ie.on({element:e,touchstart:o=>{i=o.changedTouches[0].identifier,o.preventDefault()},touchend:o=>{if(o.changedTouches[0].identifier===i){o.preventDefault(),clearTimeout(n),i=s=null;let l=k.from(o.changedTouches[0].target,null,!0),c=o.changedTouches[0].pageX-l.x,d=o.changedTouches[0].pageY-l.y,u=Object.assign({browserEvent:o},o),f=new MouseEvent("dblclick",u);Object.defineProperty(f,"target",{get(){return o.target}}),Object.defineProperty(f,"offsetX",{get(){return c}}),Object.defineProperty(f,"offsetY",{get(){return d}}),typeof t=="string"&&(t=r[t]),t.call(r,f)}},once:!0}),n=setTimeout(()=>{s(),i=s=null},ie.dblClickTime))}}},O=Zi;rn(O,"eventNameMap",{mousedown:"MouseDown",mouseup:"MouseUp",click:"Click",dblclick:"DblClick",contextmenu:"ContextMenu",mouseover:"MouseOver",mouseout:"MouseOut"});var ie=O;ie.longPressTime=500;ie.dblClickTime=300;ie.on({element:document,mousedown({target:a}){if(!g.isTouchEvent){let e=g.getRootElement(a);g.usingKeyboard=!1,e.classList?.remove("b-using-keyboard"),g.removeClsGlobally(e,"b-using-keyboard")}},touchmove({changedTouches:a}){let e=a[0].target,t=g.getRootElement(e);g.usingKeyboard=!1,t.classList?.remove("b-using-keyboard"),g.removeClsGlobally(t,"b-using-keyboard")},keydown({target:a,key:e}){if(!sd[e]){g.usingKeyboard=!0;let t=g.getRootElement(a);t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach(r=>{r.matches(".b-outer")&&r.classList.add("b-using-keyboard")}):t.classList.add("b-using-keyboard")}}});x.isTouchDevice&&ie.on({element:document,touchmove:a=>{a.target.closest(".b-dragging")&&a.preventDefault()},passive:!1,capture:!0});var{defineProperty:es}=Reflect,Kr;x.isBrowserEnv?Kr=window.performance:Kr={now(){return new Date().getTime()}};var se=null;if(z.isTestEnv){let a=x.global.bryntum||(x.global.bryntum={});se=a.globalDelays={timeouts:new Map,intervals:new Map,animationFrames:new Map,isEmpty(e=!1){return se.timeouts.size+se.animationFrames.size+(e?se.intervals.size:0)===0}}}var Yr=(a,e,t,r)=>{let i=typeof e=="string",s=r&&r.appendArgs||[],n=()=>{t.timerId=null,t.lastCallTime=Kr.now();let o=t.args;t.args=null,i?a[e](...o,...s):e.call(a,...o,...s),t.called=!0,++t.calls};return r&&(a=r.thisObj||a),t.lastCallTime=-9e9,t.calls=0,t.invoker=n,n.wrapFn=t,n},ts=(a,e,t="clearTimeout")=>(e.cancel=()=>{e.isPending&&(a[t](e.timerId),e.args=e.timerId=null)},e.flush=()=>{e.isPending&&(a[t](e.timerId),e.timerId=null,e.invoker())},e.now=(...r)=>{e.cancel(),e.args=r,e.invoker()},e.resume=r=>{let i=e.suspended;e.suspended=r||i<1?0:i-1},e.suspend=()=>{++e.suspended},e.immediate=!1,e.suspended=0,e.timerId=null,es(e,"isPending",{get(){return e.timerId!==null}}),e),we=a=>class extends(a||S){static get $name(){return"Delayable"}static get declarable(){return["delayable"]}doDestroy(){let t=this;super.doDestroy(),t.timeoutIds&&(t.timeoutIds.forEach((r,i)=>{typeof r=="function"&&r(),clearTimeout(i),se&&se.timeouts.delete(i)}),t.timeoutIds=null),t.timeoutMap&&(t.timeoutMap.forEach((r,i)=>clearTimeout(i)),t.timeoutMap=null),t.intervalIds&&(t.intervalIds.forEach(r=>{clearInterval(r),se&&se.intervals.delete(r)}),t.intervalIds=null),t.animationFrameIds&&(t.animationFrameIds.forEach(r=>{cancelAnimationFrame(r),se&&se.animationFrames.delete(r)}),t.animationFrameIds=null)}hasTimeout(t){return!!(this.timeoutMap&&this.timeoutMap.has(t))}setTimeout({fn:t,delay:r,name:i,runOnDestroy:s,cancelOutstanding:n,args:o}){(arguments.length>1||typeof arguments[0]=="function")&&([t,r,i,s]=arguments),typeof t=="string"?i=t:i||(i=t.name),n&&this.clearTimeout(i);let l=this,c=l.timeoutIds||(l.timeoutIds=new Map),d=l.timeoutMap||(l.timeoutMap=new Map),u=setTimeout(()=>{typeof t=="string"&&(t=l[i]),c&&c.delete(u),d&&d.delete(i),se&&se.timeouts.delete(u),t.apply(l,o)},r);return c.set(u,s?t:!0),se&&se.timeouts.set(u,{fn:t,delay:r,name:i}),i&&d.set(i,u),u}clearTimeout(t){let r=t;if(typeof r=="string")if(this.timeoutMap)r=this.timeoutMap.get(t),this.timeoutMap.delete(t);else return;clearTimeout(r),this.timeoutIds&&this.timeoutIds.delete(r),se&&se.timeouts.delete(r)}clearInterval(t){clearInterval(t),this.intervalIds&&this.intervalIds.delete(t),se&&se.intervals.delete(t)}setInterval(t,r){let i=setInterval(t,r);return(this.intervalIds||(this.intervalIds=new Set)).add(i),se&&se.intervals.set(i,{fn:t,delay:r}),i}requestAnimationFrame(t,r=[],i=this){let s=this.animationFrameIds||(this.animationFrameIds=new Set),n=requestAnimationFrame(()=>(se&&se.animationFrames.delete(n),s.delete(n),t.apply(i,r)));return s.add(n),se&&se.animationFrames.set(n,{fn:t,extraArgs:r,thisObj:i}),n}createOnFrame(t,r=[],i=this,s){let n,o=(...l)=>{n&&s&&(this.cancelAnimationFrame(n),n=null),n||(n=this.requestAnimationFrame(()=>{typeof t=="string"&&(t=i[t]),n=null,l.push(...r),t.apply(i,l)}))};return o.cancel=()=>this.cancelAnimationFrame(n),o}cancelAnimationFrame(t){cancelAnimationFrame(t),this.animationFrameIds&&this.animationFrameIds.delete(t),se&&se.animationFrames.delete(t)}async nextAnimationFrame(){return new Promise(t=>this.requestAnimationFrame(t))}buffer(t,r){let i=r;r&&typeof r!="number"?i=r.delay:r=null;let s=(...o)=>{if(s.suspended)return;let{delay:l}=s;s.cancel(),s.called=!1,s.args=o,s.immediate||!l?n():s.timerId=this.setTimeout(n,l)},n=Yr(this,t,s,r);return s.delay=i,ts(this,s)}raf(t,r){let i=r;r&&typeof r!="boolean"?i=r.cancelOutstanding:r=null;let s=(...o)=>{s.suspended||(s.cancelOutstanding&&s.cancel(),s.called=!1,s.args=o,s.immediate?n():s.isPending||(s.timerId=this.requestAnimationFrame(n)))},n=Yr(this,t,s,r);return s.cancelOutstanding=i,ts(this,s,"cancelAnimationFrame")}throttle(t,r){let i=r,s;r&&typeof r!="number"?(i=r.delay,s=r.throttled):r=null;let n=this,o=(...c)=>{if(o.suspended)return;let{delay:d}=o,u=Kr.now()-o.lastCallTime;o.args=c,o.immediate||u>=d?(n.clearTimeout(o.timerId),l()):(o.isPending||(o.timerId=n.setTimeout(l,d-u),o.called=!1),s&&(s.wrapFn.args=c,s()))},l=Yr(n,t,o,r);return o.delay=i,s&&(s=Yr(n,s,()=>{},r)),ts(n,o)}static setupDelayable(t){t.setupDelayableMethods(t.delayable)}static setupDelayableMethods(t,r=null){let i=this,s=t.static,n=r||i.prototype;s&&delete t.static;for(let o in t){let l=t[o],c=o+"Now",d=typeof l;n[c]=n[o],d==="number"?l={type:"buffer",delay:l}:d==="string"&&(l={type:l}),es(n,o,{get(){let u=this[l.type]((...f)=>{this[c](...f)},l);return es(this,o,{value:u}),u}})}}get widgetClass(){}};var jt=class{constructor(e){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),e&&e(this)}};var no=Array.prototype.slice,oo=Object.freeze([]),nd=Object.freeze({}),lo=/[&<]/,{getPrototypeOf:ao}=Object,{toString:od}=Object.prototype,{isEqual:co,isObject:ld}=b,ad={parent:1,elementData:1,ns:1,syncOptions:1},uo=()=>({ignore:ad,refsFound:new Set}),fo={class:1,className:1,classname:1},cd={bigint:1,boolean:1,function:1,number:1,string:1,symbol:1},dd={tag:1,html:1,text:1,children:1,tooltip:1,parent:1,nextSibling:1,ns:1,reference:1,elementData:1,retainElement:1,compareHtml:1,syncOptions:1,listeners:1,isReleased:1,null:1,"":1},ud=(a,e)=>{let t="className"in e?"className":"class",r=e[t];if(r)if(typeof r=="string"){let i=r.split(" ");i.includes(a)||(i.push(a),e[t]=i.join(" "))}else Array.isArray(r)?r.includes(a)||r.push(a):r.isDomClassList?r.add(a):b.isObject(r)&&(r[a]=1)},fd=(a,e)=>{let t="className"in e?"className":"class",r=e[t];if(r)if(typeof r=="string"){let i=r.split(" ");i.includes(a)&&(i.splice(i.indexOf(a),1),e[t]=i.join(" "))}else Array.isArray(r)?r.includes(a)&&r.splice(r.indexOf(a),1):r.isDomClassList?r.remove(a):b.isObject(r)&&delete r[a]},_=class{static checkEquality(e,t,r,i){if(e===t)return!0;if(e==null)return t==null;if(!e||!t)return!1;let s=typeof e;if(s!==typeof t||cd[s])return!1;let o=r.equalityCache||(r.equalityCache=new Map),l=Boolean(i),c,d,u,f,h,m,p;if(o=o.get(e)||o.set(e,new Map).get(e),c=o.get(t),c===void 0){if(c=!0,ao(e)!==ao(t)||e instanceof Node)c=!1;else if(Array.isArray(e)){if(d=e.length,d!==t.length)c=!1;else for(;d-- >0;)if(!_.checkEquality(e[d],t[d],r,l)){c=!1;break}}else{m=e.syncOptions,f=m?.ignoreRefs,f&&(l=!0,i=f!=="children"),u=r.ignore||nd;for(h in t)if(!u[h]&&!(h in e)&&!(i&&h==="reference")){c=!1;break}if(c){if(od.call(t)==="[object Date]")c=e.getTime()===t.getTime();else for(h in e)if(!u[h]&&!(i&&h==="reference")){if(!(h in t)){c=!1;break}if(p=e[h],!_.checkEquality(p,t[h],r,l)){c=!1;break}}}}!i&&ld(e)&&e.reference&&r.refsFound?.add(e.reference),o.set(t,c)}return c}static sync(e){let t=e,{refOwner:r}=e,i=r?.byRef,s=uo(),n=e.affected,o,l,c,d;if(typeof n=="string"&&(n=[n]),e={...e,checkEqualityOptions:s},r){if(r.byRef={},n)for(l in i)n.includes(l)||(r.byRef[l]=i[l]);e.refsWas=i}if(t.changed=_.performSync(e,e.targetElement),r)for(n||(n=Object.keys(i)),o=0;o<n.length;++o)l=n[o],c=i[l],s.refsFound.has(l)||c.retainElement?r.byRef[l]=c:(d=c.lastDomConfig,c.remove(),r.detachRef(l,c,d));return e.targetElement}static performSync(e,t){let{domConfig:r,callback:i}=e,{lastDomConfig:s}=t;if((e.configEquality||_.checkEquality)(r,s,e.checkEqualityOptions,e.ignoreRefs))i?.({action:"none",domConfig:r,targetElement:t});else return r?(r.onlyChildren||(_.syncAttributes(r,t,e),_.syncContent(r,t)),_.syncChildren(e,t)):(t.innerHTML=null,t.syncIdMap=null),t.lastDomConfig=r?.onlyChildren&&s?{...s,children:r.children}:r,!0;return!1}static syncDataset(e,t){let{lastDomConfig:r}=t,i=e===r,s=Object.keys(e.dataset),n=r&&r.dataset&&Object.keys(r.dataset),o=U.delta(s,n),l,c,d,u;for(c=0;c<o.onlyInA.length;c++)l=o.onlyInA[c],u=e.dataset[l],u!=null&&t.setAttribute(`data-${M.hyphenate(l)}`,u);for(c=0;c<o.inBoth.length;c++)l=o.inBoth[c],u=e.dataset[l],(i||u!=r.dataset[l])&&(d=`data-${M.hyphenate(l)}`,u==null?t.removeAttribute(d):t.setAttribute(d,u));for(c=0;c<o.onlyInB.length;c++)t.removeAttribute(`data-${M.hyphenate(o.onlyInB[c])}`)}static addCls(e,t){let{lastDomConfig:r}=t;e=P.normalize(e,"array"),e.forEach(i=>{t.classList.add(i),ud(i,r)})}static removeCls(e,t){let{lastDomConfig:r}=t;e=P.normalize(e,"array"),e.forEach(i=>{t.classList.remove(i),fd(i,r)})}static syncClassList(e,t,r){let i=e.className||e.class,s,n,o,l,c,d;if(r){for(n=P.normalize(t,"array"),i=P.normalize(i,"object"),d=P.normalize(r.className||r.class,"object"),c=[],o=0,l=n.length;o<l;++o)s=n[o],(i[s]||!(s in d))&&(d[s]=1,c.push(s));for(s in i)d[s]||c.push(s);i=c.join(" ")}else i=P.normalize(i);t.setAttribute("class",i)}static getSyncAttributes(e){let t={},r=[];return e&&Object.keys(e).forEach(i=>{if(!dd[i]){let s=i.toLowerCase();t[s]=e[i],r.push(s)}}),{attributes:t,names:r}}static syncAttributes(e,t,r){let{lastDomConfig:i}=t,s=e===i,n=_.getSyncAttributes(e),{attributes:o,names:l}=n,{attributes:c,names:d}=s?n:_.getSyncAttributes(i),{onlyInA:u,onlyInB:f,inBoth:h}=s?{onlyInA:oo,onlyInB:oo,inBoth:l}:U.delta(l,d),m,p;for(p=0;p<u.length;p++){m=u[p];let y=o[m];m==="style"&&y!=null?g.applyStyle(t,y,!0):m==="dataset"?_.syncDataset(e,t):fo[m]?_.syncClassList(e,t):y!=null&&t.setAttribute(m,y)}for(p=0;p<f.length;p++)t.removeAttribute(f[p]);for(p=0;p<h.length;p++){m=h[p];let y=o[m],C=c[m];y==null?t.removeAttribute(m):m==="style"?r.strict?s?_.syncStyles(t,y):co(y,C,!0)||_.syncStyles(t,y,C):(s||!co(y,C,!0))&&g.applyStyle(t,y,!0):m==="dataset"?_.syncDataset(e,t):fo[m]?_.syncClassList(e,t,r.strict&&t.lastDomConfig):(s||y!==C)&&t.setAttribute(m,y)}}static syncStyles(e,t,r){let i,s,n;if(!r)i=t;else{if(i={},t=g.parseStyle(t),r=g.parseStyle(r),t)for(s in t)n=t[s],r[s]!==n&&(i[s]=n);for(s in r)s in t||(i[s]="")}g.applyStyle(e,i)}static syncContent(e,t){let{html:r,text:i}=e,s=i??r;if(e.elementData&&(t.elementData=e.elementData),s instanceof DocumentFragment)t.childNodes.length===1&&g.getChildElementCount(t)===0&&s.childNodes.length===1&&g.getChildElementCount(s)===0?g.setInnerText(t,s.firstChild.data):(t.innerHTML="",t.appendChild(s));else if(r!=null&&lo.test(r))t.innerHTML=String(r);else if(s!=null){let{lastDomConfig:n}=t;n?.children?.length||n?.html&&lo.test(t.lastDomConfig.html)?t.innerHTML=s:g.setInnerText(t,String(s))}}static insertTextNode(e,t,r,i,s=null){let n=document.createTextNode(e);t.insertBefore(n,s),i&&(n.$refOwnerId=i.id),r?.({action:"newNode",domConfig:e,targetElement:n})}static insertElement(e,t,r,i,s,n,o){let l=o.ns?document.createElementNS(o.ns,e.tag||"svg"):document.createElement(e.tag||"div");t.insertBefore(l,r),_.performSync(o,l),n!=null&&(s[n]=l),i&&(l.$refOwnerId=i.id,n&&(l.$reference=n,i.attachRef(n,l,e))),o.callback?.({action:"newElement",domConfig:e,targetElement:l,syncId:n})}static syncChildren(e,t){let{domConfig:r,syncIdField:i,callback:s,releaseThreshold:n,configEquality:o,ns:l,refOwner:c,refsWas:d,strict:u,checkEqualityOptions:f,ignoreRefs:h}=e,m=r.syncOptions||{},p=null,y,C,w;if(r.html??r.text)return;h=Boolean(m.ignoreRefs??h),h&&(c=d=null),"strict"in m&&(u=m.strict);let T=c?c.byRef:{},R=no.call(r.children||[]),H=no.call(t.childNodes),A=d||t.syncIdMap||{},B=t.releasedIdMap||{},N=j=>{for(;H.length&&H[0].parentNode!==t;)H.shift();return(j?H.shift():H[0])||null};i=m.syncIdField||i,u=m.strict||u,s=m.callback||s,o=m.configEquality||o,n="releaseThreshold"in m?m.releaseThreshold:n,i&&(t.syncIdMap=T);let V={checkEqualityOptions:f||uo(),ignoreRefs:h,refOwner:c,refsWas:d,strict:u,syncIdField:i,releaseThreshold:n,callback:s,configEquality:o};for(;R.length;){let j=R.shift();if(w=null,!j)continue;if(j instanceof Node){C=N(),j!==C&&t.insertBefore(j,C),y=H.indexOf(j),y>-1&&H.splice(y,1);continue}let le=typeof j=="string";if(V.domConfig=j,V.ns=j.ns||l,!le){if(c?w=j.reference:i&&j.dataset&&(w=j.dataset[i]),w!=null&&!j.unmatched){let $=A[w]||B[w];if($){let{lastDomConfig:he}=$;$.retainElement||_.performSync(V,$)&&s?.({action:"reuseOwnElement",domConfig:j,targetElement:$,lastDomConfig:he,syncId:w}),j.retainElement&&($.retainElement=!0),T[w]=$,U.remove(H,$),delete B[w],$.isReleased=!1,C=N(),($.parentNode!==t||u&&$.nextSibling!==C)&&t.insertBefore($,C)}else u?_.insertElement(j,t,N(),c,T,w,V):(R.push(j),j.unmatched=!0);continue}j.unmatched&&delete j.unmatched}let G=null,q=null,J;for(;!q&&(J=N(!0));){if(c){if(J.$refOwnerId!==c.id)continue;if(J.$reference){if(!u)continue;G=J;break}q=J}else J.retainElement||(q=J);q||(p||(p=[])).push(J)}if(G||!q)le?_.insertTextNode(j,t,s,c,G):_.insertElement(j,t,G,c,T,w,V);else if(!le&&q.nodeType===Node.ELEMENT_NODE&&(j.tag||"div").toLowerCase()===q.tagName.toLowerCase()){let{lastDomConfig:$}=q,he=_.performSync(V,q);i&&$?.dataset?.[i]!=null&&delete B[$.dataset[i]],w!=null&&(T[w]=q),q.isReleased=!1,he&&s?.({action:"reuseElement",domConfig:j,targetElement:q,lastDomConfig:$,syncId:w})}else le&&q.nodeType===Node.TEXT_NODE?q.data=j:(le?_.insertTextNode(j,t,s,c,q):_.insertElement(j,t,q,c,T,w,V),q.remove())}for(;C=N(!0);)(!c||C.$refOwnerId===c.id&&!C.$reference)&&(p||(p=[])).push(C);p&&_.syncChildrenCleanup(t,p,T,s,c,n,i)}static syncChildrenCleanup(e,t,r,i,s,n,o){let l=0,c;for(let d of t){let{lastDomConfig:u}=d;d.retainElement?o&&u&&(r[d.dataset[o]]=d):!s&&o&&(n==null||l<n)?(d.isReleased||(d.className="b-released",d.isReleased=!0,u?.dataset&&(e.releasedIdMap||(e.releasedIdMap={}),e.releasedIdMap[u.dataset[o]]=d),i?.({action:"releaseElement",domConfig:u,lastDomConfig:u,targetElement:d}),u&&(u.isReleased=!0,u.className&&(u.className="b-released"),u.class&&(u.class="b-released"),u.style&&(u.style=null))),l++):(d.remove(),s&&(c=d.$reference,c&&s.detachRef(c,d,u)),e.releasedIdMap&&o&&u?.dataset&&delete e.releasedIdMap[u.dataset[o]],i?.({action:"removeElement",domConfig:d.lastDomConfig,lastDomConfig:d.lastDomConfig,targetElement:d}))}}static removeChild(e,t){if(e.contains(t)){let r=e.syncIdMap;if(r){let i=Object.values(r).indexOf(t);i>-1&&delete r[Object.keys(r)[i]]}e.removeChild(t)}}static addChild(e,t,r){e.appendChild(t),e.syncIdMap[r]=t}static getChild(e,t){let r=String(t).split(".");for(let i of r)if(e=e?.syncIdMap?.[i],!e)return null;return e}};var ho=b.getPathDefault(x.global,"bryntum.idCounts",Object.create(null)),hd={string:1,number:1},ft=a=>class extends(a||S){static get $name(){return"Identifiable"}static get declarable(){return["identifiable"]}static get configurable(){return{id:""}}static setupIdentifiable(t,r){let{identifiable:i}=t;i.idMap=Object.create(null),Reflect.defineProperty(t,"identifiable",{get(){return i}})}doDestroy(){this.constructor.unregisterInstance(this),super.doDestroy()}changeId(t){return(this.hasGeneratedId=!t)?this.generateAutoId():t}updateId(t,r){let i=this,s=i.constructor;r&&s.unregisterInstance(i,r),(!i.hasGeneratedId||s.identifiable.registerGeneratedId!==!1)&&s.registerInstance(i,t)}generateAutoId(){return this.constructor.generateId(`b-${this.$$name.toLowerCase()}-`)}static get all(){return Object.values(this.identifiable.idMap)}static generateId(t="generatedId"){return t+(ho[t]=(ho[t]||0)+1)}static registerInstance(t,r=t.id){let{idMap:i}=this.identifiable;if(r in i&&!this.disableThrow)throw new Error("Id "+r+" already in use");i[r]=t}static unregisterInstance(t,r=t.id){let{idMap:i}=this.identifiable;hd[typeof t]?delete i[t]:i[r]===t&&delete i[r]}static getById(t){let r=this.identifiable.idMap;if(r)return r[t]}static get registeredInstances(){let t=this.identifiable.idMap;return t?Object.values(t):[]}};var{defineProperty:rs}=Reflect,et=class extends S.mixin(_e,re,we,ft){static get configurable(){return{element:null}}static get delayable(){return{refreshDom:"raf"}}static get identifiable(){return{}}static get renderConfigs(){let e=this,t=e.$meta,r=t.renderConfigs,i,s;if(r===void 0){r=null,i=t.configs;for(s in i)i[s].render&&(r||(r=new Set)).add(s);t.renderConfigs=e.prototype.$renderConfigs=r}return r}construct(...e){this.$iid=++et.$idSeed,this.byRef={},super.construct(...e),this.onDraw!==et.prototype.onDraw&&this.initDrawable()}startConfigure(e){this.element=this.renderContext.renderDom(),super.startConfigure(e)}get element(){return this.refreshDom.flush(),this._element}changeElement(e,t){let r=this;return t&&t.remove(),e&&(e.id=r.id,e=g.createElement(e,{refOwner:r})),e}updateId(e,t){let r=this;if(t){let i=r.element;i.id=e,r.fixRefOwnerId(i,e,t)}}get classes(){return this.element.classList}fixRefOwnerId(e,t,r){if(e.$refOwnerId===r){e.$refOwnerId=t;let i=e.$reference;i&&(e.id=`${t}-${i}`);for(let s of e.childNodes)this.fixRefOwnerId(s,t,r)}}onConfigChange({name:e}){!this.isConfiguring&&this.$renderConfigs.has(e)&&this.refreshDom()}attachRef(e,t,r){let i=this,s="_"+e,{listeners:n}=r;s in i||rs(i,e,{get(){return i.refreshDom.flush(),i[s]},set(o){i[s]=o}}),t.id=`${i.id}-${e}`,i.byRef[e]=t,i[e]=t,n&&(r.listeners={on:n,un:O.on(Object.assign({element:t,thisObj:i},n))})}detachRef(e,t,r){r.listeners&&(r.listeners.un(),r.listeners=null),this[e]=null,delete this.byRef[e]}renderDom(){return{}}get renderContext(){let e=this,t=e.$meta,r=e.constructor,i=t.renderConfigs||r.renderConfigs,s=e;if(!i){s=Object.create(e),i=new Set;for(let n in t.configs)rs(s,n,{get(){return i.add(n),e[n]}});s.renderDom=()=>e.renderDom.call(s),e.$renderConfigs=i}return rs(e,"renderContext",{value:s}),s}refreshDom(){_.sync({targetElement:this.element,domConfig:this.renderContext.renderDom(),refOwner:this,strict:!0})}onListen(e){e==="draw"&&this.initDrawable()}initDrawable(){let e=this;if(!e.intersector){let t=Object.values(e.byRef).find(r=>r.classList.contains("b-drawable"));t||(t=e.element,t.classList.add("b-drawable")),e.intersector=!0,O.on({element:g.createElement({parent:t,class:"b-drawable-el"}),animationend({animationName:r}){r==="b-drawable-anim"&&e.onDraw({count:++e.drawCounter})}})}}onDraw(e){this.trigger("draw",e)}};et.$idSeed=0;Object.assign(et.prototype,{drawCounter:0,hasGeneratedId:!1,intersector:null});var Ae=class extends et{static get $name(){return"Mask"}static get type(){return"mask"}static get configurable(){return{autoClose:null,cover:null,icon:"b-icon b-icon-spinner",errorDefaults:{icon:"b-icon b-icon-warning",autoClose:3e3,showDelay:0},maxProgress:null,mode:"dark",progress:null,owner:null,target:null,text:null,type:null,showDelay:null,useTransition:!1}}static get delayable(){return{deferredClose:0,delayedShow:0}}construct(e){if(e){let t=e.element,r;t&&(z.deprecate("Core","4.0.0",'Mask "element" config has been renamed to "target"'),e=r=Object.assign({},e),delete r.element,r.target=t),t=e.target,typeof t=="string"&&(e=r=r||Object.assign({},e),r.target=e.owner[t])}super.construct(e),this.target||(this.target=document.body),this.show()}doDestroy(){let e=this,{element:t}=e;if(e.type==="trial")return!1;t&&(e.element=null,e.mode.endsWith("blur")&&g.forEachChild(t,r=>{r.classList.remove(`b-masked-${e.mode}`)}),e.target.classList.remove("b-masked"),e.target[e.maskName]=null),super.doDestroy()}get maskElement(){return this.element}get maskName(){let e=this.type;return`mask${typeof e=="string"?e.trim():""}`}set error(e){this.setConfig(this.errorDefaults),this.text=e}renderDom(){let e=this,{maxProgress:t}=e;return{class:{"b-mask":1,"b-delayed-show":e.showDelay,"b-widget":1,[`b-mask-${e.mode}`]:1,"b-progress":t,"b-prevent-transitions":!e.useTransition},children:[{reference:"maskContent",class:"b-mask-content b-drawable",children:[t?{reference:"progressElement",class:"b-mask-progress-bar",style:{width:`${Math.max(0,Math.min(100,Math.round(e.progress/t*100)))}%`}}:null,{reference:"maskText",class:"b-mask-text",html:(e.icon?`<i class="b-mask-icon ${e.icon}"></i>`:"")+e.text}]}]}}static mergeConfigs(...e){let t={};for(let r of e)typeof r=="string"?t.text=r:b.assign(t,r);return t}static mask(e,t=document.body){return new Ae(typeof e!="string"?Object.assign({target:t},e):{target:t,text:e})}static unmask(e=document.body){return e.mask&&e.mask.close()}updateAutoClose(e){let t=this;t.deferredClose.cancel(),e&&(t.deferredClose.delay=e,t.deferredClose())}updateCover(){let e=this.owner;e&&e.syncMaskCover&&e.syncMaskCover(this)}updateShowDelay(e){let t=this.delayedShow;t.delay=e,e||t.flush()}deferredClose(){let e=this.owner;this.close().then(()=>{e&&e.onMaskAutoClose&&e.onMaskAutoClose(this)}),e&&e.onMaskAutoClosing&&e.onMaskAutoClosing(this)}delayedShow(){this.classes.remove("b-delayed-show")}show(){let e=this,{element:t,target:r,hiding:i,maskName:s}=e;i&&(i.resolve(),e.hiding=null,e.clearTimeout("hide")),e.showDelay&&(t.classList.add("b-delayed-show"),e.delayedShow()),t.classList.add("b-visible"),t.classList.remove("b-hidden"),r.classList.add("b-masked"),r[s]||(r[s]=e,r.appendChild(t)),e.shown=!0,e.trigger("show"),e.mode.endsWith("blur")&&g.forEachChild(r,n=>{n!==t&&n.classList.add(`b-masked-${e.mode}`)})}hide(){let e=this,{target:t,element:r}=e,i=e.hiding;if(!i){if(!e.shown)return Promise.resolve();e.hiding=i=new jt,e.shown=!1,r.classList.remove("b-visible"),r.classList.add("b-hidden"),t.classList.remove("b-masked"),e.mode.endsWith("blur")&&g.forEachChild(t,s=>{s!==r&&s.classList.remove(`b-masked-${e.mode}`)}),i.promise=i.promise.then(()=>{e.hiding===i&&(e.hiding=null)}),e.setTimeout(()=>i.resolve(),500,"hide")}return i.promise}close(){return this.hide().then(()=>{this.destroy()})}};var Te=class{static init(){let e=["fullscreenEnabled","requestFullscreen","exitFullscreen","fullscreenElement"],t=n=>e.map(o=>{let l=n+M.capitalize(o);return n==="moz"&&(l=l.replace("screen","Screen"),"mozCancelFullScreen"in document&&o==="exitFullscreen"&&(l="mozCancelFullScreen")),l});this.functions="fullscreenEnabled"in document&&e||"webkitFullscreenEnabled"in document&&t("webkit")||"mozFullScreenEnabled"in document&&t("moz")||"msFullscreenEnabled"in document&&t("ms")||[];let r=["fullscreenchange","fullscreenerror"],i=["MSFullscreenChange","MSFullscreenError"],s=n=>r.map(o=>n+M.capitalize(o));this.events="fullscreenEnabled"in document&&r||"webkitFullscreenEnabled"in document&&s("webkit")||"mozFullscreenEnabled"in document&&s("moz")||"msFullscreenEnabled"in document&&i||[]}static get enabled(){return document[this.functions[0]]}static request(e){return e[this.functions[1]]()}static exit(){return document[this.functions[2]]()}static get isFullscreen(){return!!this.element}static get element(){return document[this.functions[3]]}static onFullscreenChange(e){document.addEventListener(this.events[0],e)}static unFullscreenChange(e){document.removeEventListener(this.events[0],e)}};Te.init();var is=null,ss=[],md=a=>a.nodeType===a.ELEMENT_NODE&&a.ownerDocument.defaultView?.getComputedStyle(a).getPropertyValue("position")==="absolute",ce=class{static addResizeListener(e,t){let r=this;if((e===document||e===window)&&(e=document.body),e.nodeType===e.DOCUMENT_FRAGMENT_NODE&&(e=e.host),e.classList.contains("b-resize-monitored")||(e.classList.add("b-resize-monitored"),e._bResizemonitor={handlers:[]}),e===document.body)r.hasWindowResizeListener||(window.addEventListener("resize",r.onWindowResize),r.hasWindowResizeListener=!0);else if(window.ResizeObserver)r.resizeObserver||(r.resizeObserver=new ResizeObserver(r.onElementResize)),r.resizeObserver.observe(e);else{e.classList.add("b-no-resizeobserver");let[i,s,n]=g.createElement({parent:e,className:"b-resize-monitors",children:[{className:"b-resize-monitor-expand"},{className:"b-resize-monitor-shrink"}]},!0);s.scrollLeft=s.scrollTop=n.scrollLeft=n.scrollTop=1e6,s.addEventListener("scroll",r.onSizeMonitorScroll,!0),n.addEventListener("scroll",r.onSizeMonitorScroll,!0),(t.targetMutationMonitor=new MutationObserver(o=>{let l=[];for(let c of o)c.type==="childList"&&(l.push.apply(l,c.removedNodes),l.push.apply(l,c.addedNodes));l.length>0&&l.every(md)||(x.isEdge||x.isIE11)&&!s.classList.contains("b-resize-monitor-expand")||s.dispatchEvent(new CustomEvent("scroll",{bubbles:!1}))})).observe(e,{childList:!0,subtree:!0}),t.monitorElement=i}e._bResizemonitor.handlers.push(t)}static removeResizeListener(e,t){if(e){(e===document||e===window)&&(e=document.body);let r=e._bResizemonitor,i=0;r&&r.handlers&&(U.remove(r.handlers,t),i=r.handlers.length),i||(e.classList.remove("b-resize-monitored"),this.resizeObserver?this.resizeObserver.unobserve(e):(t.monitorElement&&(t.monitorElement.remove(),t.monitorElement=null),t.targetMutationMonitor&&t.targetMutationMonitor.disconnect()))}}static onElementResize(e){for(let t of e){let r=t.target,i=r._bResizemonitor,s=t.contentRect||r.getBoundingClientRect();if(r.offsetParent&&(!i.rectangle||s.width!==i.rectangle.width||s.height!==i.rectangle.height)){let n=i.rectangle;i.rectangle=s;for(let o of i.handlers)o(r,n,s)}}}static onSizeMonitorScroll(e){if(document.body?.contains(e.target)){e.stopImmediatePropagation();let t=e.target.parentNode,r=t.parentNode,i=r._bResizemonitor,s=r.getBoundingClientRect();(!i.rectangle||s.width!==i.rectangle.width||s.height!==i.rectangle.height)&&(ss.push([r,i.rectangle,s]),i.rectangle=s,is||(is=requestAnimationFrame(ce.fireResizeEvents))),t.firstChild.scrollLeft=t.firstChild.scrollTop=t.childNodes[1].scrollTop=t.childNodes[1].scrollLeft=1e6}}static onWindowResize(e){let t=document.body,r=t._bResizemonitor,i=r.rectangle;r.rectangle=document.documentElement.getBoundingClientRect();for(let s of r.handlers)s(t,i,r.rectangle)}static fireResizeEvents(){for(let e of ss)for(let t of e[0]._bResizemonitor.handlers)e[0].offsetParent&&t.apply(this,e);is=null,ss.length=0}};var mo=b.getPathDefault(x.global,"bryntum.idCounts",Object.create(null)),Ht=class{static generateId(e="generatedId"){return e+(mo[e]=(mo[e]||0)+1)}};var go={true:"auto",false:"hidden","hidden-scroll":"auto",clip:x.supportsOverflowClip?"clip":"hidden"},po="b-widget-scroller",ns={block:"nearest"},yo=Promise.resolve(),bo=a=>new Promise(e=>O.on({element:a,scroll:e,once:!0})),gd={x:1},Xr={auto:1,scroll:1},pd={overflowX:"auto",overflowY:"auto"},ke=class extends we(re(S)){static get configurable(){return{widget:null,element:{$config:{nullify:!0},value:null},overflowX:null,overflowY:null,translate:null,x:0,y:0}}static get delayable(){return{onScrollEnd:{type:"buffer",delay:100}}}syncOverflowState(){let{element:e}=this,t=new P(e.classList),r=this.hasOverflowX=e.scrollWidth>e.clientWidth,i=this.hasOverflowY=e.scrollHeight>e.clientHeight;t.value=e.classList,(t.toggle("b-horizontal-overflow",r)||t.toggle("b-vertical-overflow",i))&&(g.syncClassList(e,t),this.isConfiguring||this.trigger("overflowChange",{x:r,y:i}))}hasOverflow(e="y"){if(!g.scrollBarWidth||x.isFirefox){let t=e==="y"?"Height":"Width";return this[`scroll${t}`]>this[`client${t}`]}else return this[`hasOverflow${e.toUpperCase()}`]}hasScrollbar(e="y"){let{element:t}=this;if(t&&g.scrollBarWidth){let r=e==="y",i=r?"Width":"Height",s=t[`client${i}`],n=parseInt(g.getStyleValue(t,`border${r?"Left":"Top"}Width`))+parseInt(g.getStyleValue(t,`border${r?"Right":"Bottom"}Width`)),o=t[`offset${i}`]-n-s;return Math.abs(o-g.scrollBarWidth)<2}}addPartner(e,t=gd){let r=this;typeof t=="string"&&(t={[t]:1}),r.partners||(r.partners={}),r.partners[e.id]={scroller:e,axes:t},t.x&&(e.x=r.x),t.y&&(e.y=r.y),e.isPartneredWith(r)||e.addPartner(r,t)}eachPartner(e){let{partners:t}=this;t&&Object.values(t).forEach(e)}removePartner(e){this.isPartneredWith(e)&&(delete this.partners[e.id],e.removePartner(this))}isPartneredWith(e){return Boolean(this.partners&&this.partners[e.id])}clearPartners(){this.partners&&Object.values(this.partners).forEach(e=>e.scroller.removePartner(this))}async scrollIntoView(e,t=ns){let r=this,{isRectangle:i}=e,s=i?e:k.from(e),{xDelta:n,yDelta:o}=r.getDeltaTo(e,t),l=r.scrollBy(n,o,t);return(t.highlight||t.focus)&&l.then(()=>{i&&(e=s.translate(-n,-o)),t.highlight&&(isNaN(t.highlight)?(r.widget||r).callback(t.highlight,null,[e]):g.highlight(e,r)),t.focus&&e.focus()}),l}static async scrollIntoView(e,t=ns){let r=k.from(e),i=typeof t=="object"?t.animate:t,s=ke._globalScroller||(ke._globalScroller=new ke),n=[],o=0,l=0,c;for(let d=e.parentNode;d.nodeType===Node.ELEMENT_NODE;d=d.parentNode){if(d===document.body&&d!==document.scrollingElement)continue;let u=d===document.scrollingElement?pd:d.ownerDocument.defaultView.getComputedStyle(d);if(t.y!==!1&&Xr[u.overflowY]&&d.scrollHeight>d.clientHeight||t.x!==!1&&Xr[u.overflowX]&&d.scrollWidth>d.clientWidth){s.element=d,s.positionDirty=!0;let{xDelta:f,yDelta:h}=s.getDeltaTo(r,t);(f||h)&&(n.push({element:d,x:d.scrollLeft,y:d.scrollTop,xDelta:f,yDelta:h}),r.translate(-f,-h),o+=f,l+=h)}}if(n.length){let d=Math.abs(o),u=Math.abs(l),f=i&&(typeof i=="number"?i:typeof i.duration=="number"?i.duration:300);if(f&&(d>10||u>10))Math.max(d,u)<50&&(f=Math.min(f,500)),c=s.scrollAnimation=W.animate(f,h=>{let m=h===1;for(let{element:p,x:y,y:C,xDelta:w,yDelta:T}of n)s.element=p,w&&(s.x=Math.max(y+(m?w:Math.round(w*h)),0)),T&&(s.y=Math.max(C+(m?T:Math.round(T*h)),0))},null,i.easing),c.then(()=>{s.scrollAnimation=null});else{for(let{element:h,xDelta:m,yDelta:p}of n)h.scrollTop+=p,h.scrollLeft+=m;c=bo(n[n.length-1].element)}}else c=yo;return(t.highlight||t.focus)&&c.then(()=>{t.highlight&&(isNaN(t.highlight)?s.callback(t.highlight,null,[e]):g.highlight(e,s)),t.focus&&e.focus()}),c}async scrollBy(e=0,t=0,r=ns){let i=this,s=typeof r=="object"?r.animate:r,n=Math.abs(e),o=Math.abs(t);i.scrollAnimation&&(i.scrollAnimation.cancel(),i.scrollAnimation=null),(e||t)&&(i.silent=r.silent);let l=s&&(typeof s=="number"?s:typeof s.duration=="number"?s.duration:300);if(l&&(n>10||o>10)){let{x:c,y:d}=i,u=c,f=d;return Math.max(n,o)<50&&(l=Math.min(l,500)),i.scrollAnimation=W.animate(l,h=>{let m=h===1;if(e){if(i.x!==u&&!r.force)return i.scrollAnimation&&i.scrollAnimation.cancel();i.x=Math.max(c+(m?e:Math.round(e*h)),0)}if(t){if(i.y!==f&&!r.force)return i.scrollAnimation&&i.scrollAnimation.cancel();i.y=Math.max(d+(m?t:Math.round(t*h)),0)}u=i.x,f=i.y},i,s.easing),i.element.classList.add("b-scrolling"),i.scrollAnimation.then(()=>{i.isDestroyed||(i.element.classList.remove("b-scrolling"),i.scrollAnimation=null)}),i.scrollAnimation}else return e|t?(i.x+=e,i.y+=t,bo(i.element)):yo}async scrollTo(e,t,r){let{x:i,y:s}=this,n=e==null?0:e-i,o=t==null?0:t-s;return this.scrollBy(n,o,r)}doDestroy(){let e=this;e._element&&(e._element.removeEventListener("scroll",e.scrollHandler),e.wheelListenerRemover&&e.wheelListenerRemover()),e.scrollAnimation&&e.scrollAnimation.cancel(),Object.values(e.partners||{}).forEach(({scroller:t})=>t.removePartner(e)),super.doDestroy()}onElMutation(e){let t=this,[r,i]=g.getTranslateXY(t.element);if(t._x!==-r||t.y!==-i){let s=new CustomEvent("scroll",{bubbles:!0});Object.defineProperty(s,"target",{get:()=>t.element}),t.onScroll(s)}}onElResize(){this.owner?.isAnimating?this.owner.on({animationEnd:"onElResize",thisObj:this,once:!0}):this.syncOverflowState()}onScroll(e){let t=this,{_x:r,_y:i,element:s}=t,n=0;t.overflowX==="clip"&&s.scrollLeft!==r&&(s.scrollLeft=r,++n),t.overflowY==="clip"&&s.scrollTop!==i&&(s.scrollTop=i,++n),n!==2&&(!t.widget||!t.widget.isDestroyed)&&(t.positionDirty=!0,t.element.classList.contains("b-scrolling")||t.element.classList.add("b-scrolling"),e.widget=t.widget,t.silent||t.trigger("scroll",e),t.syncPartners(),t.controllingPartner=null,t.onScrollEnd(e))}syncPartners(e){let t=this;t.partners&&Object.values(t.partners).forEach(({axes:r,scroller:i})=>{(i!==t.controllingPartner||e)&&i.sync(t,r)})}onScrollEnd(e){let t=this;t.silent&&(t.silent=!1),t.trigger("scrollEnd",e),t.controllingPartner=null,t.element.classList.remove("b-scrolling")}getDeltaTo(e,t){let r=this;if(!r.viewport)return{xDelta:0,yDelta:0};let i=e instanceof k?e:k.from(e),s=t.block||"nearest",n=r.viewport,o=t.edgeOffset||0,l=n.width>=i.width+o*2?o:0,c=n.height>=i.height+o*2?o:0,d=i.clone().adjust(-l,-c,l,c).constrainTo(new k(n.x-r.x,n.y-r.y,r.scrollWidth,r.scrollHeight)),u=d.clone(),f=0,h=0;if(s==="start")u.moveTo(n.x,n.y),f=d.x-u.x,h=d.y-u.y;else if(s==="end")u.translate(n.right-u.right,n.bottom-u.bottom),f=d.x-u.x,h=d.y-u.y;else if(s==="center"){let m=n.center;u.moveTo(m.x-u.width/2,m.y-u.height/2),f=f||d.x-u.x,h=h||d.y-u.y}else u.width>n.width?f=u.x-n.x:u.right>n.right?f=u.right-n.right:u.x<n.x&&(f=u.x-n.x),u.height>n.height?h=u.y-n.y:u.bottom>n.bottom?h=u.bottom-n.bottom:u.y<n.y&&(h=u.y-n.y);return{xDelta:t.x===!1?0:Math.max(Math.min(Math.round(f),r.maxX-r.x),-r.x),yDelta:t.y===!1?0:Math.max(Math.min(Math.round(h),r.maxY-r.y),-r.y)}}get viewport(){return k.client(this.element)}updateElement(e,t){let r=this;if(r===ke._globalScroller){r._element=e,r.positionDirty=!0;return}let i=r.scrollHandler||(r.scrollHandler=r.onScroll.bind(r)),s=r.resizeHandler||(r.resizeHandler=r.onElResize.bind(r));if(t&&(r.translate?r.mutationObserver?.disconnect(t):(t.removeEventListener("scroll",i),t.classList.remove(po),t.style.overflowX=t.style.overflowY=""),ce.removeResizeListener(t,s)),e){if(r.translate){if(r.mutationObserver||(r.mutationObserver=new MutationObserver(r.mutationHandler||(r.mutationHandler=r.onElMutation.bind(r)))),r._x=r._y=0,document.contains(e)){let[n,o]=g.getTranslateXY(e);r._x=-n,r._y=-o}r.mutationObserver.observe(e,{attributes:!0})}else e.addEventListener("scroll",i),e.classList.add(po);ce.addResizeListener(e,s),r.positionDirty&&(r.updateOverflowX(r.overflowX),r.updateOverflowY(r.overflowY)),r.syncOverflowState(),r.isConfiguring&&(r._x&&r.updateX(r._x),r._y&&r.updateY(r._y))}r.positionDirty=!0}get x(){let e=this,{element:t}=e;if(t&&e.positionDirty){if(e.translate){let[r,i]=g.getTranslateXY(t);e._x=-r,e._y=-i}else e._x=t.scrollLeft,e._y=t.scrollTop;e.positionDirty=!1}return e._x}changeX(e){if(!this.isConfiguring||e)return e;this._x=e}updateX(e){let{element:t,widget:r}=this;t&&!r?.isConfiguring&&(this.trigger("scrollStart",{x:e}),this.translate?g.setTranslateX(t,-e):t.scrollLeft=e),this.positionDirty=!0}sync(e,t){let{x:r,y:i}=t;r!=null&&this.x!==e.x&&(this.controllingPartner=e,this.x=e.x),i!=null&&this.y!==e.y&&(this.controllingPartner=e,this.y=e.y)}get y(){let e=this,{element:t}=e;if(t&&e.positionDirty){if(e.translate){let[r,i]=g.getTranslateXY(t);e._x=-r,e._y=-i}else e._x=t.scrollLeft,e._y=t.scrollTop;e.positionDirty=!1}return e._y}changeY(e){if(!this.isConfiguring||e)return e;this._y=e}updateY(e){let{element:t,widget:r}=this;t&&!r?.isConfiguring&&(this.trigger("scrollStart",{y:e}),this.translate?g.setTranslateY(t,-e):t.scrollTop=e),this.positionDirty=!0}get maxX(){return this.scrollWidth-this.clientWidth}get maxY(){return this.scrollHeight-this.clientHeight}updateOverflowX(e,t){let{element:r,translate:i}=this,{style:s,classList:n}=r;t==="hidden-scroll"&&n.remove("b-hide-scroll"),e==="hidden-scroll"&&!i&&(Xr[s.overflowY]?(e="hidden",this.enableWheel()):n.add("b-hide-scroll")),i||(s.overflowX=go[e]||e),this.positionDirty=!this.isConfiguring}updateOverflowY(e,t){let{element:r,translate:i}=this,{style:s,classList:n}=r;t==="hidden-scroll"&&n.remove("b-hide-scroll"),e==="hidden-scroll"&&!i&&(Xr[s.overflowX]?(e="hidden",this.enableWheel()):n.add("b-hide-scroll")),i||(s.overflowY=go[e]||e),this.positionDirty=!this.isConfiguring}enableWheel(){this.wheelListenerRemover||(this.wheelListenerRemover=O.on({element:this.element,wheel:"onWheel",thisObj:this}))}onWheel(e){Math.abs(e.deltaX)>Math.abs(e.deltaY)&&this.overflowX==="hidden-scroll"?this.x+=e.deltaX:this.overflowY==="hidden-scroll"&&(this.y+=e.deltaY)}get scrollWidth(){return this.element?.scrollWidth??0}set scrollWidth(e){let t=this,{element:r}=t,i=t.widthStretcher;i&&e==null?(i.remove(),t.widthStretcher=null):e&&(i||(i=t.widthStretcher=g.createElement({className:"b-scroller-stretcher b-horizontal-stretcher",retainElement:!0})),i.style.transform=`translateX(${e-1}px)`,r&&!r.contains(i)&&r.insertBefore(i,r.firstElementChild)),t.propagate!==!1&&t.eachPartner(({scroller:s})=>{s.propagate=!1,s.scrollWidth=e,delete s.propagate}),t.positionDirty=!0,t.syncOverflowState()}get scrollHeight(){return this.element?.scrollHeight??0}set scrollHeight(e){let t=this,r=t.stretcher||(t.stretcher=g.createElement({className:"b-scroller-stretcher"}));r.style.transform=`translateY(${e-1}px)`,t.element&&t.element.lastChild!==r&&t.element.appendChild(r),t.positionDirty=!0,t.syncOverflowState()}get clientWidth(){return this.element?.clientWidth||0}get clientHeight(){return this.element?.clientHeight||0}get id(){return this._id||(this.widget?this._id=`${this.widget.id}-scroller`:this._id=Ht.generateId("scroller-")),this._id}};var Co="En",wo="English",vo={localeName:Co,localeDesc:wo,Object:{Yes:"Yes",No:"No",Cancel:"Cancel",Ok:"OK"},Combo:{noResults:"No results",recordNotCommitted:"Record could not be addded",addNewValue:a=>`Add ${a}`},FilePicker:{file:"File"},Field:{badInput:"Invalid field value",patternMismatch:"Value should match a specific pattern",rangeOverflow:a=>`Value must be less than or equal to ${a.max}`,rangeUnderflow:a=>`Value must be greater than or equal to ${a.min}`,stepMismatch:"Value should fit the step",tooLong:"Value should be shorter",tooShort:"Value should be longer",typeMismatch:"Value is required to be in a special format",valueMissing:"This field is required",invalidValue:"Invalid field value",minimumValueViolation:"Minimum value violation",maximumValueViolation:"Maximum value violation",fieldRequired:"This field is required",validateFilter:"Value must be selected from the list"},DateField:{invalidDate:"Invalid date input"},NumberFormat:{locale:"en-US",currency:"USD"},DurationField:{invalidUnit:"Invalid unit"},TimeField:{invalidTime:"Invalid time input"},List:{loading:"Loading..."},GridBase:{loadMask:"Loading...",syncMask:"Saving changes, please wait..."},PagingToolbar:{firstPage:"Go to first page",prevPage:"Go to previous page",page:"Page",nextPage:"Go to next page",lastPage:"Go to last page",reload:"Reload current page",noRecords:"No records to display",pageCountTemplate:a=>`of ${a.lastPage}`,summaryTemplate:a=>`Displaying records ${a.start} - ${a.end} of ${a.allCount}`},PanelCollapser:{Collapse:"Collapse",Expand:"Expand"},UndoRedo:{Undo:"Undo",Redo:"Redo",UndoLastAction:"Undo last action",RedoLastAction:"Redo last undone action"},DateHelper:{locale:"en-US",weekStartDay:0,nonWorkingDays:{0:!0,6:!0},weekends:{0:!0,6:!0},unitNames:[{single:"millisecond",plural:"ms",abbrev:"ms"},{single:"second",plural:"seconds",abbrev:"s"},{single:"minute",plural:"minutes",abbrev:"min"},{single:"hour",plural:"hours",abbrev:"h"},{single:"day",plural:"days",abbrev:"d"},{single:"week",plural:"weeks",abbrev:"w"},{single:"month",plural:"months",abbrev:"mon"},{single:"quarter",plural:"quarters",abbrev:"q"},{single:"year",plural:"years",abbrev:"yr"},{single:"decade",plural:"decades",abbrev:"dec"}],unitAbbreviations:[["mil"],["s","sec"],["m","min"],["h","hr"],["d"],["w","wk"],["mo","mon","mnt"],["q","quar","qrt"],["y","yr"],["dec"]],parsers:{L:"MM/DD/YYYY",LT:"HH:mm A"},ordinalSuffix:a=>{let e=["11","12","13"].find(r=>a.endsWith(r)),t="th";if(!e){let r=a[a.length-1];t={1:"st",2:"nd",3:"rd"}[r]||"th"}return a+t}},TrialButton:{downloadTrial:"Download trial"},TrialPanel:{title:"Please complete fields",name:"Name",email:"Email",company:"Company",product:"Product",cancel:"Cancel",submit:"Submit",downloadStarting:"Download starting, please wait..."}},xo=vo;X.registerLocale(Co,{desc:wo,locale:vo});var{defineProperty:Eo}=Reflect,os=Symbol("owner"),yd=/[\s,]+/,ht=a=>class extends(a||S){static get $name(){return"Factoryable"}static get declarable(){return["factoryable","alias","type"]}static register(t,r,i=x.global.__BRYNTUM_EXAMPLE){let{factoryable:s}=this.initClass(),{caseless:n,registry:o}=s,l=M.split(t,yd);for(let c,d,u=0;u<l.length;++u){if(d=l[u],c=n?d.toLowerCase():d,!i&&c in o)throw new Error(`Type "${d}" already registered with ${s.class.name} factory`);o[d]=o[c]=r.initClass()}}static isA(t,r){return this.isType(t,r,!0)}static isType(t,r,i){let{factoryable:s}=this,{caseless:n,registry:o}=s,l=o[n?r.toLowerCase():r];return l?i?t instanceof l:t.constructor===l:!1}static setupAlias(t){t.register(t.alias,t)}static setupFactoryable(t,r){let i=r.super.class,{factoryable:s}=t;s={caseless:!0,defaultType:null,extends:i.factoryable?[i]:null,typeKey:"type",...s},s.class=t,s.registry=Object.create(null),s.extends&&!Array.isArray(s.extends)&&(s.extends=[s.extends]),Eo(t,"factoryable",{get(){return s}})}static setupType(t){let{type:r}=t;t.register(r,t),Eo(t.prototype,"type",{value:r})}static create(t,r){return this.reconfigure(null,t,r)}static reconfigure(t,r,i){let s=this,{factoryable:n}=s,{typeKey:o}=n,l=i,c,d,u,f,h,m,p,y,C;if(i&&!b.isClass(i)&&(l=null,p=typeof i,p==="function"?m=i:p==="string"?l=i:b.isObject(i)?(c=i.cleanup,d=i.defaults,f=i.owner,m=i.setup,l=i.type,y=i.transform):f=i),y&&(r=typeof y=="string"?f[y](r):y(r)),C=r,typeof C=="string")r={};else if(r){if(r===!0&&(r={}),!b.isObject(r))return f&&r!==t&&t?.[os]===f&&(typeof c=="string"?f[c](t):c?.(t),t.destroy()),r;C=r[o]}if(C=C&&s.resolveType(C),t){if(r&&(!C||t.constructor===C))return o in r&&(r=b.assign({},r),delete r[o]),t.setConfig(r),t;f&&t[os]===f&&(typeof c=="string"?f[c](t):c?.(t),t.destroy())}if(r){if(d){if(!(u=C)){if(!(u=d[o]||l||n.defaultType))throw new Error(`No default mergeType defined for ${n.class.name} factory`);u=s.resolveType(u)}u&&(r=u.mergeConfigs(d,r))}if(m){if(h=typeof m=="string"?f[m](r,C,d):m(r,C,d),h===null)return h;r=h||r}if(!C){if(!(C=r[o]||l||n.defaultType))throw new Error(`No default type defined for ${n.class.name} factory`);C=s.resolveType(C)}d&&!u&&(r=C.mergeConfigs(d,r)),o in r&&(r=b.assign({},r),delete r[o]),r=new C(r),f&&(r[os]=f)}return r||null}static resolveType(t,r){if(typeof t!="string")return t;let{factoryable:i}=this,s=i.extends,n=i.registry[i.caseless?t.toLowerCase():t],o;for(o=0;!n&&s&&o<s.length;++o)n=s[o].resolveType(t,!0);if(!n&&!r)throw new Error(`Invalid type name "${t}" passed to ${i.class.name} factory`);return n}};var nr=[],ls=/transparent|rgba\(0,\s*0,\s*0,\s*0\)/,bd={INPUT:1,TEXTAREA:1},as=(a,e,t,r)=>{let i=t?.listeners;if(i=i?.on||i,i){let s=O.on(b.assign({element:e,thisObj:a},i));r?(a._refListeners||(a._refListeners=Object.create(null)))[r]=s:t.listeners={on:i,un:s}}},So=(a,e)=>a&&e&&e[b.keys(a)[0]]?Q.merge(a,e):a,Cd=a=>{a.isVisible&&a.triggerPaint()},wd=/^:not\((.+)\)$/,vd=/absolute|fixed/i,xd=a=>a.scale!=null,{hasOwnProperty:At}=Object.prototype,{defineProperty:Do}=Reflect,To=a=>parseFloat(a)*(a.endsWith("ms")?1:1e3),Ed=Promise.resolve(),Ro=["b-aligned-above","b-aligned-right","b-aligned-below","b-aligned-left"],Sd={configurable:!0,get(){return!1}},E=class extends S.mixin(_e,re,we,ft,ht){static get $name(){return"Widget"}static get type(){return"widget"}static get configurable(){return{element:!0,callOnFunctions:!0,id:"",html:null,content:null,cls:{$config:{merge:"classList"},value:null},ui:{$config:{merge:"classList"},value:null},collapsify:null,contentElementCls:{$config:{merge:"classList"},value:null},defaultCls:{$config:{merge:"classList"},value:null},dock:null,parent:null,tab:null,elementAttributes:null,htmlCls:{$config:{merge:"classList"},value:{"b-html":1}},style:null,disabled:null,readOnly:{value:null,default:!1,$config:null},adopt:null,appendTo:null,insertBefore:null,insertFirst:null,dataset:null,tooltip:{$config:["lazy","nullify"],value:null},showTooltipWhenDisabled:!0,preventTooltipOnTouch:null,monitorResize:{$config:["lazy","nullify"],value:null},masked:null,maskDefaults:{target:"element"},cache:{},floating:null,positioned:null,draggable:null,align:"t-b",centered:null,constrainTo:void 0,anchor:null,owner:null,scrollAction:null,hideAnimation:{$config:{merge:So},value:null},showAnimation:{$config:{merge:So},value:null},x:null,y:null,scrollable:{$config:["nullify"],value:null},scrollerClass:ke,defaultBindProperty:"html",defaultAction:null,overflowable:{value:null,default:!0,$config:null},width:null,height:null,maxHeight:null,maxWidth:null,minWidth:null,minHeight:null,scaleToFitWidth:null,allowGrowWidth:!0,margin:null,flex:null,weight:null,alignSelf:null,ripple:null,title:null,localizableProperties:["title"],requireSize:!1,ref:null,hidden:null,textAlign:null,ignoreScrollDuration:500,tag:"div",recomposeAsync:null,rootElement:null,htmlMutationObserver:{$config:["lazy","nullify"],value:{childList:!0,subtree:!0}}}}static get prototypeProperties(){return{hasGeneratedId:!1,innerItem:!0}}static get declarable(){return["renderConfigs"]}static get delayable(){return{recompose:"raf",doHideOrRealign:"raf"}}static get factoryable(){return{defaultType:"widget"}}static get identifiable(){return{}}static get all(){return super.all}static get recomposeAsync(){return E._recomposeAsync}static set recomposeAsync(e){if(E._recomposeAsync=e,e!=null){let{all:t}=E;for(let r=0;r<t.length;++r)t[r].isComposable&&(t[r].recomposeAsync=e)}}isType(e,t){return E.isType(this,e,t)}static setupRenderConfigs(e,t){let{renderConfigs:r}=e,i;if(r){let s=t.getInherited("renderConfigs",!1)||Object.create(null);if(Array.isArray(r)){for(i=0;i<r.length;++i)s[r[i]]=!0;r=s}else r=Object.assign(s,r)}t.renderConfigs=r}construct(e={},...t){let r=this,{domSyncCallback:i}=r;r._isAnimatingCounter=0,r.alignConstrained=0,r.byRef=Object.create(null),r.callRealign=r.realign.bind(r),r.onFullscreenChange=r.onFullscreenChange.bind(r),r.domSyncCallback=i.$nullFn?null:i.bind(r),r._isUserAction=!1,super.construct(e,...t);let{recomposeAsync:s}=E;s!=null&&r.recomposeAsync==null&&(r.recomposeAsync=s),r.finalizeInit()}startConfigure(e){let t=this,{adopt:r,element:i}=t;r&&(t.adoptElement(i,r,e.id),t.updateElement(t._element,i)),super.startConfigure(e)}finalizeInit(){(this.insertBefore||this.appendTo||this.insertFirst||this.adopt)&&this.render()}doDestroy(){let e=this,{preExistingElements:t,element:r,_refListeners:i}=e;if(i&&(Object.values(i,s=>s()),e._refListeners=null),r){let s=!e._tooltip&&e._rootElement&&E.Tooltip?.getSharedTooltip(e._rootElement,!0);if(s?.owner===e&&(s.owner=null,s.hide()),e.onExitFullscreen(),e.clearTimeout(e.scrollListenerTimeout),e.clearTimeout(e.resizeListenerTimeout),e.removeTransientListeners(),e.floating||e.positioned?e.hide(!1):e.revertFocus(),ce.removeResizeListener(r.parentElement,e.onParentElementResize),ce.removeResizeListener(r,e.onElementResize),e.adopt){for(let n=Array.from(r.childNodes),o=0,{length:l}=n;o<l;o++){let c=n[o];!t.includes(c)&&c!==e.floatRoot&&c.remove()}r.className=e.adoptedElementClassName,r.style.cssText=e.adoptedElementCssText}else r.remove();e.dragEventDetacher?.(),e.dragOverEventDetacher?.(),e.dragGhost.remove()}super.doDestroy()}get isComposable(){return!this.compose.$nullFn}adoptElement(e,t,r){let i=this,s=typeof t=="string"?document.getElementById(t):t,n=E.fromElement(s);n&&n.adopt&&n!==i&&(typeof n.adopt=="string"?document.getElementById(n.adopt):n.adopt)===s&&n.destroy(),i.preExistingElements=Array.from(s.childNodes),i.adoptedElementClassName=s.className,i.adoptedElementCssText=s.style.cssText,s.id&&!r&&(i.id=e.id=s.id),g.syncAttributes(e,s);for(let c=0,{length:d}=e.childNodes;c<d;c++)s.appendChild(e.childNodes[0]);delete i._contentRange,i._element=s;let o=e.lastDomConfig,l=o?.listeners;l&&i.isComposable&&(l.un?.(),as(i,s,o)),s.lastDomConfig=o||s.lastDomConfig,s.$refOwnerId=i.id,i.scaleToFitWidth||i.getConfig("monitorResize")}addRefAccessor(e,t){let{prototype:r}=this.constructor;Do(r,t,{writable:!0,value:null}),Do(r,e,{get(){return this.recompose.flush(),this[t]},set(i){this[t]=i}})}attachRef(e,t,r){let i=this,s="_"+e;t.dataset&&(t.dataset.ownerCmp=i.id),i.isComposable&&(s in i||i.addRefAccessor(e,s),as(i,t,r,e)),i.byRef[e]=t,i[e]=t}detachRef(e,t,r){let i=this,s=i._refListeners;s?.[e]&&(s[e](),delete s[e]),i[e]=null,delete i.byRef[e]}afterRecompose(){}compose(){return{class:P.normalize(this.widgetClassList,"object")}}doCompose(){let e=this,{$meta:t}=e,r=t.hierarchy,{composers:i}=t,s=null,n,o,l,c,d,u;if(e.recompose.suspend(),!i){for(l=!0,t.composers=i=[],c=r.indexOf(E);c<r.length;++c)d=r[c].prototype,At.call(d,"compose")&&i.push(d);(u=t.getInherited("renderConfigs",!1))||(u=Object.create(null),e.configObserver={get(f){u[f]=!0}}),t.$renderConfigs=u}for(c=0;c<i.length;++c)n=i[c].compose.call(e,s),s=s?g.merge(s,n):n;return At.call(e,"compose")&&(n=e.compose)&&(n=n.call(e,s),g.merge(s,n)),l&&delete e.configObserver,g.normalizeChildren(s,(f,h)=>{h&&(o="_"+f,o in e||e.addRefAccessor(f,o))})}get element(){return this.isComposable&&!this.isDestroying&&this.recompose.flush(),this._element}domSyncCallback(e){}changeElement(e){let t=this,r=t.isComposable;return r&&(e=t.doCompose()),typeof e=="string"?e=g.createElementFromTemplate(e):b.isObject(e)?(e=g.createElement(e,{refOwner:t,callback:t.domSyncCallback}),t.recompose.resume(),r&&as(t,e,e.lastDomConfig)):e.nodeType!==1&&(e=g.createElementFromTemplate(t.template(t))),e.id=t.id,t.elementAttributes&&g.setAttributes(e,t.elementAttributes),e}updateElement(e){let t=this,{className:r}=e,{contentElement:i,contentElementCls:s,isComposable:n}=t,o=i!==e,l=!n&&e.querySelectorAll("[data-reference]"),c=n?[]:t.widgetClassList,d=(o||!n)&&t.uiClasses;if(r&&c.unshift(r),t._hidden&&c.push("b-hidden"),t._readOnly&&c.push("b-readonly"),W.noThrow(e,"remove"),d?(s?.value&&(d=d.slice(),d.push(s.value)),d=d.join(" ")):d=s?.value,d&&(o?i.className+=" "+d:c.push(d)),!t.parent){let{defaultCls:u}=t,{outerCls:f}=E;c.push(...u?f.filter(h=>!(h in u)||u[h]):f)}if(e.className=c.join(" "),l)for(let u,f=0;f<l.length;++f)u=l[f],t.attachRef(u.getAttribute("data-reference"),u),u.removeAttribute("data-reference");!t.adopt&&!t.scaleToFitWidth&&t.getConfig("monitorResize"),t._html&&t.getConfig("htmlMutationObserver")}isCollapsified(e,t){let{collapsify:r}=this,i=!t;return r==null?i=t?e:!e:r==="overlay"&&(i=t),Boolean(i)}async recompose(){let e=this,t={targetElement:e.element,domConfig:e.doCompose(),refOwner:e,callback:e.domSyncCallback,strict:!0};if(e.transitionRecompose){if(e.isTransitioningDom=!0,await g.transition(b.assign({element:e.element,action(){_.sync(t)}},e.transitionRecompose)),e.isDestroyed)return;e.isTransitioningDom=!1,e.trigger("transitionedRecompose")}else _.sync(t);t.changed&&e.afterRecompose(),e.recompose.resume()}render(e=this.appendTo,t=!0){let r=this,{element:i}=r;if(r.emptyCache(),r.syncElement&&r.currentElement)g.sync(i,r.currentElement);else{let s=r.insertBefore;if(r.insertFirst&&(e=r.insertFirst,s=e.firstChild),typeof e=="string"){let n=e;if(e=document.getElementById(e),!e)throw new Error(`No element found with id '${n}'`);r.insertFirst&&(s=e.firstChild)}if(s){if(typeof s=="string"){let n=s;if(s=document.getElementById(s),!s)throw new Error(`No element found with id '${n}'`)}e||(e=s.parentElement)}e?.insertBefore(i,s),r.currentElement=i}E.fromElement(i.parentElement)&&g.removeClasses(i,E.outerCls),r.rendered=!0,t&&(r.getConfig("contentRange"),r.triggerPaint()),r.setupFocusListeners()}template({tag:e,html:t,htmlCls:r,name:i}){let s=t?.call?t.call(this):t;return`<${e} class="${s?r:""}" ${i?`data-name="${i}"`:""}>${s||""}</${e}>`}updateRecomposeAsync(e){this.recompose.immediate=!e}onConfigChange({name:e}){this._element&&!this.isDestroying&&this.$meta.$renderConfigs?.[e]&&this.recompose()}get dataset(){return this.element.dataset}changeDataset(e){Object.assign(this.dataset,e)}get dragGhost(){return this.constructor._dragGhost||(this.constructor._dragGhost=g.createElement({html:"\xA0",style:"position:absolute;top:-10000em;left:-10000em"}))}updateParent(e){let{_element:t}=this;t&&g[e?"removeClasses":"addClasses"](t,E.outerCls)}get constrainTo(){let e=this._constrainTo;return e===void 0?window:e}updateCentered(e){let{element:t,_anchorElement:r}=this;if(e&&!this.floating&&!this.positioned)throw new Error("`centered` is only relevant when a Widget is `floating` or `positioned`");e?(t.classList.add("b-centered"),t.style.transform=t.style.left=t.style.top="",r?.classList.add("b-hide-display"),t.classList.remove("b-anchored")):t.classList.remove("b-centered")}get contentElement(){return this.element}get contentRange(){let e=this,{contentElement:t}=e,r=e._contentRange||(e._contentRange=x.isIE11?document.createRange():new Range);return r.collapsed&&(r.setStart(t,e.contentRangeStartOffset||0),r.setEnd(t,e.contentRangeEndOffset||t.childNodes.length)),r}fixRefOwnerId(e,t,r){if(e.$refOwnerId===r){e.$refOwnerId=t;for(let{childNodes:i}=e,s=i.length;s-- >0;)this.fixRefOwnerId(i[s],t,r)}}get placement(){let e=this,{element:t}=e,r,i,s;if(t?.offsetParent&&!vd.test(g.getStyleValue(t,"position"))){let n=t.nextElementSibling,o=t.previousElementSibling,l=!n&&o;i=g.getStyleValue(t.parentElement,"flex-direction"),i?i=i.startsWith("row")?"h":"v":(r=(n||o)?.getBoundingClientRect(),s=r&&t.getBoundingClientRect(),i=r&&Math.abs(r.top-s.top)<Math.abs(r.left-s.left)?"h":"v"),i+=i==="h"?l?"r":"l":l?"b":"t"}return i}updateId(e,t){if(super.updateId(e,t),t){let{byRef:r,element:i}=this;for(let s in r)r[s].dataset&&(r[s].dataset.ownerCmp=e);i.id=e,this.fixRefOwnerId(i,e,t)}}get style(){let{element:e}=this;return e?.ownerDocument.defaultView.getComputedStyle(e)||this._style}updateStyle(e){this.element&&g.applyStyle(this.element,e)}updateTitle(e){this.titleElement&&(this.titleElement.innerHTML=e)}alignTo(e){let t=this,{lastAlignSpec:r,element:i}=t,{offsetParent:s,style:n,classList:o}=i;if(r&&(r.monitorIntersection&&t.intersectionObserver.unobserve(r.target),isFinite(r.zone)&&i.classList.remove(Ro[r.zone])),!e){t.removeTransientListeners(),t.anchor=t.lastAlignSpec=null;return}(e.nodeType===Element.ELEMENT_NODE||e instanceof E||e.$$name==="Point")&&(e={target:e}),t.releaseSizeConstraints();let{scrollable:l,constrainTo:c}=t,d=t.positioned&&g.getStyleValue(i,"position")!=="fixed",u=t.scale||1,f=e.target,h=f&&(f.isRectangle?f:f.element||f),m=k.from(i,d?s:null,!0),{width:p,height:y}=m,C=h&&h.nodeType===Element.ELEMENT_NODE;e=e.realignTarget?e:b.assign({aligningToElement:C,constrainTo:c,align:"b-t",axisLock:t.axisLock,anchor:t.anchor},t.align,e);let w=e.minWidth||t.minWidth,T=e.minHeight||t.minHeight;if(m.isAlignRectangle=!0,w&&(m.minWidth=w*u),T&&(m.minHeight=T*u),t.lastAlignSpec=e,C&&It(h.offsetParent)){if(e=Object.setPrototypeOf({},e),e.target=e.realignTarget||(e.allowTargetOut?k.from(h,d?s:null,!d):g.isInView(h,!1,t)),!e.target){let G=t.hide();return t.isDestroyed||(t.lastAlignSpec.targetOutOfView=!0),G}e.target.height=Math.max(e.target.height,1),e.target.width=Math.max(e.target.width,1),t.anchoredTo=h}else t.anchoredTo=null;if(e.anchor&&(e.anchorSize=t.anchorSize,i.contains(t.anchorPathElement)||i.appendChild(t.anchorElement)),d){if(s&&g.getStyleValue(s,"overflow")==="hidden")e.constrainTo=k.from(s).moveTo(0,0);else if(c&&!c.isRectangle){let G=c===document||c===window;e.constrainTo=k.from(e.constrainTo,s),G&&e.constrainTo.translate(window.pageXOffset,window.pageYOffset)}}t.isAligning=!0,t.trigger("beforeAlign",e),t.isAligning=!1;let R=m.alignTo(e),{align:H,anchor:A,x:B,y:N,width:V,height:j,overlap:le}=R;if(t.lastAlignSpec.zone=R.zone,j!=y&&("configuredHeight"in t||(t.configuredHeight=n.height),t.height=j/u,t.alignConstrained=t.alignConstrained|1,l&&(l.overflowY=!0)),V!=p&&("configuredWidth"in t||(t.configuredWidth=n.width),t.width=V/u,t.alignConstrained=t.alignConstrained|2,l&&(l.overflowX=l.clientWidth>l.scrollWidth)),H&&t.alignConstrained){e.align=H;let G=k.from(i,d?s:null,!0).alignTo(e);A=G.anchor,B=G.x,N=G.y,V=G.width,j=G.height}if(t.setXY(B,N),!R.overlap&&isFinite(R.zone)&&o.add(Ro[R.zone]),A?.edge){let{edge:G}=A,{anchorElement:q}=t,J=k.from(i),$=[];G==="top"||G==="bottom"?($[0]=A.x,$[1]=G==="top"?1:J.height-1):($[0]=G==="left"?1:J.width-1,$[1]=A.y);let he=g.childFromPoint(i,...$);if(he){let Me=g.getStyleValue(he,"background-color");for(;Me.match(ls)&&g.getStyleValue(he,"position")!=="absolute";)he=he.parentNode,Me=g.getStyleValue(he,"background-color");Me.match(ls)?t.anchorPathElement.setAttribute("fill",t.defaultAnchorBackgroundColor):t.anchorPathElement.setAttribute("fill",Me)}q.classList.remove("b-hide-display"),q.style.transform="",q.className=`b-anchor b-anchor-${G}`,A.x&&(A.x/=u),A.y&&(A.y/=u),g.setTranslateXY(q,A.x,A.y),o.add("b-anchored")}else t._anchorElement&&(t.anchorElement.classList.add("b-hide-display"),o.remove("b-anchored"));if(t.scrollAction==="hide"&&!C){n.pointerEvents="none";let G=g.elementFromPoint(B,N);t.owns(G)||(t.anchoredTo=G),n.pointerEvents=""}(t.scrollAction==="realign"&&C||t.scrollAction==="hide")&&!t.documentScrollListener&&(t.clearTimeout(t.scrollListenerTimeout),t.scrollListenerTimeout=t.setTimeout(()=>{let G=h?.getRootNode?.();t.documentScrollListener=O.addListener(document,"scroll","doHideOrRealign",{capture:!0,thisObj:t}),G&&G!==document&&(t.targetRootScrollListener=O.addListener(G,"scroll","doHideOrRealign",{capture:!0,thisObj:t}))},t.scrollAction==="hide"?t.ignoreScrollDuration:0)),C&&(e.monitorResize&&!t.targetResizeListener&&(ce.addResizeListener(h,t.callRealign),t.targetResizeListener=!0),e.monitorIntersection&&!(le||h.contains(i)||h.ownerSVGElement)&&t.intersectionObserver.observe(h)),x.isAndroid||!t.constrainListeners&&!(c instanceof k)&&(t.clearTimeout(t.resizeListenerTimeout),t.resizeListenerTimeout=t.setTimeout(()=>{t.constrainListeners=!0,ce.addResizeListener(c||window,t.callRealign)},t.ignoreScrollDuration))}get intersectionObserver(){return this._intersectionObserver||(this._intersectionObserver=new IntersectionObserver(this.onTargetIntersectionchange.bind(this),{root:x.isSafari?this.rootElement:this.rootElement.ownerDocument}))}onTargetIntersectionchange(e){if(!this.isDestroyed){let t=e[e.length-1];t.isIntersecting||this.onAlignTargetOutOfView(t.target)}}onAlignTargetOutOfView(e){this.hide(),this.lastAlignSpec&&(this.lastAlignSpec.targetOutOfView=!0)}realign(){let e=this,{lastAlignSpec:t}=e;if(e.isVisible&&(e.floating||e.positioned)&&t){if(t.aligningToElement){let r=g.isInView(t.target,!1,e);if(!t.allowTargetOut&&(!It(t.target)||!r)){e.hide(),e.isDestroyed||(e.lastAlignSpec.targetOutOfView=!0);return}t.realignTarget=r}g.addTemporaryClass(e.element,"b-realigning",300),e.alignTo(t)}}rectangle(e,t,r){return this.rectangleOf("element",e,t,r)}rectangleOf(e,t,r,i){return typeof t!="string"?(i=r,r=t,t=""):t==="border"&&(t=""),typeof r=="boolean"&&(i=r,r=void 0),e!=="element"&&r===void 0&&(r=this.element),r=r?.isWidget?r.element:r,k[t||"from"](this[e],r,i)}releaseSizeConstraints(){let e=this,t=e.scrollable;e.alignConstrained&1&&(e.height=e.configuredHeight,t&&(t.overflowY=t.config.overflowY)),e.alignConstrained&2&&(e.width=e.configuredWidth,t&&(t.overflowX=t.config.overflowX)),e.alignConstrained=0}toFront(){let{element:e}=this,t=this.floating?this.floatRoot:this.positioned?e?.parentNode:null;if(e?.nextSibling){let r=this._toFrontRange||(this._toFrontRange=document.createRange());r.setStartBefore(e.nextSibling),r.setEndAfter(t.lastElementChild),t.insertBefore(r.extractContents(),e)}}updateRef(e){this.element.dataset.ref=e}get overflowElement(){return this.contentElement}get maxHeightElement(){return this.element}changeAlign(e){return typeof e=="string"?{align:e}:e}changeScrollable(e,t){return typeof e=="boolean"&&(e={overflowX:e,overflowY:e}),e?(e.element=this.overflowElement,e.widget=this,e.isScroller||(e=t?t.setConfig(e):new this.scrollerClass(e)),e.syncOverflowState()):t?.destroy(),e}get html(){return this.initializingElement||!this.element?this.content||this._html:this.contentElement.innerHTML}updateHtml(e){let t=this,r=e==null,{element:i,contentElement:s,htmlCls:n}=t;if(i){t.updatingHtml=!0;let o=s===i&&t._anchorElement;n&&n.values.forEach(l=>i.classList[r?"remove":"add"](l)),o&&t.element.removeChild(o),e&&typeof e=="object"?_.sync({domConfig:e,targetElement:t.contentElement,onlyChildren:!0}):t.contentElement.innerHTML=r?"":e,t.getConfig("htmlMutationObserver"),o&&i.appendChild(o),t.isComposable?t.recompose():(t.floating||t.positioned)&&(t.isAligning||t.realign())}}changeHtmlMutationObserver(e,t){let r=this,{contentElement:i}=r;if(t?.disconnect(i),e){let s=new MutationObserver(()=>{r.updatingHtml?r.updatingHtml=!1:r._html=i.innerHTML});return s.observe(i,e),s}}updateContent(e){let t=this,r=e==null,{element:i,htmlCls:s}=t;if(i){let{contentRange:n}=t;s&&s.values.forEach(o=>i.classList[r?"remove":"add"](o)),rr(i)?(n.deleteContents(),r||n.insertNode(g.createElementFromTemplate(e,{fragment:!0}))):t.contentElement.innerHTML=e,t.contentRangeStartOffset=n.startOffset,t.contentRangeEndOffset=n.endOffset,(t.floating||t.positioned)&&!t.isAligning&&t.realign()}}onThemeChange(){this.anchorElement?.offsetParent&&(this._anchorSize=null,this.realign())}get anchorSize(){let e=this,t=this._anchorSize;if(!t){let r=parseFloat(g.getStyleValue(e.element,"border-top-width")),i=g.getStyleValue(e.element,"border-top-color"),s=e.anchorElement,{className:n}=s,o=s.firstElementChild,l=e.anchorPathElement=o.lastElementChild,c=e._hidden;s.className="b-anchor b-anchor-top";let d=g.getStyleValue(e.contentElement,"background-color");d.match(ls)&&(d=g.getStyleValue(e.element,"background-color")),e.defaultAnchorBackgroundColor=d,t=s.getBoundingClientRect();let[u,f]=t=e._anchorSize=[t.width,t.height];s.className=n,o.setAttribute("height",f+r),o.setAttribute("width",u),l.setAttribute("d",`M0,${f}L${u/2},0.5L${u},${f}`),r&&(l.setAttribute("stroke-width",r),l.setAttribute("stroke",i)),t[1]-=r,c&&e.element.classList.add("b-hidden"),e.themeChangeListener||(e.themeChangeListener=ae.on({theme:"onThemeChange",thisObj:e})),e.anchorPathElement.setAttribute("fill",e.defaultAnchorBackgroundColor)}return t}get anchorElement(){let e=this;if(!e._anchorElement){let t=e.floating&&!(x.isIE11||x.isEdge),r=`${e.id}-shadow-filter`;e._anchorElement=g.createElement({parent:e.element,className:"b-anchor b-anchor-top",children:[{tag:"svg",ns:"http://www.w3.org/2000/svg",version:"1.1",class:"b-pointer-el",children:[t?{tag:"defs",children:[{tag:"filter",id:r,children:[{tag:"feDropShadow",dx:0,dy:-1,stdDeviation:1,"flood-opacity":.2}]}]}:null,{tag:"path",[t?"filter":""]:`url(#${r})`}]}]})}return e._anchorElement}updateAnchor(e){this._anchorElement&&this._anchorElement.classList[e?"remove":"add"]("b-hide-display")}updateDraggable(e){let t=this,{element:r}=t;e?(t.dragEventDetacher=O.addListener({element:r,dragstart:"onWidgetDragStart",dragend:"onWidgetDragEnd",thisObj:t}),t.dragDetacher=O.on({element:r,mousedown(i){let{target:s}=i,n=E.fromElement(s);(!g.up(i.target,".b-field-inner")&&n===this||this.strips&&Object.values(this.strips).includes(n))&&r.setAttribute("draggable","true")},thisObj:t})):(t.dragEventDetacher?.(),t.dragOverEventDetacher?.(),t.dragDetacher?.())}onWidgetDragStart(e){let t=this;if(!t.validateDragStartEvent(e))return;t.removeTransientListeners();let{element:r,align:i,constrainTo:s}=t,n=t.positioned&&g.getStyleValue(r,"position")!=="fixed",o=n?r.parentElement:t.rootElement,l=k.from(r,n?o:null),c=e.clientX,d=e.clientY,u=document.scrollingElement||document.body,[f,h]=g.getOffsetXY(r,o),m=(n?k.content(o).moveTo(0,0):s&&(s?.isRectangle?s:k.from(s)))?.deflate(i.constrainPadding||0),p={element:o,dragover:y=>{r.classList.remove("b-centered"),l.moveTo(f+y.clientX-c-(n?0:u.scrollLeft),h+y.clientY-d-(n?0:u.scrollTop)),m&&l.constrainTo(m),g.setTranslateXY(r,l.x,l.y)}};x.isTouchDevice&&(p.touchmove=y=>y.preventDefault()),t.floatRoot.appendChild(t.dragGhost),t.setDragImage(e),e.dataTransfer.effectAllowed="none",t.dragOverEventDetacher=O.addListener(p),t.alignTo()}validateDragStartEvent(e){let t=this,{element:r}=t,i=g.elementFromPoint(e.clientX,e.clientY),{handleSelector:s}=t.draggable;if(s){let n=wd.exec(s)[1];if(n){if(i.closest(`#${r.id} ${n}`))return e.preventDefault(),!1}else if(!i.closest(`#${r.id} ${s}`))return e.preventDefault(),!1}return!0}setDragImage(e){e.dataTransfer.setDragImage&&(e.dataTransfer.setData("application/node type",""),e.dataTransfer.setDragImage(this.dragGhost,-9999,-9999))}onWidgetDragEnd(){this.dragGhost.remove(),this.dragOverEventDetacher(),this.element.removeAttribute("draggable")}changeFloating(e){return Boolean(e)}changePositioned(e){return Boolean(e)}updatePositioned(e){this.element.classList[e?"add":"remove"]("b-positioned")}getXY(){return[g.getPageX(this.element),g.getPageY(this.element)]}setXY(e,t){let r=this,{element:i}=r;if(r.floating||r.positioned)if(e!=null&&(r._x=e,r.centered=!1),t!=null&&(r._y=t,r.centered=!1),g.getStyleValue(i,"position")==="fixed"){let s=i.getBoundingClientRect(),[n,o]=g.getTranslateXY(i),l=e-s.x,c=t-s.y;g.setTranslateXY(i,n+l,o+c)}else g.setTranslateXY(i,r._x||0,r._y||0)}get x(){return this.getXY()[0]}changeX(e){this.setXY(e)}get y(){return this.getXY()[1]}changeY(e){this.setXY(null,e)}get width(){let e=this,t=e.element;return e.monitorResize?(e._width==null&&(e._width=t.offsetWidth),e._width):t.offsetWidth}changeWidth(e){let t=this;g.setLength(t.element,"width",e),t._lastWidth=e,t._width=null,t._flex=null,t.element.style.flex=""}get maxWidth(){return g.measureSize(this.element.style.maxWidth,this.element)}updateMaxWidth(e){g.setLength(this.element,"maxWidth",e)}get minWidth(){return g.measureSize(this.element.style.minWidth,this.element)}updateMinWidth(e){g.setLength(this.element,"minWidth",e)}updateFlex(e){this.getConfig("width"),(typeof e=="number"||!isNaN(e))&&(e=`${e} ${e}`),this.element.style.flex=e,this.element.style.width=""}updateAlignSelf(e){this.element.style.alignSelf=e}updateMargin(e){this.element.style.margin=this.parseTRBL(e).join(" ")}updateTextAlign(e,t){t&&this.element.classList.remove(`b-text-align-${t}`),this.element.classList.add(`b-text-align-${e}`)}updatePlaceholder(e){this.input&&(e==null?this.input.removeAttribute("placeholder"):this.input.placeholder=e)}get height(){let e=this,t=e.element;return e.monitorResize?(e._height==null&&(e._height=t.offsetHeight),e._height):t.offsetHeight}changeHeight(e){g.setLength(this.element,"height",e),this._lastHeight=e,this._height=null}get maxHeight(){return g.measureSize(this.maxHeightElement.style.maxHeight,this.element)}updateMaxHeight(e){let t=this,{element:r}=t;g.setLength(t.maxHeightElement,"maxHeight",e),x.isIE11&&t.contentElement!==r&&(e==null?ce.removeResizeListener(r,t.boundMaxHeightBugHandler):(ce.addResizeListener(r,t.boundMaxHeightBugHandler||(t.boundMaxHeightBugHandler=t.fixIEMaxHeightBug.bind(t))),document.body.contains(r)&&t.fixIEMaxHeightBug()))}fixIEMaxHeightBug(){let{element:e,contentElement:t}=this;if(g.getStyleValue(e,"flex-direction")==="column"){t.style.maxHeight="";let r=k.client(e).height,i=e.childNodes,s=i.length;for(let n=0;n<s;n++){let o=i[n];o!==t&&!o.classList.contains("b-resize-monitors")&&(r-=o.offsetHeight)}this.contentElement.style.maxHeight=`${r}px`}}get minHeight(){return g.measureSize(this.element.style.minHeight,this.element)}updateMinHeight(e){g.setLength(this.element,"minHeight",e)}updateDisabled(e){let t=this,r=t.element,i=t.focusElement;t.trigger("beforeUpdateDisabled",{disabled:e}),e&&t.revertFocus(),r&&(r.classList[e?"add":"remove"]("b-disabled"),i&&(i.disabled=e)),t.onDisabled(e)}onDisabled(e){}disable(){this.disabled=!0}enable(){this.disabled=!1}requestFullscreen(){let e=this,t=Te.request(e.floating?e.floatRoot:e.element);return Te.onFullscreenChange(e.onFullscreenChange),e.floating||(e.floatRoot._oldParent=e.floatRoot.parentElement,e.element.appendChild(e.floatRoot)),e.element.classList.add("b-fullscreen"),t}exitFullscreen(){return Te.exit()}onFullscreenChange(){Te.isFullscreen||this.onExitFullscreen()}onExitFullscreen(){let e=this,t=e._rootElement?.floatRoot;Te.unFullscreenChange(e.onFullscreenChange),e.element.classList.remove("b-fullscreen"),e.element.contains(t)&&t?._oldParent&&(t._oldParent.appendChild(t),t._oldParent=null)}get tooltip(){if(this._tooltip)return this._tooltip;{let e=E.Tooltip?.getSharedTooltip(this.rootElement);if(e&&e.activeTarget===this._element&&e.isVisible)return e}}changeTooltip(e,t){let r=this;if(e){if(!(r.preventTooltipOnTouch&&x.isTouchDevice))if(!e.isTooltip&&e.constructor.name!=="Object"&&(e={html:typeof e=="string"?e:r.placeholder,textContent:!0}),t?.isTooltip||e.newInstance)e.type="tooltip",e.forElement||(e.forElement=r.element),!("showOnHover"in e)&&!e.forSelector&&(e.showOnHover=!0),"autoClose"in e||(e.autoClose=!0),e=E.reconfigure(t,e,r);else{r.element.dataset.btip=!0,r.tipConfig=e;return}}else if(t)if(e==null&&t.isTooltip)t.destroy();else{t.html=null;return}else delete r.element.dataset.btip;return e}get tooltipText(){let e=this._tooltip;if(e)return e.isTooltip?e.contentElement.innerText:typeof e=="string"?e:e.html;if(this.tipConfig)return this.tipConfig.html}get isVisible(){let e=this,{element:t}=e,r;return Boolean(t&&!e._hidden&&!e.isDestroying&&rr(t)&&(!e.requireSize||It(t))&&(!(r=e.containingWidget)||r.isVisible))}focus(){this.isFocusable&&g.focusWithoutScrolling(this.focusElement)}get focusElement(){}get isFocusable(){let e=this.focusElement;return e&&this.isVisible&&!this.disabled&&(e===document.body||e.offsetParent)}async show(){let e=this,{showAnimation:t,element:r,floating:i}=e,{style:s}=r,n,o,l;return(l=!e.isVisible)&&(l=e.trigger("beforeShow"),I.isPromise(l)&&(l=await l)),l!==!1&&(!e.internalBeforeShow||e.internalBeforeShow()!==!1)?new Promise(c=>{if(e.cancelHideShowAnimation(),e.updateCentered(e._centered),i){let d=e.floatRoot;d.contains(r)||(e.rendered?d.appendChild(e.element):e.render(d,!1)),s.transform.includes("scale")&&(e.scale=null,s.transform=s.transformOrigin="");let u=e.closest(xd);if(u){let{scale:f}=u;e.scale=f,s.transform=`scale(${f})`,s.transformOrigin="0 0"}}if(e._hidden=!1,r.classList.remove("b-hidden"),e.onConfigChange({name:"hidden",value:!1,was:!0,config:e.$meta.configs.hidden}),t){n=Object.keys(t)[0],o=t[n];let d=e.currentAnimation={showing:!0,styleProp:n,resolve:c};e.isAnimating=!0,e.currentAnimation.detacher=O.onTransitionEnd({element:r,property:n,duration:To(o.duration)+20,handler:()=>e.afterHideShowAnimate(d),thisObj:e}),s[n]=o.from,g.getStyleValue(r,n),s.transition=`${n} ${o.duration} ease ${o.delay}`,s[n]=o.to}e.afterShow(!t&&c),!e.inShowBy&&(i||e.positioned)&&e.forElement&&!e.centered&&!e.hidden&&e.alignTo(e.forElement)}):Promise.resolve()}async showBy(e){let t=this,r;return t.isVisible?g.addTemporaryClass(t.element,"b-realigning",300):(t.inShowBy=!0,r=t.show(),t.inShowBy=!1),t.isVisible&&t.alignTo(e),r||Ed}async showByPoint(e,t,r){let i=arguments.length===1?e:[e,t];return this.showBy(Object.assign({position:new Be(i[0]+1,i[1]+1),matchSize:!1,align:"t-b"},r))}afterShow(e){let t=this;t.boundMaxHeightBugHandler&&t.boundMaxHeightBugHandler(),t.trigger("show"),t._configuredAnchorState=t.anchor,t.parent?.onChildShow?.(),t.triggerPaint(),e&&e()}triggerPaint(){let e=this,{element:t}=e,r=!e.isPainted;e.isVisible&&(r&&(e.scaleToFitWidth&&!e.monitorResize&&(e.onParentElementResize=e.onParentElementResize.bind(e),ce.addResizeListener(t.parentElement,e.onParentElementResize),e.updateScale()),!e.hideBryntumDomMessage&&(e.isTaskBoardBase||e.isGridBase||e.isCalendar)&&t.insertBefore(new Comment("POWERED BY BRYNTUM (https://bryntum.com)"),t.firstChild)),e.eachWidget(Cd,!1),r&&e.isVisible&&(e.rootElement=g.getRootElement(t),e.getConfig("tooltip"),!E.Ripple&&E.RippleClass&&(E.Ripple=new E.RippleClass({rootElement:e.rootElement}))),e.isPainted=!0,e.trigger("paint",{firstPaint:r}),r&&e.monitorResize&&!e.scaleToFitWidth&&ce.onElementResize([{target:t}]))}cancelHideShowAnimation(){let e=this,{currentAnimation:t,element:r}=e;t&&(e.isAnimating=!1,r.classList.contains("b-hiding")&&(r.classList.remove("b-hiding"),e._hidden=!1),t.detacher(),t.resolve(),r.style.transition=r.style[t.styleProp]="",e.currentAnimation=null)}afterHideShowAnimate(e){let t=this;e===t.currentAnimation&&(t.element.classList.remove("b-hiding"),t.cancelHideShowAnimation(),t._hidden&&t.afterHideAnimation())}suspendVisibility(){this._visibilitySuspended=(this._visibilitySuspended||0)+1,Object.defineProperty(this,"isVisible",Sd)}resumeVisibility(e=!0){--this._visibilitySuspended||(delete this.isVisible,e&&this.triggerPaint())}hide(e=!0){return new Promise(t=>{let r=this,{element:i,lastAlignSpec:s}=r,{style:n}=i,o=e&&r.hideAnimation;if(r.clearTimeout(r.scrollListenerTimeout),r.clearTimeout(r.resizeListenerTimeout),!r._hidden&&r.trigger("beforeHide")!==!1){if(r._hidden=!0,s&&(s.targetOutOfView=null,s.monitorIntersection&&(r.intersectionObserver.takeRecords(),r.intersectionObserver.unobserve(s.target))),r.onConfigChange({name:"hidden",value:!0,was:!1,config:r.$meta.configs.hidden}),!i){t();return}if(i.contains(g.getActiveElement(i))&&r.revertFocus(!0),r.isDestroyed){t();return}if(r.cancelHideShowAnimation(),o){let l=Object.keys(o)[0],c=o[l];if(Number(getComputedStyle(r.element)[l])!==c.to){let d=r.currentAnimation={hiding:!0,styleProp:l,resolve:t};i.classList.add("b-hiding"),r.isAnimating=!0,r.currentAnimation.detacher=O.onTransitionEnd({element:i,property:l,duration:To(c.duration)+20,handler:()=>r.afterHideShowAnimate(d),thisObj:r}),n[l]=c.from,g.getStyleValue(i,l),n.transition=`${l} ${c.duration} ease ${c.delay}`,n[l]=c.to}else i.classList.add("b-hidden")}else i.classList.add("b-hidden");r.afterHide(!o&&t,o)}})}doHideOrRealign({target:e,isTrusted:t}){let r=this,{anchoredTo:i,lastAlignSpec:s,element:n}=r,o=s?.target,l=s?.position,c=g.getActiveElement(r);if(!t||!e||e.nodeType===Element.DOCUMENT_NODE&&n.contains(c)&&bd[c]&&window.innerHeight<document.body.offsetHeight||e.nodeType===Node.ELEMENT_NODE&&(n.contains(e)||r.owns(e))||o?.nodeType===Node.ELEMENT_NODE&&!e.contains(o)&&e.nodeType!==Element.DOCUMENT_NODE)return;let d=r.scrollAction==="hide"&&r.getXY();if(r.realign(),!r.isDestroyed&&r.scrollAction==="hide"){let[u,f]=r.getXY();(u!==d[0]||f!==d[1]||o?.$$name==="Point"||l)&&(!i||e&&g.isDescendant(e,i))&&r.hide()}}afterHide(e=null,t=this.hideAnimation){let r=this;r._anchor=r._configuredAnchorState,r.removeTransientListeners(),t||r.afterHideAnimation(),r.trigger("hide"),r.parent?.onChildHide?.(),e&&e()}removeTransientListeners(){let e=this;e.clearTimeout(e.resizeListenerTimeout),e.clearTimeout(e.scrollListenerTimeout),e.documentScrollListener&&(e.documentScrollListener(),e.documentScrollListener=!1),e.rootScrollListener&&(e.rootScrollListener(),e.rootScrollListener=!1),e.targetResizeListener&&(ce.removeResizeListener(e.lastAlignSpec.target,e.callRealign),e.targetResizeListener=!1),e.constrainListeners&&(ce.removeResizeListener(e.lastAlignSpec.constrainTo||window,e.callRealign),e.constrainMutationMonitor&&e.constrainMutationMonitor.disconnect(),e.constrainListeners=!1)}afterHideAnimation(){let e=this,{element:t}=e;e.floating&&e.floatRoot.contains(t)?t.remove():t.classList.add("b-hidden"),e.defaultAnchorBackgroundColor&&e.anchorPathElement.setAttribute("fill",e.defaultAnchorBackgroundColor)}changeHidden(e){let t=this,r;return t.isConfiguring?(r=Boolean(e),t.element.classList[e?"add":"remove"]("b-hidden")):(t.trigger("beforeChangeHidden",{hidden:e}),e?t.hide():t.show()),r}get assignedId(){return this.hasGeneratedId?null:this.id}get owner(){return this.parent||this._owner||this.containingWidget}get containingWidget(){let e=this.parent;if(!e){let t=this.forElement?.nodeType===Element.ELEMENT_NODE?this.forElement:this.element?.parentNode;e=t?.closest(".b-widget")&&E.fromElement(t)}return e}get previousSibling(){return this.getSibling(-1)}get nextSibling(){return this.getSibling(1)}getSibling(e){let t=this,{parent:r}=t,i=r?r.childItems:Array.from(t.element.parentElement.querySelectorAll(".b-widget"));return r?i[i.indexOf(t)+e]:E.fromElement(i[i.indexOf(t.element)+e])}up(){let{owner:e}=this;if(e)return e.closest(...arguments)}closest(e,t,r){let i=typeof r,s=i==="number",n=i==="string";for(let o=this,l=1;o;o=o.owner,l++){if(E.widgetMatches(o,e,t))return o;if(s&&l>=r)return;if(n&&E.widgetMatches(o,r,t))return;if(o===r)return}}owns(e){if(e){if(e.eventPhase&&(e=e.target),e.nodeType===Element.ELEMENT_NODE){if(this.element.contains(e))return!0;e=E.fromElement(e)}for(;e;){if(e===this)return!0;e=e.owner}}return!1}eachAncestor(e){let t=this.owner;for(;t;){if(e(t)===!1)return!1;t=t.owner}return!0}changeMonitorResize(e,t){let r=this.scaleToFitWidth?!1:Boolean(e);if(r!==Boolean(t))return r}updateMonitorResize(e){let t=this;At.call(t,"onElementResize")||(t.onElementResize=t.onElementResize.bind(t)),ce[e?"addResizeListener":"removeResizeListener"](t.element,t.onElementResize)}changeReadOnly(e){if(e=Boolean(e),Boolean(this._readOnly)!==e)return e}updateReadOnly(e){this.element?.classList[e?"add":"remove"]("b-readonly"),this.isConfiguring||(this.eachWidget(t=>{t.ignoreParentReadOnly||("_originalReadOnly"in t||(t._originalReadOnly=t.config.readOnly||!1),t.readOnly=e||t._originalReadOnly)},!1),this.trigger("readOnly",{readOnly:e}))}eachWidget(e,t=!0){let r=this.childItems,i=r?.length||0,s={};for(let n=0;n<i;n++){let o=r[n];if(s.down=t,e(o,s)===!1||s.down&&o.eachWidget&&o.eachWidget(e,t)===!1)return!1}return!0}queryAll(e){let t=[];return this.eachWidget(r=>{e(r)&&t.push(r)}),t}query(e){let t=null;return this.eachWidget(r=>{if(e(r))return t=r,!1}),t}getWidgetByRef(e){return e instanceof E?e:this?.widgetMap?.[e]||this?.owner?.getWidgetByRef(e)}onFocusIn(e){let t=this,{element:r}=t;t.containsFocus=!0,t.focusInEvent=e,r.classList.add("b-contains-focus"),r.contains(e._target)&&t.onInternalKeyDown&&!t.keyDownListenerRemover&&(t.keyDownListenerRemover=O.on({element:r,keydown:"onInternalKeyDown",thisObj:t})),t.trigger("focusin",e)}onFocusOut(e){let t=this;t.keyDownListenerRemover&&(t.keyDownListenerRemover(),t.keyDownListenerRemover=null),t.isDestroyed||(e.relatedTarget||t.revertFocus(!t.isVisible),t.containsFocus=!1,t.element.classList.remove("b-contains-focus"),t.trigger("focusout",e))}captureFocus(){let e=this,t=g.getActiveElement(e),r=e.contains(t)&&e.captureFocusItem(t);return i=>{r&&!e.isDestroying&&g.getActiveElement(e)!==t&&r(i)}}captureFocusItem(e){return(t=!0)=>{this.contains(e)&&(t?e.focus():g.focusWithoutScrolling(e))}}contains(e,t){let{element:r}=this;if(e&&r)return e.isWidget&&(e=e.element),r.contains(e)&&(!t||r!==e)}revertFocus(e){let t=this,r=g.getActiveElement(t),i=t.focusInEvent?.relatedTarget;(e||t.containsFocus&&i?.nodeType===Element.ELEMENT_NODE&&t.element.contains(r))&&((!i||!g.isFocusable(i))&&(i=t.getFocusRevertTarget()),i&&g.isFocusable(i)?g.focusWithoutScrolling(i):r?.blur())}getFocusRevertTarget(){let e=this,{owner:t,focusInEvent:r}=e,i=r&&r.backwards?1:-1,s=r&&r.relatedTarget,n=s&&E.fromElement(s);if(t&&!t.isDestroyed&&(!s||!g.isFocusable(s)||n&&!n.isFocusable)){if(s=null,t.eachWidget){let o=[];if(t.eachWidget(l=>{(l===e||l.isFocusable)&&o.push(l)},!1),o.length>1){let l=o.indexOf(e);s=o[l+i]||o[l-i]}}!s&&t.isFocusable&&(s=t),s=s?s.focusElement:t.getFocusRevertTarget()}return s}getStaticWidgetClasses(e,t){let r=new P,i=this.$meta.hierarchy,s,n,o,l,c;for(n=i.indexOf(e);n<i.length;++n)s=i[n],c=Reflect.getOwnPropertyDescriptor(s.prototype,"widgetClass"),c?.get?l=c.get.call(this):(o=At.call(s,"$$name")||At.call(s,"$name")||At.call(s,"_$name")?s.$$name:s.name,(o.length<3||o.includes("$"))&&console.warn(`Class "${o}" extending "${s.$name}" should have "$name" static getter with no less than 3 chars.`),l=`b-${o.toLowerCase()}`),l&&r.add(t?l+t:l);return r}get rootUiClass(){return E}get staticClassList(){let{$meta:e}=this,t=e.staticClassList;return t||(e.staticClassList=t=this.getStaticWidgetClasses(E),x.isTouchDevice&&t.add("b-touch")),t}get uiClasses(){return this.getConfig("ui"),this._uiClasses}get uiClassList(){return this.getConfig("ui"),this._uiClassList}get widgetClassList(){let e=this,{cls:t,defaultCls:r,uiClasses:i}=e,{staticClassList:s}=e,n;return(r||t)&&(s=s.clone(),r&&s.assign(r),t&&s.assign(t)),n=s.values,i&&n.push(...i),e.floating&&n.push("b-floating"),e.collapsify==="hide"&&n.push("b-collapsify-hide"),n}changeCls(e){return P.from(e)}changeContentElementCls(e){return P.from(e)}changeHtmlCls(e){return P.from(e)}changeDefaultCls(e){return P.from(e,!0)}changeUi(e){return P.from(e)}updateUi(e){let t=null,r,i;if(e){let s=this.getStaticWidgetClasses(this.rootUiClass);for(i in e)if(e[i])for(r in s)s[r]&&((t||(t=new P))[`${r}-ui-${i}`]=1)}this._uiClasses=t?.values,this._uiClassList=t}fromCache(e,t=!1,r=this.element){if(!r)return null;let i=this;return i.cache[e]||(i.cache[e]=t?g.children(r,e):g.down(r,e)),i.cache[e]}emptyCache(){this.cache={}}changeMasked(e,t){if((e===!0||e==="")&&(e="\xA0"),t)typeof e=="string"?(t.text=e,e=t):e?(t.setConfig(e),e=t):t.destroy();else if(e){let r=E.resolveType("mask");e=r.mergeConfigs(this.maskDefaults,e),e.owner=this,e=r.mask(e)}return e||null}onMaskAutoClose(e){e.isDestroyed&&e===this.masked&&(this.masked=null)}mask(e){return this.masked=e,this.masked}unmask(){this.masked=null}onInternalResize(e,t,r,i,s){this._width=e.offsetWidth,this._height=e.offsetHeight}onElementResize(e){let t=this,{element:r}=t,i=t._width,s=t._height,n=r.offsetWidth,o=r.offsetHeight;t.floating&&t.onFloatingWidgetResize(...arguments),!t.suspendResizeMonitor&&(i!==n||s!==o)&&(t.onInternalResize(r,n,o,i,s),t.trigger("resize",{width:n,height:o,oldWidth:i,oldHeight:s}))}onFloatingWidgetResize(e,t,r){let i=this,{lastAlignSpec:s,constrainTo:n}=i;if(i.isVisible&&s&&s.target){let o=!t||r.height!==t.height,l=!t||r.width!==t.width,c=n&&!k.from(n).contains(k.from(i.element,null,!0));(o&&s.zone!==2||l&&s.zone!==1||c)&&i.requestAnimationFrame(()=>i.realign())}}updateScale(){let e=this,t=e.element,r=t.parentElement;e.configuredWidth||(e.configuredWidth=e.width),t.style.display="none";let i=k.client(r),s=i.width/e.configuredWidth,n=e.scale=e.allowGrowWidth?Math.min(s,1):s;t.style.transform=`scale(${n})`,t.style.transformOrigin="top left",t.style.display="",e.allowGrowWidth&&s>1&&(e.width=e.configuredWidth*s)}onParentElementResize(e){this.updateScale()}parseTRBL(e,t="px"){if(e=e||0,typeof e=="number")return[`${e}${t}`,`${e}${t}`,`${e}${t}`,`${e}${t}`];let r=e.split(" "),i=r.length;return i===1?r[1]=r[2]=r[3]=r[0]:i===2?(r[2]=r[0],r[3]=r[1]):i===3&&(r[3]=r[1]),[isFinite(r[0])?`${r[0]}${t}`:r[0],isFinite(r[1])?`${r[1]}${t}`:r[2],isFinite(r[2])?`${r[2]}${t}`:r[3],isFinite(r[3])?`${r[3]}${t}`:r[4]]}get documentRoot(){return this.owner?.documentRoot||this.element.getRootNode()}get rootElement(){let e=this;if(!e._rootElement){let t=e.owner?.rootElement||e.forElement instanceof HTMLElement&&g.getRootElement(e.forElement);if(!t){let r=e.element instanceof HTMLElement&&g.getRootElement(e.element);(r===document.body||r.nodeType===Node.DOCUMENT_FRAGMENT_NODE)&&(t=r)}t||(t=document.body),e._rootElement=t}return e._rootElement}get floatRoot(){let e=this,t=e.rootElement||e.owner?.rootElement,{floatRoot:r}=t;if(r)t.contains(r)||t.appendChild(r);else{let{outerCls:i}=E,s=g.themeInfo?.name;if(!g.isValidFloatRootParent(t))throw new Error("Attaching float root to wrong root");s&&i.push(`b-theme-${s.toLowerCase()}`),r=t.floatRoot=g.createElement({className:`b-float-root ${i.join(" ")}`,parent:t}),nr.push(r),x.isAndroid&&(r.style.height=`${screen.height}px`,O.on({element:window,orientationchange:()=>r.style.height=`${screen.height}px`})),!x.isHoverableDevice&&window.visualViewport&&O.on({element:window.visualViewport,resize:({target:n})=>r.style.height=`${n.height}px`}),ae.on({theme:({theme:n,prev:o})=>{r.classList.add(`b-theme-${n.toLowerCase()}`),r.classList.remove(`b-theme-${o.toLowerCase()}`)}})}return r}get floatRootMaxZIndex(){let e=1;return Array.from(this.floatRoot.children).forEach(t=>{let r=parseInt(getComputedStyle(t).zIndex||0,10);r>e&&(e=r)}),e}static resetFloatRootScroll(){nr.forEach(e=>e.scrollTop=e.scrollLeft=0)}static get floatRoots(){return nr}static removeFloatRoot(e){nr.splice(nr.indexOf(e),1)}static get outerCls(){let e=["b-outer"];return x.isTouchDevice&&e.push("b-touch-events"),g.scrollBarWidth?e.push("b-visible-scrollbar"):e.push("b-overlay-scrollbar"),x.isChrome?e.push("b-chrome"):x.isSafari?e.push("b-safari"):x.isFirefox?e.push("b-firefox"):x.isIE11?e.push("b-ie"):x.isEdge&&e.push("b-edge"),window.ResizeObserver||e.push("b-no-resizeobserver"),e}get isAnimating(){return this._isAnimatingCounter>0}set isAnimating(e){let t=this;t._isAnimatingCounter===0&&e?(t.element.classList.add("b-animating"),t.trigger("animationStart")):t._isAnimatingCounter===1&&!e&&(t.element.classList.remove("b-animating"),t.trigger("animationEnd")),t._isAnimatingCounter+=e?1:-1,t._isAnimatingCounter=Math.max(0,t._isAnimatingCounter)}async waitForAnimations(){this.isAnimating&&await this.await("animationend",{checkLog:!1})}static query(e,t=!1){let{idMap:r}=E.identifiable;for(let i in r)if(E.widgetMatches(r[i],e,t))return r[i];return null}static queryAll(e,t=!1){let{idMap:r}=E.identifiable,i=[];for(let s in r)E.widgetMatches(r[s],e,t)&&i.push(r[s]);return i}static fromElement(e,t,r){let i=typeof t;e&&!e.nodeType&&(e=e.target),(i==="number"||t&&t.nodeType===Element.ELEMENT_NODE)&&(r=t,t=null);let s=e,n=0,o,l,c;for(typeof r!="number"&&(o=r,r=Number.MAX_VALUE),i==="string"&&(t=t.toLowerCase());s&&s.nodeType===Element.ELEMENT_NODE&&n<r&&s!==o;){if(l=s.dataset&&s.dataset.ownerCmp||s.id,l){if(c=E.getById(l),c)if(t){if(i==="function"){if(t(c))return c}else if(E.widgetMatches(c,t,!0))return c}else return c;n++}s=s.parentNode}return null}triggerFieldChange(e,t=!0){t&&this.trigger("change",e),this.eachAncestor(r=>{if(r.onFieldChange&&r.onFieldChange(e),r.isolateFields)return!1})}setupFocusListeners(){ae.setupFocusListenersOnce(this._rootElement,O)}static widgetMatches(e,t,r){return t==="*"?!0:typeof t=="function"?t(e):E.isType(e,t,r)}static attachTooltip(e,t){return typeof t=="string"&&(t={html:t}),E.create(Object.assign({forElement:e},t),"tooltip"),e}},Dd=E.prototype;["compose","domSyncCallback"].forEach(a=>Dd[a].$nullFn=!0);E.initClass();E.register("mask",Ae);g.Widget=E;ae.Widget=E;Ae.identifiable.idMap=E.identifiable.idMap;Object.assign(window.bryntum||(window.bryntum={}),{get:E.getById.bind(E),query:E.query,queryAll:E.queryAll,fromElement:E.fromElement});var tt=class extends S.mixin(re,ht){static get type(){return"default"}static get configurable(){return{owner:null,containerCls:"b-auto-container",itemCls:null}}static get factoryable(){return{defaultType:"default"}}get contentElement(){return this.owner?.contentElement}onChildAdd(e){}onChildRemove(e){}renderChildren(){let e=this,{owner:t,containerCls:r,itemCls:i}=e,{contentElement:s,items:n}=t,o=t.itemCls,l=n?.length;if(s.classList.add("b-content-element"),r&&s.classList.add(r),l){t.textContent=!1;for(let c=0;c<l;c++){let d=n[c],{element:u}=d;u.dataset.itemIndex=c,i&&u.classList.add(i),o&&u.classList.add(o),u.classList.remove("b-outer"),d.render(s,Boolean(t.isPainted))}}e.syncPendingConfigs(),e.syncChildCount()}removeChild(e){let t=this,{element:r}=e,{owner:i,itemCls:s}=t,{contentElement:n}=i,o=i.itemCls;n.contains(r)&&r.remove(),delete r.dataset.itemIndex,s&&r.classList.remove(s),o&&r.classList.remove(o),t.fixChildIndices(),t.syncChildCount()}appendChild(e){let{element:t}=e,{owner:r,itemCls:i}=this,{contentElement:s}=r,n=r.itemCls;t.dataset.itemIndex=r.indexOfChild(e),r.textContent=!1,i&&t.classList.add(i),n&&t.classList.add(n),e.render(s,Boolean(r.isPainted)),this.syncChildCount()}insertChild(e,t){let r=this,{element:i}=e,{owner:s,itemCls:n}=r,{contentElement:o}=s,l=g.getChild(o,`[data-item-index="${t}"]`),c=s.itemCls;s.textContent=!1,n&&i.classList.add(n),c&&i.classList.add(c),o.insertBefore(i,l),e.render(null,Boolean(s.isPainted)),r.fixChildIndices(),r.syncChildCount()}fixChildIndices(){this.owner.items.forEach((e,t)=>{e.element.dataset.itemIndex=t})}syncChildCount(){let{owner:e}=this,{length:t}=e.items;e.contentElement?.classList[t===1?"add":"remove"]("b-single-child")}syncConfigLater(e){let t=this.pendingConfigs||(this.pendingConfigs=[]);t.includes(e)||t.push(e)}syncConfigStyle(e,t,r){let i=this,{contentElement:s}=i,n=i[e];s?s.style[t]=r?.[n]||n:i.syncConfigLater(e)}syncPendingConfigs(){let e=this,{pendingConfigs:t}=e,r;if(t)for(e.pendingConfigs=null;r=t.pop();)e[e.$meta.configs[r].updater](e[r])}};tt.initClass();var Mo=0,Td=a=>a.ripple,cs=class extends E{static get defaultConfig(){return{old_element:{children:[{className:"b-ripple-inner",reference:"rippleElement"}]},element:{children:[{tag:"svg",class:"b-ripple-inner",reference:"rippleElement",ns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 100 100",children:[{reference:"circleElement",tag:"circle",cx:"0",cy:"0",r:10}]}]},floating:!0,hideAnimation:!1,showAnimation:!1,scrollAction:"realign",color:"rgba(0,0,0,.3)",startRadius:10,radius:100}}static get $name(){return"Ripple"}afterConstruct(){super.afterConstruct(),O.on({element:this.rootElement,mousedown:"onRippleControllingEvent",thisObj:this,capture:!0,once:!0})}onRippleControllingEvent(e){let t=this;t.show();let r=g.getStyleValue(t.circleElement,"animationName");t.hide(),t.listenerDetacher?.(),r&&r!=="none"&&(t.listenerDetacher=O.on({mousedown:{element:t.rootElement,capture:!0,handler:"onMousedown"},touchstart:{element:t.rootElement,capture:!0,handler:"onTouchStart"},animationend:{element:t.circleElement,handler:"onAnimationEnd"},thisObj:t}),e.type==="mousedown"&&(t.onMousedown(e),ae.on({theme:"onRippleControllingEvent",thisObj:this})))}onTouchStart(e){Mo=performance.now(),this.handleTriggerEvent(e)}onMousedown(e){performance.now()-Mo>200&&this.handleTriggerEvent(e)}handleTriggerEvent(e){let t=E.fromElement(e.target,Td);if(t){let r=t.ripple,i=r.delegate?e.target.closest(r.delegate):t.focusElement||t.element;if(i){let s=b.assign({event:e,target:i,radius:this.radius},r);if(typeof s.clip=="string"&&(s.clip=t[s.clip]||e.target.closest(s.clip),!s.clip))return;this.ripple(s)}}}ripple({event:e,point:t=O.getClientPoint(e),target:r=e.target,clip:i=r,radius:s=this.radius,color:n=this.color}){this.clip=i,i=k.from(i,null,!0);let o=this,l=i.getDelta(t),c=o.rippleElement.style,d=o.circleElement,u=g.getStyleValue(r,"border-radius");o.hide(),c.transform=`translateX(${l[0]}px) translateY(${l[1]}px)`,c.height=c.width=`${s}px`,o.element.style.borderRadius=u,d.setAttribute("r",s),d.setAttribute("fill",n),o.showBy({target:i,align:"c-c",matchSize:!0})}onAnimationEnd(e){e.animationName==="b-ripple-expand"&&this.hide()}};E.RippleClass=cs;var or=class{constructor(e,t){typeof e=="number"?(this._magnitude=e,this._unit=t):(typeof e=="string"&&(e=D.parseDuration(e)),typeof e=="object"&&Object.assign(this,e))}get magnitude(){return this._magnitude}set magnitude(e){this._magnitude=typeof e=="number"&&e}get unit(){return this._unit}set unit(e){this._unit=D.parseTimeUnit(e)}get isValid(){return this._magnitude!=null&&this._unit}get milliseconds(){return this.isValid?Math.round(D.asMilliseconds(this._magnitude,this._unit)):0}isEqual(e){return Boolean(e&&this.milliseconds===e.milliseconds)}toString(e){let t=this,r=e?"getShortNameOfUnit":"getLocalizedNameOfUnit";return t.isValid?`${t._magnitude} ${D[r](t._unit,t._magnitude!==1)}`:""}toJSON(){return this.toString()}valueOf(){return this.milliseconds}};var Rd=(a,e)=>a?.[e],de=class extends S.mixin(ft){static get defaultConfig(){return{value:null,operator:null,filterBy:null,convert:null,caseSensitive:!0,id:null,type:null}}static get configurable(){return{property:null}}construct(e){typeof e=="function"&&(e={filterBy:e}),e.type?e.type==="date"?e.value=new Date(e.value):e.type==="duration"&&(e.value=new or(e.value)):D.isDate(e.value)?e.type="date":e.value instanceof or&&(e.type="duration"),super.construct(e)}get id(){return this._id||(this._id=this.property||de.generateId("b-filter"))}set id(e){this._id=e}onChange(e){let t=this;!t.isConfiguring&&t.owner&&!t.owner.isConfiguring&&t.owner.onFilterChanged&&t.owner.onFilterChanged(t,e)}get filterBy(){return this._filterBy||this.defaultFilterBy}set filterBy(e){this._filterBy=e}defaultFilterBy(e){let t=this,r;return t._propertyItems.length>1?r=t._propertyItems.reduce(Rd,e):r=e[t.property],t[t.operator](t.convert(r))}updateProperty(e){this._propertyItems=e.split("."),this.onChange("property")}set value(e){this._value=e,e=e?.valueOf()??e,this._filterValue=!this.caseSensitive&&typeof e=="string"?e.toLowerCase():e,this.onChange("value")}get value(){return this._value}get filterValue(){return this._filterValue}set operator(e){this._operator=e,this.onChange("operator")}get operator(){return this._operator?this._operator:Array.isArray(this.filterValue)?"isIncludedIn":typeof this.filterValue=="string"?"*":"="}convert(e){return typeof this.filterValue=="string"&&e instanceof Date||(e=e?.valueOf()??e),e=!this.caseSensitive&&typeof e=="string"?e.toLowerCase():e,e}filter(e){return this.filterBy(e)}startsWith(e){return String(e).startsWith(this.filterValue)}endsWith(e){return String(e).endsWith(this.filterValue)}isIncludedIn(e){return this.filterValue.length===0||this.filterValue.includes(e)}"="(e){return b.isEqual(e,this.filterValue)}"!="(e){return!b.isEqual(e,this.filterValue)}">"(e){return b.isMoreThan(e,this.filterValue)}">="(e){return b.isMoreThan(e,this.filterValue)||b.isEqual(e,this.filterValue)}"<"(e){return b.isLessThan(e,this.filterValue)}"<="(e){return b.isLessThan(e,this.filterValue)||b.isEqual(e,this.filterValue)}"*"(e){return b.isPartial(e,this.filterValue)}static generateFiltersFunction(e){return!e||!e.length&&!e.count?W.returnTrue:function(t){let r=!0;for(let i of e)if(i.disabled||(r=i.filter(t)),!r)break;return r}}};var Pt=class extends S{static get defaultConfig(){return{property:null,direction:"ASC",sortFn:null,convert:null,id:null,useLocaleSort:null}}construct(e){typeof e=="function"&&(e={sortFn:e}),super.construct(e)}get id(){return this._id||(this._id=this.property||Ht.generateId("b-sorter"))}set id(e){this._id=e}set sortFn(e){this._sortFn=e}get sortFn(){return this._sortFn?this._sortFn:this.defaultSortFn}defaultSortFn(e,t){let r=this,{convert:i,property:s,useLocaleSort:n}=r,o=r.direction.toLowerCase()==="desc"?-1:1;if(e=e[s],t=t[s],i&&(e=i(e),t=i(t)),n&&e!=null&&t!=null){if(n===!0)return String(e).localeCompare(t);if(typeof n=="string")return String(e).localeCompare(t,n);if(typeof n=="object")return String(e).localeCompare(t,n.locale,n)}return(e>t?1:e<t?-1:0)*o}static generateSortFunction(e,t){let r=e.isCollection?e.values:e,i=r.length;return(s,n)=>{let o,l;for(l=0;l<i;++l)if(o=r[l].sortFn(s,n),o)return o;return t?t(s,n):0}}};var Md=()=>0,Fd=(a,e)=>e-a,ds=Symbol("filteredIndicesProperty"),$t=Object.freeze([]),kd=Object.freeze({action:"sort",added:$t,removed:$t,replaced:$t}),Od=Object.freeze({action:"filter",added:$t,removed:$t,replaced:$t}),mt={string:1,number:1};function Fo(a,e,t){if(e.unique!==!1)e.set(t,a);else{let r=e.get(t);r||(r=new Set,e.set(t,r)),r.add(a)}}function Ld(a,e,t){e.unique!==!1?e.delete(t):e.has(t)&&(e.get(t).delete(a),e.get(t).size||e.delete(t))}function ko(a,e,t,r){for(let i=0;i<a.length;i++){let s=a[i];for(let n=0;n<r;n++){let o=t[n],l=s[o],c=e[o];Fo(s,c,l)}}}var Re=class extends S.mixin(re){static get configurable(){return{idProperty:"id",extraKeys:null,autoFilter:!0,autoSort:!0,sorters:{$config:["lazy"],value:[]}}}get isCollection(){return!0}construct(e){this.generation=0,this._values=[],super.construct(e)}doDestroy(){super.doDestroy();let e=this;e._values.length=0,e.isFiltered&&(e._filteredValues.length=0,e.filters.destroy()),e._sorters?.destroy()}clear(){let e=this,t=e._values.slice();e.totalCount&&(e._values.length=0,e._filteredValues&&(e._filteredValues.length=0),e._indicesInvalid=!0,e.generation++,e.trigger("change",{action:"clear",removed:t}))}replaceValues({values:e,filteredValues:t,silent:r=!1,isNewDataset:i=!1}){let s=this,n,o;s.isFiltered&&!i?(Boolean(t)?e&&(n=s._values,s._values=e.slice()):(t=e.slice(),e=null),o=s._filteredValues,s._filteredValues=t.slice()):(n=s._values,s._values=e.slice(),t=null,s.isFiltered&&i&&s.autoFilter?(s._filterFunction=null,s._filteredValues=s._values.filter(s.filterFunction)):s._filteredValues&&(s._filteredValues.length=0)),s._indicesInvalid=!0,s.generation++,r||s.trigger("change",{action:"replaceValues",replacedValues:n,replacedFilteredValues:o,values:e,filteredValues:t})}set values(e){this.invalidateIndices(),this.splice(0,this._values.length,e)}get values(){return this.isFiltered?this._filteredValues:this._values}[Symbol.iterator](){return this.values[Symbol.iterator]()}forEach(e,t=!1){(this.isFiltered&&!t?this._filteredValues:this._values).forEach(e)}map(e,t=!1){return(this.isFiltered&&!t?this._filteredValues:this._values).map(e)}find(e,t=!1){return(this.isFiltered&&!t?this._filteredValues:this._values).find(e)}get first(){return this.values[0]}get last(){return this.values[this.count-1]}get allValues(){return this._values}add(...e){e.length===1?this.splice(this._values.length,null,...e):this.splice(this._values.length,null,e)}remove(...e){e.length===1?this.splice(0,...e):this.splice(0,e)}move(e,t){for(Array.isArray(e)||(e=[e]);e.length&&e[0]===t;)e.shift();if(!e.length)return;let r=this,{_values:i}=r,s=r.indexOf(e[0],!0);if(e.length===1&&i[s+1]===t)return;r.suspendEvents(),r.remove(e),r.resumeEvents();let n=t?r.indexOf(t,!0):i.length;if(n===-1)throw new Error("Collection move beforeItem parameter must be present in Collection");return i.splice(n,0,...e),r._indicesInvalid=1,r.trigger("change",{action:"move",items:e,from:s,to:n}),n}splice(e=0,t,...r){let i=this,s=i.idProperty,n=i._values,o={},l=[],c=[],d=i.totalCount,u,f;if(r)if(r.length===1&&Array.isArray(r[0])&&(r=r[0]),d&&r.length){let h=i.indices[s];u=[];for(let m=0;m<r.length;m++){let p=r[m],y=p[s],C=h.get(y),w=C?n.indexOf(C):-1;o[y]=!0,w!==-1?n[w]!==p&&(c.push([n[w],p]),n[w]=p):u.push(p)}}else u=r;if(t){if(typeof t=="number"){t=Math.min(t,n.length-e);for(let h=e;t;--t){let m=n[h][s];o[m]?(e++,h++):(l.push(n[h]),n.splice(h,1),f=!0)}}else{let h=u.length===0,m;Array.isArray(t)||(t=[t]);let p=t.reduce((y,C)=>{let w=typeof C=="number",T=w?C:i.indexOf(C,!0);return h&&(m!=null&&T!==m+1||w)&&(h=!1),T>=0&&T<d&&y.push(T),m=T,y},[]).sort(Fd);if(h)p.length&&(l.push.apply(l,t),n.splice(p[p.length-1],p.length),f=!0);else for(let y=0;y<p.length;y++){let C=p[y];if(C!==-1){let w=n[C][s];o[w]||(l.unshift(n[C]),n.splice(C,1),f=!0)}}}l.length&&!i._indicesInvalid&&l.forEach(i.removeFromIndices,i)}u.length&&(n.splice(Math.min(e,n.length),0,...u),f=!0,i._indicesInvalid||u.forEach(i.addToIndices,i)),c.length&&!i._indicesInvalid&&c.forEach(h=>{i.removeFromIndices(h[0]),i.addToIndices(h[1])}),f||c.length?(i.isSorted?i.onSortersChanged():i.isFiltered&&(i.autoFilter?i.onFiltersChanged():i._filteredValues.push(...u)),i.generation++,i.trigger("change",{action:"splice",removed:l,added:u,replaced:c,oldCount:d})):i.trigger("noChange",{index:e,toRemove:t,toAdd:r})}changeId(e,t){let r=this,{idProperty:i}=r,s=mt[typeof e]?e:e[i],n=r.get(s);if(n){let o=r.get(t);if(o&&n!==o)throw new Error(`Attempt to set item ${s} to already existing member's id ${t}`);r.removeIndexEntry(e,i,s),r.addIndexEntry(e,i,t),n[i]=t}}get(e,t=!1){return this.getBy(this.idProperty,e,t)}getAt(e,t=!1){return this.isFiltered&&!t?this._filteredValues[e]:this._values[e]}getBy(e,t,r=!1){return this.findItem(e,t,this.isFiltered&&r)}get count(){return this.values.length}get totalCount(){return this._values.length}updateIdProperty(e){this.addIndex({property:e,unique:!0})}changeSorters(e){return new Re({values:Array.isArray(e)?e:[e],listeners:{change:"onSortersChanged",thisObj:this}})}addSorter(e){let t=e instanceof Pt?e:new Pt(e);return this.sorters.add(t),t}get isSorted(){return Boolean(this._sorters?.count)}onSortersChanged(){let e=this;delete e._sortFunction,e._values.sort(e.sortFunction),e.trigger("change",kd)}get sortFunction(){return this._sortFunction||(this.isSorted?this._sortFunction=Pt.generateSortFunction(this.sorters.values):this._sortFunction=Md),this._sortFunction}get filters(){return this._filters||(this._filters=new Re({listeners:{change:"onFiltersChanged",thisObj:this}})),this._filters}addFilter(e){let t=e instanceof de?e:new de(e);return this.filters.add(t),t}get isFiltered(){return Boolean(this._filters&&this._filters.count)}onFiltersChanged(){let e=this;e._filterFunction=null,e._filteredValues=e._values.filter(e.filterFunction),e._indicesInvalid=!0,e.trigger("change",Od)}get filterFunction(){return this._filterFunction||(this.isFiltered?this._filterFunction=de.generateFiltersFunction(this.filters.values):this._filterFunction=W.returnTrue),this._filterFunction}changeExtraKeys(e){return(Array.isArray(e)?e:[e]).map(r=>typeof r=="string"?{property:r,unique:!0}:r)}updateExtraKeys(e){for(let t=0;t<e.length;t++)this.addIndex(e[t])}addIndex(e){e&&((this._indices||(this._indices={}))[e.property]=new Map,Object.assign(this._indices[e.property],e),this.invalidateIndices())}findIndex(e,t,r=!1){let i=this.findItem(e,t,r);return i?(this.isFiltered&&!r?this._filteredValues:this._values).indexOf(i):-1}findItem(e,t,r=!1){let i=this,{isFiltered:s}=i,n=s&&!r?i.indices[ds][e]:i.indices[e];if(n){let o=n.get(t)??(typeof t=="string"&&t.length&&!isNaN(t)&&n.get(Number(t))||null);if(o!=null)return o}else{let o=s&&!r?i._filteredValues:i._values,l=o.length;for(let c=0;c<l;c++){let d=o[c];if(d[e]==t)return d}}return null}removeIndex(e){delete this._indices[e]}indexOf(e,t=!1){return this.findIndex(this.idProperty,mt[typeof e]?e:e[this.idProperty],t)}includes(e,t=!1){return Array.isArray(e)?e.some(r=>this.includes(r)):Boolean(this.findItem(this.idProperty,mt[typeof e]?e:e[this.idProperty],t))}get indices(){return this._indicesInvalid&&this.rebuildIndices(),this._indices}invalidateIndices(){this._indicesInvalid=!0}rebuildIndices(){let e=this,t=e.isFiltered,r=e._indices||(e._indices={}),i=Object.keys(r),s=i.length,n=e._values,o;t&&(o=r[ds]={});for(let l=0;l<s;l++){let c=r[i[l]];if(c.clear(),t){let d=o[i[l]];d?d.clear():(d=o[i[l]]=new Map,d.unique=c.unique)}}ko(n,r,i,s),t&&ko(e._filteredValues,o,i,s),e._indicesInvalid=!1}getIndices(e){let t=[this.indices[e]];return this.isFiltered&&t.push(this.indices[ds][e]),t}addToIndices(e){Object.keys(this.indices).forEach(t=>{this.addIndexEntry(e,t,e[t])})}removeFromIndices(e){Object.keys(this.indices).forEach(t=>{this.removeIndexEntry(e,t,e[t])})}removeIndexEntry(e,t,r){this.getIndices(t).forEach(i=>Ld(e,i,r))}addIndexEntry(e,t,r){this.getIndices(t).forEach(i=>Fo(e,i,r))}onItemMutation(e,t){!this._indicesInvalid&&Object.keys(this.indices).length>1&&Object.keys(t).forEach(r=>{if(this.indices[r]){let{value:i,oldValue:s}=t[r];this.removeIndexEntry(e,r,s),this.addIndexEntry(e,r,i)}})}};var Oo=new WeakMap,lr=a=>{if(a&&typeof a=="object"){let e=Oo.get(a);e===void 0&&(e=Symbol("bscik"),Oo.set(a,e)),a=e}return a},xt=class{constructor(e){let t=this;t.generation=0,t.items=new Set,t.idMap={},t.idProperty="id",e&&(e.idProperty&&(t.idProperty=e.idProperty),e.values&&(t.values=e.values))}get(e){return this.idMap[lr(e)]}get count(){return this.items.size}add(...e){e.length===1&&Array.isArray(e[0])&&(e=e[0]);let t=this,{items:r,idMap:i,idProperty:s}=t,n=e.length;for(let o=0;o<n;o++){let l=e[o],c=mt[typeof l]?l:lr(l[s]),d=i[c];d==null?(i[c]=l,r.add(l),t.generation++):d!==l&&(i[c]=l,r.delete(d),r.add(l))}}remove(e){Array.isArray(e)||(e=[e]);let{items:t,idMap:r,idProperty:i}=this,s=e.length;for(let n=0;n<s;n++){let o=e[n],l=mt[typeof o]?o:lr(o[i]),c=r[l];c!=null&&(t.delete(c),delete r[l],this.generation++)}}clear(){this.items.clear(),this.idMap={},this.generation++}countOf(e){let t=0,r;for(r of this.items)e(r)&&++t;return t}changeId(e,t){let r=this,{idMap:i,idProperty:s}=r,n=mt[typeof e]?e:lr(e[s]),o=r.get(n);if(o){let l=r.get(t);if(l&&o!==l)throw new Error(`Attempt to set item ${n} to already existing member's id ${t}`);o[s]=t,delete i[n],i[t]=o}}includes(e){let t=mt[typeof e]?e:lr(e[this.idProperty]);return Boolean(this.idMap[t])}map(e,t){let{items:r}=this,i=new Array(r.size),s=0;return r.forEach(n=>{i[s]=e.call(t,n,s++,r)}),i}forEach(e,t){return this.items.forEach(e,t)}find(e,t=0){let r,i;t<0&&(t=this.countOf(e)+t);for(r of this.items)if(e(r)&&!t--){i=r;break}return i}[Symbol.iterator](){return this.items[Symbol.iterator]()}indexOf(e,t){let r=-1,i;for(i of this.items)if((!t||t(i))&&(++r,i===e))return r;return-1}get values(){return[...this.items]}set values(e){Array.isArray(e)||(e=[e]),this.clear(),this.add.apply(this,e),this.generation++}sort(e){this.values=this.values.sort(e)}some(e,t){return this.values.some(e,t)}};var Id=Object.freeze({}),{isArray:Nt}=Array,jd=a=>a.weight,Lo=({weight:a},{weight:e})=>typeof a=="string"||typeof e=="string"?String(a).localeCompare(String(e)):(a??Number.MAX_SAFE_INTEGER)-(e??Number.MAX_SAFE_INTEGER),Io=a=>a&&!a.hidden,Hd=["display","flex-direction"],Pe=class extends E{static get $name(){return"Container"}static get type(){return"container"}static get configurable(){return{items:null,lazyItems:{$config:["lazy"],value:null},defaults:null,defaultType:"widget",layoutStyle:null,itemCls:null,layout:{type:"default"},namedItems:null,overflowable:{value:null,default:!1,$config:null},textContent:!0,record:null,autoUpdateRecord:null,autoUpdateFields:null,hideWhenEmpty:null,contentElMutationObserver:{$config:["lazy","nullify"],value:!0},isolateFields:!1,defaultBindProperty:null}}static get prototypeProperties(){return{initialItems:!0}}startConfigure(e){let t=e.items||e.lazyItems;(this.hasItems=Boolean(t&&(Nt(t)?t:Object.keys(t)).length))||(this.initialItems=!1),super.startConfigure(e)}remove(...e){let t=!0;e.length===1&&(Nt(e[0])?e=e[0]:t=!1);let r=this,{_items:i}=r,s=[];for(let n=0;n<e.length;n++){let o=e[n];i.includes(o)&&(i.remove(o),r.layout.removeChild(o),s.push(o),r.onChildRemove(o))}return t?s:s[0]}removeAll(){return this.remove(this.items)}add(...e){let t=this,r=[],{_items:i}=t,s=!0,n,o,l;for(e.length===1&&(Nt(e[0])?e=e[0]:s=!1),i||(t.items=[],i=t._items),o=0;o<e.length;o++)n=e[o],n?.weight!=null?(l=U.findInsertionIndex(n,i.values,Lo),r.push(t.insert(n,l))):n&&(n.isWidget?n.parent=t:n=t.createWidget(n),i.includes(n)||(i.add(n),t.onChildAdd(n),t.layout.appendChild(n),r.push(n)));return s?r:r[0]}insert(e,t){this.items||(this.items=[]);let r=this,{_items:i}=r;e instanceof E?e.parent=r:e=r.createWidget(e),i.includes(t)&&(t=r.indexOfChild(t)),t=Math.min(t,i.count);let s=i.values;return s.splice(t,0,e),i.values=s,r.onChildAdd(e),r.layout.insertChild(e,t),e}indexOfChild(e){return this.items.indexOf(e)}changeLazyItems(e){this.items=e,this.layout.renderChildren()}changeItems(e,t){let r=this,i=[],s=new xt;return Nt(e)?r.processItemsArray(e,i):e&&r.processItemsObject(e,r.namedItems,i),i.some(jd)&&i.sort(Lo),s.add(i),t&&t.forEach(n=>{r.remove(n),!s.includes(n)&&n._createdBy===r&&n.destroy()}),s}updateItems(e,t){let r=0;e.forEach(i=>{this.onChildAdd(i),t&&!t.temporary&&this.layout.insertChild(i,r),++r}),this.initialItems=!1}updateHideWhenEmpty(){this.syncChildCount(this.rendered)}get items(){let e=this;if(e.getConfig("lazyItems"),!e._items){if(e.initializingItems)return[];e._items=new xt,e._items.temporary=!0}return e._items.values}processItemsArray(e,t){let r=e.length,i,s;for(i=0;i<r;i++)s=e[i],s instanceof E?(s.parent=this,g.removeClasses(s.element,E.outerCls)):s=this.createWidget(s),s&&((s.ref||s.id)&&this.addDescendant(s),t.push(s))}processItemsObject(e,t,r){let i,s;for(s in e)i=e[s],i&&(t&&s in t&&(i=typeof i=="object"?b.merge(b.clone(t[s]),i):t[s]),i&&(i instanceof E?i.parent=this:(i instanceof Object&&(i.ref=s),i=this.createWidget(i)),i&&(i.ref=s,this.addDescendant(i),r.push(i))))}onChildAdd(e){if(e.innerItem&&this.readOnly&&(e.readOnly=!0),this.onChildAddLayout(e),e.ref||e.id)for(let t=this;t;t=t.parent)t.addDescendant(e);this.syncChildCount(!0)}onChildAddLayout(e){e.innerItem&&this.layout.onChildAdd(e)}onChildHide(){this.syncChildCount(!0)}onChildShow(){this.syncChildCount(!0)}syncChildCount(e){if(!this.isConfiguring){let t=this,{childItems:r,hasItems:i}=t,{length:s}=r,n=r.filter(Io),{length:o}=n;if(t.hideWhenEmpty&&e){let l=Boolean(!o);Boolean(t._hidden)!==l&&(t.hidden=l)}for(let l=0;l<s;l++)r[l].element.classList.remove("b-last-visible-child"),r[l].element.classList.remove("b-first-visible-child");o&&(n[0].element.classList.add("b-first-visible-child"),n[o-1].element.classList.add("b-last-visible-child")),t.hasItems=Boolean(s),t.contentElement.classList[o?"remove":"add"]("b-no-visible-children"),t.isComposable?i!==t.hasItems&&t.recompose():t.updateTextContent(t._textContent)}}syncFlexDirection(){let e=this,{contentElement:t}=e,r=new P(t.className),i=g.getStyleValue(t,Hd);r["b-flex-row"]=r["b-flex-column"]=0,i.display==="flex"&&(r[`b-flex-${i["flex-direction"]}`]=1),g.syncClassList(t,r)}addDescendant(e){let t=e.ref||e.id,r=this._widgetMap||(this._widgetMap={});r[t]||(r[t]=e)}onChildRemove(e){let t=e.ref||e.id;if(t)for(let r=this;r;r=r.parent)r.widgetMap[t]===e&&delete r.widgetMap[t];this.layout.onChildRemove(e),this.syncChildCount(!0)}get widgetMap(){return this._widgetMap||(this._widgetMap={}),this.initializingItems||this.getConfig("items"),this._widgetMap}changeRecord(e){return this._record=e==null?Id:null,e}updateRecord(e){let t=this;t.recordUpdateDetacher?.(),t.trigger("beforeSetRecord",{record:e}),t.setValues(e,!0,!t.$highlight),t.autoUpdateFields&&e?.firstStore&&(t.recordUpdateDetacher=e.firstStore.on({update:t.onRecordUpdated,thisObj:t}))}setRecord(e,t){this.$highlight=t,this.record=e,this.$highlight=!1}onRecordUpdated({record:e}){e===this.record&&this.setValues(this.record,!0,!0)}onFieldChange({source:e,userAction:t}){if(this.autoUpdateRecord){let{record:r}=this,{name:i,isValid:s,value:n}=e;r&&t&&i&&s&&(r[i]=n)}}getValues(e){let t={};return this.eachWidget((r,i)=>{r.isolateFields?i.down=!1:"name"in r&&(!e||e(r))&&(t[r.name]=r.value)},!0),t}get hasNoChildren(){let e=this,{items:t,lazyItems:r}=e.initialConfig,i=t&&(Nt(t)?t:b.values(t)),s=r&&(Nt(r)?r:b.values(r));return!(e.isConfiguring?s||i:e.items)?.filter(Io).length}afterRecompose(){this.realign()}updateTextContent(e){let t=this;t.isComposable||(t.contentElement.classList[e&&t.hasNoChildren?"add":"remove"]("b-text-content"),t.rendered&&t.realign())}updateLayoutStyle(e){g.applyStyle(this.contentElement,e)}onPaint(){super.onPaint?.(...arguments),this.getConfig("contentElMutationObserver")}changeContentElMutationObserver(e,t){if(t&&(t.takeRecords(),t.disconnect()),e){let r=this,{element:i,contentElement:s}=r;e=new MutationObserver(n=>r.onContentElMutation(n)),e.observe(s,{attributes:!0}),s!==i&&e.observe(i,{attributes:!0}),r.syncFlexDirection()}return e}onContentElMutation(){this.isVisible&&this.syncFlexDirection()}changeLayout(e,t){return tt.reconfigure(t,e,{owner:this,defaults:{owner:this}})}get childItems(){return this.items}getWidgetById(e){return this.widgetMap[e]}processWidgetConfig(e){}setupWidgetConfig(e,t){let r=this;typeof e=="string"?e={html:e}:e.nodeType===Element.ELEMENT_NODE&&(e={element:e,id:e.id}),(typeof t=="string"||!t&&(t=e.type))&&(t=E.resolveType(t,!0)),e=(t||E).mergeConfigs(r.defaults,e,{parent:r});for(let i=e.parent;i;i=i.parent)if(i.processWidgetConfig(e)===!1)return null;return r.trigger("beforeWidgetCreate",{widgetConfig:e})===!1?null:e}createWidget(e){let t=E.create(this.setupWidgetConfig(e),this.defaultType);return t&&(t._createdBy=this),t}updateDefaults(e,t){if(!this.isConfiguring){let r=Object.entries(e);this.eachWidget(i=>{r.forEach(([s,n])=>{i[s]===t[s]&&(i[s]=n)})},!1)}}render(){this.getConfig("lazyItems"),this.layout.renderChildren(),this.syncChildCount(),super.render(...arguments)}get focusElement(){let e=this.query(this.defaultFocus||(t=>t.isFocusable&&t.ref!=="close"));return e?e.focusElement:super.focusElement}doDestroy(){this._items?.forEach(e=>e.destroy?.()),this.layout.destroy(),super.doDestroy()}get isValid(){let e=!0;return this.eachWidget(t=>{t.isVisible&&"isValid"in t&&!t.isValid&&(e=!1)},!0),e}get values(){let e={};return this.eachWidget((t,r)=>{if(t.isolateFields)r.down=!1;else{let i=t.defaultBindProperty;i in t&&(e[t.name||t.ref||t.id]=t[i])}},!0),e}set values(e){this.setValues(e)}get isSettingValues(){return Boolean(this._isSettingValues||this.parent?.isSettingValues)}setValues(e,t=!1,r=!0){this._isSettingValues={preventHighlight:r},this.eachWidget((i,s)=>{let n=i.highlightExternalChange,o=t?i.name:i.name||i.ref||i.id,l=i.defaultBindProperty;l in i&&o&&(r&&(i.highlightExternalChange=!1),i[l]=e&&o in e?e[o]:null,i.highlightExternalChange=n),i.isolateFields&&(s.down=!1)},!0),this._isSettingValues=!1}};Pe.initClass();var{assign:ar}=b,jo=()=>performance.now(),Ad={start:!1},Pd=/^[.\d]+([^\d].*)?$/,Ho=a=>{let e=a.$bryntum||(a.$bryntum={});return e.transitions||(e.transitions=Object.create(null))},Ao=(a,e)=>(typeof a=="string"&&(e=Pd.exec(a)?.[1],a=parseFloat(a)),a&&a*(e==="s"||!e&&a<10?1e3:1)),us=a=>{let e=b.values(Ho(a)).filter(t=>t.completed==null).map(t=>t.toString());a.style.transition=e.join(", ")},Po=a=>class extends a{static get prototypeProperties(){return{_delay:null,_duration:null,_retain:null,_timing:null,_unit:null,owner:null,reverting:null}}constructor(...t){super(...t);this.id=++$d}start(){this.startTime=jo()}get delay(){return Ao(this._delay??this.owner?.delay??0,this.unit)}set delay(t){this._delay=t}get duration(){let{owner:t,unit:r}=this;return Ao(this._duration??(t?t.duration:oe.defaultDuration),r)}set duration(t){this._duration=t}get elapsed(){return jo()-this.startTime}get remaining(){return this.duration-this.elapsed}get retain(){return this._retain??this.owner?.retain}set retain(t){this._retain=t}get timing(){return this._timing??this.owner?.timing}set timing(t){this._timing=t}get unit(){return this._unit??this.owner?.unit}set unit(t){this._unit=t}},$d=0,_t=class extends S.mixin(Po){static get $name(){return"AnimatorTransition"}static get prototypeProperties(){return{element:null,property:null,from:null,to:null,completed:null,promissory:null,reverting:null}}afterConstruct(){super.afterConstruct();let e=this,{element:t,transitions:r}=e,{property:i}=e;[i,e.to]=g.unitize(i,e.to),e.from=g.unitize(i,e.from)[1],e.promissory=new jt,e.property=i;let s=r[i];r[i]=e;let{from:n}=e;s&&(e.from=s.to,n=null,s.destroy()),n===null&&(n=e.getCurrentStyleValue(),s||(e.from=n)),t.style[i]=n,e.getCurrentStyleValue()}doDestroy(){let e=this;e.finish(!1),e.completed&&!e.retain&&e.clearStyle(),super.doDestroy()}get promise(){return this.promissory?.promise}get transitions(){return Ho(this.element)}clearStyle(){this.setStyle("")}finish(e){let t=this,{transitions:r,promissory:i,property:s}=t;i&&(t.completed=e,t.promissory=null,i.resolve(e),r[s]===t?(delete r[s],e||(us(t.element),t.clearStyle())):t.completed=!1)}getCurrentStyleValue(){return g.getStyleValue(this.element,this.property)}revert(){let{duration:e,elapsed:t,element:r,from:i,property:s,_retain:n,_timing:o}=this;return new _t({element:r,property:s,retain:n,timing:o,duration:Math.round(Math.min(e,t)),reverting:this,to:i,unit:"ms"})}setStyle(e){this.element.style[this.property]=e}start(){let e=this,{delay:t,duration:r,element:i,property:s}=e;O.onTransitionEnd({element:i,property:s,duration:t+r+20,thisObj:e.owner,handler:()=>e.finish?.(!0)}),super.start(),e.setStyle(e.to)}toString(){let{delay:e,duration:t,property:r,timing:i}=this;return`${r} ${t}ms ${i||"ease-in-out"}${e?` ${e}ms`:""}`}};_t.initClass();var oe=class extends S.mixin(Po){static get $name(){return"Animator"}static get prototypeProperties(){return{element:null,finalize:null,prefinalize:null,completed:null,items:null}}static register(e,t){if(b.isObject(e)){b.entries(e).forEach(r=>oe.register(...r));return}oe.fx[e]=t,oe[e]=r=>(g.isElement(r)?r={element:r,[e]:{}}:(r={element:r.element,[e]:r},delete r[e].element),oe.run(r))}static run(e){return new oe(e).start()}constructor(e){super(null);let t=this,r=[],i={},s,n,o,l;if(Array.isArray(e))t.items=e;else for(o in e)(oe.specialPropsRe.test(o)?t:i)[o]=e[o];b.keys(i).forEach(c=>{l=i[c],l!=null&&l!==!1&&l===l&&((n=oe.fx[c])?(l=ar(t.defaults,n(l,t,c)),l.owner=t,s=new oe(l)):(l=ar(t.defaults,typeof l=="object"?l:{to:l}),l.owner=t,l.property=c,s=new _t(l)),r.push(s))}),t.items?.forEach(c=>{b.isInstantiated(c)?c.owner=t:(c=ar(t.defaults,c),c.owner=t,c=new oe(c)),r.push(c)}),t.items=r,t.promise=(r.length===1?r[0].promise:Promise.all(r.map(c=>c.promise))).then(c=>(t.finish?.(c),t.completed||!1))}doDestroy(){this.items.forEach(e=>e.destroy()),super.doDestroy()}get defaults(){return{element:this.element}}get retain(){let{_retain:e,finalize:t,owner:r}=this;return e??(t?!1:r?r.retain:!0)}set retain(e){super.retain=e}done(){return this.promise}finish(e){let t=this,{items:r}=t;for(us(t.element),t.completed=typeof e=="boolean"?e:!e.some(i=>!i),t.prefinalize?.(t.completed,t);r.length;)r.pop().destroy();t.finalize?.(t.completed,t)}revert(e){let t=this,{reverting:r}=t,i=!e||(e.start??!0),s=t.defaults;return r&&(r.finalize&&(s.finalize=r.finalize),r.prefinalize&&(s.prefinalize=r.prefinalize),s.retain=r._retain),s=ar(s,e,{items:t.items.map(n=>n.revert(Ad)),reverting:t}),s=new oe(s),i&&s.start(),s}start(){let{element:e,items:t}=this;return super.start(),t.length&&(us(e),t.forEach(r=>r.start())),this}};oe.initClass().Transition=_t;oe.specialPropsRe=new RegExp(`^(?:${Object.keys(oe.prototypeProperties).concat(Object.keys(oe.superclass.prototypeProperties)).map(a=>a[0]==="_"?a.substr(1):a).join("|")})$`);oe.defaultDuration=200;oe.fx={};oe.register({puff(a){return a===!0?a={}:typeof a!="object"?a={transform:`scale(${a})`}:a.scale&&(a=b.clone(a),a.transform=`scale(${a.scale})`,delete a.scale),ar({opacity:0,transform:"scale(8)"},a)}});var Bt=class extends S.mixin(we){static get configurable(){return{element:null,delegate:null,delay:500,startRate:2,endRate:20,accelerateDuration:4e3,pressedCls:"b-pressed"}}doDestroy(){this.mousedownRemover?.(),super.doDestroy()}cancel(){let e=this;e.activeElement?.classList.remove(e.pressedCls),e.activeElement=null,e.acceleration?.cancel(),e.activeListenerRemover=e.activeListenerRemover?.(),e.clearTimeout("startAutoRepeat"),e.clearTimeout(e.repeatTimer)}updateElement(e){this.mousedownRemover?.(),this.mousedownRemover=O.on({element:e,mousedown:"onMouseDown",thisObj:this})}onMouseDown(e){let t=this,r=t.delegate?e.target.closest(t.delegate):t.element;t.cancel(),r&&(t.activeElement=r,t.triggerEvent=e,r.classList.add(t.pressedCls),t.activeListenerRemover=O.on({mouseup:{element:document,handler:"onMouseUp"},mousemove:{element:r,handler:"onTargetMouseMove"},mouseleave:{element:r,handler:"onTargetMouseLeave"},mouseenter:{element:r,handler:"onTargetMouseEnter"},thisObj:t}),t.setTimeout("startAutoRepeat",t.delay))}onMouseUp(){this.cancel()}onTargetMouseLeave(){this.activeElement.classList.remove(this.pressedCls),this.clearTimeout(this.repeatTimer)}onTargetMouseEnter(e){let t=this;e.buttons?(t.activeElement.classList.add(t.pressedCls),t.triggerEvent=e,t.fireClick()):t.cancel()}onTargetMouseMove(e){this.triggerEvent=e}startAutoRepeat(){let e=this;e.interval=e.startInterval=1e3/e.startRate,e.accelerationDelta=e.startInterval-1e3/e.endRate,e.fireClick(),e.acceleration=W.animate(e.accelerateDuration,e.nextTick,e,"easeOutQuad")}nextTick(e){this.interval=this.startInterval-this.accelerationDelta*e}fireClick(){let e=this,t=new MouseEvent("click",e.triggerEvent);e.triggerEvent.target.dispatchEvent(t),e.repeatTimer=e.setTimeout(e.fireClick,e.interval)}};var Nd=/^(?:undefined|null|LEFT|RIGHT)$/,_d={TOP:"BOTTOM",RIGHT:"LEFT",BOTTOM:"TOP",LEFT:"RIGHT"},fs=a=>{let e=a?.toUpperCase();return[e,e==="LEFT"||e==="RIGHT"]},Vt=a=>class extends(a||S){static get $name(){return"Rotatable"}static get configurable(){return{rotate:null,invertRotate:null}}compose(){let{rotate:t}=this;return{class:{[`b-rotate-${(t||"").toLowerCase()}`]:t,"b-rotate-vertical":t}}}syncRotationToDock(t){if(Nd.test(String(this.rotate))){let[r,i]=fs(t);this.rotate=i?this.invertRotate?_d[r]:r:null}}get widgetClass(){return null}};var cr=class extends E.mixin(Vt){static get $name(){return"Tool"}static get type(){return"tool"}static get configurable(){return{align:{value:null,$config:{merge:"replace"}},repeat:null,ariaLabel:null}}compose(){let{align:e,ariaLabel:t}=this;return{tag:"button",class:{[`b-align-${e||"end"}`]:1,"b-icon":1},"aria-label":t,listeners:{click:"onClick"}}}get focusElement(){return this.element}get panel(){return this.parent}changeAlign(e){return e}onClick(e){let{handler:t,panel:r}=this;!this.disabled&&r?.trigger("toolclick",{domEvent:e,tool:this})!==!1&&t&&this.callback(t,r,[e,r,this])}onInternalKeyDown(e){(e.key.trim()||e.code)==="Enter"&&(e.cancelBubble=!0,e.stopPropagation())}updateDisabled(e,t){super.updateDisabled(e,t),e&&this.repeat?.cancel()}changeRepeat(e,t){return t?.destroy(),e&&Bt.new({element:this.element},e)}};cr.initClass();var Bd=/right/i,Vd=a=>(a.collapsed||a.collapsing)&&a.owner.collapsible.direction.match(Bd)?"start":"end",hs=class extends cr{static get $name(){return"CollapseTool"}static get type(){return"collapsetool"}static get configurable(){return{autoAlign:!0,collapsed:null,collapsing:null,collapsify:!1,direction:"up"}}compose(){let{collapsed:e,direction:t}=this;return{class:{[`b-icon-collapse-${t}`]:1,"b-collapsed":e}}}changeAutoAlign(e){return e===!0?Vd:e}syncAutoAlign(){let{autoAlign:e}=this;e&&(this.align=e(this))}updateAutoAlign(){this.syncAutoAlign()}updateCollapsed(){this.syncAutoAlign()}updateCollapsing(){this.syncAutoAlign()}updateDirection(){this.syncAutoAlign()}};hs.initClass();var $o=/^(?:UP|DOWN|LEFT|RIGHT)$/,No=[],zd=[No,No],ms="b-panel-collapse-revealer",Wd=/^(?:left|right)$/i,{round:Jr}=Math,_o=["up","down","left","right"].reduce((a,e)=>(a[e.toUpperCase()]=a[e]=e,a),{}),gs={top:["top","bottom"],right:["right","left"],bottom:["bottom","top"],left:["left","right"]},Gd={hl:"LEFT",hr:"RIGHT",vb:"DOWN",vt:"UP"},qd={h:"w",w:"h"},Bo={up:"top",right:"right",down:"bottom",left:"left"},ps={top:!1,right:!0,bottom:!1,left:!0},Ud={top:"UP",right:"RIGHT",bottom:"DOWN",left:"LEFT"},Kd=0,zt=class extends S.mixin(ht){static get $name(){return"PanelCollapser"}static get type(){return"inline"}static get configurable(){return{animation:{duration:200},collapsed:{value:null,$config:null,default:!1},direction:null,collapseTooltip:"L{Collapse}",expandTooltip:"L{Expand}",panel:{value:null,$config:"nullify"},supportAxis:null,tool:{type:"collapsetool",handler(e){this.collapsible?.onCollapseClick(e)}}}}static get factoryable(){return{defaultType:"inline"}}get collapsing(){return this.collapsingExpanding==="collapsing"}get collapsingExpanding(){let e=this.currentOperation?.collapsing;return e==null?null:e?"collapsing":"expanding"}get currentDock(){return this.panel?.header?.dock?.toLowerCase()??"top"}get expanding(){return this.collapsingExpanding==="expanding"}get collapseTool(){return this.panel?.tools?.collapse}get collapseDim(){return Wd.test(this.collapseDir)?"width":"height"}getCollapseDir(e){let{direction:t,panel:r}=this;if(!t||$o.test(t)){let i=r?.placement;i?t=Gd[i]:t=Ud[r?.header?.dock||"top"]}return e?_o[t]:t}get collapseDir(){return this.getCollapseDir(!0)}get collapseDock(){let{panel:e}=this,t=e.hasHeader&&e.expandedHeaderDock,r=Bo[this.collapseDir];return t&&ps[r]===ps[t]?t:r}get toolsConfig(){let{direction:e,tool:t}=this;return t&&{collapse:b.assign({direction:e.toLowerCase()},t)}}beforeCollapse(e){}changeTool(e){let t=this,{panel:r}=t;if(t.isConfiguring||t.isDestroying||!r||r.isDestroying)return e;r.tools={collapse:e}}collapse(e){let t=this,{panel:r}=t,i={id:++Kd,completed:!1,panel:r},{currentOperation:s}=t;return e=e??!0,b.isObject(e)&&(i.collapsed=!0,b.assign(i,e),e=i.collapsed,delete i.collapsed),i.collapsing=e,i.previous=s??null,e!==t.collapsed?s?s.collapsing!==e&&(i.animation=s.animation.revert({finalize(){t.collapseFinalize?.(i,!0)}}),i.collapsing=e,s=i):(i.animation=b.clone(("animation"in i?i:t).animation),t.beforeCollapse(i)!==!1&&(i.animation&&(i.animation.finalize=n=>t.collapseFinalize?.(i,n)),r.changingCollapse=!0,t[e?"collapseBegin":"expandBegin"](i),i.animation?s=i:(i.completed=!0,t[e?"collapseEnd":"expandEnd"](i)),r.changingCollapse=!1,i.animation||t.onComplete(e?"collapse":"expand"))):s&&s.collapsing!==e&&(t[e?"expandRevert":"collapseRevert"](i),i.animation=s.animation.revert({finalize(){t.collapseFinalize?.(i,!1)}}),s=i),t.currentOperation=s,s?.animation?.done()??Promise.resolve(e===t.collapsed)}collapseFinalize(e,t){let r=this,{currentOperation:i,panel:s}=r,n=s.collapsed?"expand":"collapse";i===e&&(r.currentOperation=null,e.completed=t,s.changingCollapse=!0,r[n+"End"](e),s.changingCollapse=!1,t&&r.onComplete(n))}applyHeaderDock(e,t=!0){let r=this,{currentDock:i,panel:s}=r,n=e?r.collapseDock:s.expandedHeaderDock;n!==i&&s.hasHeader&&(s.header={dock:n},t&&s.recompose.flush())}composeHeader(e){return e.class[ms]=1,e}composeTitle(e){return e.class[ms]=1,e}collapseBegin(e){let t=this,{animation:r}=e,{collapseDim:i,collapseTool:s,panel:n}=t,{element:o}=n,l=s?.element.classList;t.configuredWidth=n._lastWidth,t.configuredHeight=n._lastHeight,t.applyHeaderDock(!0);let c=n.rectangle(),d=t.lockInnerSize().moveTo(0,0),u=d.clone(),f=gs[t.collapseDock],h=n.headerElement?.getBoundingClientRect(),m=Jr(h?.[i]||0);r?(u[f[0]]=u[f[1]],o.classList.add("b-collapsing"),l?.add("b-collapsed","b-collapsing"),s&&(s.collapsing=!0),l&&(l.remove("b-collapsed"),n.rectangle(),l.remove("b-collapsing"),l.add("b-collapsed")),r.element=o,r.retain=!0,r[i]={from:Jr(c[i]),to:m},r.items=[{element:n.bodyWrapElement,retain:!1,clip:{from:`rect(${d})`,to:`rect(${u})`}}],e.animation=oe.run(r)):(o.style[i]=`${m}px`,s&&(l.add("b-collapsing","b-collapsed"),s.rectangle(),l.remove("b-collapsing")))}collapseEnd(e){let t=this,{collapseTool:r}=t;t.panel.element.classList.remove("b-collapsing"),r&&(r.collapsing=!1),e.completed?t.collapsed=!0:(t.applyHeaderDock(!1),t.restoreConfiguredSize(),t.lockInnerSize(!1))}collapseRevert(e){this.collapseTool?.element.classList.remove("b-collapsed")}expandBegin(e){let t=this,{animation:r}=e,{collapseDim:i,collapseTool:s,panel:n}=t,{element:o}=n,l=n.rectangle();o.classList.remove("b-collapsed","b-collapsing"),n.element.style[i]="",t.restoreConfiguredSize(),t.lockInnerSize(!1);let c=n.rectangle(),d=t.lockInnerSize().moveTo(0,0),u=d.clone(),f=gs[t.collapseDock];s?.element.classList.remove("b-collapsed"),r&&(u[f[0]]=u[f[1]],o.classList.add("b-collapsed","b-expanding"),r.element=o,r[i]={from:Jr(l[i]),to:Jr(c[i])},r.items=[{element:n.bodyWrapElement,retain:!1,clip:{from:`rect(${u})`,to:`rect(${d})`}}],e.animation=oe.run(r))}expandEnd(e){let t=this;t.panel.element.classList.remove("b-expanding"),e.completed&&(t.collapsed=!1,t.applyHeaderDock(!1),t.restoreConfiguredSize(),t.lockInnerSize(!1))}expandRevert(e){this.collapseTool?.element.classList.add("b-collapsed")}get innerElement(){return this.panel.bodyWrapElement}get innerSizeElement(){return this.innerElement}get supportAxis(){let{_supportAxis:e}=this,t=e===!0;return(t||e==null)&&(e=this.collapseDim[0],(t||g.getStyleValue(this.panel.element,"position")==="absolute")&&(e+=qd[e])),e||""}lockInnerSize(e=!0){let t=this,{innerElement:r,panel:i}=t,s=e?t.supportAxis:"",n=i.element,o=i.headerElement,l=e&&o&&k.from(o,n),c=e&&k.from(t.innerSizeElement,n),d=r.style;return o&&(o.style.minWidth=s.includes("w")?`${l.width}px`:"",o.style.minHeight=s.includes("h")?`${l.height}px`:""),d.width=e?`${c.width}px`:"",d.height=e?`${c.height}px`:"",r.classList[e?"add":"remove"]("b-panel-collapse-size-locker"),c}onCollapseClick(e){let t=this.collapsing?!1:this.expanding?!0:!this.collapsed;e.altKey&&(t={animation:null,collapsed:t}),this.collapse(t)}onComplete(e){this.panel?.trigger(e)}onHeaderClick({event:e}){e.button===0&&this.panel.collapsed&&e.target.classList.contains(ms)&&this.onRevealerClick()}onPanelConfigChange({name:e,value:t}){let r=this,{panel:i}=r;e==="collapsed"?t&&i.isConfiguring||(r.collapsed=t):e==="header"&&!i.changingCollapse&&r.syncDirection()}onPanelPaint(){this.syncDirection()}onRevealerClick(){this.panel.expand()}restoreConfiguredSize(e){let{configuredHeight:t,configuredWidth:r,panel:i}=this;e=e??"wh",r!=null&&e.includes("w")&&(i.width=r),t!=null&&e.includes("h")&&(i.height=t)}splitHeaderItems(){return zd}syncDirection(){let e=this,{direction:t}=e;(!t||$o.test(t))&&(e.direction=e.getCollapseDir())}updateCollapsed(e){let{collapseTool:t,panel:r}=this;r&&(r.collapsed=e,r.element.classList[e?"add":"remove"]("b-collapsed")),t&&(t.collapsed=e)}updateDirection(e){let{collapseTool:t,panel:r}=this;t&&(t.direction=_o[e]),r?.rendered&&r.recompose()}updatePanel(e){let t=this;t.syncDirection(),t.panelChangeDetacher?.(),t.panelChangeDetacher=e&&W.after(e,"onConfigChange","onPanelConfigChange",t,{return:!1}),t.panelListeners?.(),t.panelListeners=e&&!e.isPainted?e.on({once:!0,paint(){e.initialConfig.collapsed&&(e.collapsed=!0)}}):null}wrapCollapser(e,t){return[e,t]}};zt.maps={clipByDock:gs,dockByDirection:Bo,dockIsHorz:ps};zt.initClass();var dr=Symbol("pendingCreate"),rt=class extends S{static get prototypeProperties(){return{cleanup:null,configName:null,created:null,factory:null,inferType:"name",owner:null,ownerName:null,proxyable:typeof Proxy!="undefined",setup:null,transform:null}}static get properties(){return{defaults:{},instances:{},object:Object.create({})}}get proxy(){let e=this,t=null;return e.proxyable&&(t=new Proxy(e.instances,{get(r,i){return e.get(i)},set(r,i,s){return e.set(i,s),!0},deleteProperty(r,i){return e.set(i,null),!0}})),Reflect.defineProperty(e,"proxy",{configurable:!0,value:t}),t}get target(){return this.proxy||this.object}define(e,t){let r=this,{transform:i}=r,s=i?i(t,e):t,n=b.isInstantiated(s);r.instances[e]=dr,n||r.setDefaults(e,s),r.defineProp(e,!0),n&&r.set(e,s)}defineProp(e,t){let r=this,{object:i}=r;r.proxy||Reflect.defineProperty(t?Object.getPrototypeOf(i):i,e,{configurable:!t,enumerable:!0,get(){return r.get(e)},set(s){return r.set(e,s)}})}flush(){let e=this;try{e.updating=!0;for(let t in e.defaults)e.get(t);e.afterConfigureOwner=e.afterConfigureOwner?.()}finally{e.updating=!1}}get(e){let{defaults:t,instances:r}=this;return r[e]===dr&&this.set(e,dr),r[e]||t[e]&&null}set(e,t){let r=this,{cleanup:i,configName:s,defaults:n,factory:o,instances:l,owner:c,setup:d,transform:u,updating:f}=r,h=c&&s&&!f,m=l[e]===dr?null:l[e],p=o.reconfigure(m,t===dr?{}:t||null,{cleanup:i&&(y=>i(y,e)),defaults:n[e]||r.setDefaults(e,{}),owner:r.owner,setup:d&&((y,C,w)=>d(y,e,C,w)),transform:u&&(y=>u(y,e))});if(p!==m){let y=h&&{...l};l[e]=p,p?(r.defineProp(e),r.created?.(p,e)):(delete r.object[e],delete l[e]),h&&c.onConfigChange({name:s,config:c.$meta.configs[s],value:r.target,was:y})}}setDefaults(e,t){let{defaults:r,factory:i,inferType:s,instances:n,owner:o,ownerName:l}=this,{typeKey:c}=i.factoryable;return t=t===!0?{}:b.assign({},t),(s==="name"||s===!0&&!t[c])&&(t[c]=e),l&&(t[l]=o),t.beforeConfigure=d=>{n[e]=d},r[e]=t}update(e){let t=this,{owner:r}=t,i,s;try{if(t.updating=!0,e)for(i in e)s=e[i],t.defaults[i]?t.set(i,s):s&&t.define(i,s);else for(i in t.instances)t.set(i,null)}finally{t.updating=!1}r&&(r.isConfiguring?t.afterConfigureOwner||(t.afterConfigureOwner=W.before(r,"afterConfigure","flush",t)):t.flush())}};rt.initClass();var Yd=[],ys={},Xd={align:1,weight:1},Qr=a=>class extends(a||E){static get $name(){return"Toolable"}static get configurable(){return{tools:{value:null,$config:{nullify:!0}},toolDefaults:{"*":{type:"tool",align:"end"}}}}byWeightSortFn(t,r){return(t.weight||0)-(r.weight||0)}byWeightReverseSortFn(t,r){return(r.weight||0)-(t.weight||0)}gatherTools({align:t,overlay:r,refs:i}=ys){let{collapsed:s,tools:n}=this,o=[],l,c,d,u,f;for(c in n)f=n[c],l=f?.align?.align??f?.align??"end",l===t&&f.isCollapsified(s,r)&&o.push(f);if(o.sort(this[t==="end"?"byWeightReverseSortFn":"byWeightSortFn"]),i){let h=i==="widget",m={};for(d=0;d<o.length;++d)u=o[d],m[u.ref]=h?u:u.element;o=m}return o}getEndTools({overlay:t,refs:r}=ys){return this.gatherTools({align:"end",overlay:t,refs:r})}getStartTools({overlay:t,refs:r}=ys){return this.gatherTools({align:"start",overlay:t,refs:r})}get childItems(){return[...this.getStartTools(),...this._items||Yd,...this.getEndTools()]}changeTools(t,r){let i=this,s=i.$tools||(i.$tools=new rt({configName:"tools",factory:E,inferType:!1,owner:i,created(n){n.innerItem=!1,n.syncRotationToDock?.(i.header?.dock),W.after(n,"onConfigChange",(o,{name:l})=>{Xd[l]&&i.onConfigChange({name:"tools",value:s.target})}),i.onChildAdd(n)},setup(n,o){return n=b.merge({},i.toolDefaults["*"],i.toolDefaults[o],n),n.parent=i,n.ref=o,n}}));if(s.update(t),!r)return s.target}};var Vo=["b-hbox","b-vbox"],Jd={false:"nowrap",true:"wrap",reverse:"wrap-reverse"},ur=class extends tt{static get $name(){return"Box"}static get type(){return"box"}static get alias(){return"hbox"}static get configurable(){return{itemCls:"b-box-item",align:null,contentAlign:null,direction:null,horizontal:!0,justify:null,reverse:null,wrap:null}}get vertical(){return this.horizontal===!1}set vertical(e){return this.horizontal=!e}updateAlign(){this.syncConfigStyle("align","alignItems")}updateContentAlign(){this.syncConfigStyle("contentAlign","alignContent")}updateDirection(){this.syncConfigStyle("direction","flexDirection")}updateHorizontal(){let e=this,t=e.contentElement?.classList,r=Number(e.vertical);t?(t.remove(Vo[1-r]),t.add(Vo[r])):e.syncConfigLater("horizontal"),e.syncDirection()}updateJustify(){this.syncConfigStyle("justify","justifyContent")}updateReverse(){this.syncDirection()}updateWrap(){this.syncConfigStyle("wrap","flexWrap",Jd)}syncDirection(){let e=this,{reverse:t}=e;e.direction=t?`${e.vertical?"column":"row"}${t?"-reverse":""}`:null}};ur.initClass();var bs=class extends ur{static get $name(){return"VBox"}static get type(){return"vbox"}static get configurable(){return{horizontal:!1}}};bs.initClass();var Zr=a=>class extends(a||S){static get $name(){return"Badge"}static get configurable(){return{badge:null}}compose(){let{badge:t}=this;return{dataset:{badge:t},class:{"b-badge":t!=null&&t!==""}}}};var zo=/(?:^|\s)b-icon-/,Wo=/(?:^|\s)b-fa-/,Go=Symbol("defaultToggleable"),Qd=["items","type","widgets","html","listeners"],Cs=class extends E.mixin(Zr,Vt){static get $name(){return"Button"}static get type(){return"button"}static get configurable(){return{icon:null,menuIconCls:null,menuIcon:"b-icon-picker",pressedIcon:null,iconAlign:"start",text:{value:null,$config:null,default:""},color:null,toggleable:Go,pressed:!1,toggleGroup:null,ripple:{radius:75},localizableProperties:["text"],menu:{$config:["lazy","nullify"],value:null},menuDefaults:{type:"menu",autoShow:!1,autoClose:!0,floating:!0,scrollAction:"realign",align:"t0-b0"},href:null,target:null,defaultBindProperty:null}}compose(){let{color:e,href:t,icon:r,iconAlign:i,pressed:s,pressedIcon:n,target:o,text:l,toggleable:c,toggleGroup:d,menuIcon:u}=this,f=this.hasConfig("menu"),h=s&&n?n:r;return{tag:t?"a":"button",href:t,target:o,class:{[`b-icon-align-${i}`]:r,[e]:Boolean(e),"b-pressed":s&&c,"b-text":Boolean(l),"b-has-menu":f},dataset:{group:d},listeners:{click:"onInternalClick"},children:{iconElement:(r||n)&&{tag:"i",class:{...P.normalize(h,"object"),"b-icon":zo.test(h),"b-fa":Wo.test(h)}},label:l&&{tag:"label",text:l},menuIconElement:f&&u&&{tag:"i",class:{"b-icon":zo.test(u),"b-fa":Wo.test(u),"b-button-menu-icon":1,[u]:1}}}}}onHide(){this._menu?.hide()}get childItems(){return this._menu&&[this.menu]}onFocusOut(e){super.onFocusOut(e),this.menu?.hide()}get focusElement(){return this.element}changeText(e){return e??""}changeToggleable(e){return e===Go?this.toggleGroup||this.config.menu:e}changeMenu(e,t){let r=this,{element:i}=r;return e?(e.isWidget?(e.forElement=i,e.owner=r):(typeof e=="object"&&!Qd.some(s=>s in e)&&(e={lazyItems:e}),e=E.reconfigure(t,e?I.merge({owner:r,constrainTo:r.rootElement,forElement:i},r.menuDefaults,e):null,r)),e.on("hide",()=>r.toggle?.(!1))):t?.destroy(),e}updateMenu(e){this.toggleable=Boolean(e)}updatePressed(e){let t=this;!t.isConfiguring&&e&&t.toggleGroup&&g.forEachSelector(t.rootElement,`button[data-group=${t.toggleGroup}]`,r=>{r!==t.element&&E.getById(r.id).toggle(!1)})}updateMenuIconCls(e){z.deprecate("Core","5.0.0","Deprecated in favor of `menuIcon`"),this.menuIcon=e}onInternalClick(e){let t=this,r={event:e};t.toggleable&&(t.toggleGroup&&t.pressed||(t.toggle(!t.pressed),t.isDestroyed))||(t.trigger("click",r),t.isDestroyed||t.trigger("action",r),t.href||(e.preventDefault(),e.stopPropagation()))}toggle(e=null){let t=this,{menu:r}=t;!t.toggleable||(e===null&&(e=!t.pressed),t.pressed!==e&&(t.toggling=!0,t.pressed=e,r&&(r.initialConfig.minWidth||(r.minWidth=t.width),r.align.constrainTo=window,r.align.constrainPadding=10,r.align.minHeight=r._minHeight??100,r.align.minWidth=r._minWidth??100,r[e?"show":"hide"]()),t.trigger("toggle",{pressed:e}),t.toggling=!1))}};Cs.initClass();var qo={refs:"element"},Zd=a=>a.isToolbar,eu=[{box:"hbox",clientSizeProp:"clientWidth",edgeProp:"right",flexDir:"row",horizontal:!0,max:"maxX",overflow:"overflowX",pos:"x",scrollSize:"scrollWidth",sizeProp:"width"},{box:"vbox",clientSizeProp:"clientHeight",edgeProp:"bottom",flexDir:"column",horizontal:!1,max:"maxY",overflow:"overflowY",pos:"y",scrollSize:"scrollHeight",sizeProp:"height"}],tu={delay:0,startRate:40,endRate:200,accelerateDuration:500},ws=class extends Pe.mixin(Qr){static get $name(){return"Toolbar"}static get type(){return"toolbar"}static get delayable(){return{syncOverflowVisibility:{type:"raf",cancelOutstanding:!0}}}static get configurable(){return{defaultType:"button",dock:"top",layout:{type:"box"},overflow:{$config:["lazy","nullify"],value:{type:"menu"}},toolDefaults:{overflowMenuButton:{type:"button",hidden:!0,icon:"b-icon-menu",menuIcon:null,defaultCls:{"b-overflow-button":1}},overflowScrollEnd:{handler:"up.onEndScrollClick",hidden:!0,defaultCls:{"b-icon-angle-right":1,"b-overflow-button":1,"b-icon":1}},overflowScrollStart:{align:"start",handler:"up.onStartScrollClick",hidden:!0,defaultCls:{"b-icon-angle-left":1,"b-overflow-button":1,"b-icon":1}}},widgetCls:null}}compose(){let e=this,{axisProps:t,dock:r}=e,i=e.getEndTools(qo),s=e.getStartTools(qo);return{class:{[`b-dock-${r}`]:1,[`b-${r}-toolbar`]:1,[`b-${t.box}`]:1},children:{...s,toolbarContent:{class:{"b-box-center":1,"b-toolbar-content":1}},...i}}}get axisProps(){return eu[this.layout.horizontal?0:1]}get contentElement(){return this.toolbarContent}get overflowMenuButton(){return this.tools?.overflowMenuButton}get overflowType(){let{overflow:e}=this;return typeof e=="string"?e:e?.type}onChildAdd(e){super.onChildAdd(e),this.processAddedLeafItem(e),e.syncRotationToDock?.(this.dock)}processAddedLeafItem(e){W.after(e,"onConfigChange",this.onLeafItemConfigChange,e),e.isContainer&&e.eachWidget(t=>this.processAddedLeafItem(t))}onPaint({firstPaint:e}){super.onPaint?.(...arguments),e&&this.getConfig("overflow")}updateDock(e){let t=this,{layout:r}=t,{vertical:i}=r;if(r.vertical=fs(e)[1],!t.initialItems){i!==r.vertical&&t.updateOverflow(t.overflow);for(let s of t.childItems)s.syncRotationToDock?.(e)}}updateOverflow(e,t){let r=this,{axisProps:i,contentElement:s,overflowType:n}=r,{flexDir:o}=i,l=r.overflowMenuButton?._menu,c={};if(l&&(e?l?.removeAll():l.eachWidget(d=>{d._toolbarOverflowOriginal._toolbarOverflowClone=null})),t==="menu"?c.overflowMenuButton=null:t==="scroll"&&(c.overflowScrollStart=c.overflowScrollEnd=null),n==="menu")r.scrollable?.destroy(),s.style.overflow=s.style.overflowX=s.style.overflowY="",c.overflowMenuButton={cls:{[`b-${o}-menu`]:1}};else if(n==="scroll"){let d=typeof e=="object"&&e?.repeat||tu;r.scrollable={[i.overflow]:"hidden-scroll",element:s,listeners:{scroll:"onContentScroll",thisObj:r}},c.overflowScrollStart={repeat:d,invertRotate:!0,cls:{[`b-${o}-start-scroller`]:1}},c.overflowScrollEnd={repeat:d,invertRotate:!0,cls:{[`b-${o}-end-scroller`]:1}}}r.tools=c,n?(s.classList.add("b-overflow"),r.monitorResize=!0,r.syncOverflowVisibility()):(s.classList.remove("b-overflow"),r.monitorResize=!1)}onContentScroll(){this.syncScrollerState()}onStartScrollClick(){this.scrollable[this.axisProps.pos]-=2}onEndScrollClick(){this.scrollable[this.axisProps.pos]+=2}onInternalResize(){super.onInternalResize(...arguments),this.isPainted&&this.syncOverflowVisibility()}syncOverflowVisibility(){let e=this,{overflowType:t,contentElement:r,isVisible:i}=e,{clientSizeProp:s,edgeProp:n,sizeProp:o}=e.axisProps,{overflowMenuButton:l,overflowScrollStart:c,overflowScrollEnd:d}=e.tools,u=t==="menu";if(!i||!t)return;e.inSyncOverflowVisibility=!0,l?.hide();let f=0,h,m,p,y;if(e.eachWidget((C,w)=>{if(C.floating){w.down=!1;return}w.down=!(p=C.overflowable),p&&C.innerItem&&(C._toolbarOverflow&&(C.hidden=C._toolbarOverflow=!1),C.isVisible&&((y||(y=[])).push(C),++f))}),y&&(m=y[--f].rectangle(r),h=Math.ceil(r[s]+(!c||c.hidden?0:c.rectangle("outer")[o])+(!d||d.hidden?0:d.rectangle("outer")[o]))),y&&Math.floor(m[n])>h)if(u){for(l.show(),h=r[s];f-- >0&&(m=y[f].rectangle(r),!(Math.floor(m[n])<=h)););e.syncOverflowMenuButton(y.slice(f+1))}else d.show(),c.show(),e.syncScrollerState();else u||(d?.hide(),c?.hide());e.inSyncOverflowVisibility=!1}syncOverflowMenuButton(e){let t=this,{axisProps:r,overflowMenuButton:i}=t,s={cls:"b-toolbar-overflow-menu",minWidth:280,items:[],align:{align:r.horizontal?"t100-b100":"r100-l100",axisLock:"flexible"}};for(let n,o=0,{length:l}=e;o<l;o++)n=e[o],n._toolbarOverflowWidth=n.width,n._toolbarOverflow=!0,n.hidden=!0;if(t.addToMenu(s,e.filter(n=>t.overflowItemFilter(n))),i._menu?.isMenu){let n=i.menu,{toAdd:o,toRemove:l}=U.delta(s.items,n.items,1);if(n.remove(l),n.items.length)for(let c=o.length-1;c>=0;c--)n.insert(o[c],0);else n.add(o)}else i.menu=s}syncScrollerState(){let e=this,{axisProps:t,scrollable:r}=e,{overflowScrollStart:i,overflowScrollEnd:s}=e.tools,n=r[t.pos],o=r[t.max];i.disabled=!n,s.disabled=Math.ceil(n)>=o}overflowItemFilter(e){let{filter:t}=this.overflow;return Boolean(t?t.call(this,e):g.getChildElementCount(e.element))}addToMenu(e,t){let{horizontal:r}=this;for(let i=0,{length:s}=t;i<s;i++){let n=t[i],o=n._toolbarOverflowClone,l=n.constructor;if(!o){let c=I.clone(n.initialConfig);delete c.id,c.hidden=!1,c.width="",r&&(c.flex=""),c.minWidth=n._toolbarOverflowWidth,c.type=n.type,c._toolbarOverflowOriginal=n,c.disabled=n.disabled,"value"in n&&(c.value=n.value),c.type==="button"&&(c.text||(c.text=n.tooltipText)),n._toolbarOverflowClone=o=l.create(c),o.element.style.margin="",n.isField&&o.on({change:this.onFieldCloneChange})}e.items.push(o)}}onFieldCloneChange({source:e,value:t}){e._toolbarOverflowOriginal.value=t}onLeafItemConfigChange(e,{name:t,value:r}){let i=this,s=i.up(Zd),{_toolbarOverflowClone:n}=i;s?.inSyncOverflowVisibility||t==="hidden"&&r===i._toolbarOverflow||(n&&(n[t]=r),s?.isPainted&&i.ref!=="overflowMenuButton"&&(i.isTextField&&t==="value"&&(i.containsFocus||n?.containsFocus)||s.syncOverflowVisibility()))}createWidget(e){e==="->"?e={type:"widget",cls:"b-toolbar-fill"}:e==="|"?e={type:"widget",cls:"b-toolbar-separator"}:typeof e=="string"&&(e={type:"widget",cls:"b-toolbar-text",html:e});let t=super.createWidget(e);return this.widgetCls&&t.element.classList.add(this.widgetCls),t}};ws.initClass();var vs=a=>!a.classList.contains("b-focus-trap")&&g.isFocusable(a)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,xs=[],ru={},Uo=[xs,xs],Ko=(a,e,t)=>({children:a.children,class:{...e,[`b-${a.vertical?"v":"h"}box`]:1,"b-box-center":1,"b-panel-bar-wrap":!t}}),Es=(a,e=!1)=>({vertical:e,children:a?[a]:[]}),iu={dock:1,hidden:1,weight:1},Et={top:[!0,!0],bottom:[!0,!1],left:[!1,!0],right:[!1,!1]},Yo={header:1,"pre-header":1};vs.acceptNode=vs;var Oe=class extends Pe.mixin(Qr){static get $name(){return"Panel"}static get type(){return"panel"}static get configurable(){return{localizableProperties:["title"],collapsed:{value:null,$config:null,default:!1},collapsible:{value:null,$config:"nullify"},bodyCls:{$config:{merge:"classList"},value:null},trapFocus:null,title:null,header:null,stripDefaults:{"*":{type:"toolbar",dock:"top"},bbar:{dock:"bottom",weight:-1e3},tbar:{weight:-1e3}},strips:{value:null,$config:"nullify"},toolDefaults:{close:{weight:-1e3},collapse:{weight:-990}},footer:null,revealed:null,tbar:null,bbar:null}}compose(){let e=this,{collapsible:t,focusable:r,hasItems:i,revealed:s}=e,n=e.composeHeader(),o=n?.class["b-dock-left"]||n?.class["b-dock-right"],l=e.composeBody(),c="bodyWrapElement";return t&&([c,l]=t.wrapCollapser(c,l)),{tabIndex:i&&r!==!1||r?0:null,class:{[`b-panel-collapsible-${t?.type}`]:t,[`b-panel-collapse-${t?.collapseDir}`]:t,[`b-${o?"h":"v"}box`]:1,"b-panel-collapsible":t,"b-panel-has-header":n,"b-panel-overlay-revealed":s},children:{topFocusTrap:{tabIndex:0,class:{"b-focus-trap":1}},headerElement:n,[c]:l,bottomFocusTrap:{tabIndex:0,class:{"b-focus-trap":1}}}}}composeBody(){let e=this,{bodyCls:t,bodyConfig:r,footer:i,uiClassList:s}=e,n=b.values(e.strips,(p,y)=>!Et[y?.dock]).sort(e.byWeightSortFn),o,l,c,d,u,f,h;for(i&&(c=i.dock||"bottom",n.unshift({dock:c,element:{tag:"footer",reference:"footerElement",html:typeof i=="string"?i:i.html,class:{...s,[`b-dock-${c}`]:1,[`${i.cls||""}`]:1}}})),t&&(r[u="className"]||(u="class"),r[u]=new P(r[u]).assign(t)),d=n.length;d-- >0;)o=n[d],[f,l]=Et[o.dock],h?h.vertical!==f&&(h=Es(Ko(h,s),f)):h=Es(r,f),h.children[l?"unshift":"push"](o.element);let m=Ko(h||Es(r),s,!0);return m.class["b-panel-body-wrap"]=1,m.class[`b-${e.$$name.toLowerCase()}-body-wrap`]=1,m}get hasHeader(){let{header:e,title:t,tools:r,parent:i}=this,s=Object.values(r||{}).some(n=>!n.hidden);return e!==!1&&(e||!i?.suppressChildHeaders&&(t||s))}get rootUiClass(){return Oe}composeHeader(e){let t=this;if(!e&&!t.hasHeader)return;let r=t.header||{},i=r.dock||"top",[s,n]=t.splitHeaderItems({dock:i,as:"element"}),o=t.$meta.hierarchy,l=t.composeTitle(r),c=new P({[`b-dock-${i}`]:1,...t.uiClassList},r.cls),d,u;for(d=o.indexOf(Oe);d<o.length;++d)u=o[d].$$name,u!=="Grid"&&(c[`b-${u.toLowerCase()}-header`]=1);let f={tag:"header",class:c,children:[...s,l,...n]};return t.collapsible?.composeHeader(f)||f}composeTitle(e){let t=typeof e=="string"?e:this.title||e.title,r={reference:"titleElement",html:t??"\xA0",class:{[`b-align-${e.titleAlign||"start"}`]:1,"b-header-title":1,...this.uiClassList}};return b.isObject(t)&&(delete r.html,b.merge(r,t)),this.collapsible?.composeTitle(r)||r}afterRecompose(){super.afterRecompose();let e=this,{headerElement:t}=e;e._headerClickDetacher?.(),e._headerClickDetacher=t&&O.on({element:t,click:r=>e.trigger?.("headerClick",{event:r})})}onHeaderClick(e){this.collapsible?.onHeaderClick(e)}onPaint(){super.onPaint(),this.collapsible?.onPanelPaint(this)}splitHeaderItems({as:e,overlay:t,dock:r}=ru){let i=this,s=e==="element",{collapsed:n}=i,o=i.getEndTools({overlay:t}),l=i.getStartTools({overlay:t}),c=b.values(i.strips,(m,p)=>!Yo[p?.dock]&&p.isCollapsified(n,t)),d=Uo,u,f,h;if(c.length+o.length+l.length){for(d=[f=[...l,...c.filter(m=>m.dock==="pre-header").sort(i.byWeightSortFn)],u=[...c.filter(m=>m.dock==="header").sort(i.byWeightReverseSortFn),...o]],h=0;h<f.length;++h)r&&f[h].syncRotationToDock?.(r),s&&(f[h]=f[h].element);for(h=0;h<u.length;++h)r&&u[h].syncRotationToDock?.(r),s&&(u[h]=u[h].element)}return d}set bodyConfig(e){this._bodyConfig=e}get bodyConfig(){let e=this,t=b.merge({reference:"bodyElement",className:{...e.getStaticWidgetClasses(Oe,"-content"),"b-box-center":1,"b-text-content":e.textContent&&e.hasNoChildren}},e._bodyConfig);return(e.initializingElement||!e._element)&&(t.html=e.content||e._html),t}changeBodyCls(e){return P.from(e)}changeTbar(e){return this.getConfig("strips"),this.strips={tbar:e},this.strips.tbar}changeBbar(e){return this.getConfig("strips"),this.strips={bbar:e},this.strips.bbar}get childItems(){let e=this,t=b.values(e.strips,(o,l)=>!Et[l?.dock]).sort(e.byWeightSortFn),[r,i]=e.splitHeaderItems(),[s,n]=e.collapsible?.splitHeaderItems()||Uo;return[...r,...s,...i,...n,...t.filter(o=>Et[o.dock][1]),...e._items||xs,...t.filter(o=>!Et[o.dock][1]).reverse()]}changeStrips(e,t){let r=this,i=r.$strips||(r.$strips=new rt({configName:"strips",factory:E,inferType:!1,owner:r,created(s){let{dock:n}=s;if(!Yo[n]&&!Et[n])throw new Error(`Invalid dock value "${n}"; must be: top, left, right, bottom, header, or pre-header`);W.after(s,"onConfigChange",(o,{name:l})=>{iu[l]&&r.onConfigChange({name:"strips",value:i.target})}),s.innerItem=!1,r.onChildAdd(s),s.parent=r,s.layout?.renderChildren(),s.hasItems&&(r.hasItems=!0)},setup(s,n){return s=b.merge(b.clone(r.stripDefaults["*"]),r.stripDefaults[n],s),s.parent=r,s.ref=n,s},transform(s){return Array.isArray(s)&&(s={items:s}),s||null}}));if(i.update(e),!t)return i.target}get collapsing(){return this.collapsible?.collapsing}get collapsingExpanding(){return this.collapsible?.collapsingExpanding}get expanding(){return this.collapsible?.expanding}changeCollapsed(e){let t=this,{collapsible:r}=t;if(e=Boolean(e),!r||t.changingCollapse)return e;t.isPainted&&r?.collapse({animation:null,collapsed:e})}changeCollapsible(e,t){return this.getConfig("tools"),e&&(e===!0?e={}:typeof e=="string"&&(e={[Et[e]?"direction":"type"]:e})),zt.reconfigure(t,e,{owner:this,defaults:{panel:this}})}updateCollapsible(e){let t=this,r=e?.toolsConfig;t.tools={collapse:r?.collapse||null,recollapse:r?.recollapse||null},t.isPainted&&t.collapsed&&(t._collapsed=1,t.collapsed=!0)}_collapse(e,t){return t!==!0&&t!==void 0&&(t===!1?e.collapsed=!e.collapsed:typeof t=="number"?e.animation={duration:t}:t===null?e.animation=t:t===!0||("animation"in t?b.merge(e,t):e.animation=t)),this.collapsible?.collapse(e)}collapse(e){return this._collapse({collapsed:!0},e)}expand(e){return this._collapse({collapsed:!1},e)}toggleCollapsed(e){return this.collapsed?this.expand(e):this.collapse(e)}get expandedHeaderDock(){return this._expandedHeaderDock??this.initialConfig.header?.dock??"top"}set expandedHeaderDock(e){this._expandedHeaderDock=e?.toLowerCase()}updateHeader(e){this.changingCollapse||(this.expandedHeaderDock=e?.dock)}updateTrapFocus(e){let t=this;t.element.classList[e?"add":"remove"]("b-focus-trapped"),t.focusTrapListener=t.focusTrapListener?.(),e&&(t.focusTrapListener=O.on({element:t.element,focusin:"onFocusTrapped",delegate:".b-focus-trap",thisObj:t}),t.treeWalker||(t.treeWalker=this.setupTreeWalker(t.element,NodeFilter.SHOW_ELEMENT,vs,!1)))}updateMaxHeight(e){super.updateMaxHeight(e),x.isIE11&&(this.bodyWrapElement.style.flex=`1 1 ${e}px`)}fixIEMaxHeightBug(){let{element:e,contentElement:t,bodyWrapElement:r}=this;if(g.getStyleValue(e,"flex-direction")==="column"){t.style.maxHeight="";let i=k.client(e).height,s=e.childNodes,n=s.length;for(let o=0;o<n;o++){let l=s[o];l!==t&&l!==r&&!l.classList.contains("b-resize-monitors")&&(i-=l.offsetHeight)}this.contentElement.style.maxHeight=`${i}px`}}setupTreeWalker(e,t,r,i){return document.createTreeWalker(e,t,r,i)}onFocusTrapped(e){let t=this,r=t.treeWalker;e.target===t.bottomFocusTrap?(r.currentNode=t.topFocusTrap,r.nextNode()):(r.currentNode=t.bottomFocusTrap,r.previousNode()),t.requestAnimationFrame(()=>r.currentNode.focus())}get focusElement(){return this.hasItems&&(super.focusElement||this.element)}get contentElement(){return this.element&&this.bodyElement}get widgetClassList(){let e=this,t=super.widgetClassList;return e.hasHeader&&t.push("b-panel-has-header",`b-header-dock-${e.header?.dock||"top"}`),e.tbar&&t.push("b-panel-has-top-toolbar"),e.bbar&&t.push("b-panel-has-bottom-toolbar"),t}};Oe.initClass();var ve=class extends Oe{static get $name(){return"Popup"}static get type(){return"popup"}static get configurable(){return{autoShow:!0,autoClose:!0,showOnClick:!1,forElement:null,monitorResize:!0,floating:!0,hidden:!0,axisLock:!0,hideAnimation:x.isIE11?null:{opacity:{from:1,to:0,duration:".3s",delay:"0s"}},showAnimation:x.isIE11?null:{opacity:{from:0,to:1,duration:".4s",delay:"0s"}},stripDefaults:{bbar:{layout:{justify:"flex-end"}}},testConfig:{hideAnimation:null,showAnimation:null},closeAction:"hide",trapFocus:!0,focusOnToFront:!0,closable:null,maximizable:null,modal:null,maximized:null,tools:{close:{cls:"b-popup-close",handler:"close",weight:-1e3,hidden:!0},maximize:{cls:"b-popup-expand",handler:"toggleMaximized",weight:-999,hidden:!0}},highlightReturnedFocus:!0}}finalizeInit(){let e=this;e.anchoredTo=e.forElement,e.initialAnchor=e.anchor,e.forElement&&e.showOnClick&&(e.initialConfig.autoShow||(e.autoShow=!1),O.on({element:e.forElement,click:"onElementUserAction",thisObj:e})),super.finalizeInit(),e.autoShow&&(e.autoShow===!0?e.show():e.setTimeout(()=>e.show(),e.autoShow))}onPaint({firstPaint:e}){super.onPaint?.(...arguments);let t=this;t.maximizable&&t.headerElement&&O.on({element:t.headerElement,dblclick:t.onHeaderDblClick,thisObj:t})}doDestroy(){this.syncModalMask(),super.doDestroy()}compose(){let{hasNoChildren:e,textContent:t}=this;return{class:{"b-text-popup":Boolean(t&&e)}}}close(){let e=this;if(!e._hidden&&e.trigger("beforeClose")!==!1||e._hidden&&e.closeAction==="destroy")return e.containsFocus&&e.highlightReturnedFocus&&e.setTimeout(()=>e.element.classList.add("b-using-keyboard"),0),e[e.closeAction]()}toggleMaximized(){this.maximized=!this.maximized}updateMaximized(e){g.toggleClasses(this.element,["b-maximized"],e)}onInternalKeyDown(e){e.key==="Escape"&&(e.stopImmediatePropagation(),this.close(!0))}onDocumentMouseDown({event:e}){let t=this,{owner:r}=t,{target:i}=e;if(e.type!=="touchend"&&r?.isButton&&r._menu===t&&r.element.contains(i))return e.preventDefault(),!1;t.modal&&i===ve.modalMask?(e.preventDefault(),t.modal.closeOnMaskTap?t.close():t.containsFocus||t.focus()):!t.owns(i)&&t.autoClose&&!t.containsFocus&&t.close()}get isTopModal(){return g.isVisible(ve.modalMask)&&this.element.previousElementSibling===ve.modalMask}onFocusIn(e){let t=g.getActiveElement(this);super.onFocusIn(e),g.getActiveElement(this)===t&&e.target===this.element&&this.focus()}onFocusOut(e){!(window.visualViewport&&window.visualViewport.height<document.documentElement.clientHeight-1)&&!this.modal&&this.autoClose&&this.close(),super.onFocusOut(e)}onShow(){let e=this;e.autoClose&&e.addDocumentMouseDownListener(),e.focusOnToFront&&e.focus(),super.onShow&&super.onShow(),e.syncModalMask()}addDocumentMouseDownListener(){this.mouseDownRemover||(this.mouseDownRemover=ae.on({globaltap:"onDocumentMouseDown",thisObj:this}))}updateModal(e){e&&(this.floating=!0)}syncModalMask(){let e=this,{modal:t}=e;if(t&&e.isVisible)typeof e._x!="number"&&typeof e._y!="number"&&(e.centered=!0),e.modalMask.classList.remove("b-hide-display"),e.element.classList.add("b-modal");else if(e.isPainted){e.element.classList.remove("b-modal");let r=e.floatRoot.querySelectorAll(".b-modal"),i=r.length?ve.fromElement(r[r.length-1],"popup"):null;i?i.syncModalMask():ve.modalMask.classList.add("b-hide-display")}}onHide(){let e=this;e.mouseDownRemover&&(e.mouseDownRemover(),e.mouseDownRemover=null),super.onHide&&super.onHide(),e.syncModalMask()}onElementUserAction(){this.show()}onHeaderDblClick(){this.maximizable&&this.toggleMaximized()}updateClosable(e){this.tools.close.hidden=!e}updateMaximizable(e){this.tools.maximize.hidden=!e}get modalMask(){let{modalMask:e}=ve;return e.nextElementSibling!==this.element&&this.floatRoot.insertBefore(e,this.element),e}static get modalMask(){return this._modalMask||(this._modalMask=g.createElement({className:"b-modal-mask b-hide-display"}),O.on({element:this._modalMask,wheel:e=>e.preventDefault()})),this._modalMask}};ve.initClass();var su=/^b-icon-/,nu=/^b-fa-/,Wt=class extends E{static get $name(){return"MenuItem"}static get type(){return"menuitem"}static get configurable(){return{checked:null,toggleGroup:null,menu:{value:null,$config:["lazy","nullify"]},icon:null,closeParent:null,href:null,target:null,localizableProperties:["text"],closeMenuDelay:200}}compose(){let{checked:e,href:t,hasMenu:r,target:i,text:s}=this,n=this.icon||(typeof e=="boolean"?"b-fw-icon":"");return{tag:t?"a":"div",tabIndex:-1,href:t,target:i,class:{"b-has-submenu":r},dataset:{group:this.toggleGroup},children:{iconElement:n&&{tag:"i",class:{"b-fa":nu.test(n),"b-icon":su.test(n),"b-icon-checked":e===!0,"b-icon-unchecked":e===!1,"b-menuitem-icon":1,...P.normalize(n,"object")}},textElement:{tag:"span",html:s,class:{"b-menu-text":1}},subMenuIcon:r&&{tag:"i",class:{"b-fw-icon":1,"b-icon-sub-menu":1}}}}}doAction(e){let t=this,r=this.parent,i={menu:r,item:t,element:t.element,bubbles:!0};if(typeof t.checked=="boolean"){let s=!t.checked;(!t.toggleGroup||s)&&(t.checked=!t.checked)}t.trigger("beforeItem",i),t.trigger("item",i),t.closeParent&&r&&(r.rootMenu.close(),e&&!t.href&&e.preventDefault())}get focusElement(){return this.element}get contentElement(){return this.textElement}get isFocusable(){let e=this.focusElement;return e&&this.isVisible&&(e===document.body||e.offsetParent)}get hasMenu(){return this.hasConfig("menu")}get childItems(){let{menu:e}=this;return e?[e]:[]}get text(){return this.html}set text(e){this.html=e}onFocusIn(e){super.onFocusIn(e),!this.disabled&&this.menu&&this.openMenu()}onFocusOut(e){super.onFocusOut(e),this._menu&&(this.menu.closeTimer=this.menu.setTimeout(()=>this.closeMenu(),this.closeMenuDelay))}openMenu(e){let t=this.menu;!this.disabled&&t&&(t.focusOnToFront=e,t.show())}closeMenu(){this._menu instanceof E&&this.menu.close()}changeToggleGroup(e){return e&&typeof this.checked!="boolean"&&(this.checked=!1),e}changeChecked(e,t){if(this.isConfiguring||typeof t=="boolean")return Boolean(e)}updateChecked(e){let t=this;t.isConfiguring||(t.toggleGroup&&t.uncheckToggleGroupMembers(),t.trigger("toggle",{menu:t.owner,item:t,element:t.element,bubbles:!0,checked:e}))}getToggleGroupMembers(){let e=this,{checked:t,toggleGroup:r,element:i}=e,s=[];return t&&r&&g.forEachSelector(e.rootElement,`[data-group=${r}]`,n=>{if(n!==i){let o=E.fromElement(n);o&&s.push(o)}}),s}uncheckToggleGroupMembers(){this.checked&&this.toggleGroup&&this.getToggleGroupMembers().forEach(e=>e.checked=!1)}get closeParent(){return(typeof this.checked=="boolean"?this._closeParent:this._closeParent!==!1)&&!this.hasMenu}changeMenu(e,t){let r=this,{constrainTo:i,scrollAction:s}=r.owner;return e&&typeof e=="object"&&!("items"in e)&&!("widgets"in e)&&!("html"in e)&&(e={lazyItems:e}),fr.reconfigure(t,e,{owner:r,defaults:{type:"menu",align:"l0-r0",anchor:!0,autoClose:!0,autoShow:!1,cls:"b-sub-menu",forElement:r.element,owner:r,constrainTo:i,scrollAction:s}})}};Wt.initClass();var ou={ArrowUp:1,ArrowDown:1,ArrowRight:1,ArrowLeft:1,Enter:1,Escape:1},fr=class extends ve{static get $name(){return"Menu"}static get type(){return"menu"}static get configurable(){return{focusable:!0,align:"t-b",scrollAction:"hide",focusOnHover:null,scrollable:!1,defaultType:"menuitem",tools:{close:!1}}}construct(e){Array.isArray(e)&&(e={lazyItems:e}),super.construct(e),O.on({element:this.element,click:"onMouseClick",mouseover:"onMouseOver",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",thisObj:this})}afterShow(e){let t=this;t.items.some(s=>Boolean(s._menu))&&t.element.classList.add("b-menu-with-submenu"),t.items.some(s=>s.icon)&&t.element.classList.add("b-menu-with-icon"),super.afterShow(e)}createWidget(e){return typeof e=="string"&&(e={text:e}),super.createWidget(e)}get focusElement(){let e=this,t=e.parentMenu?.element.contains(g.getActiveElement(e.parentMenu)),r=e.items[0];return t||!(r instanceof Wt)?super.focusElement:e.element}onDocumentMouseDown({event:e}){if(!this.parentMenu||!this.parentMenu.owns(e.target))return super.onDocumentMouseDown(...arguments)}hide(e){let t=this;super.hide(e),t.isVisible||(t.currentSubMenu?.hide?.(e),t.parentMenu&&(t.parentMenu.currentSubMenu=null))}show(){super.show(...arguments);let{parentMenu:e}=this;this.isVisible&&e&&(e.currentSubMenu=this)}onMouseClick(e){let t=e.target.closest(".b-menuitem");t&&(this.triggerElement(t,e),e.stopImmediatePropagation())}onMouseOver(e){if(this.focusOnHover!==!1){let t=g.up(e.relatedTarget,".b-widget"),r=g.up(e.target,".b-widget"),i=E.fromElement(r);!g.isTouchEvent&&r&&r!==t&&i.parent===this&&this.setTimeout({fn:"handleMouseOver",delay:30,args:[i],cancelOutstanding:!0})}}handleMouseOver(e){e.focus()}onMouseEnter(){this.clearTimeout(this.closeTimer)}onMouseLeave(e){let t=this,{relatedTarget:r}=e,i=r&&t.owns(r),s=r&&r instanceof HTMLElement&&E.fromElement(r),n=!i;if(s){for(;s.ownerCmp;)s=s.ownerCmp;n&=!g.getAncestor(s.element,[e.target])}!i&&n&&(t.currentSubMenu&&!t.currentSubMenu.closeTimer&&t.currentSubMenu.hide(),t.element.contains(g.getActiveElement(t))&&g.getActiveElement(t).matches(".b-menuitem")&&t.focusElement.focus())}onInternalKeyDown(e){let t=E.fromElement(e),r=t&&t!==this&&!(t instanceof Wt);if(e.key==="Escape"){(r?this:this.rootMenu).close();return}if(super.onInternalKeyDown(e),r)return;ou[e.key]&&e.preventDefault();let i=this.element,s=g.getActiveElement(i);this.navigateFrom(s!==i&&i.contains(s)?s:null,e.key,e)}navigateFrom(e,t,r){let i=this,s=i.treeWalker,n=e&&i.getItem(e),o;switch(t){case"ArrowUp":s.currentNode=e||(e=i.bottomFocusTrap),s.previousNode(),o=s.currentNode;break;case"ArrowDown":s.currentNode=e||(e=i.topFocusTrap),s.nextNode(),o=s.currentNode;break;case" ":e&&!e.classList.contains("b-disabled")&&(n&&n.menu?i.openSubMenu(e,n):i.triggerElement(e,r));break;case"ArrowRight":if(e&&n&&n.menu&&!e.classList.contains("b-disabled")){let l=i.openSubMenu(e,n);l&&l.focus()}else s.currentNode=e||(e=i.topFocusTrap),s.nextNode(),o=s.currentNode;break;case"ArrowLeft":i.isSubMenu?i.hide():e||(s.currentNode=e||(e=i.topFocusTrap),s.nextNode(),o=s.currentNode);break;case"Enter":e&&!e.classList.contains("b-disabled")&&i.triggerElement(e,r);break}o&&(o===i.element?i.navigateFrom(i.bottomFocusTrap,"ArrowUp",r):o===e?i.navigateFrom(i.topFocusTrap,"ArrowDown",r):o.focus())}getItem(e){if(e!=null)return typeof e=="number"?this.items[e]:e.nodeType===Element.ELEMENT_NODE?E.fromElement(e,"menuitem",this.contentElement):this.items.find(t=>t.id==e)}triggerElement(e,t){let r=this.getItem(e);r&&!r.disabled&&r.doAction(t)}get isSubMenu(){return this===this.owner?.menu}openSubMenu(e,t){let r=this,i=t.menu;if(i){if(!i.isVisible){let s={item:t,element:e};if(r.trigger("beforeSubMenu",s)===!1||t.onBeforeSubMenu&&t.onBeforeSubMenu(s)===!1)return;i.show()}return r.currentSubMenu=i}}set selectedElement(e){let t=this,r=t._selectedElement;if(r){let i=t.getItem(r),s=i&&i.menu;s&&s.hide(),r.classList.remove("b-active")}if(t._selectedElement=e,e){let i=g.isFocusable(e);e.classList.add("b-active"),t.scrollable.scrollIntoView(e,{animate:!i,focus:i})}}get selectedElement(){return this._selectedElement}selectFirst(){let e=this.treeWalker;e.currentNode=this.topFocusTrap,e.nextNode(),this.requestAnimationFrame(()=>e.currentNode.focus())}get parentMenu(){let e=this.owner;return e&&(e.isMenu?e:e.up?.("menu"))}get rootMenu(){let e=this;for(;e.parentMenu&&e.parentMenu instanceof this.constructor;)e=e.parentMenu;return e}};fr.initClass();var Xo=["b-horizontal","b-vertical"],Ss=a=>g.getStyleValue(a.parentElement,"display")==="flex"&&(parseInt(g.getStyleValue(a,"flex-basis"),10)||parseInt(g.getStyleValue(a,"flex-grow"),10)),lu={horizontal:!1,vertical:!0},hr=class extends E{static get $name(){return"Splitter"}static get type(){return"splitter"}static get configurable(){return{orientation:"auto",vertical:null,containerElement:{$config:"nullify",value:null},nextNeighbor:{$config:"nullify",value:null},previousNeighbor:{$config:"nullify",value:null}}}static get delayable(){return{syncState:"raf"}}doDestroy(){this.mouseDetacher?.(),super.doDestroy()}compose(){return{class:{"b-splitter":1},listeners:{pointerdown:"onMouseDown",mouseenter:"syncState",...!x.supportsPointerEvents&&{mousedown:"onMouseDown",touchstart:"onMouseDown"}}}}get currentOrientation(){return this.vertical?"vertical":"horizontal"}get nextWidget(){return E.fromElement(this.element.nextElementSibling,1)}get previousWidget(){return E.fromElement(this.element.previousElementSibling,1)}updateContainerElement(e){let t=this;t.stateDetector=t.stateDetector?.disconnect(),e&&(t.stateDetector=new MutationObserver(()=>t.syncState()),t.stateDetector.observe(e,{attributes:!0,childList:!0}))}updateNextNeighbor(e){this.watchNeighbor(e,"next")}updatePreviousNeighbor(e){this.watchNeighbor(e,"previous")}watchNeighbor(e,t){this.detachListeners(t),e?.on({name:t,thisObj:this,collapse:"syncState",expand:"syncState",hide:"syncState",show:"syncState"})}updateOrientation(){this.syncState.now()}updateVertical(e){let t=this.element?.classList;t?.add(Xo[e?1:0]),t?.remove(Xo[e?0:1])}syncState(){let e=this,{element:t,nextWidget:r,previousWidget:i}=e,s=lu[e.orientation]??null;if(e.nextNeighbor=r,e.previousNeighbor=i,e.disabled=r&&(r.collapsible&&r.collapsed||r.hidden)||i&&(i.collapsible&&i.collapsed||i.hidden),s!==null&&r&&i)e.containerElement=null;else if(e.containerElement=t.parentElement,e.rendered&&t.offsetParent){let n=g.getStyleValue(t.parentElement,"flex-direction");if(n)s=!n.startsWith("column");else{let o=t.previousElementSibling,l=t.nextElementSibling;if(!o||!l)return;let c=o.getBoundingClientRect(),d=l.getBoundingClientRect(),u=c.top<d.top?c:d,f=u===d?c:d;s=u.top===f.top}}e.vertical=s}onMouseDown(e){e.preventDefault(),e.touches&&(e=e.touches[0]);let t=this,{element:r}=t,i=r.previousElementSibling,s=r.nextElementSibling,n=Ss(i),o=Ss(s),l=[];t.mouseDetacher&&t.mouseDetacher();for(let d of r.parentElement.children)Ss(d)&&d!==r&&l.push({element:d,width:d.offsetWidth,height:d.offsetHeight});t.context={startX:e.pageX,startY:e.pageY,prevWidth:i.offsetWidth,prevHeight:i.offsetHeight,nextWidth:s.offsetWidth,nextHeight:s.offsetHeight,prevHasFlex:n,nextHasFlex:o,flexed:l,prev:i,next:s};let c={element:document,pointermove:"onMouseMove",pointerup:"onMouseUp",thisObj:t};x.supportsPointerEvents||(c.mousemove="onMouseMove",c.touchmove="onMouseMove",c.mouseup=c.touchend="onMouseUp"),r.classList.add("b-moving"),t.mouseDetacher=O.on(c)}onMouseMove(e){let t=this,{context:r,nextWidget:i,previousWidget:s}=t,{next:n,prev:o}=r,l=e.pageX-r.startX,c=e.pageY-r.startY;if(e.preventDefault(),Object.assign(r,{deltaX:l,deltaY:c}),r.started||(r.started=!0,t.trigger("dragStart",{context:r,event:e}),r.flexed.forEach(d=>{d.element.style.flexGrow=t.vertical?d.width:d.height,d.element.style.flexBasis="0"})),t.vertical){let d=r.prevWidth+l,u=r.nextWidth-l;r.prevHasFlex?o.style.flexGrow=d:s?s.width=d:o.style.width=`${d}px`,r.nextHasFlex?n.style.flexGrow=u:i?i.width=u:n.style.width=`${u}px`}else{let d=r.prevHeight+c,u=r.nextHeight-c;r.prevHasFlex?o.style.flexGrow=d:s?s.height=d:o.style.height=`${d}px`,r.nextHasFlex?n.style.flexGrow=u:i?i.height=u:n.style.height=`${u}px`}t.trigger("drag",{context:r,event:e})}onMouseUp(e){let t=this;t.mouseDetacher&&t.mouseDetacher(),t.mouseDetacher=null,t.element.classList.remove("b-moving"),t.context.started&&t.trigger("drop",{context:t.context,event:e}),t.context=null}render(){super.render(...arguments),this.syncState.now(),this.vertical===null&&this.syncState()}};hr.initClass();var au={left:!0,right:!0,top:!0,bottom:!0,transform:!0},cu={true:1,false:1},du=Promise.resolve(),ee=class extends ve{static get $name(){return"Tooltip"}static get type(){return"tooltip"}static get configurable(){return{mouseOffsetX:15,mouseOffsetY:15,floating:!0,getHtml:null,forElement:null,trackMouse:null,updateContentOnMouseMove:!1,forSelector:null,hideOnDelegateChange:null,anchorToTarget:!0,showOnHover:!1,hoverDelay:500,autoShow:!1,dismissDelay:0,hideDelay:500,loadingMsg:"Loading...",allowOver:!1,anchor:!0,align:{align:"b-t",minHeight:300},axisLock:!0,testConfig:{hideDelay:100,hoverDelay:100,showAnimation:null,hideAnimation:null}}}afterConfigure(){let e=this,{forSelector:t}=e;t&&(e.showOnHover=!0,e.forElement||(e.anchorToTarget||(e.trackMouse=!0),e.forElement=e.rootElement.host||e.rootElement)),super.afterConfigure(),e.forElement&&e.showOnHover&&(e.pointerOverOutDetacher=O.on({element:e.forElement,pointerover:"internalOnPointerOver",pointerout:"internalOnPointerOut",thisObj:e})),e.allowOver&&O.on({element:e.element,mouseenter:"onOwnElementMouseEnter",mouseleave:"internalOnPointerOut",thisObj:e})}doDestroy(){this.pointerOverOutDetacher&&this.pointerOverOutDetacher(),super.doDestroy()}set focusOnToFront(e){super.focusOnToFront=e}get focusOnToFront(){return super.focusOnToFront&&g.usingKeyboard}get focusElement(){let e=super.focusElement;if(e!==this.element)return e}get anchorToTarget(){return this._anchorToTarget&&!this.trackMouse}get anchor(){return super.anchor&&!this.trackMouse}set anchor(e){super.anchor=e}onDocumentMouseDown({event:e}){let t=this,{triggeredByEvent:r}=t;r&&g.isTouchEvent&&e.pageX===r.pageX&&e.pageY===r.pageY&&t.activeTarget.contains(e.target)&&performance.now()-r.timeStamp<500||(t.abortDelayedShow(),super.onDocumentMouseDown({event:e}))}internalOnPointerOver(e){let t=this,r=t.forElement,i=t.forSelector,s=t.activeTarget,n;if(!(t.disabled||t.owner&&!t.owner.showTooltipWhenDisabled&&t.owner.disabled)&&!(t.allowOver&&t.element.contains(e.target))){if(i){if(s&&s.contains(e.target)&&s.contains(e.relatedTarget)||(n=e.target.closest(i),n&&e.relatedTarget&&e.relatedTarget.closest(i)===n))return}else if(!r.contains(e.relatedTarget))n=r;else return;n?t.handleForElementOver(e,n):s&&t.handleForElementOut()}}onTransitionEnd(e){let t=this,r=ee.currentOverElement;if(au[e.propertyName]){if(t.allowOver&&t.element.contains(r))return;t.activeTarget&&t.activeTarget.contains(r)&&!t.trackMouse&&t.realign()}}async handleForElementOver(e,t){let r=this,{activeTarget:i,hideOnDelegateChange:s}=r,n=t!==i,o=n&&s;if(r.trigger("pointerOver",{event:e,target:t})===!1)r.internalOnPointerOut(e);else{if(r.triggeredByEvent=e,r.hasTimeout("hide")&&(r.abortDelayedHide(),!n))return;if(!s&&r.element.classList.contains("b-hiding")&&r.cancelHideShowAnimation(),!r._hidden&&o&&r.hide(!1),r.updateActiveTarget(t),r.isVisible){let l=r.updateContent();if(I.isPromise(l)&&!r.loadingMsg&&await l,r.trigger("beforeShow")===!1)return r.hide();r.alignTo({target:r.anchorToTarget?t:new Be(r.triggeredByEvent.pageX-window.pageXOffset+r.mouseOffsetX,r.triggeredByEvent.pageY-window.pageYOffset+r.mouseOffsetY),overlap:!(r.anchorToTarget&&r.anchor)}),r.trigger("show"),r.afterShowByTarget()}else r.delayShow(t)}}async delayShow(e){let t=this;if(t.currentAnimation?.showing&&t.cancelHideShowAnimation(),!t.isVisible&&!t.hasTimeout("show"))if(!t.hoverDelay||t.forSelector&&Date.now()-t.lastHidden<t.quickShowInterval){let r=t.updateContent();I.isPromise(r)&&!t.loadingMsg&&await r,t.showByTarget(e)}else t.addDocumentMouseDownListener(),!t.listeningForMouseMove&&!t.anchorToTarget&&(t.mouseMoveRemover=O.on({element:t.rootElement,mousemove:"onMouseMove",thisObj:t})),t.setTimeout(async()=>{if(!g.isOrphaned(e)){let r=t.updateContent();I.isPromise(r)&&!t.loadingMsg&&await r,t.showByTarget(e)}},!t.triggeredByEvent||t.triggeredByEvent.type==="pointerover"?t.hoverDelay:0,"show");else t.isVisible&&t.showByTarget(e)}updateContent(){let e=this;if(e.getHtml){e._html=null;let t=e.callback(e.getHtml,e,[{tip:e,element:e.element,activeTarget:e.activeTarget,event:e.triggeredByEvent}]);return e.html=t,t}}get hasContent(){return Boolean(this._html!==""&&typeof this.html=="string"&&this.html.length||this.items.length)}internalBeforeShow(){return(this.updateContentOnMouseMove||this.hasContent)&&!this.disabled}showAsyncMessage(e=this.optionalL(this.loadingMsg)){e&&(this.html=`
                <div class="b-tooltip-loading">
                    <i class="b-icon b-icon-spinner"></i>
                    ${e}
                </div>
            `)}showByTarget(e){let t=this;t.mouseMoveRemover&&(t.mouseMoveRemover(),t.mouseMoveRemover=null),t.showBy({target:t.anchorToTarget?e:new Be(t.triggeredByEvent.pageX-window.pageXOffset+t.mouseOffsetX,t.triggeredByEvent.pageY-window.pageYOffset+t.mouseOffsetY),overlap:!(t.anchorToTarget&&t.anchor)})}afterShowByTarget(){let e=this,t=e.dismissDelay;e.abortDelayedShow(),t&&e.setTimeout("hide",t),e.toFront()}updateActiveTarget(e){let t=this,r=t.activeTarget;t.activeTarget=e,t.isConfiguring||t.trigger("overtarget",{newTarget:e,lastTarget:r})}internalOnPointerOut(e){let t=this,r=e.relatedTarget;t.allowOver&&t.element.contains(r)||t.element.contains(e.target)&&t.activeTarget&&t.activeTarget.contains(r)||t.activeTarget&&!t.activeTarget.contains(r)&&t.handleForElementOut()}handleForElementOut(){let e=this,{hideDelay:t}=e;if(e.trigger("pointerOut")===!1){e.activeTarget=null;return}e.abortDelayedShow(),e.isVisible&&t!==!1&&(e.abortDelayedHide(),t>0?e.setTimeout("hide",t):e.hide())}show(){let e=this;e.forElement&&e.anchorToTarget&&!e.forSelector&&!e.inShowBy?e.showByTarget(e.forElement):(e.inShowBy&&(e.y=-1e4),super.show()),e.afterShowByTarget(),!e.mouseMoveRemover&&!e._hidden&&(e.trackMouse||e.updateContentOnMouseMove)&&(e.mouseMoveRemover=O.on({element:e.rootElement,[x.supportsPointerEvents?"pointermove":"touchmove"]:"onMouseMove",thisObj:e})),e.forElement&&!e.transitionEndDetacher&&!e._hidden&&(e.transitionEndDetacher=O.on({element:e.forElement,transitionend:"onTransitionEnd",thisObj:e}))}hide(...e){let t=this;if(t.abortDelayedShow(),t.isVisible){t.abortDelayedHide();let r=super.hide(...e);return t.lastHidden=Date.now(),t.activeTarget=null,t.mouseMoveRemover&&(t.mouseMoveRemover(),t.mouseMoveRemover=null),t.transitionEndDetacher&&(t.transitionEndDetacher(),t.transitionEndDetacher=null),t.listeningForMouseMove=!1,r}else return du}abortDelayedShow(){let e=this;e.hasTimeout("show")&&(e.mouseDownRemover&&(e.mouseDownRemover(),e.mouseDownRemover=null),e.clearTimeout("show"),e.mouseMoveRemover&&(e.mouseMoveRemover(),e.mouseMoveRemover=null),e.transitionEndDetacher&&(e.transitionEndDetacher(),e.transitionEndDetacher=null))}abortDelayedHide(){this.clearTimeout("hide")}realign(){let e=this,t=e.lastAlignSpec;!e.isConfiguring&&!e.isVisible&&t?.targetOutOfView&&(t.allowTargetOut||g.isInView(t.target,!1,e))&&(e.show(),t.targetOutOfView=!1),super.realign()}alignTo(e){let t=this;!t.isVisible||(e&&!(t.triggeredByEvent&&t.element.contains(t.triggeredByEvent.target))&&e.nodeType===Node.ELEMENT_NODE&&(e={target:e}),super.alignTo(e))}changeHtml(e){let t=this;if(e===!1){z.deprecate("Grid","5.0.0","Setting false to indicate loading is deprecated, in favor of `showAsyncMessage`. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/3.0.1 for more information"),this.showAsyncMessage();return}if(I.isPromise(e)){t.showAsyncMessage(),e.target=t.activeTarget,e.then(r=>{e.target===t.activeTarget&&(t.html=r)});return}return typeof e!="object"&&(e=e!=null?t.optionalL(String(e)):""),e}updateHtml(e,t){let r=this,i=e==="";i||(super.updateHtml(e,t),r.hasContent?(r.isVisible&&r.realign(),I.isPromise(e)||r.trigger("innerHtmlUpdate")):i=!0),i&&r.hide()}onMouseMove(e){let t=this,{forElement:r,activeTarget:i}=t,s=e.pageX-window.pageXOffset+t.mouseOffsetX,n=e.pageY-window.pageYOffset+t.mouseOffsetY,o=t.hasTimeout("hide"),l=e.target;if(t.triggeredByEvent=e,!t._hidden){let c,d=i?.contains(l),u=!d&&t.forSelector&&i&&!o&&l.nodeType===Node.ELEMENT_NODE&&!l.matches(t.forSelector)&&!(t.allowOver&&t.element.contains(l)),f=r?.document?r.document.documentElement:r,h=f&&(f.contains?f.contains(l):f.compareDocumentPosition(l)&16);if(u&&(c=t.handleForElementOut()),c||!o||h){if(t.dismissDelay&&!o&&t.setTimeout("hide",t.dismissDelay),t.updateContentOnMouseMove&&t.getHtml&&(t.html=t.callback(t.getHtml,t,[{tip:t,element:t.element,forElement:i,event:e}]),!t.html)){t.hide();return}t.trackMouse&&t.alignTo({position:new Be(s,n),ignorePageScroll:!0})}}}onOwnElementMouseEnter(e){this.abortDelayedHide()}static getSharedTooltip(e,t){let r=e.bryntum?.tooltip?.get(ee);if(!r&&!t){e.bryntum?.tooltip||b.setPath(e,"bryntum.tooltip",new Map);let i=e.bryntum.tooltip;i.set(ee,!0),r=new ee({forElement:e,rootElement:e,forSelector:"[data-btip]",resetCfg:{},isShared:!0,cls:"b-tooltip-shared",listeners:{pointerOver({source:s,target:n}){for(let c in s.resetCfg)c==="listeners"?s.un(s.resetCfg[c].set):c!=="html"&&(s[c]=s.resetCfg[c].was);s.resetCfg={};let o=E.getById(n.id),l=o?.tipConfig||s.gatherDataConfigs(n.dataset);if(o&&o.element!==n||!o&&n.matches(".b-widget")||o?.disabled&&!o.showTooltipWhenDisabled)return!1;s.owner=o;for(let c in l)s.resetCfg[c]={set:l[c],was:s[c]},c==="listeners"?s.on(l[c]):s[c]=l[c]},hide({source:s}){s.owner=null}},gatherDataConfigs(s){let n=this,o={};for(let l in s)if(l.startsWith("btip"))if(l.length>4){let c=M.uncapitalize(l.substr(4));if(c in n.getDefaultConfiguration()){let d=s[l];o[c]=cu[d]?d==="true":isNaN(d)?d:parseInt(d,10)}}else o.html=s[l];return o}}),O.on({element:e,mouseenter:s=>ee.currentOverElement=s.target,capture:!0}),i.set(ee,r)}return r}};ee.initClass();Object.defineProperty(E,"tooltip",{get(){return ee.getSharedTooltip(document.body)}});E.Tooltip=ee;var uu=(a,e)=>(a.weight||0)-(e.weight||0),fu=(a,e)=>(e.weight||0)-(a.weight||0),Jo=[],hu={align:!0,weight:!0},me=class extends E.mixin(Zr){static get $name(){return"Field"}static get type(){return"field"}static get configurable(){return{defaultBindProperty:"value",placeholder:null,value:"",name:null,label:null,labelPosition:"before",labelCls:null,labels:null,labelWidth:{value:null,$config:{localeKey:"L{labelWidth}"}},required:null,clearable:null,revertOnEscape:null,hint:null,hintHtml:null,inputWidth:null,keyStrokeChangeDelay:0,readOnly:null,editable:!0,defaultAction:"change",triggers:null,highlightExternalChange:!0,localizableProperties:["label","title","placeholder","labelWidth"],autoSelect:!1,autoComplete:"off",spellCheck:null,inputAttributes:null,inputType:"text",inputAlign:null,attributes:{value:["placeholder","autoComplete","spellCheck","minLength","maxLength","pattern","tabIndex","min","max"],$config:{merge:"distinct"}},nullValue:{$config:null,value:null,default:null},updatedClsDuration:500,inputReadOnly:!1,testConfig:{updatedClsDuration:10}}}static get delayable(){return{highlightChanged:"raf"}}doDestroy(){let e=this,{triggers:t}=e,r=e.isPainted&&me.getSharedErrorTooltip(e.rootElement,!0);if(e.inputListenerRemover?.(),e.keyListenerRemover?.(),super.doDestroy(),t)for(let i of Object.values(t))i.destroy();r?.field===e&&r.hide()}get invalidValueError(){return"L{invalidValue}"}get errorTip(){return this.constructor.getSharedErrorTooltip(this.rootElement)}static getSharedErrorTooltip(e,t){let r=e.bryntum?.errorTooltip;return!r&&!t&&(e.bryntum=e.bryntum||{},r=new ee({cls:"b-field-error-tip",forSelector:".b-field.b-invalid .b-field-inner",align:"l-r",scrollAction:"realign",trapFocus:!1,rootElement:e,onBeforeShow(){let i=this,s=E.fromElement(i.activeTarget);if(s){let n=s.getErrors();if(n)return i.html=n.join("<br>"),i.field=s,!0}return!1}}),e.bryntum.errorTooltip=r),r}static get errorTip(){return this.getSharedErrorTooltip(document.body)}construct(e){super.construct(e);let t=this;t.keyStrokeChangeDelay&&(t.changeOnKeyStroke=t.buffer(t.internalOnChange,t.keyStrokeChangeDelay))}onFocusIn(e){let t=this;t.valueOnFocus=b.clone(t.value),t.validOnFocus=!(t.errors&&Object.keys(t.errors).length),super.onFocusIn(e)}onFocusOut(e){super.onFocusOut(e),this.syncRequired(),this.onEditComplete()}onEditComplete(){}get rootUiClass(){return me}compose(){this.getConfig("clearable");let{id:e,innerElements:t,label:r,labels:i,labelCls:s,readOnly:n,triggers:o}=this,l=b.values(o,(f,h)=>!h),c=l.filter(f=>f.align==="start").sort(uu),d=l.filter(f=>f.align!=="start").sort(fu),u=f=>b.assign({tag:"label",for:`${e}-input`,class:`b-label b-align-${f.align||"start"}`},f);return{class:{"b-has-label":Boolean(r)||i?.length,"b-has-start-trigger":c.length,"b-readonly":n},children:[...(i||Jo).filter(f=>f&&f.align!=="end").map(u),(r||null)&&u({reference:"labelElement",class:`b-label b-align-start ${s||""}`,html:r}),{class:"b-field-inner",reference:"inputWrap",children:[...c.map(f=>f.element),...t,...d.map(f=>f.element)]},...(i||Jo).filter(f=>f?.align==="end").map(u)]}}updateElement(e,t){let r=this,i=r.initialConfig.value,{input:s}=r;super.updateElement(e,t),i!=null&&(r.value=i),r.syncEmpty(),r.updateInputReadOnly(r.inputReadOnly),r.syncInvalid();let n=s||r.focusElement;r.keyListenerRemover?.(),r.keyListenerRemover=n&&O.on({element:n,thisObj:r,keydown:"internalOnKeyEvent",keypress:"internalOnKeyEvent",keyup:"internalOnKeyEvent"})}get innerElements(){return[this.inputElement]}get inputElement(){let{attributes:e,inputAttributes:t,id:r,inputCls:i,inputType:s,name:n}=this,o=b.assign({reference:"input",tag:"input",type:s,name:n||r,id:`${r}-input`,retainElement:!0},t);i&&(o.class=i);for(let l,c,d=e.length;d-- >0;)l=e[d],c=this[l],c!=null&&(o[l]=c);return o}get caretPos(){return this.textSelection[0]}set caretPos(e){this.textSelection=e}get focusElement(){return this.input}get textSelection(){let e=this.input,t;try{t=[e.selectionStart,e.selectionEnd,e.selectionDirection]}catch{t=e.value?.length||0,t=[t,t]}return t}set textSelection(e){typeof e=="number"?this.select(e,e):this.select(...e)}get hasTextSelection(){let[e,t]=this.textSelection;return e&&t-e>0}getAfterValue(e){let[t,r]=this.textSelection,i=this.input.value;return`${i.substr(0,t)}${e}${i.substr(r||t)}`}select(e,t){let r=this.focusElement;if(r.value.length){if(arguments.length===0){this.selectAll();return}if(!this.supportsTextSelection)return;x.isIE11&&r.focus(),r.setSelectionRange(e,t)}}moveCaretToEnd(){let e=this.input;if(e.createTextRange){let t=e.createTextRange();t.collapse(!1),t.select()}else this.supportsTextSelection&&this.select(e.value.length,e.value.length)}selectAll(){this.focusElement.select()}syncEmpty(){let{isEmptyInput:e,isEmpty:t,element:r,clearIcon:i}=this,s=e&&t;r&&(i&&i.classList[s?"add":"remove"]("b-icon-hidden"),r.classList[s?"add":"remove"]("b-empty"))}updateHint(){this.syncHint()}updateHintHtml(){this.syncHint()}syncHint(){let e=this,{input:t,hint:r,hintHtml:i}=e,s=t?.parentElement;if(t){let n=i||r,o=e.hintElement||n&&(e.hintElement=g.createElement({parent:s,className:"b-field-hint",nextSibling:t.nextSibling,children:[{className:"b-field-hint-content"}]}));o&&(typeof n=="function"&&(n=n({source:e,value:e.value})),o.firstChild[i?"innerHTML":"textContent"]=n||""),e.element.classList[n?"remove":"add"]("b-field-no-hint")}}syncInvalid(){this.updatingInvalid=!0;let{isPainted:e}=this;if(e){let{isValid:t,element:r,inputWrap:i}=this,s=this.errorTip;r.classList[t?"remove":"add"]("b-invalid"),t?s?.isVisible&&s.field===this&&s.hide():s&&i.contains(ee.currentOverElement)&&(s.activeTarget===i&&s.isVisible?s.onBeforeShow():(s.activeTarget=i,s.showBy(i)))}this.updatingInvalid=!1}updateEditable(){this.syncInputReadOnly()}syncInputReadOnly(){this.getConfig("readOnly"),this.inputReadOnly=this._readOnly||this.editable===!1}updateInputReadOnly(e){let t=this,{input:r,inputListenerRemover:i}=t;r&&(r.readOnly=e?"readOnly":null,e?t.inputListenerRemover=i?.():i||(t.inputListenerRemover=O.on({element:r,thisObj:t,focus:"internalOnInputFocus",change:"internalOnChange",input:"internalOnInput"})))}changeReadOnly(e){return Boolean(e)}updateReadOnly(e){this.syncInputReadOnly()}updateClearable(e){let t=this;t.getConfig("triggers"),t.triggers={clear:e&&b.assign({cls:"b-icon-remove",weight:1e3,handler(){t._isUserAction=!0,t.clear(),t._isUserAction=!1}},e)||null}}changeTriggers(e,t){let r=this,i=r.$triggers||(r.$triggers=new rt({configName:"triggers",factory:me.Trigger,inferType:!1,owner:r,created(s){W.after(s,"onConfigChange",(n,{name:o})=>{hu[o]&&r.onConfigChange({name:"triggers",value:i.target})})},setup(s,n){s.reference=s.ref=n,s.parent=r}}));if(r.stepTriggers===!1&&(e.back||e.forward)&&(e=b.assign({},e),delete e.back,delete e.forward),i.update(e),!t)return i.target}updateLabelWidth(e){this.labelElement&&(this.labelElement.style.flex=`0 0 ${g.setLength(e)}`,this.inputWrap.style.flexBasis=e==null?"":0)}updateInputWidth(e){this.input.style.width=g.setLength(e),x.isIE11&&(this.input.parentElement.style.flexBasis=this.input.style.width),this.element.classList.add("b-has-width")}updateInputAlign(e){this.input.style.textAlign=e}changeLabel(e){return e??""}updateLabel(e){this.labelElement&&(this.labelElement.innerHTML=e)}updateLabelPosition(e,t){let{classList:r}=this.element;r.remove(`b-label-${t}`),r.add(`b-label-${e}`)}get isValid(){let e=this;if(!e.disabled){if(e.syncRequired(),e.errors&&Object.keys(e.errors).length)return!1;let t=e.validity;if(t)return t.valid}return!0}get isEmpty(){return this.value==null||this.value===""}get isEmptyInput(){return!this.input||this.input.value==null||this.input.value===""}get validity(){let e=this.input;return e&&e.validity}changeValue(e,t){return e==null&&(e=this.nullValue),this.hasChanged(t,e)?e:(e===""&&this.syncRequired(),t)}updateValue(e,t){let r=this;r.isConfiguring||(r.syncRequired(),r.inputting||r.triggerChange()),r.inputting||(r._lastValue=e),r.syncInputFieldValue()}hasChanged(e,t){return t!==e}syncInputFieldValue(e=!1){let t=this,{input:r,parent:i,inputValueAttr:s,inputValue:n}=t;r&&!t.inputting&&r[s]!==n&&(r[s]=n,!t.isConfiguring&&!t.containsFocus&&t.highlightExternalChange&&(r.classList.remove("b-field-updated"),t.clearTimeout("removeUpdatedCls"),!e&&(!i||!(i.isSettingValues||i._isSettingValues?.preventHighlight))&&t.highlightChanged())),t.syncEmpty(),t.syncInvalid()}highlightChanged(){this.input.classList.add("b-field-updated"),this.setTimeout("removeUpdatedCls",this.updatedClsDuration)}removeUpdatedCls(){this.input.classList.remove("b-field-updated")}get inputValue(){return this.value==null?"":this.value}get inputValueAttr(){return"value"}get supportsTextSelection(){let e=this.focusElement;return e&&(e.tagName.toLowerCase()==="textarea"||e.type&&(/text|search|password|tel|url/.test(e.type)||x.isEdge))}internalOnInputFocus(){let e=this,t=e.input.value.length;x.isIE11&&t&&!e.autoSelect&&e.select(t,t),e.autoSelect&&e.selectAll()}internalOnChange(e){let t=this;t.isValid&&t.hasChanged(t._lastValue,t.value)&&(t.triggerChange(e,!0),t._lastValue=t.value)}triggerChange(e,t=Boolean(this._isUserAction)){let r=this,{value:i,_lastValue:s,isValid:n}=r;r.syncHint(),r.triggerFieldChange({value:i,oldValue:s,event:e,userAction:t,valid:n}),r.defaultAction==="change"&&r.trigger("action",{value:i,oldValue:s,event:e,userAction:t,valid:n})}internalOnInput(e){let t=this;t.inputting=!0,t.value=t.input.value,t.inputting=!1,t.trigger("input",{value:t.value,event:e}),t.changeOnKeyStroke?.(e)}internalOnKeyEvent(e){let t=this,{value:r}=t,i=!1;if(e.type==="keydown")if(e.key==="Escape"&&!(t.readOnly||t.disabled)){let s=t.isValid,n="initialValue"in t?t.initialValue:t.valueOnFocus,o=t.hasChanged(n,r),l=t.input.value!==String(t.inputValue);t.revertOnEscape&&(!s||o||l)?(o&&(t.value=n),l&&t.syncInputFieldValue(!0),t.clearError(),i=o&&t.isValid||s!==t.validOnFocus):t.clearable&&(r||t.input.value)&&t.clear()}else e.key==="Enter"&&x.isIE11&&t.internalOnChange(e);t.isDestroyed||(i&&e.stopImmediatePropagation(),t.trigger(e.type,{event:e}))}clear(){this.value=this.nullValue,this.trigger("clear")}onDisabled(){this.syncInvalid()}syncRequired(){let e=this;!e.isConfiguring&&e.required&&e.isEmpty&&!e.parent?.isSettingValues?e.setError("L{fieldRequired}",e.updatingInvalid):e.clearError("L{fieldRequired}",e.updatingInvalid)}setError(e,t,r){let i=this;if((i.errors||(i.errors={}))[i.optionalL(e)]=1,t||i.syncInvalid(),r){let s=()=>{i.clearError(e),n()},n=i.on({keydown:s,focusOut:s})}}clearError(e,t){let r=this;r.errors&&(e?delete this.errors[this.optionalL(e)]:r.errors={},t||r.syncInvalid())}getErrors(){let e=this;if(!e.isValid){let t=e.validity,r=b.keys(t).find(n=>n!=="valid"&&n!=="customError"&&t[n]),i=e.errors&&Object.keys(e.errors),s;if(i?.length?s=i:t.customError?s=[e.input.validationMessage]:r?s=[e.L(r,{min:e.min,max:e.max})]:s=[e.L(e.invalidValueError)],s&&s.length>0)return s}}};me.Trigger=class extends E{static get $name(){return"FieldTrigger"}static get factoryable(){return{defaultType:me.Trigger,extends:null}}static get type(){return"trigger"}static get configurable(){return{align:null,weight:null}}get field(){return this.parent}compose(){return{class:{[`b-align-${this.align||"end"}`]:1,"b-icon":1},listeners:{click:"onClick",mousedown:"onMousedown"}}}changeAlign(e){return e}onClick(e){let t=this,{field:r}=t,i=typeof t.handler=="function"?t.handler:r[t.handler];r.disabled||r.readOnly||r.trigger("trigger",{trigger:t})!==!1&&i?.call(r,e)}onMousedown(e){let t=this.field;!("key"in e)&&g.isTouchEvent&&t.editable&&(t.editable=!1,t.setTimeout(()=>t.editable=!0,500)),e.preventDefault(),g.getActiveElement(t.input)!==t.input&&t.focus()}};me.SpinTrigger=class extends me.Trigger{static get $name(){return"SpinTrigger"}static get type(){return"spintrigger"}static get configurable(){return{repeat:{$config:["nullify"],value:!0}}}compose(){return{children:{upButton:{class:{"b-icon":1,"b-spin-up":1}},downButton:{class:{"b-icon":1,"b-spin-down":1}}}}}updateRepeat(e){this.clickRepeater?.destroy(),this.clickRepeater=e?Bt.new({element:this.element},e):null}onClick(e){let t=this,{field:r}=t;r.disabled||r.readOnly||(e.target===t.upButton?r.doSpinUp(e.shiftKey):e.target===t.downButton&&r.doSpinDown(e.shiftKey))}};me.Trigger.initClass();me.SpinTrigger.initClass();E.register(me.Trigger,"trigger");E.register(me.SpinTrigger,"spintrigger");var St=class extends me{static get type(){return"textfield"}static get alias(){return"text"}static get configurable(){return{nullValue:""}}static get $name(){return"TextField"}construct(e){e?.inputType==="hidden"&&(e.hidden=!0),super.construct(...arguments)}};St.initClass();var Ie=class extends E{static get $name(){return"Toast"}static get type(){return"toast"}static get configurable(){return{testConfig:{destroyTimeout:1,timeout:100},floating:!0,timeout:2500,autoDestroy:null,destroyTimeout:200,showProgress:!0,color:null,bottomMargin:20}}compose(){let{appendTo:e,color:t,html:r,showProgress:i,style:s,timeout:n}=this;return{parent:e||this.floatRoot,class:{...P.normalize(t,"object"),"b-toast-hide":1},html:r,style:s,children:{progressElement:i&&{style:`animation-duration:${n/1e3}s;`,class:{"b-toast-progress":1}}},listeners:{click:"hide"}}}doDestroy(){this.untoast(),super.doDestroy()}get nextBottom(){let{bottomMargin:e,element:t}=this;return parseInt(t.style.bottom,10)+t.offsetHeight+e}show(){super.show();let e=this,{element:t}=e,{toasts:r}=Ie;r.includes(e)||(t.style.bottom=(r[0]?.nextBottom??e.bottomMargin)+"px",r.unshift(e),t.getBoundingClientRect(),t.classList.remove("b-toast-hide"),e.timeout>0&&(e.hideTimeout=e.setTimeout("hide",e.timeout)))}hide(){let e=this;e.untoast(),e.element.classList.add("b-toast-hide"),e.autoDestroy&&!e.destroyTimer&&(e.destroyTimer=e.setTimeout("destroy",e.destroyTimeout))}untoast(){let{toasts:e}=Ie;e.includes(this)&&e.splice(e.indexOf(this),1)}static hideAll(){Ie.toasts.slice().reverse().forEach(e=>e.hide())}static show(e){let t=Ie.new({autoDestroy:!0,rootElement:document.body},typeof e=="string"?{html:e}:e);return t.show(),t}};Ie.toasts=[];Ie.initClass();var Qo={category:1,classDescription:1,constructor:1,defaultvalue:1,demo:1,description:1,feature:1,hide:1,lineno:1,name:1,path:1,scope:1,examples:1,xes:1,externalExamples:1},Dt=class extends S{static diff(e,t){return this.diffs=[],this.compareArrays(e,t),this.diffs}static compareArrays(e=[],t=[],r=""){typeof e[0]=="object"||typeof t[0]=="object"?(e.forEach(i=>{if(i.access)return;r||(this.currentModule=i.name?.split(":")[1]||i.name);let s=t.find(n=>n.name===i.name&&this.isSameScope(n.scope,i.scope));s?this.compareObject(i,s,r+"/"+i.name):this.diffs.push({status:"removed",left:i.name,name:i.name,path:r.split(":")[1]||i.name,module:this.currentModule})}),t.filter(i=>!i.access&&!e.find(s=>i.name===s.name)).forEach(i=>{let s=i.scope==="static";r||(this.currentModule=i.name?.split(":")[1]||i.name),this.diffs.push({status:"new",right:this.getDisplayValue(i.name),name:i.name+(s?"-static":""),path:r.split(":")[1]||i.name,module:this.currentModule})})):(t=Array.isArray(t)?t:[t],this.compareValues(e.join(", "),t.join(", "),r))}static isSameScope(e,t){return e=e==="static"?e:"instance",t=t==="static"?t:"instance",e===t}static compareObject(e,t,r){for(let i in e){if(i in Qo||e.access)continue;let s=e[i],n=t[i];!(i in t)&&!Array.isArray(s)?this.diffs.push({status:"removed",name:i,left:s,path:r.split(":")[1],module:this.currentModule}):(i==="returns"?(s=s.type,n=n?.type):i==="parameters"&&r.match(/functions/)&&(s=s.map(o=>`${o.name}:${o.type}`).join(", "),n=n?.map(o=>`${o.name}:${o.type}`).join(", ")),this.compareValues(s,n,r+"/"+i))}for(let i in t)i in Qo||t.access||(!(i in e)&&!Array.isArray(t[i])?i==="deprecated"?this.diffs.push({status:"deprecated",name:i,path:r.split(":")[1],module:this.currentModule}):this.diffs.push({status:"new",name:i,right:this.getDisplayValue(t[i]),path:r.split(":")[1],module:this.currentModule}):i in e||this.compareValues(e[i]||[],t[i],r+"/"+i))}static compareValues(e,t,r){if(e!==t){if(Array.isArray(e)){this.compareArrays(e,t,r);return}e!==t&&this.diffs.push({status:"changed",name:r.substr(r.lastIndexOf("/")+1),left:this.getDisplayValue(e),right:this.getDisplayValue(t),path:r.split(":")[1]||r.substr(1),module:this.currentModule})}}static getDisplayValue(e){return Array.isArray(e)?typeof e[0]=="object"?e.map(t=>t.name||t.type||t):e.join(", "):e}};window.ApiDiffHelper=Dt;function mu(a,e){let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(a),e);return t&&(t.get||t.set)?t:null}var fe=class extends S.mixin(re,_e){static get configurable(){return{clientListeners:null,disabled:!1}}static initPlugins(e,...t){let r=e.plugins||(e.plugins={});for(let i of t)r[i.$$name]=new i(e)}get client(){return this._client}set client(e){this._client=e}getFocusRevertTarget(){return this.client?.getFocusRevertTarget()}construct(...e){let t=this,[r,i]=e,s;e.length===1?b.isObject(r)&&(i=r,r=i.client):(i=b.assign({},i),delete i.client),t.client=r,super.construct(i),t.applyPluginConfig(r),s=t.clientListeners,s&&(s=b.assign({},s),s.thisObj=t,r.on(s))}applyPluginConfig(e){let t=this,r=t.pluginConfig||t.constructor.pluginConfig;if(r){let{assign:i,chain:s,after:n,before:o,override:l}=r;i&&t.applyAssign(e,i),(s||n)&&t.applyChain(e,s||n),o&&t.applyChain(e,o,!1),l&&t.applyOverride(e,l)}}applyAssign(e,t){t.forEach(r=>this.assign(e,r))}applyChain(e,t,r=!0){if(Array.isArray(t))for(let i of t)this.chain(e,i,i,r);else for(let i in t)this.chain(e,i,t[i],r)}applyOverride(e,t){let r=this;r.overridden||(r.overridden={}),t.forEach(i=>{if(!r[i])throw new Error(`Trying to chain fn ${e.$$name}#${i}, but plugin fn ${r.$$name}#${i} does not exist`);typeof e[i]=="function"&&(r.overridden[i]=e[i].bind(e)),e[i]=r[i].bind(r)})}assign(e,t){let r=this,i=mu(r,t);i?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i.get&&i.get.bind(r),set:i.set&&i.set.bind(r)}):e[t]=r[t].bind(r)}chain(e,t,r,i=!0){let s=this,n=e.pluginFunctionChain||(e.pluginFunctionChain={}),o=s[r]&&s[r].bind(s),l=s.functionChainRunner;if(!o)throw new Error(`Trying to chain fn ${e.$$name}#${r}, but plugin fn ${s.$$name}#${r} does not exist`);if(!n[t]){let c=e[t];c&&(c=c.bind(e),c.$this=e),n[t]=c?[c]:[],e[t]=(...d)=>l(n[t],d)}o.$this=s,n[t][i?"push":"unshift"](o)}functionChainRunner(e,t){let r,i,s;for(i=0;i<e.length&&(r=e[i],!(!r.$this.isDestroyed&&(s=r(...t),s===!1)));i++);return s}doDisable(e){let t=this,{constructor:r}=t,i="featureClass"in r?r.featureClass:`b-${r.$$name.toLowerCase()}`;i&&t.client?.element?.classList[e?"remove":"add"](i),t.isConfiguring||(e?t.trigger("disable"):t.trigger("enable"))}updateDisabled(e){this.doDisable(e)}throwOverrideIsMissing(e){throw new Error(`Trying to override fn ${e.plugIntoName}#${e.fnName}, but plugin fn ${e.pluginName}#${e.fnName} does not exist`)}get rootElement(){return this.client.rootElement}};var ei=a=>class extends(a||S){static get $name(){return"Pluggable"}get plugins(){return this._plugins||(this._plugins={}),this._plugins}set plugins(t){t&&(Array.isArray(t)||(t=[t]),fe.initPlugins(this,...t)),this.initPlugins()}initPlugins(){}addPlugins(...t){fe.initPlugins(this,...t)}hasPlugin(t){return this.getPlugin(t)!=null}getPlugin(t){return typeof t=="function"&&(t=t.$$name),this.plugins&&this.plugins[t]}get widgetClass(){}};var ti=a=>class extends(a||S){static get $name(){return"State"}get state(){return this._state=this.getState(),this._state}set state(t){this._state=t,this.applyState(t)}get widgetClass(){}};var Zo=Symbol("STM_PROP"),el={parentIndex:1},tl=a=>class extends(a||S){static get $name(){return"ModelStm"}static get defaultConfig(){return{stm:null}}joinStore(t){this.stm||(this.stm=t.stm)}unjoinStore(t){this.stm===t.stm&&(this.stm=null),super.unjoinStore&&super.unjoinStore(t)}get stm(){return this[Zo]}set stm(t){this[Zo]=t}beforeSet(t,r,i,s){let n=this.stm;if(n&&!n.disabled&&!el[t]&&!this.constructor.nonPersistableFields[t]){let o=super.beforeSet?.(t,r,i,s)||[],l,c;return typeof t=="object"?[l,c]=Object.keys(t).reduce((d,u)=>(d[0][u]=t[u],d[1][u]=this.get(u),d),[{},{}]):(l={[t]:r},c={[t]:this.get(t)}),o.push([l,c]),o}return[]}afterSet(t,r,i,s,n,o){let l=this.stm,c=this.constructor.nonPersistableFields;if(l&&!l.disabled&&!el[t]&&!c[t]){let d=n.pop();if(o){let u,[f,h]=d,[m,p]=Object.keys(o).reduce((y,C)=>(c[C]||(u=!0),y[0][C]=f[C],y[1][C]=h[C],y),[{},{}]);u&&l.onModelUpdate(this,m,p)}}}beforeInsertChild(t){let r=super.beforeInsertChild?super.beforeInsertChild(t):[],i=this.stm;return i&&!i.disabled&&r.push(t.reduce((s,n)=>(n.root===this.root&&s.set(n,{parent:n.parent,index:n.parent?n.parentIndex:void 0}),s),new Map)),r}afterInsertChild(t,r,i,s){let n=this.stm;if(n&&!n.disabled){let o=i.pop();s&&n.onModelInsertChild(this,t,s,o)}super.afterInsertChild&&super.afterInsertChild(t,r,i,s)}beforeRemoveChild(t,r){let i=super.beforeRemoveChild?super.beforeRemoveChild(t,r):[],s=this.stm;return s&&!s.disabled&&!r&&i.push(t.reduce((n,o)=>(n.set(o,o.parentIndex),n),new Map)),i}afterRemoveChild(t,r,i){let s=this.stm;if(s&&!s.disabled&&!i){let n=r.pop();t&&t.length&&s.onModelRemoveChild(this,t,n)}super.afterRemoveChild&&super.afterRemoveChild(t,r,i)}};var rl=a=>class extends(a||S){static get $name(){return"TreeNode"}static set convertEmptyParentToLeaf(t){t===!0?t={onLoad:!0,onRemove:!0}:t===!1&&(t={onLoad:!1,onRemove:!1}),this._convertEmptyParentToLeaf=t}static get convertEmptyParentToLeaf(){return this._convertEmptyParentToLeaf||{onLoad:!1,onRemove:!1}}ingestChildren(t,r=this.stores){let{inProcessChildren:i,constructor:s}=this,n=r[0];if(t===!0)return i?!0:[];if(t){Array.isArray(t)||(t=[t]);let o=t.length,l=[];for(let c=0,d;c<o;c++)d=t[c],d=d.isModel?d:n?n.createRecord(d):new s(d,null,null,!0),d=n?n.processRecord(d):d,l.push(d);if(this.children===!0&&n){let c=n.createSorterFn(n.sorters);l.sort(c)}return l}}processChildren(t=this.stores){let r=this,{meta:i}=r;r.inProcessChildren=!0;let s=r.ingestChildren(r.data[r.constructor.childrenField],t);if(s){let{convertEmptyParentToLeaf:n}=r.constructor;if(n===!0||n.onLoad?s.length:Array.isArray(s)){if(i.isLeaf=!1,r.children===!0)r.children=[];else if(s.length===0){r.children=s;return}r.appendChild(s,!1,!0)}else s===!0?(i.isLeaf=!1,r.children=!0):r.isRoot||(i.isLeaf=r.constructor.convertEmptyParentToLeaf.onLoad)}r.inProcessChildren=!1}ancestorsExpanded(t=this.firstStore){let{parent:r}=this;return!r||r.isExpanded(t)&&r.ancestorsExpanded(t)}isExpanded(t=this.firstStore){let r=this.instanceMeta(t.id);return Object.prototype.hasOwnProperty.call(r,"collapsed")||(r.collapsed=!this.expanded),!r.collapsed}get expanded(){return this.data.expanded}get childLevel(){let t=this,r=-1;for(;t&&!t.isRoot;)++r,t=t.parent;return r}get isLeaf(){return this.meta.isLeaf!==!1&&!this.isRoot}get isParent(){return!this.isLeaf}get isLoaded(){return this.isParent&&Array.isArray(this.children)}get descendantCount(){return this.getDescendantCount()}get visibleDescendantCount(){return this.getDescendantCount(!0)}getDescendantCount(t=!1,r=this.firstStore){let i=this.children;return!i||!Array.isArray(i)||t&&!this.isExpanded(r)?0:i.reduce((s,n)=>s+n.getDescendantCount(t),i.length)}get allChildren(){let t=this.children;return t?t.reduce((r,i)=>(r.push(i),r.push.apply(r,i.allChildren),r),[]):[]}get firstChild(){let t=this.children;return t?.length&&t[0]||null}get lastChild(){let t=this.children;return t?.length&&t[t.length-1]||null}get previousSiblingsTotalCount(){let t=this.previousSibling,r=this.parentIndex;for(;t;)r+=t.descendantCount,t=t.previousSibling;return r}get root(){return this.parent?.root||this}get parentId(){return this.parent&&!this.parent.isAutoRoot?this.parent.id:null}set parentId(t){let r=this,{parent:i}=r,s=t&&r.firstStore.getById(t);s===i||!i&&!s||(r.isBatchUpdating?r.meta.batchChanges.parentId=t:s?s.appendChild(r):r.parent.removeChild(r))}static set parentIdField(t){this._parentIdField=t,Object.defineProperty(this.prototype,t,{set:function(r){this.parentId=r},get:function(){return this.parentId}})}static get parentIdField(){return this._parentIdField||"parentId"}traverse(t,r=!1,i=!1){let s=(i?this.unfilteredChildren:this.children)||this.children;r||t.call(this,this);for(let n=0,o=s?.length;n<o;n++)s[n].traverse(t,!1,i)}traverseBefore(t,r=!1,i=!1){let s=(i?this.unfilteredChildren:this.children)||this.children;for(let n=0,o=s?.length;n<o;n++)s[n].traverse(t,!1,i);r||t.call(this,this)}traverseWhile(t,r=!1,i=!1){let s=this,n=!0;return r||(n=t.call(s,s)!==!1),n&&s.isLoaded&&(n=((i?s.unfilteredChildren:s.children)||this.children).every(l=>l.traverseWhile(t,!1,i))),n}bubble(t,r=!1){let i=this;for(r||t.call(i,i);i.parent;)i=i.parent,t.call(i,i)}bubbleWhile(t,r=!1){let i=this,s=!0;for(r||(s=t.call(i,i));s&&i.parent;)i=i.parent,s=t.call(i,i);return s}contains(t){return t&&typeof t=="object"&&(t=t.id),!this.traverseWhile(r=>r.id!=t)}getTopParent(t){let r;return t?(r=[],this.bubbleWhile(i=>(r.push(i),i.parent&&!i.parent.isRoot))):(r=null,this.bubbleWhile(i=>(i.parent||(r=i),i.parent&&!i.parent.isRoot))),r}appendChild(t,r=!1){return this.insertChild(t,null,r)}insertChild(t,r=null,i=!1){if(typeof t=="number"){let u=t;t=r,r=this.children[u]}let s=this,n=s.isLeaf,o=Array.isArray(t);if(Array.isArray(t)||(t=[t]),!i&&!s.stores.every(u=>u.trigger("beforeAdd",{records:t,parent:s})!==!1))return null;t=s.ingestChildren(t);let l=r?.parentIndex??s.children?.length??0,c=s.beforeInsertChild?.(t),d=s.internalAppendInsert(t,r,i);return n&&d.length&&(s.meta.isLeaf=!1),s.isLeaf!==n&&!s.root.isLoading&&!i&&s.signalNodeChanged({isLeaf:{value:!1,oldValue:!0}}),s.afterInsertChild?.(l,t,c,d),o||!d?d:d[0]}signalNodeChanged(t){this.stores.forEach(r=>{r.trigger("update",{record:this,changes:t}),r.trigger("change",{action:"update",record:this,changes:t})})}tryInsertChild(){return this.insertChild(...arguments)}internalAppendInsert(t,r,i){let s=this,{stores:n,root:o}=s,{firstStore:l}=o,{parentIdField:c}=s.constructor,d=s.isAutoRoot?null:s.id,u={},f,h,m,p;if(r&&r.parent!==s&&(r=null),s.children){let y=s.children,C=r?r.parentIndex:y.length;if(y[h=C]===t[0]||y[h=C-1]===t[0])for(f=!0,m=0;f&&m<t.length;m++)t[m]!==y[h+m]&&(f=!1)}if(f)return t;for(m=0;m<t.length;m++){let y=t[m],C=y.parent;u[y.id]=y.root===o,l&&!o.isLoading&&y.traverse(w=>{w.root===o&&(u[w.id]=!0)}),C?.removeChild(y,u[y.id],i)===!1?(p||(t=t.slice(),p=!0),t.splice(m--,1)):(y.parent=s,y.data[c]=d,C&&(y.meta.oldParentId=C.id))}if(t.length){Array.isArray(s.children)||(s.children=[]);let y=s.addToChildren(s.children,r,t);s.addToChildren(s.unfilteredChildren,r,t,!0),n.forEach(C=>{C.isChained||(t.forEach(w=>{w.joinStore(C)}),C.onNodeAddChild(s,t,y,u,i),t.forEach(w=>{if(w.meta.oldParentId!=null&&!(s.inProcessChildren||s.isLoading)){let T={[c]:d,[s.getDataSource("parentIndex")]:w.parentIndex},R={},{modified:H,oldParentId:A}=w.meta,B=H.parentIndex;delete w.meta.oldParentId,s.id!==A&&(R[c]={value:d,oldValue:A}),w.parentIndex!==B&&(R.parentIndex={value:w.parentIndex,oldValue:B}),H[c]===s.id?Reflect.deleteProperty(H,c):c in H||(H[c]=A),w.afterChange(T,R)}}))})}return t}removeChild(t,r=!1,i=!1){let s=this,n=s.isLeaf,{children:o,stores:l}=s;if(Array.isArray(t)||(t=[t]),t=t.filter(d=>d.parent===s),!i){for(let d of l)if(!d.isChained&&d.trigger("beforeRemove",{parent:s,records:t,isMove:r})===!1)return!1}let c=s.beforeRemoveChild?s.beforeRemoveChild(t,r):void 0;for(let d of t){let{parentIdField:u}=d.constructor,{modified:f}=d.meta,h=d.parent?d.parent.id:null;u in f||(f[u]=h);let m=s.removeFromChildren(o,d);s.removeFromChildren(s.unfilteredChildren,d,!0),l.forEach(p=>{p.isChained||p.onNodeRemoveChild(s,[d],m,{isMove:r,silent:i})}),r||(d.parent=d.parentIndex=d.unfilteredIndex=d.nextSibling=d.previousSibling=null,d.data[u]=null)}(s.unfilteredChildren||o).length===0&&s.constructor.convertEmptyParentToLeaf.onRemove&&!s.isRoot&&(s.meta.isLeaf=!0),s.isLeaf!==n&&!i&&s.stores.forEach(d=>{let u={isLeaf:{value:!0,oldValue:!1}};d.trigger("update",{record:s,changes:u}),d.trigger("change",{action:"update",record:s,changes:u})}),s.afterRemoveChild?.(t,c,r)}clearParentId(){let t=this;Reflect.deleteProperty(t.data,t.parentIdField),Reflect.deleteProperty(t.originalData,t.parentIdField),t.meta.modified&&Reflect.deleteProperty(t.meta.modified,t.parentIdField)}replaceChildren(t){return this.clearChildren(),this.data[this.constructor.childrenField]=t,this.processChildren(),this.children}clearChildren(t=!1){let r=this,{stores:i}=r,s=r.unfilteredChildren||r.children;r.children=[],s&&s!==!0&&(i.forEach(n=>{n.isChained||n.onNodeRemoveChild(r,s,0,{unfiltered:!0,silent:t})}),r.unfilteredChildren&&(r.unfilteredChildren=[]))}clear(){let t=this,{stores:r}=t,i=t.children?.slice();if(!(!t.isRoot||!i)){for(let s of r)if(!s.isChained&&s.trigger("beforeRemove",{parent:t,records:i,isMove:!1,removingAll:!0})===!1)return!1;t.children.length=0,t.unfilteredChildren&&(t.unfilteredChildren.length=0),r.forEach(s=>{i.forEach(n=>{n.stores.includes(s)&&n.unjoinStore(s),n.parent=n.parentIndex=n.nextSibling=n.previousSibling=null}),s.storage.suspendEvents(),s.storage.clear(),s.storage.resumeEvents(),s.added.clear(),s.modified.clear(),s.trigger("removeAll"),s.trigger("change",{action:"removeall"})})}}updateChildrenIndices(t,r=!1,i=!1){let s=r?"unfilteredIndex":"parentIndex",n=null;for(let o=0;o<t.length;o++){let l=t[o],c=l[s];s==="parentIndex"?c===void 0||i?l.setData("parentIndex",o):c!==o&&l.set("parentIndex",o,!0):l[s]=o,r||(l.previousSibling=n,n&&(n.nextSibling=l),o===t.length-1&&(l.nextSibling=null),n=l)}}addToChildren(t,r,i,s=!1){if(t){let n=s?"unfilteredIndex":"parentIndex",o=r?r[n]:t.length;return t.splice(o,0,...i),this.updateChildrenIndices(t,s),o}}removeFromChildren(t,r,i=!1){if(t){let s=i?"unfilteredIndex":"parentIndex",n=r[s];return n>-1&&(t.splice(n,1),this.updateChildrenIndices(t,i)),n}}};var{getOwnPropertyDescriptor:gu}=Reflect,ge=class extends S.mixin(ht){static get $name(){return"DataField"}static get type(){return"auto"}static get factoryable(){return{defaultType:"auto"}}static get prototypeProperties(){return{compare:null,compareItems:null,dataSource:null,alwaysWrite:!1,nullable:!0,nullText:null,nullValue:void 0,persist:!0,readOnly:!1,internal:!1}}construct(e){let t=this;e&&(t.name=e.name,Object.assign(t,e)),t.compare&&(t.compareItems=(r,i)=>t.compare(r?.[t.name],i?.[t.name]))}defineAccessor(e,t){let{name:r,dataSource:i}=this;!t&&r in e&&e.$meta.hierarchy.some(s=>gu(s.prototype,r)?.enumerable===!1)||Reflect.defineProperty(e,r,{configurable:!0,enumerable:!0,get:this.complexMapping?function(){return this.complexGet(r,i)}:function(){return this.batching&&r in this.meta.batchChanges?this.meta.batchChanges[r]:this.data[i]??this.data[r]},set(s){let n=this.$meta.fields.map[r];n&&n.readOnly||this.set(r,s)}})}isEqual(e,t){return b.isEqual(e,t)}print(e){return e==null?this.nullText:this.printValue(e)}printValue(e){return String(e)}};var Ds=class extends ge{static get $name(){return"ArrayDataField"}static get type(){return"array"}isEqual(e,t){return e===t}};Ds.initClass();var Ts=class extends ge{static get $name(){return"BooleanDataField"}static get type(){return"boolean"}static get alias(){return"bool"}static get prototypeProperties(){return{nullValue:!1}}convert(e){return e==null?this.nullable?e:this.nullValue:Boolean(e)}};Ts.initClass();var Rs=class extends ge{static get $name(){return"DateDataField"}static get type(){return"date"}static get prototypeProperties(){return{format:null}}get dateFormat(){return this.format}set dateFormat(e){z.deprecate("Core","5.0.0",`DateDataField "${this.name}": dateFormat config has been renamed to "format"`),this.format=e}convert(e){return e==null?this.nullable||(e=this.nullValue):e==="now"?e=new Date:e instanceof Date||(e=D.parse(e,this.format||D.defaultParseFormat),e=e||void 0),e}serialize(e){return e instanceof Date&&(e=D.format(e,this.format||D.defaultFormat)),e}printValue(e){return D.format(e,this.format||D.defaultFormat)}};Rs.initClass();var Ms=class extends ge{static get $name(){return"IntegerDataField"}static get type(){return"integer"}static get alias(){return"int"}static get prototypeProperties(){return{nullValue:0,rounding:"round"}}convert(e){return e==null?this.nullable?e:this.nullValue:Math[this.rounding](Number(e))}};Ms.initClass();var Fs=class extends ge{static get $name(){return"ModelDataField"}static get type(){return"model"}static get prototypeProperties(){return{complexMapping:!0}}isEqual(e,t){return e&&t&&t instanceof e.constructor&&t.id==e.id}};Fs.initClass();var ks=class extends ge{static get $name(){return"NumberDataField"}static get type(){return"number"}static get alias(){return"float"}static get prototypeProperties(){return{nullValue:0,precision:null}}convert(e){if(e==null)return this.nullable?e:this.nullValue;e=Number(e);let t=this.precision;return t?(t=10**t,e=Math.round(e*t)/t):t===0&&(e=Math.round(e)),e}};ks.initClass();var Os=class extends ge{static get $name(){return"ObjectDataField"}static get type(){return"object"}static get prototypeProperties(){return{complexMapping:!0}}};Os.initClass();var Ls=class extends ge{static get $name(){return"StringDataField"}static get type(){return"string"}static get prototypeProperties(){return{nullValue:""}}convert(e){return e==null?this.nullable?e:this.nullValue:String(e)}};Ls.initClass();var{defineProperty:pu}=Reflect,{hasOwnProperty:mr}=Object.prototype,Ye=void 0,yu={children:1,data:1,meta:1},bu=["name","title","text","label","description"],Cu={boolean:1,number:1,date:1,object:1},K=class extends S.mixin(tl,rl){static get $name(){return"Model"}static get declarable(){return["fields"]}static get fields(){return[{name:"parentIndex",type:"number",persist:!1,internal:!0}]}static set idField(e){this._assignedIdField=!0,this._idField=e}static get idField(){return this._idField}static set childrenField(e){this._childrenField=e}static get childrenField(){if(!this._childrenField){let e=this.fieldMap.children;this._childrenField=e?.dataSource||"children"}return this._childrenField}get indexPath(){let e=[],t=this,r=t.childLevel;for(t=this;t&&!t.isRoot;t=t.parent)e[r--]=t.parentIndex+1;return e}construct(e={},t=null,r=null,i=!1,s=!1){let n=this,o=t?Array.isArray(t)?t:[t]:[],{constructor:l,fieldMap:c}=n,d=null;if(t=o[0],n.meta={modified:{},...l.metaConfig,...r},l.applyConfigs)for(let u in n.getDefaultConfiguration())d||(d={},(!n.useRawData||!n.useRawData.enabled)&&(e={...e})),u in e&&(d[u]=e[u],delete e[u]);if(super.construct(d),i||l.exposeProperties(e),!mr.call(l,"idFieldProcessed")){let u=n.meta.idField;u||(l._assignedIdField?u=l.idField:t&&(u=t.idField)),u&&u!==c.id.dataSource&&l.addField({name:"id",dataSource:u,internal:!0}),l.idFieldProcessed=!0}n._internalId=K._internalIdCounter++,n.stores=[],n.unjoinedStores=[],n.originalData||(n.originalData=e),n.data=l.processData(e,!1,t,n,s),n.id==null&&n.setData("id",n.generateId(t)),n.data[l.childrenField]&&n.processChildren(o),n.generation=0}set isCreating(e){let t=this;Boolean(t.meta.isCreating)!==e&&(t.meta.isCreating=e,t.stores.forEach(r=>{r.onIsCreatingToggle(t,e)}))}get isCreating(){return Boolean(this.meta.isCreating)}equals(e){if(e instanceof this.constructor){for(let t=this.$meta.fields.defs,r=0,{length:i}=t;r<i;r++){let s=t[r],{name:n}=s;if(n!=="id"&&!s.isEqual(this[n],e[n]))return!1}return!0}return!1}get subclass(){return new this.constructor(Object.setPrototypeOf({id:Ye},this.data),this.stores[0],null,!0)}static processData(e,t=!1,r,i,s){let{fieldMap:n,defaultValues:o}=this,{useRawData:l={enabled:!1}}=r||{},c=s||l.enabled?e:b.clone(e),d;if(t=t||l.disableDefaultValue||s,!t){for(d in o)if(c[d]===Ye){let u=o[d];Array.isArray(u)&&(u=u.slice()),c[d]=u}}if(!l.disableTypeConversion&&!s)for(d in n){let u=n[d],{name:f,dataSource:h}=u,m=h!==f,p=u.complexMapping,y=m&&(p?b.pathExists(e,h):h in e),C=f in e&&(!m||!y),w=!l.disableTypeConversion&&u.convert;if((C||w)&&(!t||C||y)){let T=C?c[f]:p?b.getPath(c,h):c[h],R=w?u.convert(T,i):T;p?b.setPath(c,h,R):c[h]=R,m&&delete c[f]}}return c}static setupClass(e){super.setupClass(e),e.fields||this.setupFields(this,e)}static setupFields(e,t){let r=mr.call(e,"fields")&&e.fields,i=t.super.fields,s=t.fields={defs:i?.defs.slice()??[],exposedData:!1,defaults:i?{...i.defaults}:{},exposed:Object.create(i?.exposed??null),ordinals:Object.create(i?.ordinals??null),map:Object.create(i?.map??null),sources:Object.create(i?.sources??null)};mr.call(e,"defaults")&&Object.assign(s.defaults,e.defaults),mr.call(e,"idField")&&(e.addField({name:"id",dataSource:e.idField,internal:!0}),s.exposed[e.idField]=!0),r?.length&&r.map(e.addField,e),e.exposeRelations()}static get defaultValues(){return this.$meta.fields.defaults}static get allFields(){return this.$meta.fields.defs}get allFields(){return this.$meta.fields.defs}static get fieldMap(){return this.$meta.fields.map}get fieldMap(){return this.$meta.fields.map}static get fieldDataSourceMap(){return this.$meta.fields.sources}static exposeProperties(e){let t=this,r=t.$meta.fields;if(e&&t.autoExposeFields&&!r.exposedData){let i,s,n;for(i in e)!r.exposed[i]&&i!==t.childrenField&&(n=er(e[i]),s={name:i,dataSource:i,fromData:!0},Cu[n]&&(s.type=n),t.addField(s));r.exposedData=!0}t.exposeRelations()}static addField(e){if(e==null)return;typeof e=="string"&&(e={name:e});let t=this.initClass(),r=t.$meta.fields,{ordinals:i}=r,s=r.exposed,{name:n}=e,o=r.map[n],l=e.dataSource||(e.dataSource=n),c,d;if(!o||e.type&&e.type!==o.type)c=ge.create(e),c.definedBy=o?o.definedBy:t,c.ordinal=o?o.ordinal:i[n]=r.defs.length;else{c=Object.create(o);for(d in e)d!=="type"&&(c[d]=e[d])}return c.owner=t,r.defs[c.ordinal]=c,r.map[n]=c,r.sources[l]||(r.sources[l]=c),l.includes(".")&&(c.complexMapping=!0),c.complexMapping?s[l.split(".")[0]]=!0:s[l]=!0,"defaultValue"in c&&(r.defaults[l]=c.defaultValue),yu[n]||c.defineAccessor(t.prototype),t._nonPersistableFields=null,t._alwaysWriteFields=null,c}static removeField(e){let t=this.initClass(),r=t.$meta.fields,i=r.map[e],{ordinals:s}=r,n=s[e];if(i){r.defs.splice(n,1),delete s[e],delete r.defaults[e],delete r.exposed[e],delete r.map[e],delete r.sources[i.dataSource];for(let o in s)s[o]>n&&--s[o];delete t.prototype[e]}}static exposeRelations(){let e=this;mr.call(e,"relationsExposed")||e.relationConfig&&(e.relationsExposed=!0,e.relations=[],e.relationConfig.forEach(t=>{e.relations.push(t);let r=t.relationName;Reflect.ownKeys(e.prototype).includes(r)||pu(e.prototype,r,{enumerable:!0,get:function(){return this.getForeign(r)},set:function(i){this.setForeign(r,i,t)}})}))}static get autoExposeFields(){return!0}get fields(){return this.$meta.fields.defs}getFieldDefinition(e){return this.$meta.fields.map[e]}getFieldDefinitionFromDataSource(e){return this.$meta.fields.sources[e]}get fieldNames(){return Object.keys(this.data)}static getFieldDefinition(e){return this.$meta.fields.map[e]}static getFieldDataSource(e){return this.getFieldDefinition(e).dataSource}getDataSource(e){let t=this.constructor.getFieldDefinition(e);return t?.dataSource||t?.name}static processField(e,t,r){let i=this.fieldMap[e];return i?.convert?i.convert(t,r):t}initRelations(){let e=this;!e.constructor.relations||e.stores.forEach(r=>{r.modelRelations||r.initRelations();let i=[];r.modelRelations?.forEach(s=>{i.push({related:e.initRelation(s),config:s})}),r.updateRecordRelationCache(e,i)})}initRelation(e){let t=this,r=t.get(e.fieldName),i=r!==Ye&&typeof e.store!="string"&&e.store.getById(r),s={id:r,placeHolder:!0};return t.meta.relationCache||(t.meta.relationCache={}),t.meta.relationCache[e.relationName]=i||(r!=null?s:null),i}removeRelation(e){this.meta.relationCache[e.relationName]&&(delete this.meta.relationCache[e.relationName],e.nullFieldOnRemove&&this.setData(e.fieldName,null))}getForeign(e){return this.meta.relationCache?.[e]}setForeign(e,t,r){let i=K.asId(t);return this.set(r.fieldName,i)}flatGet(e,t){return this.batching&&e in this.meta.batchChanges?this.meta.batchChanges[e]:this.data[t]??this.data[e]}complexGet(e,t){return this.batching&&e in this.meta.batchChanges?this.meta.batchChanges[e]:b.getPath(this.data,t)}get(e){if(!e)return;let t=this.fieldMap[e];return!t&&e.includes(".")?this.complexGet(e,e):t?.complexMapping?this.complexGet(e,t.dataSource):this.flatGet(e,t?.dataSource||e)}setData(e,t){let{data:r,fieldMap:i}=this;if(typeof e=="string"){let s=i[e],n=s?.dataSource??e;s?.complexMapping?b.setPath(r,n,t):r[n]=t}else{let s=Object.keys(e);for(let n=0;n<s.length;n++){let o=s[n],l=i[o],c=l?.dataSource??o;c&&(l?.complexMapping?b.setPath(r,c,e[o]):r[c]=e[o])}}}getData(e){let t=this.fieldMap[e],r=t?.dataSource??e;if(r)return t?.complexMapping?b.getPath(this.data,r):this.data[r]}syncId(e){let t=this.id;if(t!==e){this.setData("id",e);let r={id:{value:e,oldValue:t}};this.afterChange(r,r)}}set(e,t,r=!1,i=!1,s=!1){let n=this;if(n.isBatchUpdating)return n.inBatchSet(e,t,r||n.$silenceBatch),null;{let o=n.beforeSet?n.beforeSet(e,t,r,i):Ye,l=n.inSet(e,t,r,i,s);return n.afterSet?.(e,t,r,i,o,l),l}}fieldToKeys(e,t){return typeof e!="string"?b.assign({},e):{[e]:t}}inBatchSet(e,t,r){let i=this,{meta:s,constructor:n,fieldMap:o}=i,l={},c,d=!1;if(typeof e!="string"?Object.keys(i.fieldToKeys(e,t)).forEach(u=>{c=o[u]||b,t=n.processField(u,e[u],i),c.isEqual(s.batchChanges[u],t)||(l[u]={value:t,oldValue:i.get(u)},s.batchChanges[u]=t,d=!0)}):(c=o[e]||b,c.isEqual(s.batchChanges[e],t)||(l[e]={value:t,oldValue:i.get(e)},s.batchChanges[e]=t,d=!0)),d&&(i.generation++,!r)){let u={action:"update",record:i,records:[i],changes:l};i.stores.forEach(f=>{f.trigger("batchedUpdate",u)})}}inSet(e,t,r,i,s=!1){let n=this,{data:o,meta:l,fieldMap:c,constructor:d}=n,{prototype:u,childrenField:f}=d,h={},m=n.fieldToKeys(e,t),p=Object.keys(m),y=!1;if(!r&&!n.triggerBeforeUpdate(m))return null;for(let C=0;C<p.length;C++){let w=p[C];if(w===f)continue;let T=c[w],R=T||b,H=T?.readOnly,A=T?.dataSource??w,B=!s&&!T&&w in u,N=B?n[A]:T?.complexMapping?b.getPath(o,A):o[A],V=d.processField(w,m[w],n),j=m[w]={value:V},le=n.getRelationConfig(w);!H&&!R.isEqual(N,V)&&(n.generation++,j.oldValue=N,y=!0,R.isEqual(n.meta.modified[w],V)?Reflect.deleteProperty(l.modified,w):n.ignoreBag||(w in l.modified||(l.modified[w]=N),j.oldValue===Ye&&Reflect.deleteProperty(j,"oldValue")),h[w]=j,n.applyValue(B,A,V,s,T),le&&!i&&(n.initRelation(le),n.stores.forEach(G=>G.cacheRelatedRecord(n,V,le.relationName,j.oldValue))))}return y&&n.afterChange(m,h,r,i,s),y?h:null}applyValue(e,t,r,i,s){let n=s?.complexMapping;if(e){this[t]=r;return}if(!s&&t.includes(".")){let o=t.split(".")[0];s=this.constructor.fieldMap[o],n=s?.complexMapping||s?.type==="object"}n?b.setPath(this.data,t,r):this.data[t]=r}afterChange(e,t,r,i,s){this.stores.forEach(n=>{n.onModelChange(this,e,t,r,i)})}get isPersistable(){return!this.isBatchUpdating&&!this.isCreating}get isModified(){return Boolean(this.meta.modified&&Object.keys(this.meta.modified).length>0)}get hasPersistableChanges(){return this.isPersistable&&!b.isEmpty(this.rawModificationData)}isFieldModified(e){return this.isModified&&e in this.meta.modified}getFieldPersistentValue(e){let t=typeof e=="string"?this.getFieldDefinition(e):e,r=t?.name||e,i;return(!t||t.persist)&&(i=this[r],t?.serialize&&(i=t.serialize(i,this))),i}get modifications(){let e=this.rawModifications;return e&&Object.keys(e).length&&(e[this.constructor.idField]=this.id),e}get rawModifications(){let e=this,t={};if(!e.isModified)return null;let r=!1;return Object.keys(e.meta.modified).forEach(i=>{let s=e.getFieldPersistentValue(i);s!==Ye&&(t[i]=s,r=!0)}),r?t:null}get modificationData(){let e=this.rawModificationData;return e&&Object.keys(e).length&&b.setPath(e,this.constructor.getFieldDefinition(this.constructor.idField).dataSource,this.id),e}get rawModificationData(){let e=this,{fieldMap:t}=e.constructor,r={};if(!e.isModified)return null;let i=!1;return Object.keys(e.meta.modified).forEach(s=>{let n=t[s];if(n?.persist){let o=e.getFieldPersistentValue(s);o!==Ye&&(b.setPath(r,n.dataSource,o),i=!0)}}),i?r:null}get modificationDataToWrite(){let e=this.constructor.alwaysWriteFields,t=this.modificationData;return e.forEach(r=>{t[this.getFieldDefinition(r).dataSource]=this.getFieldPersistentValue(r)}),t}get persistableData(){let e=this,t={};return e.fields.forEach(r=>{let i=e.getFieldPersistentValue(r);i!==Ye&&(r?.complexMapping?b.setPath(t,r.dataSource,i):t[r.dataSource]=i)}),t}get isCommitting(){return Boolean(this.meta.committing)}clearChanges(e=!0,t=!0){let r=this,{meta:i}=r;i.modified={},i.committing=!1,e&&r.stores.forEach(s=>{if(s.modified.remove(r),s.added.remove(r),t){let n=s.collectDescendants(r).all;s.added.remove(n),s.modified.remove(n)}})}revertChanges(e=!1){this.set(this.meta.modified,Ye,e)}get internalId(){return this._internalId}get isPhantom(){return this.id===""||this.id==null||this.hasGeneratedId}get isModel(){return!0}get hasGeneratedId(){return typeof this.id=="string"&&this.id.startsWith("_generated")}static generateId(e=this.$$name){return`_generated${e}${++K._generatedIdIndex}`}generateId(){return this.constructor.generateId()}static asId(e){return e?.isModel?e.id:e}get json(){return M.safeJsonStringify(this)}toJSON(){let{children:e}=this,t=this.persistableData;return e&&(t[this.constructor.childrenField]=e.map(r=>r.toJSON())),t}toString(){let e=this,t=bu.find(i=>i in e.constructor.fieldMap),r=t?{[e.constructor.idField]:e.id,[t]:e[t]}:e.data;return M.safeJsonStringify(r)}get isBatchUpdating(){return Boolean(this.batching)}hasBatchedChange(e){return this.meta?.batchChanges?.[e]}beginBatch(e=!1){let t=this;t.batching||(t.batching=0,t.meta.batchChanges={}),e&&(t.$silenceBatch=(t.$silenceBatch||0)+1),t.batching++}endBatch(e=!1,t=!1){let r=this,{parentIdField:i}=r.constructor;if(!!r.batching&&(r.batching--,r.$silenceBatch&&r.$silenceBatch--,!(r.batching>0)&&!b.isEmpty(r.meta.batchChanges))){let s={...r.meta.batchChanges};r.meta.batchChanges=null,s[i]&&(r.parentId=s[i],delete s[i]),r.set(s,Ye,e,!1,t)}}cancelBatch(){if(this.batching){let e=this,{batchChanges:t}=e.meta,r={};if(e.batching=null,e.meta.batchChanges=null,e.generation++,!e.$silenceBatch){Object.entries(t).forEach(([s,n])=>{r[s]={oldValue:n,value:e[s]}});let i={action:"update",record:e,records:[e],changes:r};e.stores.forEach(s=>{s.trigger("batchedUpdate",i)})}e.$silenceBatch&&e.$silenceBatch--}}triggerBeforeUpdate(e){return!this.stores.some(t=>t.trigger("beforeUpdate",{record:this,changes:e})===!1)}copy(e=null,t){let r=this,i=b.clone(r.data),s=r.constructor.idField,n,o;n=b.isObject(t)?t.deep:t,e&&typeof e=="object"?(o=e[s],"deep"in e?(n=e.deep,z.deprecate("Grid","5.0.0","`deep` attribute deprecated, in favor of a separate second parameter"),delete e[s],delete e.deep):Object.assign(i,e)):o=e,n&&r.children?i.children=r.children.map(c=>c.copy(void 0,t)):(delete i.children,delete i.expanded),e!==!1&&(i[s]=o||r.generateId(r.firstStore));let l=new r.constructor(i,null,null,!1,!0);return l.originalInternalId=r.internalId,l}remove(e=!1){let t=this,{parent:r}=this;r?r.removeChild(t):t.stores.length&&(t.isSpecialRow||t.stores.forEach(i=>i.remove(t,e,!1,!0)))}get firstStore(){return this.stores.length>0&&this.stores[0]}getRelationConfig(e){return this.firstStore?.modelRelations?.find(t=>t.fieldName===e)}get isValid(){return!0}joinStore(e){let t=this,{stores:r}=t;if(!r.includes(e)){let{unjoinedStores:i}=t;super.joinStore(e),e.register(t),r.push(e),i.includes(e)&&i.splice(i.indexOf(e),1),t.isLoaded&&t.children.forEach(s=>s.joinStore(e)),t.initRelations(),e.tree&&!t.isRoot&&(t.instanceMeta(e.id).collapsed=!t.expanded)}}unjoinStore(e,t=!1){let r=this,{stores:i,unjoinedStores:s}=r;i.includes(e)&&(e.isDestroying||(e.unregister(r),s.push(e)),(r.unfilteredChildren||r.children)?.forEach?.(n=>n.unjoinStore(e,t)),i.splice(i.indexOf(e),1),super.unjoinStore&&super.unjoinStore(e,t),e.uncacheRelatedRecord(r))}isPartOfStore(e){return e?e.includes(this):this.stores.length>0}get isRemoved(){return!this.isPartOfStore()}instanceMeta(e){let{meta:t}=this,r=e.id||e;return t.map||(t.map={}),t.map[r]||(t.map[r]={})}get isGroupHeader(){return"groupRowFor"in this.meta}get isGroupFooter(){return"groupFooterFor"in this.meta}get isSpecialRow(){return this.meta.specialRow}static get nonPersistableFields(){let e=this;return e._nonPersistableFields||(e._nonPersistableFields={},e.allFields.forEach(t=>{(!t.persist||t.calculated)&&(e._nonPersistableFields[t.name]=1)})),e._nonPersistableFields}static get alwaysWriteFields(){let e=this;return e._alwaysWriteFields||(e._alwaysWriteFields=[],e.allFields.forEach(t=>{t.alwaysWrite&&e._alwaysWriteFields.push(t.name)})),e._alwaysWriteFields}};K._idField="id";K._internalIdCounter=1;K._assignedIdField=!1;K._generatedIdIndex=0;K.exposeProperties();var Gt=class extends xt{add(...e){return e.length===1&&Array.isArray(e[0])&&(e=e[0]),super.add(...e.filter(t=>t.isPersistable))}};var il=a=>class extends(a||S){static get $name(){return"StoreCRUD"}static get defaultConfig(){return{autoCommit:!1}}static get properties(){return{isRemoving:!1,suspendCount:0}}remove(t,r=!1){let i=this,{storage:s}=i;if(t instanceof Set&&(t=Array.from(t)),t=(Array.isArray(t)?t:[t]).reduce((n,o)=>(o=i.getById(o),o&&n.push(o),n),[]),t.length){if(i.isRemoving=!0,i.tree){let n=t.reduce((o,l)=>{let c=l.parent;return c&&(o[c.id]||(o[c.id]=[c,[]]),o[c.id][1].push(l)),o},{});for(let o of Object.values(n))o[0].removeChild(o[1],!1,r);return i.isRemoving=!1,t}else if(i.isGrouped){let n=s.count,o=[],l=new Set;for(let c of t){let{groupParent:d}=c.instanceMeta(i);d&&d.meta.collapsed&&o.push(c),U.remove(d.groupChildren,c),d.meta.childCount--,l.add(d)}for(let c of l)c.groupChildren.length>0&&i.onModelChange(c,{},{});o.length&&s.trigger("change",{action:"splice",removed:o,added:[],replaced:[],oldCount:n})}if(!t.length||!r&&i.trigger("beforeRemove",{records:t})===!1)return i.isRemoving=!1,null;r&&i.suspendEvents(),s.remove(t),r&&i.resumeEvents(),i.autoCommit&&i.doAutoCommit(),i.isRemoving=!1}return t}clear(t=!1){let r=this,{storage:i}=r;if(r.storage.totalCount||r.rootNode?.unfilteredChildren?.length){if(!t&&r.trigger("beforeRemove",{records:i.allValues,removingAll:!0})===!1)return null;if(r.rootNode)r.isChained||r.rootNode.clearChildren(t);else if(t){let s=r.registeredRecords;for(let n=s.length-1,o;n>=0;n--)o=s[n],o&&!o.isDestroyed&&o.unjoinStore(r)}t&&(r.removed.clear(),i.suspendEvents()),i.clear(),t&&i.resumeEvents(),r.added.clear(),r.modified.clear()}}removeAll(t=!1){let r=this,i=r.storage,s;if(r.isRemoving=!0,t){i.suspendEvents();let n=r.registeredRecords;for(let o=n.length-1,l;o>=0;o--)l=n[o],l&&!l.isDestroyed&&!l.isRoot&&l.unjoinStore(r)}return r.tree?s=r.rootNode.clear()!==!1:s=r.clear()!==null,t&&i.resumeEvents(),r.isRemoving=!1,s}add(t,r=!1){let i=this,s=i.storage;if(!Array.isArray(t))t=[t];else if(!t.length)return;if(i.tree=i.tree||Boolean(i.autoTree&&t[0].children),i.tree){let o=new Map,l=[];return t.forEach(c=>{let d=c[i.modelClass.parentIdField];o.has(d)||o.set(d,[]),o.get(d).push(c)}),o.forEach((c,d)=>{let u=d==null?i.rootNode:i.getById(d);if(!u)throw new Error(`Parent node with id ${d} not found, cannot add children.`);l.push(...u.appendChild(c,r))}),l}if(!r&&i.trigger("beforeAdd",{records:t})===!1)return null;if(i.tree=i.tree||Boolean(i.autoTree&&t[0].children),i.tree)return i.rootNode.appendChild(t);let n=i.processRecords(t);return r&&i.suspendEvents(),s.add(n),r&&i.resumeEvents(),i.autoCommit&&i.doAutoCommit(),n}processRecords(t,r){return t.map(i=>{let s=this.processRecord(i.isModel?i:this.createRecord(i));return r?.call(this,s),s})}insert(t,r,i=!1){let s=this,n=s.storage,o=s.getAt(t),l=n.values,c=[];if(Array.isArray(r)||(r=[r]),!i&&s.trigger("beforeAdd",{records:r})===!1)return null;let d,u,f;if(l[u=t]===r[0]||l[u=t-1]===r[0])for(d=!0,f=0;d&&f<r.length;f++)r[f]!==l[u+f]&&(d=!1);if(d)return null;let h=s.processRecords(r,m=>{let p=n.indexOf(m);m.children&&m.children.length&&s.autoTree&&(s.tree=!0),p>-1&&(p<t&&o&&t--,c.push(p)),m.meta.previousIndex=p});if(s.tree){let m=s.rootNode;return m.insertChild(r,m.children&&m.children[t],i)}return s.suspendEvents(),s.storage.remove(c),s.resumeEvents(),i&&s.suspendEvents(),n.splice(t,0,...h),i&&s.resumeEvents(),s.autoCommit&&s.doAutoCommit(),h}move(t,r){this.isTree?r.parent.insertChild(t,r):this.storage.move(t,r)}setMultiple(t,r,i){let s=this,n=[],o=[];s.forEach(l=>{t(l)&&(o.push(l.set(r,i,!0)),n.push(l))}),s.trigger("updateMultiple",{records:n,all:s.records.length===n.length}),s.trigger("change",{action:"updatemultiple",records:n,all:s.records.length===n.length}),s.reapplyFilterOnUpdate&&s.isFiltered&&s.filter()}setAll(t,r){let i=this,s=[];i.forEach(n=>{s.push(n.set(t,r,!0))}),i.trigger("updateMultiple",{records:i.records,all:!0}),i.trigger("change",{action:"updatemultiple",records:i.records,all:!0}),i.reapplyFilterOnUpdate&&i.isFiltered&&i.filter()}acceptChanges(){let t=this;t.added.forEach(r=>r.clearChanges(!1)),t.modified.forEach(r=>r.clearChanges(!1)),t.added.clear(),t.modified.clear(),t.removed.clear()}commit(t=!1){let{changes:r}=this;return!t&&this.trigger("beforeCommit",{changes:r})===!1?!1:(this.acceptChanges(),t||this.trigger("commit",{changes:r}),r)}revertChanges(){let t=this,{changes:r}=t;if(r){let i={action:"clearchanges",changes:r};t.add(t.removed.values,!0),t.remove(t.added.values,!0),t.modified.forEach(s=>s.revertChanges(!0)),t.added.clear(),t.modified.clear(),t.removed.clear(),t.trigger("change",i),t.trigger("refresh",i)}}get changes(){let t=this,r=t.modified.values.filter(i=>i.rawModifications);return t.added.count||r.length||t.removed.count?{added:t.added.values.slice(),modified:r,removed:t.removed.values.slice()}:null}get autoCommit(){return this._autoCommit}set autoCommit(t){this._autoCommit=t,t&&this.changes&&this.commit()}suspendAutoCommit(){this.suspendCount++}resumeAutoCommit(t=!0){this.suspendCount--,this.autoCommit&&t&&this.doAutoCommit()}doAutoCommit(){this.suspendCount<=0&&this.commit()}applyChangesFromStore(t){let r=this,i=t.changes;!i||(i.added&&r.add(i.added),i.removed&&r.remove(i.removed.map(s=>s.id)),i.modified&&i.modified.forEach(s=>{r.getById(s.id).set(s.modifications)}))}};var sl=a=>class extends(a||S){static get $name(){return"StoreFilter"}static get defaultConfig(){return{filters:null,reapplyFilterOnAdd:!1,reapplyFilterOnUpdate:!1}}set reapplyFilterOnAdd(t){this.storage.autoFilter=t}get reapplyFilterOnAdd(){return this.storage.autoFilter}set filters(t){let r=this,i=r.filters;if(i.clear(),r._filtersFunction=null,t){if(t.constructor.name==="Object")for(let s of Object.entries(t))s[0]==="filterBy"&&typeof s[1]=="function"?i.add(new de({filterBy:s[1]})):i.add(new de(s[1].constructor.name==="Object"?Object.assign({property:s[0]},s[1]):{property:s[0],value:s[1]}));else Array.isArray(t)?i.add(...t.map(s=>s instanceof de?s:new de(s))):t.isCollection?i.add(...t.values):i.add(new de({filterBy:t}));i.forEach(s=>s.owner=r)}}get filters(){return this._filters||(this._filters=new Re({extraKeys:["property"]}))}set filtersFunction(t){this._filtersFunction=t}get filtersFunction(){let t=this,{filters:r,isGrouped:i}=t;if(!t._filtersFunction)if(r.count){let s=de.generateFiltersFunction(r);t._filtersFunction=n=>i&&n.isSpecialRow?n.groupChildren.some(s):s(n)}else t._filtersFunction=W.returnTrue;return t._filtersFunction}get isFiltered(){return this.filters.values.some(t=>!t.disabled)}traverseFilter(t){let r=this,i=!t.isRoot&&r.filtersFunction(t),s=t.unfilteredChildren||t.children;return!s||!s.length?i:(t.unfilteredChildren||(t.unfilteredChildren=t.children.slice()),t.children=t.unfilteredChildren.filter(n=>r.traverseFilter(n)),t.updateChildrenIndices(t.unfilteredChildren,!0,!0),t.updateChildrenIndices(t.children,!1,!0),i||Boolean(t.children.length))}traverseClearFilter(t){let r=this;t.unfilteredChildren&&(t.children=t.unfilteredChildren.slice(),t.unfilteredChildren=null),t.children&&(t.children.forEach(i=>r.traverseClearFilter(i)),t.updateChildrenIndices(t.children,!1,!0))}get latestFilterField(){return this.filters.last?this.filters.last.property:null}addFilter(t,r=!1){return t=t instanceof de?t:new de(t),t.owner=this,this.filters.add(t),r||this.filter(),t}filter(t){let r=this,{filters:i}=r,s=!1;if(t){let n=typeof t;if(n==="object"&&("silent"in t||"replace"in t||t.filters)&&(s=t.silent,t.replace&&i.clear(),t=t.filters,n=typeof t),t&&(r.isConfiguring=!0,Array.isArray(t)?t.forEach(o=>r.addFilter(o,!0),r):n==="function"?r.addFilter(new de(t),!0):n==="string"?r.addFilter({property:t,value:arguments[1]},!0):r.addFilter(t,!0),r.isConfiguring=!1,!r.isFiltered))return}return r.filtersFunction=null,r.performFilter(s)}performFilter(t){let r=this,{storage:i,filters:s,rootNode:n}=r,o=r.count;r.trigger("beforeFilter",{filters:s}),r.tree?(r.isFiltered?r.traverseFilter(n):r.traverseClearFilter(n),i.replaceValues({values:r.collectDescendants(n).visible,silent:!0})):r.isFiltered?(r.isGrouped&&r.includeCollapsed(),i.addFilter({id:"primary-filter",filterBy:r.filtersFunction}),r.isGrouped&&r.excludeCollapsed()):i.filters.clear(),r.afterPerformFilter(t?null:{action:"filter",filters:s,oldCount:o,records:r.storage.values})}afterPerformFilter(t){this.resetRelationCache(),t&&this.triggerFilterEvent(t)}get filtered(){return this.storage.isFiltered}triggerFilterEvent(t){this.trigger("filter",t),this.remoteFilter||(this.trigger("refresh",t),this.trigger("change",t))}filterBy(t){this.filter(t)}removeFilter(t,r=!1){let i=this,s=t instanceof de?t:i.filters.get(t);if(s)return i.filters.remove(s),i._filtersFunction=null,r||i.filter(),s}clearFilters(){this.filters.clear(),this.filter()}convertFilterToString(t){let r=this.filters.getBy("property",t);return r&&!r.filterBy?String(r):""}doDestroy(){this._filters?.destroy(),super.doDestroy()}};var wu={add:1,replace:1},nl=a=>class extends(a||S){static get $name(){return"StoreGroup"}static get defaultConfig(){return{groupers:null}}static get properties(){return{collapsedGroups:new Set}}construct(t){super.construct(t),this.on("change",this.onDataChanged,this)}get groupers(){return this._groupers}set groupers(t){let r=this,{storage:i}=r;t?.length?r._groupers=t:r.groupers&&(delete r._groupers,r.includeCollapsed(),i.replaceValues({values:r.removeHeadersAndFooters(i._values),filteredValues:i.isFiltered?r.removeHeadersAndFooters(i._filteredValues):null,silent:!0}),r.group(null,null,null,!1)),r._idMap=null}get groupRecords(){let t=[];if(this.isGrouped)for(let r of this)r.isSpecialRow&&t.push(r);return t}includeCollapsed(){for(let t of this.collapsedGroups)this.expand(this.getById(t),!1)}excludeCollapsed(){for(let t of this.collapsedGroups)this.collapse(this.getById(t))}onDataChange({source:t,action:r,removed:i}){let s=this,{groupers:n}=s;n&&(n.length?r==="splice"&&i?.length&&t.replaceValues({values:s.prepareGroupRecords(),silent:!0}):t.replaceValues({values:s.removeHeadersAndFooters(t.values),silent:!0})),super.onDataChange?.(...arguments)}collapse(t){return t&&!t.meta.collapsed?(this.excludeGroupRecords(t),t.meta.collapsed=!0,this.collapsedGroups.add(t.id),!0):!1}expand(t,r=!0){return t?.meta.collapsed?(this.includeGroupRecords(t),t.meta.collapsed=!1,r&&this.collapsedGroups.delete(t.id),!0):!1}removeHeadersAndFooters(t){return t.filter(r=>r.isSpecialRow?(this.unregister(r),!1):!0)}prepareGroupRecords(t){let r=this,i=r.collapsedGroups,s=[],n=r.storage.values;for(let h of n)h.isGroupHeader&&(h.meta.collapsed||i.has(h.id))&&(i.add(h.id),s.push(h));for(let h of s)r.includeGroupRecords(h);if(n=r.removeHeadersAndFooters(r.storage.values),t&&(n=n.sort(t)),!r.isGrouped)return n;let o=[],l=r.groupers[0].field,c=null,d=null,u=0;function f(){let h=d.meta.groupRowFor,m=`group-footer-${typeof h=="number"?h:M.createId(h)}`,p=r.getById(m)||new r.modelClass({id:m},r,{specialRow:!0,groupFooterFor:h,groupRecord:d});return p.stores=[r],r.register(p),p.groupChildren=d.groupChildren,d.meta.collapsed||o.push(p),r.allRecords.push(p),d.groupChildren.push(p),u++,p}return n.forEach(h=>{let m=h[l]==null?"__novalue__":h[l],p=`group-header-${typeof m=="number"?m:M.createId(m)}`;if(h.groupChildren?.length===0){r.unregister(h);return}b.isEqual(m,c)||(d&&(r.useGroupFooters&&f(d),d.meta.childCount=u),d=r.getById(p)||new r.modelClass({id:p},r,{specialRow:!0,groupRowFor:m,groupField:l,collapsed:i.has(p)}),d.stores=[r],r.register(d),d.groupChildren=[],o.push(d),r.allRecords.push(d),c=m,u=0),h.instanceMeta(r.id).groupParent=d,i.has(p)||o.push(h),d.groupChildren.push(h),u++}),d&&(r.useGroupFooters&&f(),d.meta.childCount=u),o}get isGrouped(){return Boolean(this.groupers?.length)}group(t,r,i=!1,s=!0,n=!1){let o=this,l,c;if(t&&typeof t=="object"&&(r=t.ascending,c=t.fn,t=t.field),i?o.groupers.push(l={field:t,ascending:r,complexMapping:t.includes(".")}):t&&(r==null&&(r=o.groupInfo?.field===t&&o.groupInfo?.fn===c?!o.groupInfo.ascending:!0),o.groupInfo=l={field:t,ascending:r,fn:c,complexMapping:t.includes(".")},o.groupers=[o.groupInfo]),l){let{prototype:d}=o.modelClass;l.complexMapping&&!Object.prototype.hasOwnProperty.call(d,t)&&Object.defineProperty(d,t,{get(){return b.getPath(this,t)}})}s!==!1&&o.sort(null,null,!1,!0),n||(o.trigger("group",{isGrouped:o.isGrouped,groupers:o.groupers,records:o.storage.values}),o.trigger("refresh",{action:"group",isGrouped:o.isGrouped,groupers:o.groupers,records:o.storage.values}))}addGrouper(t,r=!0){this.group(t,r,!0)}removeGrouper(t){let r=this,{groupers:i}=r,s=i.findIndex(n=>n.field===t);s>-1&&(i.splice(s,1),i.length?r.group():r.clearGroupers())}clearGroupers(){this.groupers=null}isRecordInGroup(t,r){if(!this.isGrouped)return null;let i=this.groupers[0]?.field;return t[i]===r&&!t.isSpecialRow}isInCollapsedGroup(t){return t.instanceMeta(this).groupParent?.meta.collapsed}getGroupRecords(t){return this.isGrouped?this.storage.values.filter(r=>this.isRecordInGroup(r,t)):null}getGroupTitles(){return this.isGrouped?this.getDistinctValues(this.groupers[0].field):null}onDataChanged({changes:t,action:r}){this.isGrouped&&(!t&&wu[r]||t&&this.groupers.some(i=>i.field in t))&&this.sort()}internalIncludeExcludeGroupRecords(t,r){let i=this,s=i.indexOf(t),{id:n,storage:o}=i,{meta:l,groupChildren:c}=t;if(!(s===-1||l.collapsed&&!r||!l.collapsed&&r)){if(c.forEach(d=>d.instanceMeta(n).hiddenByCollapse=!r),r){let d=c.filter(u=>!i.isAvailable(u));o.values.splice(s+1,0,...d)}else o.values.splice(s+1,c.length);o._indicesInvalid=!0,i._idMap=null}}excludeGroupRecords(t){this.internalIncludeExcludeGroupRecords(t,!1)}includeGroupRecords(t){this.internalIncludeExcludeGroupRecords(t,!0)}collectGroupRecords(t,r=!0){return(t?this.storage.allValues:this.storage.values).reduce((s,n)=>(n.isSpecialRow&&(r&&s.push(n),n.isGroupHeader&&s.push.apply(s,n.groupChildren)),s),[])}};var ol=a=>class extends(a||S){static get configurable(){return{objectify:null}}initProxy(){if(!x.global.Proxy)throw new Error("Proxy not supported");return new Proxy(this,{get(r,i){if(i in r)return r[i];if(i==="$store")return r;let s=r.getById(i);return!s&&!isNaN(parseInt(i))&&(s=r.getAt(parseInt(i))),s},set(r,i,s){return i in r||r.isDestroying?r[i]=s:r.add({[r.modelClass.idField]:i,...s}),!0},deleteProperty(r,i){return r.isDestroying?(delete r[i],!0):Boolean(r.remove(i).length)},has(r,i){return i in r?!0:(i.startsWith("{")&&i.endsWith("}")&&(i=M.safeJsonParse(i)?.id),r.includes(i))}})}};var ll=a=>class extends(a||S){static get $name(){return"StoreRelation"}initRelations(t){let r=this,i=r.modelClass.relations;t&&r.modelRelations&&r.modelRelations.forEach(s=>{s.storeDetacher&&s.storeDetacher()}),(!r.modelRelations||r.modelRelations.length===0||t)&&i&&(r.modelRelations=[],i&&i.forEach(s=>{let n=Object.assign({},s),o=typeof n.store=="string"?r[n.store]:n.store;if(n.dependentStore=r,r.modelRelations.push(n),o){n.storeProperty=n.store,n.store=o;let l=o.dependentStoreConfigs;if(l.has(r)){let c=l.get(r);if(t){let d=c.find(u=>u.relationName===n.relationName);d&&U.remove(c,d)}c.push(n)}else l.set(r,[n]);n.collectionName&&o.initRelationCollection(n,r),o.count>0&&o.updateDependentStores("dataset",o.records)}}))}initRelationCollection(t,r){let i=this,s=t.collectionName;i.collectionStores||(i.collectionStores={}),i.collectionStores[s]={store:r,config:t},i[s+"Store"]||(i[s+"Store"]=r),i.count>0&&i.initModelRelationCollection(s,i.records)}initModelRelationCollection(t,r){let i=this;r.forEach(s=>{s.traverse(n=>{let o=t in n?`$related${M.capitalize(t)}`:t;Object.defineProperty(n,o,{enumerable:!0,configurable:!0,get:function(){return i.getCollection(this,t)},set:function(l){return i.setCollection(this,t,l)}})})})}resetRelationCache(){this.relationCache={},this.forEach(t=>t.initRelations())}updateRecordRelationCache(t,r){let i=this;r&&r.forEach(s=>{let n=s.related?s.related.id:t.get(s.config.fieldName);n!==void 0&&i.cacheRelatedRecord(t,n,s.config.relationName,n)})}getRelationCollection(t,r){let i=K.asId(r);return this.relationCache[t]&&this.relationCache[t][i]||[]}getCollection(t,r){let{config:i,store:s}=this.collectionStores[r];return s.relationCache[i.relationName]&&s.relationCache[i.relationName][t.id]||[]}setCollection(t,r,i){let{config:s,store:n}=this.collectionStores[r];n.relationCache[s.relationName]||(n.relationCache[s.relationName]={});let o=(n.relationCache[s.relationName][t.id]||[]).slice(),l=[],c=[];n.suspendEvents(),o.forEach(d=>{i.includes(d)||(d[s.fieldName]=null,n.remove(d),c.push(d))}),i.forEach(d=>{d instanceof K?d.stores.includes(n)||(n.add(d),l.push(d)):([d]=n.add(d),l.push(d)),d[s.fieldName]=t.id}),n.resumeEvents(),c.length&&(n.trigger("remove",{records:c}),n.trigger("change",{action:"remove",records:c})),l.length&&(n.trigger("add",{records:l}),n.trigger("change",{action:"add",records:l}))}cacheRelatedRecord(t,r,i,s=null){let n=this,o=n.relationCache[i]||(n.relationCache[i]={});s!==null&&n.uncacheRelatedRecord(t,i,s),r!=null&&U.include(o[r]||(o[r]=[]),t)}uncacheRelatedRecord(t,r=null,i=null){let s=this;function n(o,l){let c=s.relationCache[o],d=c&&c[l];if(d){let u=d.indexOf(t);u>=0&&d.splice(u,1),d.length===0&&delete c[l]}}i!=null?n(r,i):t.meta.relationCache&&Object.entries(t.meta.relationCache).forEach(([o,l])=>{let c=l&&l.id;n(o,c)})}updateDependentStores(t,r){this.dependentStoreConfigs.forEach(i=>{i.forEach(s=>{let n=s.dependentStore,o=n.relationCache[s.relationName];if(t==="dataset"){s.collectionName&&this.initModelRelationCollection(s.collectionName,r),n.forEach(l=>{let c=l.initRelation(s);c&&n.cacheRelatedRecord(l,c.id,s.relationName,c.id)});return}if(t==="removeall"){n.forEach(l=>{l.removeRelation(s)}),delete n.relationCache[s.relationName];return}t==="add"&&s.collectionName&&this.initModelRelationCollection(s.collectionName,r),(t==="add"||t==="remove")&&r.forEach(l=>{let c=o&&o[l.id];switch(t){case"remove":c&&c.forEach(d=>d.removeRelation(s));break;case"add":n.forEach(d=>{d.get(s.fieldName)==l.id&&(d.initRelation(s),n.cacheRelatedRecord(d,l.id,s.relationName))});break}})})})}updateDependentRecordIds(t,r){this.dependentStoreConfigs&&this.dependentStoreConfigs.forEach(i=>{i.forEach(s=>{let n=s.dependentStore,o=n.relationCache[s.relationName],l=o&&o[t]&&o[t].slice();l&&l.forEach(c=>{n.cacheRelatedRecord(c,r,s.relationName,t),c.set(s.fieldName,r,!1,!0)})})})}};var al=a=>class extends(a||S){static get $name(){return"StoreSum"}sum(t,r=this.storage.values){return r?r.reduce((i,s)=>{if(s.isSpecialRow)return i;let n=Number(s[t]);return isNaN(n)?i:i+n},0):0}min(t,r=this.storage.values){return!r||!r.length?0:r.reduce((i,s)=>(typeof s[t]?.valueOf()==="number"&&s[t]<i&&(i=s[t]),i),r[0][t])}max(t,r=this.storage.values){return!r||!r.length?0:r.reduce((i,s)=>(typeof s[t]?.valueOf()==="number"&&s[t]>i&&(i=s[t]),i),r[0][t])}average(t,r=this.storage.values){if(!r||!r.length)return 0;let i=0,s=r.reduce((n,o)=>{if(o.isSpecialRow)return n;let l=parseFloat(o[t]);return isNaN(l)?n:(i++,n+l)},0);return i>0?s/i:0}groupSum(t,r){return this.sum(r,this.getGroupRecords(t))}};var Is=(a,e)=>String(a).toLowerCase().indexOf(e)!==-1,cl={string:Is,number:Is,boolean:Is,date:(a,e)=>a instanceof Date&&e instanceof Date?String(a)===String(e):String(a.getMonth()+1).indexOf(e)!==-1||String(a.getDate()).indexOf(e)!==-1||String(a.getFullYear()).indexOf(e)!==-1,object:(a,e)=>a===e,undefined:(a,e)=>a===e},dl=a=>class extends(a||S){static get $name(){return"StoreSearch"}search(t,r=null){let i=this.storage.values,s=i.length,n=[];if(t==null)return null;typeof t=="string"&&(t=t.toLowerCase());let o,l,c,d,u;for(o=0;o<s;o++){l=i[o];for(let f of r||l.fieldNames)c=l[f],d=c instanceof Date?"date":typeof c,u=cl[d],c&&u?.(c,t)&&n.push({index:o,data:l,field:f,id:l.id})}return n}findByField(t,r,i=!1){let s=this.storage.values,n=s.length,o=new Set,l=[],c,d,u;for(r!=null&&(r=String(r).toLowerCase()),c=0;c<n;c++)if(d=s[c],u=d[t],!i||!o.has(u)){let f=u instanceof Date?"date":typeof u,h=cl[f];(r==null&&u===r||r&&h(u,r))&&(l.push({id:d.id,index:c,data:d}),i&&o.add(u))}return l}find(t,r=!1){let i=r?this.storage.allValues:this.storage.values;return this.isGrouped&&(i=this.collectGroupRecords(r,!1)),i.find(t)}findRecord(t,r,i=!1){let s=n=>b.isEqual(n[t],r);return this.isTree?this.query(s,i)[0]:(i?this.storage.allValues:this.storage.values).find(s)}query(t,r=!1){let i=r?this.storage.allValues:this.storage.values;if(this.isTree){let s=[];return this.traverse(n=>{t(n)&&s.push(n)},void 0,void 0,r),s}else this.isGrouped&&(i=this.collectGroupRecords(r,!1));return i.filter(t)}some(t,r=!1){let i=r?this.storage.allValues:this.storage.values;return this.isGrouped&&(i=this.collectGroupRecords(r,!1)),i.some(t)}};var vu=/\./,ul=a=>class extends(a||S){static get $name(){return"StoreSort"}static get defaultConfig(){return{sorters:[],useLocaleSort:null}}static get configurable(){return{reapplySortersOnAdd:!1}}get isSorted(){return Boolean(this.sorters.length)||this.isGrouped}updateReapplySortersOnAdd(t){this.storage.autoSort=t}sort(t,r,i=!1,s=!1){let n=this,o=n.allRecords,l=n.sorters?n.sorters.slice():[],c=null,d;if(t)if(Array.isArray(t))n.sorters=t.map(u=>n.normalizeSorterConfig(u,typeof u=="string"?!0:r));else{let u=n.normalizeSorterConfig(t,r);i?(d=n.getCurrentSorterByField(u.field),d?(c=d.ascending,d.ascending=u.ascending):n.sorters.push(u)):n.sorters=[u]}if(!s&&n.trigger("beforeSort",{sorters:n.sorters,records:o,currentSorters:l})===!1){n.sorters=l,c!==null&&(d.ascending=c);return}return n.performSort(s)}normalizeSorterConfig(t,r){let i=this,s={ascending:r};if(typeof t=="object"?(b.assign(s,t),t.fn&&(delete s.fn,s.sortFn=t.fn),s.ascending=t.ascending??r):typeof t=="function"?s.sortFn=t:s.field=t,s.ascending==null){let n=i.getCurrentSorterByField(s.field);s.ascending=n?!n.ascending:!0}if(s.sortFn==null){let n=i.modelClass?.$meta.fields.map[s.field]?.compareItems;n&&(s.sortFn=n)}return s}getCurrentSorterByField(t){return typeof t=="string"&&this.sorters.find(r=>r.field===t)||null}addSorter(t,r=!0){this.sort(t,r,!0)}removeSorter(t){let r=this.sorters.findIndex(i=>i.field===t||i.sortFn===t);r>-1&&(this.sorters.splice(r,1),this.sort())}clearSorters(){this.sorters.length&&(this.sorters.length=0,this.sort())}createSorterFn(t){let r=this.useLocaleSort;return(i,s)=>{for(let n=0;n<t.length;n++){let o=t[n],{field:l,ascending:c=!0,useLocaleSort:d=r}=o,u=o.fn||o.sortFn,f=c?1:-1;if(u){let y=u(i,s);if(y!==null)return y*f}let h=vu.test(l),m=h?i.get(l):i[l],p=h?s.get(l):s[l];if(m!==p){if(m==null)return-f;if(p==null)return f;if(d){if(d===!0)return String(m).localeCompare(p)*f;if(typeof d=="string")return String(m).localeCompare(p,d)*f;if(typeof d=="object")return String(m).localeCompare(p,d.locale,d)*f}if(m>p)return f;if(m<p)return-f}}return 0}}performSort(t){let r=this,{rootNode:i,storage:s,sorters:n}=r,o=r.createSorterFn(r.isGrouped?r.groupers.concat(n):n);r.tree?(i.traverse(l=>{l.isLoaded&&l.isParent&&(l.children.sort(o),l.updateChildrenIndices(l.children,!1,!0))}),s.replaceValues({values:r.collectDescendants(i).visible,silent:!0})):r.isGrouped?s.replaceValues({values:r.prepareGroupRecords(o),silent:!0}):s.replaceValues({values:s.values.sort(o),silent:!0}),r.afterPerformSort(t)}afterPerformSort(t){let r=this;if(r._idMap=null,!t){let i={action:"sort",sorters:r.sorters,records:r.allRecords};r.trigger("sort",i),r.sortParamName||r.trigger("refresh",i)}}};var fl=a=>!0,hl=a=>class extends(a||S){static get $name(){return"StoreChained"}static get defaultConfig(){return{chainedFilterFn:null,chainedFields:null,masterStore:null,doRelayToMaster:["add","remove","insert"],dontRelayToMaster:[],keepUncommittedChanges:!1,excludeCollapsedRecords:!0}}static get properties(){return{chainedStores:null}}construct(t){super.construct(t);let r=this,{masterStore:i}=r,s=r.syncOrder?"sort":"";i&&(r.methodNamesToRelay.forEach(n=>r[n]=(...o)=>r.relayToMaster(n,o)),r.removeAll=(...n)=>{i.remove(r.getRange(),...n)},i.on({changePreCommit:r.onMasterDataChangedPreCommit,change:r.onMasterDataChanged,[s]:r.onMasterDataChanged,prio:1,thisObj:r}),i.chainedStores||(i.chainedStores=[]),i.chainedStores.push(r),r.fillFromMaster())}get isChained(){return Boolean(this.masterStore)}set chainedFilterFn(t){this._chainedFilterFn=this.thisObj?t.bind(this.thisObj):t}get chainedFilterFn(){return this._chainedFilterFn||fl}get methodNamesToRelay(){let t=Array.isArray(this.doRelayToMaster),r=Array.isArray(this.dontRelayToMaster);return t&&this.doRelayToMaster.filter(i=>!r||!this.dontRelayToMaster.includes(i))||[]}updateChainedStores(){this.chainedStores&&this.chainedStores.forEach(t=>t.fillFromMaster())}fillFromMaster(){let t=this,{masterStore:r,isTree:i}=t,s=t.chainedFilterFn.length>0||t.chainedFilterFn.toString().length<=10,n;if(!t.isChained)throw new Error("fillFromMaster only allowed on chained store");if(t.keepUncommittedChanges){if(i)throw new Error("Cannot use keepUncommittedChanges on a chained tree store");s?n=r.allRecords.filter(o=>!t.removed.includes(o)&&!t.added.includes(o)&&t.chainedFilterFn(o)):n=t.chainedFilterFn().filter(o=>!t.removed.includes(o)&&!t.added.includes(o)),n=t.added.values.filter(o=>!t.removed.includes(o)).concat(n)}else if(s?n=r.allRecords.filter(t.chainedFilterFn):n=t.chainedFilterFn(),i&&(t.idRegister={},t.internalIdRegister={},n.forEach(o=>{o.stores.includes(t)?t.register(o):o.joinStore(t)}),t.excludeCollapsedRecords)){let o=t.getChildren(t.rootNode);n=t.doIncludeExclude(o,!0)}t.data=n}commitToMaster(){let t=this,r=t.masterStore;if(!t.isChained)throw new Error("commitToMaster only allowed on chained store");return r.beginBatch(),r.remove(t.removed.values),r.add(t.added.values),r.endBatch(),t.commit()}relayToMaster(t,r){return this.masterStore[t](...r)}onMasterDataChangedPreCommit(t){this.onMasterDataChanged(t),this.$masterEventhandled=!0}onMasterDataChanged({action:t,changes:r,$handled:i,isMove:s}){if(this.$masterEventhandled){this.$masterEventhandled=!1;return}s&&t==="remove"||(t!=="update"||this.chainedFields?.some(n=>n in r))&&this.fillFromMaster()}makeChained(t=fl,r,i){return new this.constructor(Object.assign(i||{},{tree:!1,autoTree:!1,masterStore:this,modelClass:this.modelClass,chainedFilterFn:t,chainedFields:r}))}chain(){return this.makeChained(...arguments)}doDestroy(){this.chainedStores?.forEach(t=>t.destroy()),super.doDestroy()}};var ml=a=>class extends(a||S){static get $name(){return"StoreState"}getState(){let{sorters:t,groupers:r,filters:i}=this,s={};return t?.length&&(s.sorters=t.map(n=>{let o=b.cleanupProperties(b.clone(n));return delete o.fn,delete o.sortFn,o})),r?.length&&(s.groupers=r.slice()),i?.values.length&&(s.filters=i.values.map(n=>{let o=b.cleanupProperties(b.clone(n.config));return o.value=n.value,o.caseSensitive&&delete o.caseSensitive,o})),s}applyState(t){let r=this,{sorters:i=[],groupers:s=[],filters:n=[]}=t;r.sorters=i.slice(),r.groupers=s.slice(),r.sort(),r.filters=n.filter(o=>o.property||o.filterBy),r.filter()}};var xu=Object.freeze([]),gl=a=>class extends(a||S){static get $name(){return"StoreTree"}static get configurable(){return{transformFlatData:null}}get isTree(){return this.tree||this.masterStore&&this.masterStore.tree}get leaves(){let t=this,r=[];return t.isTree?(t.traverse(i=>{i.isLeaf&&r.push(i)}),r):(t.allRecords.forEach(i=>{i.isLeaf&&r.push(i),i.traverse(s=>{s.isLeaf&&r.push(s)},!0)}),r)}async loadChildren(t){}onNodeAddChild(t,r,i,s,n=!1){let o=this,l=t===o.rootNode&&t.isLoading,{storage:c}=o,d=[],u=[],f=r[0].previousSibling,h;if(o.collectDescendants(r,d,u,{inCollapsedBranch:!(t.isExpanded(o)&&t.ancestorsExpanded(o))}),!l&&u.length)for(let m of u)!o.modified.includes(m)&&!s[m.id]&&(o.removed.includes(m)?o.removed.remove(m):o.added.add(m));if(l&&o.rootVisible&&(d.unshift(t),u.unshift(t)),d.length&&(i===0||!f?h=c.indexOf(t):h=c.indexOf(f)+f.getDescendantCount(!0,o),c.suspendEvents(),o.storage.splice(++h,0,d),c.resumeEvents()),o.updateDependentStores("add",r),l&&d.length){if(o.sorters.length&&o.sort(null,null,!1,!0),o.afterLoadData?.(),!n){let m={action:"dataset",data:o._data,records:d};o.trigger("refresh",m),o.trigger("change",m)}}else if(!n){let m={action:"add",parent:t,isChild:!0,isMove:s,records:r,allRecords:u,index:h};if(o.trigger("add",m),o.trigger("change",m),Object.values(s).some(p=>p)){let p={newParent:t,records:r.filter(y=>s[y.id])};o.trigger("move",p)}}}onNodeRemoveChild(t,r,i,s={isMove:!1,silent:!1,unfiltered:!1}){let n=this,{storage:o}=n,l=[],c=[],{isMove:d,silent:u,unfiltered:f}=s,h=f&&n.isFiltered,m=h&&t.unfilteredChildren?t.unfilteredChildren:r;if(n.collectDescendants(m,l,c,{inCollapsedBranch:!(t.isExpanded(n)&&t.ancestorsExpanded(n)),unfiltered:h}),!d){for(let p of r)p.unjoinStore(n);if(c.length){for(let p of c)p.stores.includes(n)&&p.unjoinStore(n),n.added.includes(p)?n.added.remove(p):n.removed.add(p);n.modified.remove(c)}}if(l.length?(i=o.indexOf(l[0]),i>-1&&(o.suspendEvents(),o.splice(i,l.length),o.resumeEvents())):i=-1,!u){let p={action:"remove",parent:t,isChild:!0,isMove:d,records:r,allRecords:c,index:i};n.trigger("remove",p),n.trigger("change",p)}}collectDescendants(t,r=[],i=[],s={inCollapsedBranch:!1,unfiltered:!1}){let n=this,{inCollapsedBranch:o,unfiltered:l}=s,c=Array.isArray(t)?t:n.getChildren(t,l);if(c)for(let d=0,u=c.length,f;d<u;d++)f=c[d],o||r.push(f),i.push(f),n.collectDescendants(f,r,i,{inCollapsedBranch:o||!f.isExpanded(n),unfiltered:l});return{visible:r,all:i}}getChildren(t,r=!1){let i=(r||this.isChained)&&t.unfilteredChildren||t.children;return i&&i.length?this.isChained?i.filter(this.chainedFilterFn):i:xu}internalToggleTreeSubRecords(t,r){let i=this,{storage:s}=i,n=s.indexOf(t),o=i.doIncludeExclude(i.getChildren(t),r);if(i.isFiltered&&r&&t.unfilteredChildren&&i.updateChildrenHiddenState(t),o.length&&n!==!1){if(s.suspendEvents(),r){s.splice(n+1,0,...o);let l={action:"add",isExpand:!0,records:o,index:n+1};i.trigger("add",l),i.trigger("change",l)}else{s.splice(n+1,o.length);let l={action:"remove",isCollapse:!0,records:o,index:n+1};i.trigger("remove",l),i.trigger("change",l)}s.resumeEvents()}}updateChildrenHiddenState(t){t.unfilteredChildren?.forEach(r=>{r.instanceMeta(this.id).hidden=!1,r.isLeaf||this.updateChildrenHiddenState(r)})}doIncludeExclude(t,r,i=[]){let s=this,n=t?.length||0;for(let o=0;o<n;o++){let l=t[o];if(!s.isChained||s.chainedFilterFn(l)){let c=l.instanceMeta(s.id);(r||!c.hidden)&&i.push(l),c.hidden=!r,l.isExpanded(s)&&s.doIncludeExclude(s.getChildren(l),r,i)}}return i}async toggleCollapse(t,r){let i=this,s=i.getById(t),n=s.instanceMeta(i);if(r===void 0&&(r=!n.collapsed),!n.isLoadingChildren&&!s.isLeaf&&s.isExpanded(i)===r){if(i.trigger("beforeToggleNode",{record:s,collapse:r}),n.collapsed=r,n.collapsed)return i.onNodeCollapse(s),!0;{i.onNodeExpand(s);let o=!0;if(!s.isLoaded){n.isLoadingChildren=!0;try{await i.loadChildren(s)}catch(l){n.collapsed=!0,o=!1,i.trigger("loadChildrenException",{record:s,exception:l})}finally{n.isLoadingChildren=!1}}return o}}}onNodeCollapse(t){if(t.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(t,!1)}onNodeExpand(t){if(t.ancestorsExpanded(this))return this.internalToggleTreeSubRecords(t,!0)}transformToTree(t){let{parentIdField:r,idField:i,childrenField:s}=this.modelClass,n=new Map,o=[];for(let l of t){let c=l[r];if(c!=null){let d=n.get(c);d===void 0&&(d=t.find(u=>u[i]===c)??null,n.set(c,d)),d&&(d[s]||(d[s]=[]),d[s].push(l))}else o.push(l)}return o}treeifyFlatData(t){let{childrenField:r,parentIdField:i}=this.modelClass,s=!1,n=!0;for(let o of t){if(o.isModel||o[r]){n=!1;break}o[i]!=null&&(s=!0)}return n&&s&&(t=this.transformToTree(t)),t}};var ri=class{static preWalk(e,t,r){let i=[e],s,n;for(;i.length;)s=i.pop(),r(s),n=t(s),n&&i.push.apply(i,n.slice().reverse())}static preWalkWithParent(e,t,r){let i=[{node:e,parent:null}];for(;i.length;){let{parent:s,node:n}=i.pop();r(s,n);let o=t(n);Array.isArray(o)&&i.push(...o.slice().reverse().map(l=>({node:l,parent:n})))}}static preWalkUnordered(e,t,r){let i=[e],s,n;for(;i.length;)s=i[i.length-1],r(s),n=t(s),n?i.splice(i.length-1,1,...n):i.length=i.length-1}static postWalk(e,t,r){let i=new Map,s=[e],n,o;for(;s.length;)n=s[s.length-1],i.has(n)?(r(n),s.pop()):(o=t(n),o&&(s=s.concat(o.slice().reverse())),i.set(n,n))}static prePostWalk(e,t,r,i){let s=new Map,n=[e],o,l;for(;n.length;)o=n[n.length-1],s.has(o)?(i(o),n.pop()):(r(o),l=t(o),l&&(n=n.concat(l.slice().reverse())),s.set(o,o))}};var pl=a=>class extends(a||S){static get $name(){return"StoreSync"}static get defaultConfig(){return{syncDataOnLoad:null}}syncDataset(t){let r=this,{storage:i}=r,{toAdd:s,toRemove:n,updated:o}=r.tree?r.syncTreeDataset(t):r.syncFlatDataset(t),{threshold:l}=r.syncDataOnLoad,c=!1;l&&(typeof l=="string"&&(l=parseInt(l,10)/100*r.count),c=s.length+n.length+o.length>l),r.tree?(s.length&&r.add(s,c).forEach(f=>f.clearParentId()),r.remove(n,c)):(c&&r.suspendEvents(),r.remove(n),r.add(s),c&&r.resumeEvents()),l&&!c&&o.forEach(({record:u,toSet:f,wasSet:h})=>r.onModelChange(u,f,h)),r.acceptChanges();let d={added:s,removed:n,updated:o,thresholdSurpassed:c};c&&this.trigger("refresh",{action:"batch",data:t,records:i.values,syncInfo:d}),r.isFiltered&&r.filter(),r.isGrouped?r.group():r.isSorted&&r.sort(),r.trigger("loadSync",d)}syncFlatDataset(t){if(!t)return;let r=this,i=r.modelClass.idField,s=[],n=[],o=[],l={},{threshold:c}=r.syncDataOnLoad,d=0;return t.forEach(u=>{u=u.isModel?u.data:u;let f=u[i],h=r.getById(f);if(h){let m=h.set(u,null,Boolean(c));m&&o.push({record:h,wasSet:m,toSet:u}),d++}else n.push(r.processRecord(r.createRecord(u)));l[f]=1}),d<r.allCount&&r.forEach(u=>{l[u.id]||s.push(u)}),{toAdd:n,toRemove:s,updated:o}}syncTreeDataset(t){if(!t)return;let r=this,{idField:i,parentIdField:s,childrenField:n}=r.modelClass,o=[],l=[],c=[],d={};r.transformFlatData&&(t=r.treeifyFlatData(t));let{threshold:u}=r.syncDataOnLoad;return ri.preWalkWithParent({isRoot:!0,children:t},f=>f.children,(f,h)=>{if(f){let m=h[i],p=r.getById(m);if(p){let y,C=p.children;C!==!0&&h[n]===!0&&(p.clearChildren(),p.data[n]=p.children=!0,delete h[n],r.toggleCollapse(p,!0),y=!0);let w=p.set(h,null,Boolean(u));w?c.push({record:p,wasSet:w,toSet:h}):y&&p.signalNodeChanged({[n]:{value:!0,oldValue:C}})}else h[s]=f[i],l.push({...h,...Array.isArray(h[n])?{children:[]}:void 0});d[m]=1}}),r.traverse(f=>{d[f.id]||o.push(f)}),{toAdd:l,toRemove:o,updated:c}}};var yl=Symbol("STM_PROP"),bl=a=>class extends(a||S){static get $name(){return"StoreStm"}static get defaultConfig(){return{stm:null}}get stm(){return this[yl]}set stm(t){let r=this;r.stm!=t&&(r.stm&&r.stm.hasStore(r)&&r.stm.removeStore(r),r[yl]=t,r.stm&&!r.stm.hasStore(r)&&r.stm.addStore(r))}add(t,r=!1){let i,s=this.stm;return!this.tree&&s&&!s.disabled?(i=super.add(t,r),i&&i.length&&s.onStoreModelAdd(this,i,r)):i=super.add(t,r),i}insert(t,r,i=!1){let s,n=this.stm;if(!this.tree&&n&&!n.disabled){let o=(Array.isArray(r)?r:[r]).reduce((l,c)=>{let d=c instanceof K?this.indexOf(c):void 0;return d!==void 0&&d!==-1&&l.set(c,d),l},new Map);s=super.insert(t,r),s&&s.length&&(t=this.indexOf(s[0]),n.onStoreModelInsert(this,t,s,o,i))}else s=super.insert(t,r,i);return s}remove(t,r=!1,i){let s,n=this.stm;if(!this.tree&&n&&!n.disabled){let l=(Array.isArray(t)?t:[t]).map(c=>this.getById(c)).filter(c=>!!c).reduce((c,d)=>{let u=this.indexOf(d);return u!==void 0&&u!=-1&&c.set(d,u),c},new Map);s=super.remove(t,r,i),s&&s.length&&n.onStoreModelRemove(this,s,l,r)}else s=super.remove(t,r,i);return s}removeAll(t){let r=this.stm,i;if(r&&!r.disabled){let{tree:s,rootNode:n,allRecords:o}=this,l=o.length,c=s?n.children.slice():o.slice();i=super.removeAll(t),l&&this.count===0&&r.onStoreRemoveAll(this,c,t)}else i=super.removeAll(t);return i}};var Y=class extends S.mixin(ft,re,ei,ti,sl,il,ll,al,dl,ul,nl,hl,ml,gl,bl,pl,ol){static get $name(){return"Store"}static get properties(){return{relationCache:{},dependentStoreConfigs:new Map}}static get configurable(){return{id:!0,modelClass:K}}static get defaultConfig(){return{fields:null,autoTree:!0,data:null,tree:!1,callOnFunctions:!0,storage:null,useRawData:!1,allowNoId:!0,preventSubClassingModel:null}}static get identifiable(){return{registerGeneratedId:!1}}constructor(...e){super(...e);if(this.objectify)return this.initProxy()}construct(e={}){let t=this;Object.assign(t,{added:new Gt,removed:new Gt,modified:new Gt,idRegister:{},internalIdRegister:{}}),e.storeId&&(e=b.assign({id:e.storeId},e)),super.construct(e),t.initRelations()}static from(e,t={},r=null){return e&&!e.isStore&&(typeof e=="string"?e=Y.getStore(e):(Array.isArray(e)&&(r&&(e=e.map(i=>i.isModel?i:r(i))),e=b.assign({},t,{data:e})),e=new Y(e))),e}doDestroy(){let e=this,t=e.registeredRecords;for(let r=t.length-1,i;r>=0;r--)i=t[r],i?.isDestroyed||i.unjoinStore(e);e._storage?.destroy(),e.stm?.removeStore?.(e),e.isChained||e.rootNode?.destroy(),super.doDestroy()}beginBatch(){this.suspendEvents()}endBatch(){this.resumeEvents()&&this.trigger("refresh",{action:"batch",data:this.storage.values,records:this.storage.values})}set storage(e){let t=this;e?.isCollection?t._storage=e:t._storage=new Re(e),t._storage.autoFilter=t.reapplyFilterOnAdd,t._storage.autoSort=t.reapplySortersOnAdd;for(let r of t._storage)r.joinStore(t);t._storage.on({change:"onDataChange",thisObj:t})}get storage(){return this._storage||(this.storage={}),this._storage}get allRecords(){let e=this;if(e.isTree){let t=e.collectDescendants(e.rootNode,void 0,void 0,{unfiltered:!0}).all;return e.rootVisible&&t.unshift(e.rootNode),t}else return e.isGrouped?e.collectGroupRecords():e.storage.allValues}onIsCreatingToggle(e,t){let r=this,i=e.isPersistable&&!t;r.added[i?"add":"remove"](e),i&&(r.trigger("addConfirmed",{record:e}),r.autoCommit&&r.doAutoCommit())}joinRecordsToStore(e){e.forEach(t=>{t.joinStore(this)})}onDataChange({source:e,action:t,added:r,removed:i,replaced:s,oldCount:n,items:o,from:l,to:c}){let d=this,u=r?.length,f=i?.length,h,m;if(d._idMap=null,u&&d.joinRecordsToStore(r),s?.forEach(([p,y])=>{p.unjoinStore(d,!0),y.joinStore(d)}),super.onDataChange(...arguments),!d.isTree){if(u){for(let p of r)d.removed.includes(p)?d.removed.remove(p):d.added.add(p);h=!d.remoteFilter&&d.filtered&&d.reapplyFilterOnAdd,h&&d.filter({silent:!0}),m=!d.sortParamName&&d.isSorted&&d.reapplySortersOnAdd,m&&d.sort(null,null,!1,!0)}if(f){for(let p of i)p.cancelBatch(),p.unjoinStore(d),d.added.includes(p)?d.added.remove(p):!p._undoingInsertion&&!p.meta.isCreating&&d.removed.add(p);d.modified.remove(i),h=!d.remoteFilter&&d.filtered,h&&d.filter({silent:!0})}}switch(t){case"clear":d.relationCache={},d.updateDependentStores("removeall"),d.trigger("removeAll"),d.trigger("change",{action:"removeall"});break;case"splice":if(u){d.updateDependentStores("add",r);let p=r.reduce((w,T)=>{let{previousIndex:R}=T.meta;return R>-1&&R<w&&(w=R),w},r[0].meta.previousIndex),y=e.indexOf(r[0],!e.autoFilter),C={records:r,index:y};p>-1&&(C.oldIndex=p),d.trigger("add",C),d.trigger("change",Object.assign({action:"add"},C)),h&&d.triggerFilterEvent({action:"filter",filters:d.filters,oldCount:n,records:d.storage.allValues}),m&&d.trigger("sort",{action:"sort",sorters:d.sorters,records:d.storage.allValues})}i.length&&(d.updateDependentStores("remove",i),d.trigger("remove",{records:i}),d.trigger("change",{action:"remove",records:i})),s.length&&(d.trigger("replace",{records:s,all:d.records.length===s.length}),d.trigger("change",{action:"replace",replaced:s,all:d.records.length===s.length}));break;case"filter":(d.isGrouped||d.isSorted)&&d.performSort(!0);break;case"move":for(let p=d.storage.allValues,y=Math.min(l,c);y<=Math.max(l,c);y++)p[y].setData("parentIndex",y);d.trigger("move",{record:o[0],records:o,from:l,to:c}),d.isFiltered&&d.performFilter(),d.trigger("change",{action:t,record:o[0],records:o,from:l,to:c});break}}onDataReplaced(e,t){let r=this,i=r.storage.allValues;for(let n=0;n<i.length;n++)i[n].joinStore(r);if(r.prepareGroupRecords(),!r.remoteFilter&&r.isFiltered&&r.filter({silent:!0}),r.isGrouped&&r.group(null,null,!1,!r.sorters.length,!0),!r.sortParamName&&r.sorters.length&&r.sort(null,null,!1,!0),!r.useRawData.disableDuplicateIdCheck){let n=r.idMap;if(Object.keys(n).length<r.storage.values.length){let o=[];throw r.storage.values.forEach(l=>n[l.id]?delete n[l.id]:o.push(l)),new Error(`Id collision on ${o.map(l=>l.id)}`)}}let s={action:e,data:t,records:r.storage.values};r.updateDependentStores(e,s.records),r.afterLoadData?.(),r.trigger("refresh",s),r.trigger("change",s)}onModelChange(e,t,r,i,s){let n=this,o=e.constructor.idField,l={record:e,records:[e],changes:r,batch:e.batching!=null,fromRelationUpdate:s},c=e.ignoreBag?!1:n.updateModifiedBagForRecord(e);if(n.storage.onItemMutation(e,r),!i){if(o in r){let{oldValue:d,value:u}=t[o];n.updateDependentRecordIds(d,u),n.onRecordIdChange({record:e,oldValue:d,value:u}),n.trigger("idChange",{store:n,record:e,oldValue:d,value:u})}n.onUpdateRecord(e,r),n.trigger("update",l),n.trigger("change",Object.assign({action:"update"},l))}n.autoCommit&&c&&n.doAutoCommit()}updateModifiedBagForRecord(e){let t=this,r=!1;return e.isModified?!t.modified.includes(e)&&!t.added.includes(e)&&e.isPartOfStore(t)&&!e.isAutoRoot&&(e.isPhantom?t.added.add(e):t.modified.add(e),r=!0):t.modified.remove(e),r}get idMap(){let e=this,t=e.storage.values,r=!e._idMap,i=e._idMap||(e._idMap={});if(r)for(let s,n=0,o=0;n<t.length;n++)s=t[n],i[s.id]={index:n,visibleIndex:o,record:s},s.isSpecialRow||o++;return i}changeModelClass(e){let t=this.fields,r=null;return t?.length?r=class extends e{static get fields(){return t}}:this.preventSubClassingModel?r=e:r=class extends e{},r.initClass(),r}set storeId(e){this.id=e}get storeId(){return this.id}changeId(e,t){return super.changeId(e!==!0&&e,t)}updateId(e,t){let r=Y.getById(e);r&&Y.unregisterInstance(r),super.updateId(e,t)}generateAutoId(){return Y.generateId("store-")}get tree(){return this._tree}set tree(e){this._tree=e,e&&!this.rootNode&&(this.rootNode=this.buildRootNode(),this.rootNode.isAutoRoot=!0)}buildRootNode(){return{}}static getStore(e,t){if(e instanceof Y)return e;if(this.getById(e))return this.getById(e);if(Array.isArray(e)){let r,i=e.map(s=>(s instanceof K?r=s.constructor:typeof s=="string"&&(s={text:s}),s));e={autoCreated:!0,data:i,modelClass:r||class extends K{},allowNoId:!0},t||(t=Y)}if(t)return new t(e)}static get stores(){return Y.registeredInstances}get rootNode(){return this.masterStore?this.masterStore.rootNode:this._rootNode}set rootNode(e){let t=this,r=t._rootNode;e!==r&&(r&&t.clear(!0),e instanceof K?(e.instanceMeta(t).collapsed=!1,t._rootNode=e):t._rootNode=e=new t.modelClass(Object.assign({expanded:!0,[t.modelClass.idField]:`${t.id}-rootNode`},e),t,null,!0),t._tree=!0,e.isRoot=!0,e.joinStore(t),(e.children?.length||t.rootVisible)&&(e.isLoading=!0,t.onNodeAddChild(e,e.children||[],0),e.isLoading=!1),t.trigger("rootChange",{oldRoot:r,rootNode:e}))}set data(e){this.setStoreData(e)}setStoreData(e){let t=this,{idField:r,childrenField:i}=t.modelClass;if(t.getConfig("plugins"),t.processConfiguredListeners(),e&&!Array.isArray(e)&&(e=b.transformNamedObjectToArray(e,r)),t.tree=!t.isChained&&(t.tree||Boolean(t.autoTree&&e?.some(s=>s[i]))),!t.syncDataOnLoad||!t._data){if(t._data=e,t.tree){t.transformFlatData&&(e=t.treeifyFlatData(e));let s=t.rootNode;if(s.isLoading=!0,t.clear(!0),s.appendChild(e),t.updateDependentStores("dataset",[s]),s.isLoading=!1,e.length===0){let n={action:"dataset",data:[],records:[]};t.trigger("refresh",n),t.trigger("change",n)}else t.isFiltered&&t.filter()}else t.loadData(e);t.added.clear(),t.removed.clear(),t.modified.clear()}else t.syncDataset(e)}loadData(e,t="dataset"){let r=this,{storage:i,allowNoId:s}=r,n=r.modelClass.fieldMap.id.dataSource;if(r.removeHeadersAndFooters(r.storage.values),r._idMap=null,e){if(!(e[0]instanceof K)){r.modelClass.exposeProperties(e[0]);let l=e.length,c=new Array(l);for(let d=0;d<l;d++){let u=e[d];if(!s&&u[n]==null)throw new Error(`Id required but not found on row ${d}`);c[d]=r.processRecord(r.createRecord(u,!0),!0),c[d].setData("parentIndex",d)}r.clear(!0),i.replaceValues({values:c,isNewDataset:!0,silent:!0})}else r.clear(!0),i.replaceValues({values:e.slice(),isNewDataset:!0,silent:!0});r.onDataReplaced(t,e)}else r.clear(!0),r._data=null}get data(){return this._data}getRange(e,t,r=!0){return(r?this.storage.allValues:this.storage.values).slice(e,t)}createRecord(e,t=!1){return new this.modelClass(e,this,null,t)}processRecord(e,t=!1){return e}refreshData(){this.filter(),this.sort()}onRecordIdChange({record:e,oldValue:t,value:r}){let i=this,s=i._idMap,{idRegister:n}=i;i.storage._indicesInvalid=!0,s&&(delete s[t],s[r]=e),i.added.changeId(t,r),i.removed.changeId(t,r),i.modified.changeId(t,r),delete n[t],n[r]=e,e.index=i.storage.indexOf(e)}onUpdateRecord(e,t){let{internalId:r}=t,{internalIdRegister:i}=this;r&&(this.storage._indicesInvalid=!0,delete i[r.oldValue],i[r.value]=e),this.reapplyFilterOnUpdate&&this.isFiltered&&this.filter()}get useRawData(){return this._useRawData}set useRawData(e){e===!0?this._useRawData={enabled:!0,disableDuplicateIdCheck:!0,disableTypeConversion:!0,disableDefaultValue:!1}:this._useRawData=e?Object.assign(e,{enabled:!0}):{enabled:!1}}getCount(e=!0){return e?this.count:this.originalCount}get originalCount(){return this.storage.totalCount-(this.groupRecords?.length||0)}get count(){return this.storage.count}get allCount(){return this.isTree?this.rootNode.descendantCount:this.storage.totalCount}get records(){return this.storage.values}get first(){return this.storage.values[0]}get last(){return this.storage.values[this.storage.values.length-1]}getAt(e,t=!1){return this.storage.getAt(e,t)}register(e){let t=this,r=t.isTree&&t.idRegister[e.id];if(r&&r!==e)throw new Error(`Id collision on ${e.id}`);t.idRegister[e.id]=e,t.internalIdRegister[e.internalId]=e}unregister(e){delete this.idRegister[e.id],delete this.internalIdRegister[e.internalId]}get registeredRecords(){return Object.values(this.idRegister)}getById(e){return e?.isModel?e:this.idRegister[e]}isAvailable(e){let t=this.getById(e);return t&&this.storage.includes(t)||!1}getByInternalId(e){return this.internalIdRegister[e]}includes(e){return this.isTree?this.idRegister[K.asId(e)]!=null:this.indexOf(e)>-1}indexOf(e,t=!1){if(e?.isModel&&!e.stores.includes(this.$store||this))return-1;let r=K.asId(e);if(r==null)return-1;if(this.isTree)return this.storage.indexOf(r);let i=this.idMap[r];return i?i[t?"visibleIndex":"index"]:-1}allIndexOf(e){if(this.isTree){let t=this.getById(e),r=-1;return t&&t.bubble(i=>{i.parent?r+=i.parentIndex+1:i===this.rootNode&&this.rootVisible&&(r+=1)}),r}else return this.storage.indexOf(e,!0)}getDistinctValues(e,t=!1){let r=this,i=[],s={},n;return r.forEach(o=>{if(!o.isSpecialRow&&!o.isRoot){n=o.get(e);let l=n instanceof Date?n.getTime():n;s[l]||(i.push(n),s[l]=1)}},r,t),i}getValueCount(e,t){let r=0;return this.forEach(i=>{b.isEqual(i.get(e),t)&&r++}),r}set json(e){typeof e=="string"&&(e=M.safeJsonParse(e)),this.data=e}get json(){return M.safeJsonStringify(this)}get formattedJSON(){return M.safeJsonStringify(this,null,4)}toJSON(){return(this.isTree?this.rootNode.children||[]:this).map(e=>e.toJSON())}forEach(e,t=this,r){r=r===void 0?!1:r,typeof r=="boolean"&&(r={includeFilteredOutRecords:r,includeCollapsedGroupRecords:!1});let i=(s,n)=>{if(!s.isRoot&&!s.isSpecialRow)return e.call(t,s,n)};if(this.isTree)this.rootNode.traverseWhile(i,!1,r.includeFilteredOutRecords);else{let s=r.includeFilteredOutRecords?this.storage.allValues:this.storage.values;if(this.isGrouped&&r.includeCollapsedGroupRecords)for(let n=0;n<s.length;n++){let o=s[n];if(o.groupChildren&&o.meta.collapsed===!0)for(let l=0;l<o.groupChildren.length;l++){let c=o.groupChildren[l];if(i(c,l)===!1)return}else if(i(o,n)===!1)return}else for(let n=0;n<s.length;n++)if(i(s[n],n)===!1)return}}map(e,t=this){return this.storage.values.map(e,t)}reduce(e,t=[],r=this){return r!==this&&(e=e.bind(r)),this.storage.values.reduce(e,t,r)}[Symbol.iterator](){return this.storage.values[Symbol.iterator]()}traverse(e,t=this.rootNode,r=t===this.rootNode,i){i=i===void 0?!1:i,typeof i=="boolean"&&(i={includeFilteredOutRecords:i,includeCollapsedGroupRecords:!1});let s=this;if(s.isTree){if(typeof t=="boolean"&&(r=t,t=s.rootNode),s.isChained){let n=e;e=o=>{s.chainedFilterFn(o)&&n(o)}}t.traverse(e,r,i.includeFilteredOutRecords)}else s.forEach(n=>n.traverse(e,!1,i.includeFilteredOutRecords),s,i)}traverseWhile(e,t=this.rootNode,r=t===this.rootNode){let i=this;if(i.isTree){if(typeof t=="boolean"&&(r=t,t=i.rootNode),i.isChained){let s=e;e=n=>{i.chainedFilterFn(n)&&s(n)}}t.traverseWhile(e,r)}else for(let s of i.storage)if(s.traverse(e)===!1)break}getNext(e,t=!1,r=!1){let i=this,s=i.storage.values,n=i.indexOf(e);if(n>=s.length-1)if(t)n=-1;else return null;let o=s[n+1];return r&&o&&o.isSpecialRow?i.getNext(s[n+1],t,!0):o}getPrev(e,t=!1,r=!1){let i=this,s=i.storage.values,n=i.indexOf(e);if(n===0)if(t)n=s.length;else return null;let o=s[n-1];return r&&o&&o.isSpecialRow&&n>0?i.getPrev(s[n-1],t,!0):o}getAdjacent(e,t=!0,r=!1,i=!1){return t?this.getNext(e,r,i):this.getPrev(e,r,i)}getNextLeaf(e,t=!1){let r=this,i=r.leaves,s=r.getById(e),n=i.indexOf(s);if(n>=i.length-1)if(t)n=-1;else return null;return i[n+1]}getPrevLeaf(e,t=!1){let r=this,i=r.leaves,s=r.getById(e),n=i.indexOf(s);if(n===0)if(t)n=i.length;else return null;return i[n-1]}getAdjacentLeaf(e,t=!0,r=!1){return t?this.getNextLeaf(e,r):this.getPrevLeaf(e,r)}};Y.initClass();var Eu=(a,e)=>(Array.isArray(e[1])?e[1].forEach(t=>a.push(encodeURIComponent(e[0])+"="+encodeURIComponent(t))):a.push(encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])),a),ii=Promise.resolve(),gt=class extends Y{static get defaultConfig(){return{headers:null,fetchOptions:null,sendAsFormData:!1,writeAllFields:null,parentIdParamName:"id",responseSuccessProperty:"success",responseDataProperty:"data",responseTotalProperty:"total",filterParamName:null,restfulFilter:!1,sortParamName:null,pageParamName:null,pageStartParamName:null,pageSizeParamName:"pageSize",pageSize:50,useRestfulMethods:!1,httpMethods:{create:"POST",read:"GET",update:"PUT",delete:"DELETE"}}}static get configurable(){return{params:null}}afterConstruct(e){super.afterConstruct(e),this.autoLoad&&this.load().catch(()=>{})}get isLoading(){return this._isLoading}get isCommitting(){return Boolean(this.commitPromise)}set pageParamName(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageStartParamName)throw new Error("Configs pageStartParamName and pageParamName are mutually exclusive");this._pageParamName=e}get pageParamName(){return this._pageParamName}set pageStartParamName(e){if(this.tree)throw new Error("Paging cannot be supported for tree stores");if(this.pageParamName)throw new Error("Configs pageParamName and pageStartParamName are mutually exclusive");this._pageStartParamName=e}get pageStartParamName(){return this._pageStartParamName}get isPaged(){return this.pageParamName||this.pageStartParamName}get allCount(){return"remoteTotal"in this?this.remoteTotal:super.allCount}get lastPage(){if(this.isPaged)return Math.floor((this.allCount+this.pageSize-1)/this.pageSize)}buildQueryString(e,...t){let r=e.includes("?"),i=Object.entries(Object.assign({},...t)).reduce(Eu,[]).join("&");return i?(r?"&":"?")+i:""}performSort(e){let t=this;if(t.sortParamName){let{groupRecords:r}=t,i={};return t.isGrouped&&r?.length&&r.forEach(s=>{s.meta.collapsed&&(t.includeGroupRecords(s),i[s.id]=!0)}),t.internalLoad({},"",s=>{t.data=s.data,t.afterPerformSort(e,i)})}else super.performSort(e)}performFilter(e){let t=this;if(t.remoteFilter){let r=t.count,{filters:i}=t;return t.currentPage=1,t.internalLoad({},"",s=>{t.data=s.data,t.afterPerformFilter(e?null:{action:"filter",filters:i,oldCount:r,records:t.storage.values})})}else super.performFilter(e)}encodeFilterParams(e){let t=[];for(let{property:r,operator:i,value:s,caseSensitive:n}of e)t.push({field:r,operator:i,value:s,caseSensitive:n});return JSON.stringify(t)}encodeSorterParams(e){return JSON.stringify(e.filter(t=>!t.sortFn).map(t=>t))}buildReadUrl(){let{readUrl:e}=this;return this.restfulFilter&&this.filters.count?(e.endsWith("/")?e:e+"/")+this.filters.first.value:e}internalLoad(e,t,r){let i=this,s=b.assign({},i.params,e),n=i.buildReadUrl(),o={action:"read"+t,params:s,url:n};return n?new Promise((l,c)=>{if(i.trigger("beforeLoad"+t,o)===!1)return c(!1);if(i._isLoading=!0,i.trigger(`load${t}Start`,o),i.trigger("beforeRequest",o),i.filterParamName&&i.isFiltered&&(s[i.filterParamName]=i.encodeFilterParams(i.filters.values)),i.sortParamName&&i.isSorted&&(s[i.sortParamName]=i.encodeSorterParams(i.groupers?i.groupers.concat(i.sorters):i.sorters)),i.isPaged){if(!(i.pageParamName in s||i.pageStartParamName in s)){let u=Math.min(i.currentPage||1,i.allCount?i.lastPage:1/0);i.pageParamName?s[i.pageParamName]=u:s[i.pageStartParamName]=(u-1)*i.pageSize}s[i.pageSizeParamName]=i.pageSize}let d={headers:i.headers,parseJson:!0};i.useRestfulMethods&&(d.method=i.httpMethods.read),ue.get(o.url+i.buildQueryString(o.url,s),b.assign(d,i.fetchOptions)).then(async u=>{let f=u.parsedJson,h=Array.isArray(f),m=h||f&&b.getPath(f,i.responseSuccessProperty)!==!1,p=h?null:b.getPath(f,i.responseTotalProperty);if(i._isLoading=!1,o.response=u,o.json=f,m){if(p!=null&&(i.remoteTotal=parseInt(p,10)),i.isPaged)if(i.remoteTotal>=0){let y=i.pageParamName?s[i.pageParamName]:s[i.pageStartParamName]/i.pageSize+1;i.currentPage=Math.min(y,i.lastPage)}else throw new Error("A paged store must receive its responseTotalProperty in each data packet");o.data=h?f:b.getPath(f,i.responseDataProperty),await r(o),i.trigger("load"+t,o),l(o)}else o.exception=!0,o.exceptionType="server",i.trigger("exception",o),c(o);i.trigger("afterRequest",o)}).catch(u=>{i._isLoading=!1,o.exception=!0,u instanceof Response?(o.exceptionType=u.ok?"server":"network",o.response=u,o.error=u.error):(o.exceptionType="server",o.error=u),i.trigger("exception",o),c(o),i.trigger("afterRequest",o)})}):null}async load(e){let t=this;return t.isPaged?t.loadPage(t.currentPage||1,e):t.internalLoad(e,"",r=>{t.data=r.data})}async loadChildren(e){return this.internalLoad({[this.parentIdParamName]:e.id},"Children",t=>{t.parentRecord=e,e.children.length&&e.clearChildren(!0),e.data[e.constructor.childrenField]=t.data,e.processChildren(e.stores)})}async loadPage(e,t){this.allCount&&(e=Math.min(e,this.lastPage));let r=this,i=r.pageParamName?{[r.pageParamName]:e}:{[r.pageStartParamName]:(e-1)*r.pageSize};return i[r.pageSizeParamName]=r.pageSize,r.internalLoad(b.assign(i,t),"Page",s=>{r.loadData(s.data,"pageLoad")})}async nextPage(e){return this.isPaged&&this.currentPage!==this.lastPage?this.loadPage(this.currentPage+1,e):ii}async previousPage(e){return this.isPaged&&this.currentPage!==1?this.loadPage(this.currentPage-1,e):ii}async commit(){let e=this,{changes:t}=e,r=[];if(e.commitPromise)return!1;if(!t)return e.modified.count&&(e.modified.forEach(i=>i.clearChanges(!1)),e.modified.clear()),ii;if(e.trigger("beforeCommit",{changes:t})!==!1){[...t.added,...t.modified,...t.removed].forEach(n=>n.meta.committing=!0),e.trigger("commitStart",{changes:t});let i={action:"commit",exception:!1,changes:t},s=e.commitRemoved(i);return s&&r.push(s),s=e.commitAdded(i),s&&r.push(s),s=e.commitModified(i),s&&r.push(s),r.length?(s=r.length===1?r[0]:Promise.all(r),e.commitPromise=new Promise((n,o)=>{s.then(()=>{e.commitPromise=null,i.exception?(e.trigger("exception",i),o(i)):(e.trigger("commit",{changes:t}),n(i))}).catch(()=>{e.commitPromise=null,o(i)})})):(e.modified.forEach(n=>n.clearChanges(!1)),e.modified.clear(),e.added.forEach(n=>n.clearChanges(!1)),e.added.clear(),e.removed.clear(),e.trigger("commit",{changes:t}),ii)}}doAutoCommit(){this.suspendCount<=0&&this.commit().catch(e=>{let{response:t}=e;if(!(t&&(t.ok&&t.parsedJson||[500,404].includes(t.status))))throw e})}commitAdded(e){let t=this,r=t.added,i={action:"create",params:t.params};return r.count&&t.createUrl?new Promise(s=>{let n=r.values.map(c=>c.persistableData);e.create=i;let o=i.body={data:n};if(t.trigger("beforeRequest",i),t.sendAsFormData){let c=new FormData;c.append("data",JSON.stringify(n)),o=c}let l={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(l.method=t.httpMethods.create),ue.post(t.createUrl+t.buildQueryString(t.createUrl,t.params),o,b.assign(l,t.fetchOptions)).then(c=>{let d=c.parsedJson,u=Array.isArray(d),f=u||d&&d.success!==!1;e.response=c,i.json=d,i.response=c,f?(t.processReturnedData(r.values,u?d:d[t.responseDataProperty]),r.clear(),t.trigger("commitAdded"),t.trigger("refresh",i),s(e)):(r.forEach(h=>h.meta.committing=!1),e.exception=i.exception=!0,e.exceptionType=i.exceptionType="server",t.trigger("exception",i),s(e)),t.trigger("afterRequest",i)}).catch(c=>{r.forEach(d=>d.meta.committing=!1),e.exception=i.exception=!0,c instanceof Response?(e.response=c,i.exceptionType=c.ok?"server":"network",i.response=c,i.error=c.error):(i.exceptionType="server",i.error=c),t.trigger("exception",i),s(e),t.trigger("afterRequest",i)})}):null}commitModified(e){let t=this,{modified:r}=t.changes,i={action:"update",params:t.params},s=r.length&&t.updateUrl?new Promise(n=>{let o=r.map(d=>t.writeAllFields?d.persistableData:d.modificationDataToWrite).filter(d=>!b.isEmpty(d));if(o.length===0){t.modified.clear(),r.forEach(d=>d.meta.committing=!1),n();return}e.update=i;let l=i.body={data:o};if(t.trigger("beforeRequest",i),t.sendAsFormData){let d=new FormData;d.append("data",JSON.stringify(o)),l=d}let c={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(c.method=t.httpMethods.update),ue.post(t.updateUrl+t.buildQueryString(t.updateUrl,t.params),l,b.assign(c,t.fetchOptions)).then(d=>{let u=d.parsedJson,f=Array.isArray(u),h=f||u&&u.success!==!1;e.response=d,i.json=u,i.response=d,h?(t.processReturnedData(r,f?u:u[t.responseDataProperty],!0),t.modified.clear(),t.trigger("commitModified"),t.trigger("refresh",i),n(e)):(r.forEach(m=>m.meta.committing=!1),e.exception=i.exception=!0,i.exceptionType="server",t.trigger("exception",i),n(e)),t.trigger("afterRequest",i)}).catch(d=>{r.forEach(u=>u.meta.committing=!1),e.exception=i.exception=!0,d instanceof Response?(e.response=d,i.exceptionType=d.ok?"server":"network",i.response=d,i.error=d.error):(i.exceptionType="server",i.error=d),t.trigger("exception",i),n(e),t.trigger("afterRequest",i)})}):null;return!r.length&&t.modified.count&&t.modified.clear(),s}processReturnedData(e,t,r=!1){let i=this,s=i.modelClass,n=s.fieldMap.id.dataSource;t.forEach((o,l)=>{let c=e[l];c.clearChanges(!1),c.syncId(o[n]),Object.assign(e[l].data,s.processData(o,r))})}commitRemoved(e){let t=this,r=t.removed,i={action:"delete",params:t.params};return r.count&&t.deleteUrl?new Promise(s=>{e.delete=i;let n=i.body={ids:r.map(l=>l.id)};if(t.trigger("beforeRequest",i),t.sendAsFormData){let l=new FormData;l.append("id",JSON.stringify(n.ids)),n=l}let o={headers:t.headers,parseJson:!0};t.useRestfulMethods&&(o.method=t.httpMethods.delete),ue.post(t.deleteUrl+t.buildQueryString(t.deleteUrl,t.params),n,b.assign(o,t.fetchOptions)).then(l=>{let c=l.parsedJson,d=Array.isArray(c),u=d||c&&c.success!==!1;e.response=l,i.json=c,i.response=l,u?(r.forEach(f=>f.meta.committing=!1),r.clear(),t.trigger("commitRemoved"),t.trigger("refresh",i),s(e)):(r.forEach(f=>f.meta.committing=!1),e.exception=i.exception=!0,i.exceptionType="server",t.trigger("exception",i),s(e)),t.trigger("afterRequest",i)}).catch(l=>{r.forEach(c=>c.meta.committing=!1),e.exception=i.exception=!0,l instanceof Response?(e.response=l,i.exceptionType=l.ok?"server":"network",i.response=l,i.error=l.error):(i.exceptionType="server",i.error=l),t.trigger("exception",i),s(e),t.trigger("afterRequest",i)})}):null}get remoteFilter(){return Boolean(this.filterParamName||this.restfulFilter)}};var ye=class{static get(e,t){let r=e._domData||(e._domData={});return t!=null?r[t]:r}static remove(e,t){let{_domData:r}=e,i=r?.[t];return delete r?.[t],i}static set(e,t,r){arguments.length===3?(e._domData||(e._domData={}))[t]=r:e._domData=t}static assign(e,t){Object.assign(e._domData||(e._domData={}),t)}};var si=class extends we(S){static get configurable(){return{element:null,zoneWidth:50,scrollSpeed:5,direction:"both",startScrollDelay:500,stopScrollWhenPointerOut:!1,testConfig:{scrollSpeed:2,startScrollDelay:0},activeScroll:{$config:["lazy"],value:{}},monitoring:{$config:["lazy","nullify"],value:!0}}}changeMonitoring(e,t){return t?.clear(),new Map}doDestroy(){this.stopMonitoring(),super.doDestroy()}get isScrolling(){return Object.keys(this.activeScroll).length!==0}startMonitoring(e={}){let t=this,{element:r,direction:i}=t,{scrollables:s=[],direction:n=i,callback:o}=e,l=[];return e.element&&(z.deprecate("core","5.0.0","`element` config is deprecated, please use `scrollables` instead."),s.push({element:e.element})),s.length||s.push({element:r}),s.forEach(c=>{let d=c.element;typeof d=="string"?g.forEachSelector(r,d,u=>{t.createMonitor(u,c.direction||n,c.callback||o),l.push(u)}):(t.createMonitor(d,c.direction||n,c.callback||o),l.push(d))}),function(){t.stopMonitoring?.(l)}}createMonitor(e,t,r){let{monitoring:i}=this;i.has(e)||i.set(e,new Cl({scrollManager:this,element:e,direction:t,callback:r}))}stopMonitoring(e){let t=this,{monitoring:r}=t;if(e&&!Array.isArray(e)&&(e=[e]),r){if(!e){r.forEach(i=>t.stopMonitoring(i.element));return}e.forEach(i=>{let s=r.get(i);s&&(s.destroy(),r.delete(i))})}}requestScroll(e,t){let{activeScroll:r}=this;return e in r&&r[e]!==t?!1:(r[e]=t,!0)}releaseScroll(e){let{activeScroll:t={}}=this;Object.keys(t).forEach(r=>{t[r]===e&&delete t[r]})}getRelativeScroll(e,t="left"){let r=0;return this.monitoring.forEach((i,s)=>{g.isDescendant(s,e)&&(r+=t==="left"?i.scrollRelativeLeft:i.scrollRelativeTop)}),r}},Cl=class extends S{construct(e){let t=this,{element:r}=e,i=r.scrollLeft,s=r.scrollTop;Object.assign(e,{startScrollLeft:i,startScrollTop:s}),super.construct(e),O.on({element:r,scroll:"onElementScroll",mousemove:"onMouseMove",touchmove:"onMouseMove",capture:!0,thisObj:t}),O.on({element:r,pointerleave:"onPointerLeave",thisObj:t})}doDestroy(){this.stopScroll(),super.doDestroy()}startScroll(){this.scrolling=!0,this.performScroll()}stopScroll(){let e=this;e.scrolling=!1,e.scrollRequested&&(e.scrollManager.cancelAnimationFrame(e.frameId),e.scrollRequested=!1),e.scrollManager.clearTimeout(e.scrollTimeout),e.scrollManager.releaseScroll(e),e.scrollTimeout=null}onPointerLeave(){this.scrollManager.stopScrollWhenPointerOut&&this.stopScroll()}onMouseMove(e){let t=this,{scrollManager:r}=t,i=t.element.getBoundingClientRect(),s=r.zoneWidth,n=r.scrollSpeed;if(t.scrollDeltaX=t.scrollDeltaY=0,t.direction!=="vertical"){let{scrollLeft:o,scrollWidth:l,clientWidth:c}=t.element;e.clientX>i.right-s&&l-o-c>=1?t.scrollDeltaX=Math.round((s-(i.right-e.clientX))/n)+1:e.clientX<i.left+s&&o>0&&(t.scrollDeltaX=-Math.round((s+(i.left-e.clientX))/n)-1)}if(t.direction!=="horizontal"){let{scrollTop:o,scrollHeight:l,clientHeight:c}=t.element;e.clientY>i.bottom-s&&l-o-c>=1?t.scrollDeltaY=Math.round((s-(i.bottom-e.clientY))/n)+1:e.clientY<i.top+s&&o>0&&(t.scrollDeltaY=-Math.round((s+(i.top-e.clientY))/n)-1)}t.scrollDeltaX!==0&&!r.requestScroll("horizontal",t)&&(t.scrollDeltaX=0),t.scrollDeltaY!==0&&!r.requestScroll("vertical",t)&&(t.scrollDeltaY=0),t.scrollDeltaX===0&&t.scrollDeltaY===0?t.stopScroll():t.scrollTimeout||(t.scrollTimeout=r.setTimeout(()=>t.startScroll(),r.startScrollDelay))}performScroll(){let e=this,{element:t}=e;if(e.scrolling&&!e.scrollRequested){if(e.scrollDeltaX!==0){let r=t.scrollLeft,i=Math.min(r+e.scrollDeltaX,t.scrollWidth-t.clientWidth);i!==r&&(t.scrollLeft=i)}if(e.scrollDeltaY!==0){let r=t.scrollTop,i=Math.min(r+e.scrollDeltaY,t.scrollHeight-t.clientHeight);i!==r&&(t.scrollTop=i)}e.scrollRequested=!0,e.frameId=e.scrollManager.requestAnimationFrame(()=>{e.scrollRequested=!1,e.performScroll(e)})}}onElementScroll(){this.config?.callback?.call(this.thisObj||this.scrollManager,this)}get scrollLeft(){return this.element.scrollLeft}get scrollTop(){return this.verticalElement?this.verticalElement.scrollTop:this.element.scrollTop}get scrollRelativeLeft(){return this.scrollLeft-this.startScrollLeft}get scrollRelativeTop(){return this.scrollTop-this.startScrollTop}getRelativeLeftScroll(e){return this.scrollManager.getRelativeScroll(e,"left")}getRelativeTopScroll(e){return this.scrollManager.getRelativeScroll(e,"top")}};var wl=a=>typeof a=="number"||a?.endsWith("px"),ne=class extends re(_e(K)){static get fields(){return["text","field","renderer","width","flex","autoWidth","autoHeight",{name:"fitMode",defaultValue:"exact"},{name:"editor",defaultValue:{}},"finalizeCellEdit",{name:"revertOnEscape",defaultValue:!0},{name:"invalidAction",defaultValue:"block"},{name:"sortable",defaultValue:!0,convert(e,t){if(!e)return!1;let r={};return typeof e=="function"?r.sortFn=e.bind(t):typeof e=="object"&&(Object.assign(r,e),r.fn&&(r.sortFn=r.fn,delete r.fn)),r}},{name:"searchable",defaultValue:!0},{name:"filterable",defaultValue:!0,convert(e){if(!e)return!1;let t={columnOwned:!0};return typeof e=="function"?t.filterFn=e:typeof e=="object"&&Object.assign(t,e),t}},{name:"sealed"},{name:"hideable",defaultValue:!0},{name:"draggable",defaultValue:!0},{name:"groupable",defaultValue:!0},{name:"resizable",defaultValue:!0},"groupRenderer","headerRenderer","tooltip","tooltipRenderer","cellCls","cls","icon","align",{name:"minWidth",defaultValue:60},"maxWidth",{name:"hidden",defaultValue:!1},{name:"locked"},{name:"region"},{name:"showColumnPicker",defaultValue:!0},{name:"enableHeaderContextMenu",defaultValue:!0},{name:"enableCellContextMenu",defaultValue:!0},"headerMenuItems","cellMenuItems","sum","summaries","summaryRenderer","responsiveLevels","tags","touchConfig","tree","filterType",{name:"htmlEncode",defaultValue:!0},{name:"htmlEncodeHeaderText",defaultValue:!0},{name:"autoSyncHtml",defaultValue:!1},"type",{name:"instantUpdate",defaultValue:!1},{name:"repaintOnResize",defaultValue:!1},"editTargetSelector",{name:"exportable",defaultValue:!0},{name:"exportedType"}]}static get autoExposeFields(){return!1}construct(e,t){let r=this;r.masterStore=t,t&&(r._grid=Array.isArray(t)?t[0].grid:t.grid),r.localizableProperties=e.localizableProperties||["text"],e.localeClass&&(r.localeClass=e.localeClass),super.construct(e,t,null,!1),r.isLeaf&&!("field"in r.data)&&(r.field="_"+(r.type||"")+ ++ne.emptyCount,r.noFieldSpecified=!0),r.hasComplexMapping=r.field&&r.field.includes("."),!r.width&&!r.flex&&!r.children&&r.set({width:ne.defaultWidth,flex:null},null,!0)}doDestroy(){this.data?.editor?.destroy?.(),super.doDestroy()}remove(){let{subGrid:e,grid:t}=this,r=e&&t&&t.focusedCell;r&&r.columnId===this.id&&(t.owns(g.getActiveElement(t))?t.navigateRight():r.columnId=e.columns.getAdjacentVisibleLeafColumn(this.id,!0,!0).id),super.remove()}getRawValue(e){let t=this;return t.hasComplexMapping?b.getPath(e,t.field):e[t.field]}getFilterableValue(e){return this.getRawValue(e)}get owner(){return this._owner||this.subGrid}set owner(e){this._owner=e}get nextVisibleSibling(){let e=this.region,t=this.nextSibling;for(;t&&(t.hidden||t.region!==e);)t=t.nextSibling;return t}get isLastInSubGrid(){return!this.nextVisibleSibling&&(!this.parent||this.parent.isLastInSubGrid)}get element(){return this.grid.getHeaderElement(this)}get textWrapper(){return g.getChild(this.element,".b-grid-header-text")}get textElement(){return g.down(this.element,".b-grid-header-text-content")}get contentElement(){return g.down(this.element,".b-grid-header-children")}get editor(){let e=this.data.editor;if(e&&!(e instanceof E)){let t=this.grid.processCellEditor({editor:e,field:this.field});t?e=this.data.editor=t.editor:(typeof e=="string"&&(e={type:e}),e=this.data.editor=E.create(b.merge(this.defaultEditor,e,{owner:this.grid})))}return e}set editor(e){this.data.editor=e}get defaultEditor(){return{type:"textfield",name:this.field}}get isFocusable(){return this.isLeaf}static get type(){return"column"}static get text(){return this.$meta.fields.defaults.text}get grid(){return this._grid||this.parent&&this.parent.grid}get locked(){return this.data.region==="locked"}set locked(e){this.region=e?"locked":"normal"}get sortable(){return this.isLeaf&&this.data.sortable}set sortable(e){this.set("sortable",e)}get groupable(){return this.isLeaf&&this.data.groupable}set groupable(e){this.set("groupable",e)}get headerText(){return this.htmlEncodeHeaderText?M.encodeHtml(this.text):this.text}hide(e=!1){let t=this,r=t.parent;t.hidden||(t.hidden=!0,r&&!r.isRoot&&!r.children.some(s=>s.hidden!==!0)&&!r.hidden&&(e=!0,r.hide()),t.children&&t.children.forEach(i=>i.hide(!0)),e||t.stores.forEach(i=>i.trigger("columnHide",{column:t})))}show(e=!1){let t=this,r=t.parent;t.hidden&&(t.hidden=!1,r&&r.hidden&&r.show(),t.children&&t.children.forEach(i=>i.show(!0)),e||t.stores.forEach(i=>i.trigger("columnShow",{column:t})))}toggle(e=null){if(this.hidden&&e===void 0||e===!0)return this.show();if(!this.hidden&&e===void 0||e===!1)return this.hide()}generateId(){return ne.generatedIdIndex||(ne.generatedIdIndex=0),(this.field?this.field.replace(/\./g,"-"):"col")+ ++ne.generatedIdIndex}get allIndex(){return this.masterStore.indexOf(this)}get calcMinWidth(){let{width:e,minWidth:t}=this.data;return wl(e)&&wl(t)?Math.max(parseInt(e)||0,parseInt(t)||0):e}get width(){return this.data.width}set width(e){let t={width:e};e&&"flex"in this.data&&(t.flex=null),this.set(t)}set flex(e){let t={flex:e};e&&"width"in this.data&&(t.width=null),this.set(t)}get flex(){return this.data.flex}set subGrid(e){this._subGrid=e}get subGrid(){return this._subGrid||(this.grid?this.grid.getSubGridFromColumn(this):void 0)}get subGridElement(){return this.subGrid.element}measureSize(e){return g.measureSize(e,this.subGrid?this.subGrid.element:void 0)}get isVisible(){return!this.hidden&&(!this.parent||this.parent.isVisible)}calculateMinWidth(){let e=this,t=e.measureSize(e.width),r=e.measureSize(e.minWidth),i=0;return e.children&&(i=e.children.reduce((s,n)=>s+n.calculateMinWidth(),0)),Math.max(t,r,i)}resizeToFitContent(e,t,r=!1){let i=this,{grid:s,element:n,fitMode:o}=i,{rowManager:l,store:c}=s,{count:d}=c;if(d<=0||i.fitMode==="none"||!i.fitMode)return;let[u]=l.rows,{rowElement:f,cellElement:h}=s.beginGridMeasuring(),m=0,p,y,C,w,T,R,H={length:0,record:null};if(h._domData={columnId:i.id,row:u,rowElement:f},h.innerHTML="",s.resizeToFitIncludesHeader){if(!s.$headerPadding){let B=window.getComputedStyle(n);s.$headerPadding=parseInt(B.paddingLeft)}let A=n.querySelector(".b-grid-header-text-content");A.style.cssText="flex: none; width: auto",m=A.offsetWidth+s.$headerPadding*2+2,A.style.cssText=""}for(d>1e3?(p=Math.max(Math.min(l.topIndex+Math.round(l.rowCount/2)-500,d-1e3),0),y=p+1e3):(p=0,y=d),C=p;C<y;C++){if(w=c.getAt(C),T=i.getRawValue(w),o==="value")R=String(T).length;else if(u.renderCell({cellElement:h,record:w,updatingSingleRow:!0,isMeasuring:!0}),o==="textContent")R=h.textContent.length;else{let A=h.offsetWidth;A>m&&(m=A)}R>H.length&&(H={record:w,length:R})}return(o==="value"||o==="textContent")&&(u.renderCell({cellElement:h,record:H.record,updatingSingleRow:!0,isMeasuring:!0}),m=Math.max(m,h.offsetWidth)),Array.isArray(e)&&([e,t]=e),m=Math.max(m,e||0),m=Math.min(m,t||1e6),r||s.endGridMeasuring(),i.width=i.maxWidth?m=Math.min(m,i.maxWidth):m,m}getState(){let e=this,t={id:e.id,[e.flex?"flex":"width"]:e.flex?e.flex:e.width,hidden:e.hidden,region:e.region,locked:e.locked};return e.children&&(t.children=e.children.map(r=>r.getState())),t}applyState(e){let t=this;t.beginBatch(),"locked"in e&&(t.locked=e.locked),"width"in e&&(t.width=e.width),"flex"in e&&(t.flex=e.flex),"width"in e&&t.flex?t.flex=void 0:"flex"in e&&t.width&&(t.width=void 0),"region"in e&&(t.region=e.region),t.endBatch(),"hidden"in e&&t.toggle(e.hidden!==!0)}refreshCell(e){this.grid.rowManager.refreshCell(e,this.id)}clearCell(e){e.innerHTML="",delete e._content}canEdit(e){if(e.isEditable){let t=e.isEditable(this.field);if(t!==void 0)return t}return!0}insertChild(e,t=null,r=!1){return this.sealed&&!this.inProcessChildren?null:super.insertChild(...arguments)}};ne.emptyCount=0;ne.defaultWidth=100;ne.exposeProperties();var Su={boolean:{type:"check"},date:{type:"date"},integer:{type:"number",format:{maximumFractionDigits:0}},number:{type:"number"}},xe=class extends _e(Y){static get defaultConfig(){return{modelClass:ne,tree:!0,autoAddField:!1}}construct(e){let t=this;e.grid&&(e.grid._columnStore=t,t.id=`${e.grid.id}-columns`,e.grid.on({subGridCollapse:"clearSubGridCaches",subGridExpand:"clearSubGridCaches",thisObj:t})),super.construct(e),t.on({change:t.onStoreChange,sort:()=>t.updateChainedStores(),thisObj:t,prio:1})}get modelClass(){return this._modelClass}set modelClass(e){this._modelClass=e}doDestroy(){let e=[];this.isChained||this.traverse(t=>e.push(t)),super.doDestroy(),this.isChained||e.forEach(t=>t.destroy())}getById(e){return super.getById(e)||this.idRegister[e]}forEach(e,t=this){this.traverseWhile((r,i)=>e.call(t,r,i),!0)}get totalFixedWidth(){let e=0;for(let t of this)t.hidden||(t.children?t.children.forEach(r=>e+=this.calculateFixedWidth(r)):e+=this.calculateFixedWidth(t));return e}calculateFixedWidth(e){return e.flex?e.measureSize(ne.defaultWidth):Math.max(e.measureSize(e.width),e.measureSize(e.minWidth))}get topColumns(){return this.isChained?this.masterStore.rootNode.children.filter(this.chainedFilterFn):this.rootNode.children}get visibleColumns(){let e=this;return e._visibleColumns||(e._visibleColumns=e.leaves.filter(t=>t.isVisible&&(!t.subGrid||!t.subGrid.collapsed))),e._visibleColumns}onStoreChange({action:e,changes:t}){e==="update"&&!("hidden"in t)||this.clearCaches()}clearSubGridCaches({subGrid:e}){e.columns.clearCaches(),this.clearCaches()}clearCaches(){this._visibleColumns=null,this.masterStore?.clearCaches()}onMasterDataChanged(e){super.onMasterDataChanged(e),(e.action!=="update"||"hidden"in e.changes)&&this.clearCaches()}getAdjacentVisibleLeafColumn(e,t=!0,r=!1){let i=this.visibleColumns,s=e instanceof ne?e:this.getById(e),n=i.indexOf(s)+(t?1:-1);if(!i[n])if(r)n=t?0:i.length-1;else return null;return i[n]}get bottomColumns(){return this.leaves}get(e){return this.findRecord("field",e,!0)}createRecord(e){let{grid:t={}}=this,{store:r}=t,i=r?.modelClass?.fieldMap?.[e.field],s=this.modelClass;if(i?.column&&(e=I.merge({},i.column,e)),e.type&&(s=xe.getColumnClass(e.type),!s))throw new Error(`Column type '${e.type}' not registered`);e.locked&&(e.region="locked",delete e.locked);let n=new s(e,this);if(n.data.region||(n.data.region=t.defaultRegion||"normal"),this.autoAddField&&!n.noFieldSpecified&&r&&!i){let o=n.field;n.constructor.fieldType&&(o={name:n.field,type:n.constructor.fieldType}),r.modelClass.addField(o)}return n}indexOf(e){let t=super.indexOf(e);return t>-1?t:this.records.findIndex(r=>r.field===e)}get usesAutoHeight(){return this.find(e=>e.autoHeight)}get usesFlexAutoHeight(){return this.find(e=>e.autoHeight&&e.flex!=null)}static registerColumnType(e,t=!1){xe.columnTypes||(xe.columnTypes={}),e.simpleRenderer=t,xe.columnTypes[e.type]=e}static getColumnClass(e){return xe.columnTypes&&xe.columnTypes[e]}generateColumnForField(e,t){typeof e=="string"&&this.grid&&(e=this.grid.store?.modelClass.fieldMap[e]);let r=e.column||Su[e.type]||{};return typeof r=="string"&&(r={type:r}),r=Object.assign({text:e.text||M.separate(e.name),field:e.name},t,r),e.precision!=null&&(r.format.maximumFractionDigits=e.precision),e.columnType&&(r.type=e.columnType),this.createRecord(r)}},vl=(a,e)=>({update:({store:t,record:r,changes:i})=>{let s=!0;return("width"in i||"minWidth"in i||"maxWidth"in i||"flex"in i)&&(s=a.call(e,{store:t,record:r,changes:i})),s}});xe.registerColumnType(ne,!0);var Tt=class extends K{static get fields(){return[{name:"iconCls",internal:!0},{name:"expanded",internal:!0},{name:"cls",internal:!0},{name:"rowHeight",internal:!0},{name:"href",internal:!0},{name:"target",internal:!0}]}};Tt.exposeProperties();var ni=class extends we(S){static get configurable(){return{cls:{$config:{equal:(e,t)=>e?.isDomClassList&&t?.isDomClassList&&e.isEqual(t)},value:"b-grid-row"}}}construct(e){Object.assign(this,{_elements:{},_elementsArray:[],_cells:{},_allCells:[],_regions:[],lastHeight:0,lastTop:-1,_dataIndex:0,_top:0,_height:0,_id:null,forceInnerHTML:!1,isGroupFooter:!1},e),super.construct()}doDestroy(){let e=this;e.rowManager.isDestroying||(e.removeElements(),e.rowManager.idMap[e.id]===e&&delete e.rowManager.idMap[e.id]),super.doDestroy()}get index(){return this._index}set index(e){this._index=e}get dataIndex(){return this._dataIndex}set dataIndex(e){this._dataIndex!==e&&(this._dataIndex=e,this.eachElement(t=>t.dataset.index=e))}get id(){return this._id}set id(e){let t=this,r={id:e},i=t.rowManager.idMap;(t._id!==e||i[e]!==t)&&(i[t._id]===t&&delete i[t._id],i[e]=t,t._id=e,t.eachElement(s=>{ye.assign(s,r),s.dataset.id=e}),t.eachCell(s=>ye.assign(s,r)))}addElement(e,t){let r=this,i=t.firstElementChild;for(r._elements[e]=t,r._elementsArray.push(t),r._regions.push(e),ye.assign(t,{index:r.index}),r._cells[e]=[];i;)r._cells[e].push(i),r._allCells.push(i),ye.set(i,{column:i.dataset.column,columnId:i.dataset.columnId,rowElement:i.parentNode,row:r}),i=i.nextElementSibling;t.dataset.index=r.index}getElement(e){return this._elements[e]}eachElement(e){this._elementsArray.forEach(e)}eachCell(e){this._allCells.forEach(e)}get elements(){return this._elements}get cells(){return this._allCells}getCells(e){return this._cells[e]}getCell(e){return this._allCells.find(t=>{let r=ye.get(t);return r.columnId==e||r.column==e})}removeElements(e=!1){let t=this;t.rowManager.trigger("removeRow",{row:t}),e||t.eachElement(r=>r.remove()),t._elements={},t._cells={},t._elementsArray.length=t._regions.length=t._allCells.length=t.lastHeight=t.height=0,t.lastTop=-1}get height(){return this._height}set height(e){this._height=e}get offsetHeight(){return this.height+this.grid._rowBorderHeight}updateElementsHeight(){let e=this;e.rowManager.storeKnownHeight(e.id,e.height),e.lastHeight!==e.height&&(this.eachElement(t=>t.style.height=`${e.offsetHeight}px`),e.lastHeight=e.height)}addCls(e){this.updateCls(this.cls.add(e))}removeCls(e){this.updateCls(this.cls.remove(e))}assignCls(e){this.updateCls(this.cls.assign(e))}changeCls(e){return e?.isDomClassList?e:new P(e)}updateCls(e){this.eachElement(t=>g.syncClassList(t,e))}get isFirst(){return this.dataIndex===0}get top(){return this._top}get bottom(){return this._top+this._height+this.grid._rowBorderHeight}setTop(e,t){this._top!==e&&(this._top=e,this.translateElements(t))}setBottom(e,t){this.setTop(e-this.offsetHeight,t)}translateElements(e){let t=this,r=t.grid.positionMode;t.lastTop!==t.top&&(t.eachElement(i=>{let s=i.style;r==="translate"?s.transform=`translate(0,${t.top}px)`:r==="translate3d"?s.transform=`translate3d(0,${t.top}px,0)`:r==="position"&&(s.top=`${t.top}px`)}),e||t.rowManager.trigger("translateRow",{row:t}),t.lastTop=t.top)}offset(e){let t=this._top+e;return t<0&&(e-=t,t=0),this.setTop(t),e}render(e,t,r=!0,i=!1){let s=this,{cls:n,cells:o,grid:l,rowManager:c,height:d,_id:u}=s,f=ye.get(s._elementsArray[0]),h=c._rowHeight,m=0,p,y;!t&&t!==!1&&(t=l.store.getById(f.id),e=l.store.indexOf(t));let C=t?.cls,w=C?C.isDomClassList?C:new P(C):null;n.assign({"b-grid-row-updating":r&&l.transitionDuration,"b-selected":l.isSelected(t?.id)}),s.lastRecordCls&&n.remove(s.lastRecordCls),w?(n.add(w),s.lastRecordCls=Object.assign({},w)):s.lastRecordCls=null,s.updateCls(n),c.trigger("beforeRenderRow",{row:s,record:t,recordIndex:e,oldId:u}),r&&l.transitionDuration&&s.setTimeout(()=>{n.remove("b-grid-row-updating"),s.updateCls(n)},l.transitionDuration),s.id=t.id,s.dataIndex=e;let T=!l.fixedRowHeight&&l.getRowHeight(t)||h,R=s.maxRequestedHeight=null;for(m=0;m<o.length;m++)p=o[m],y=s.renderCell({cellElement:p,record:t,height:T,maxRequestedHeight:R,updatingSingleRow:r}),c.fixedRowHeight||y.height!=null&&(s.maxRequestedHeight=R=Math.max(R,y.height));s.height=R??T,s.updateElementsHeight(),r&&(d!==s.height&&c.translateFromRow(s,i),c.trigger("updateRow",{row:s,record:t,recordIndex:e,oldId:u}),c.trigger("renderDone")),c.trigger("renderRow",{row:s,record:t,recordIndex:e,oldId:u}),s.forceInnerHTML=!1}renderCell({cellElement:e,record:t,height:r,maxRequestedHeight:i,updatingSingleRow:s=!0,isMeasuring:n=!1}){let o=this,{grid:l}=o,c=ye.get(e),d=l.columns.getById(c.columnId),u=c.rowElement,f=ye.get(u),{internalCellCls:h,cellCls:m,align:p,renderer:y,defaultRenderer:C,id:w}=d,T={columnId:w,id:f.id};if(!t){if(f.id===null){e.className="b-grid-cell";return}if(t=l.store.getById(f.id),!t)return}let R=d.getRawValue(t),H=t.fieldMap[d.field],A={configuredHeight:r,height:null,maxRequestedHeight:i},B={cellElement:e,dataField:H,rowElement:u,value:R,record:t,column:d,size:A,grid:l,row:c.row,updatingSingleRow:s,isMeasuring:n},N={"b-grid-cell":1,[h]:h,[m]:t.isSpecialRow&&d.internalCellCls==="b-check-cell"?void 0:m,"b-cell-dirty":t.isFieldModified(d.field),[`b-grid-cell-align-${p}`]:p,"b-selected":l.isSelected(T),"b-focused":l.isFocused(T),"b-auto-height":d.autoHeight},V=y||C;l.beforeRenderCell(B),g.syncClassList(e,N);let j=!0;V?(R=V.call(d,B),R===void 0&&(j=!1)):H&&(R=H.print(R));let le=l.hasFrameworkRenderer?.({cellContent:R,column:d});le&&t.isSpecialRow&&(R="");let G=le&&!d.data.tree&&!t.isSpecialRow;if(j&&!G){let q=R!=null&&typeof R=="object",J=typeof R=="string",$=q||R==null?"":String(R);o.forceInnerHTML&&(e.innerHTML="",delete e._content,e.lastDomConfig=null),!q&&d.htmlEncode&&!d.disableHtmlEncode?x.isLinux||e._hasHtml?(e.innerText=$,e._hasHtml=!1):g.setInnerText(e,$):d.autoSyncHtml&&(!J||g.getChildElementCount(e))?J?g.sync($,e.firstElementChild):q&&_.sync({domConfig:R,targetElement:e}):q?_.sync({targetElement:e,domConfig:{onlyChildren:!0,children:Array.isArray(R)?R:[R]}}):e._content!==$&&(e.innerHTML=e._content=$)}return t.isSpecialRow||l.processCellContent?.({cellElementData:c,rendererData:B,rendererHtml:B.rendererHtml||R}),d.autoHeight&&A.height==null&&(e.classList.add("b-measuring-auto-height"),A.height=e.offsetHeight,e.classList.remove("b-measuring-auto-height")),n||o.rowManager.trigger("renderCell",B),A}};var gr=class extends fe{static get pluginConfig(){return{chain:["getRowById","getRecordCoords","getRow","getRowFor","getRowFromElement","destroy"],assign:["rowHeight","topRow","bottomRow","firstVisibleRow","lastVisibleRow","firstFullyVisibleRow"]}}static get defaultConfig(){return{prependRowBuffer:5,appendRowBuffer:5,rowHeight:null,fixedRowHeight:null,autoHeight:!1}}static get properties(){return{idMap:{},topIndex:0,lastScrollTop:0,_rows:[],heightMap:new Map,totalKnownHeight:0,_totalHeight:0,averageRowHeight:0,scrollTargetRecordId:null,refreshDetails:{topRowIndex:0,topRowTop:0}}}construct(e){e.grid._rowManager=this,super.construct(e.grid,e)}doDestroy(){this._rows.forEach(e=>e.destroy()),super.doDestroy()}initWithHeight(e,t=!1){let r=this;return r.autoHeight&&(e=r.store.allCount*r.preciseRowOffsetHeight),r.viewHeight=e,r.calculateRowCount(t),e}reinitialize(e=!1){let t=this;t.calculateRowCount(!1,!0,!0),t.topIndex+t.rowCount-1>t.store.count&&(e=!0);let r=t.topRow&&!e?t.topRow.top:0;t.scrollTargetRecordId=null,e&&(t.topIndex=t.lastScrollTop=0);let{topRow:i}=t;i&&(i.dataIndex=t.topIndex,i.setTop(r,!0)),t.estimateTotalHeight(),t.renderFromRow(i)}matchRowCount(e=!1){let t=this,{rows:r,grid:i}=t,s=r.length,n=s-t.rowCount;if(n)if(n<0){let o=[];for(let l=s,c=s?r[s-1].dataIndex+1:0;l<t.rowCount;l++,c++)o.push(new ni({rowManager:t,grid:i,index:l,dataIndex:c}));r.push.apply(r,o),t.trigger("addRows",{rows:o}),e||t.renderFromRow(r[Math.max(0,s-1)])}else{let o=r.splice(s-n,n);t.trigger("removeRows",{rows:o}),o.forEach(l=>l.destroy())}}calculateRowCount(e=!1,t=!0,r=!1){let i=this,{store:s}=i,n=Math.ceil(i.viewHeight/i.minRowOffsetHeight),o=n+i.prependRowBuffer+i.appendRowBuffer;return!i.grid.columns?.count||isNaN(n)?(i.rowCount=0,0):(o<i.rowCount&&!t||(i.visibleRowCount=n,i.rowCount=Math.min(s.count,o),e||(i.rows&&i.rowCount!==i.rows.length?i.matchRowCount(r):i.rowCount||i.trigger("changeTotalHeight",{totalHeight:i.totalHeight}),i.grid.toggleEmptyText())),i.rowCount)}removeAllRows(){let e=this,{topRow:t}=e,r=t?e.refreshDetails={topRowIndex:t.dataIndex,topRowTop:t.top}:e.refreshDetails,i=e.rows.slice();return e.trigger("removeRows",{rows:i}),e.rows.forEach(s=>s.destroy()),e.rows.length=0,e.idMap={},r}setPosition(e){let{topRow:t}=this,{topRowIndex:r,topRowTop:i}=e;t.setTop(i),t.dataIndex=r}get store(){return this.client.store}get rows(){return this._rows}getRow(e){return this.rowCount&&this.rows[e-this.topIndex]}getRowById(e){return e&&e.isModel&&(e=e.id),this.idMap[e]}getRowFromElement(e){return e=e.closest(".b-grid-row"),e&&this.getRow(e.dataset.index)}getRowAt(e,t=!1){return t||(e-=k.from(this.grid.bodyContainer,null,!0).roundPx(1).top,e+=this.grid.scrollable.y),e=g.roundPx(e),this.rows.find(r=>e>=r.top&&e<r.bottom)}getRowFor(e){return e instanceof HTMLElement?this.getRowFromElement(e):this.getRowById(e)}getNextRow(e){let t=typeof e=="number"?e:e.index;return this.getRow((t+1)%this.rowCount)}get topRow(){return this.rows[0]}get bottomRow(){let e=Math.min(this.rowCount,this.store.count);return this.rows[e-1]}get firstVisibleRow(){return this.rows.find(e=>e.bottom>Math.ceil(this.grid.scrollable.y))}get firstFullyVisibleRow(){return this.rows.find(e=>e.top>=Math.ceil(this.grid.scrollable.y))}get lastVisibleRow(){let e=this.grid;return U.findLast(this.rows,t=>t.top<e.scrollable.y+e.bodyHeight)}offsetRows(e){if(e!==0){let{rows:t}=this,{length:r}=t;for(let i=0;i<r;i++)t[i].offset(e)}this.trigger("offsetRows",{offset:e})}get prependBufferHeight(){return this.prependRowBuffer*this.rowOffsetHeight}get appendBufferHeight(){return this.appendRowBuffer*this.rowOffsetHeight}get rowHeight(){return this._rowHeight}set rowHeight(e){let t=this,{grid:r,fixedRowHeight:i}=t,s=t.rowHeight;if(b.assertNumber(e,"rowHeight"),e<10&&(e=10),t.trigger("beforeRowHeight",{height:e}),t.minRowHeight=t._rowHeight=e,i&&(t.averageRowHeight=e),t.rows.length){let n=r.scrollable.y,o=t.getRowAt(n,!0),l=o?o.top-n:0,c,d;i?(c=e,d=s):(d=c=t.averageRowHeight,t.clearKnownHeights(),c*=e/s),t.calculateRowCount(!1,!0,!0),t.topRow.setTop(t.topRow.dataIndex*(c+r._rowBorderHeight),!0),t.refresh(),n*(c/d)!==n&&r.scrollRowIntoView(o.id,{block:"start",edgeOffset:l})}t.trigger("rowHeight",{height:e})}get rowOffsetHeight(){return Math.floor(this.preciseRowOffsetHeight)}get preciseRowOffsetHeight(){return(this.averageRowHeight||this._rowHeight)+this.grid._rowBorderHeight}get minRowOffsetHeight(){return(this.minRowHeight||this._rowHeight)+this.grid._rowBorderHeight}get allHeightsKnown(){return this.fixedRowHeight||this.heightMap.size>=this.store.count}storeKnownHeight(e,t){let r=this,{heightMap:i}=r;r.fixedRowHeight||(i.has(e)&&(r.totalKnownHeight-=i.get(e)),i.set(e,t),r.totalKnownHeight+=t,t<r.minRowHeight&&(r.minRowHeight=t),r.averageRowHeight=r.totalKnownHeight/i.size)}getOffsetHeight(e){let t=this;return(t.heightMap.get(e.id)||t.grid.getRowHeight(e)||t.averageRowHeight||t.rowHeight)+t.grid._rowBorderHeight}invalidateKnownHeight(e){let t=this;if(!t.fixedRowHeight){let{heightMap:r}=t;Array.isArray(e)||(e=[e]),e.forEach(i=>{i&&r.has(i.id)&&(t.totalKnownHeight-=r.get(i.id),r.delete(i.id))}),t.averageRowHeight=t.totalKnownHeight/r.size}}clearKnownHeights(){this.heightMap.clear(),this.averageRowHeight=this.totalKnownHeight=0}calculateTop(e){if(this.fixedRowHeight)return e*this.rowOffsetHeight;let{store:t}=this,r=0;for(let i=0;i<e;i++){let s=t.getAt(i);r+=this.getOffsetHeight(s)}return Math.floor(r)}getRecordCoords(e,t=!1,r=!1){let i=this,s=typeof e=="string"||typeof e=="number"?e:e.id,n=i.getRowById(e),o=i.client._bodyRectangle;return t||(o=i.client.refreshBodyRectangle()),n?new k(o.x,Math.round(t?n.top:n.top+o.y-i.client.scrollable.y),o.width,n.offsetHeight):i.getRecordCoordsByIndex(i.store.indexOf(s),t,r)}getRecordCoordsByIndex(e,t=!1,r=!1){let i=this,{topRow:s,bottomRow:n}=i,o=i.client._bodyRectangle,{id:l}=i.store.getAt(e),c=i.preciseRowOffsetHeight,d=s.dataIndex,u=n.dataIndex,f=e>u?{index:e-u-1,y:n.bottom,from:"bottomRow"}:e>d/2?{index:e-d,y:s.top,from:"topRow"}:{index:e,y:0,from:"top"},h=i.allHeightsKnown&&!r?i.calculateTop(e):Math.floor(f.y+f.index*c),m=new k(o.x,t?h:h+o.y-i.client.scrollable.y,o.width,Math.floor(i.heightMap.get(l)||c));return m.virtual=!0,m.block=m.bottom<o.y?"start":m.y>o.bottom?"end":"nearest",m}get totalHeight(){return this._totalHeight}forEach(e){this.rows.forEach(e)}[Symbol.iterator](){return this.rows[Symbol.iterator]()}refreshCell(e,t){let r=this.getRowFor(e);if(r){let i=r.getCell(t);if(i)return r.renderCell({cellElement:i}),!0}return!1}returnToTop(){let e=this;e.topIndex=0,e.lastScrollTop=0,e.topRow&&(e.topRow.dataIndex=0,e.topRow.setTop(0,!0)),e.refresh(),e.grid.scrollable.y=0}renderFromRecord(e){let t=this.getRowById(e.id);t&&this.renderFromRow(t)}renderFromRow(e=null){let t=this,{rows:r,store:i}=t,s=i.count;if(t.calculateRowCount(!1,s<r.length,!0)===0)return;let n=e?r.indexOf(e):0,o=e?e.dataIndex:r[0].dataIndex,l=s-o-1,c=Math.min(r.length-1,n+l),d=r.length-c-1,u=n>0?r[n-1].bottom:r[n].top,f;for(let h=n;h<=c;h++)f=r[h],f.dataIndex=o,f.setTop(u,!0),f.render(o,i.getAt(o++),!1),u+=f.offsetHeight;for(;d-- >0;)t.displayRecordAtTop();t.bottomRow.bottom<t.viewHeight&&t.calculateRowCount(),t.estimateTotalHeight(!0),t.trigger("renderDone")}renderRows(e){let t,r=!1;e=Array.from(e),e.sort((i,s)=>i.dataIndex-s.dataIndex);for(let i of e)t=i.height,i.render(null,null,!1),r|=i.height!==t;r&&this.translateFromRow(e[0]),this.trigger("renderDone")}translateFromRow(e,t=!1){let r=this,i=e.bottom,s,n;for(n=e.dataIndex+1,s=r.getRow(n);s;s=r.getRow(++n))s.setTop(i),i+=s.offsetHeight;t||r.estimateTotalHeight(!0)}refresh(){let e=this,{topRow:t}=e;!t||(e.idMap={},e.renderFromRow(t),e.trigger("refresh"))}jumpToPosition(e,t){let r=this,{store:i,heightMap:s}=r,n=i.count;if(r.allHeightsKnown&&!r.fixedRowHeight){let o=e-r.prependBufferHeight,l=r.grid._rowBorderHeight,c=0,d=0;for(;c<o;){let f=i.getAt(d);c+=s.get(f.id)+l,d++}let u=Math.max(Math.min(d,n-r.rowCount),0);r.lastScrollTop=e,r.topRow.dataIndex=r.topIndex=u,r.topRow.setTop(r.calculateTop(u),!1),r.refresh()}else{let o=r.preciseRowOffsetHeight,l=t==null?Math.floor(e/o)-r.prependRowBuffer:t-Math.floor(r.rowCount/2),c=Math.max(Math.min(l,n-r.rowCount),0),d=r.client.scrollable.y,u=Math.min(r.client._bodyRectangle.height+d+r.appendBufferHeight,r.totalHeight);if(r.lastScrollTop=e,r.topRow.dataIndex=r.topIndex=c,r.topRow.setTop(Math.floor(c*o),!1),r.refresh(),r.bottomRow.bottom<u)for(r.calculateRowCount(!1,!1,!1);r.bottomRow.bottom<u&&r._rows[r.prependRowBuffer].top<d&&r.bottomRow.dataIndex<n-1;)r.displayRecordAtBottom();r.estimateTotalHeight()}if(t!=null){let{scrollable:o}=r.grid,l=r.getRow(t),c=l&&k.from(l._elementsArray[0]).center.y,d=o.viewport.center.y;l&&(o.y=e=Math.floor(o.y+(c-d)))}return e}warpIfNeeded(e){let t=this,r={newScrollTop:e,deltaTop:e-t.lastScrollTop};if(Math.abs(r.deltaTop)>t.rowCount*t.rowOffsetHeight*3){let i;t.scrollTargetRecordId&&(i=t.store.indexOf(t.scrollTargetRecordId)),r.newScrollTop=t.jumpToPosition(e,i),r.deltaTop=0}return r}updateRenderedRows(e,t,r=!1){let i=this,s=i.client._bodyRectangle;if(i.rowCount===0)return 0;let n=i.totalHeight;if(t||Math.abs(e-i.lastScrollTop)>=i.rowOffsetHeight||i.topRow.top>e||i.bottomRow.bottom<e+s.height){let o=i.warpIfNeeded(e);i.scrollTargetRecordId=null,i.lastScrollTop=o.newScrollTop,o.deltaTop>0?i.fillBelow(o.newScrollTop):o.deltaTop<0&&i.fillAbove(o.newScrollTop),!i.fixedRowHeight&&!r&&i.correctError(o,s,e),n=i.estimateTotalHeight()}return n}correctError(e,t,r){let i=this,s=0;(i.allHeightsKnown||e.deltaTop<0&&r<t.height*2||e.deltaTop>0&&r>i.totalHeight-t.height*2-3)&&(s=i.topRow.top-i.calculateTop(i.topRow.dataIndex)),s&&(i.offsetRows(-s),i.grid.scrollable.y=i.lastScrollTop=i.grid.scrollable.y-s)}fillAbove(e){let t=this,r=e-t.topRow.top-t.prependBufferHeight,i=0;for(;i>r&&t.topIndex>0;)i-=t.displayRecordAtTop();t.trigger("renderDone")}fillBelow(e){let t=this,r=e-t.topRow.top-t.prependBufferHeight,i=t.store.count,s=t.rowCount,n=0;for(;n<r&&t.topIndex+s<i&&t.topRow.top+t.topRow.offsetHeight<e;)n+=t.displayRecordAtBottom();t.trigger("renderDone")}estimateTotalHeight(e=!1){let t=this;if(t.grid.renderingRows)return;let r=t.store.count,i=r-t.heightMap.size,{bottomRow:s}=t,n;if(t.fixedRowHeight)n=r*t.rowOffsetHeight;else{if(n=t.totalKnownHeight+t.heightMap.size*t.grid._rowBorderHeight+i*t.preciseRowOffsetHeight,s&&i){let o=s.bottom;(o>n||t.topIndex+t.rowCount>=r&&n>o&&o>0)&&(n=o,s.dataIndex<r-1&&(n+=(r-1-s.dataIndex)*t.preciseRowOffsetHeight))}n=Math.floor(n)}return n!==t.totalHeight&&t.trigger("changeTotalHeight",{totalHeight:n,immediate:e})!==!1&&(t._totalHeight=n),n}displayRecordAtTop(){let e=this,t=e.topIndex-1,r=e.store.getAt(t),i=e.bottomRow,s=i.top;return e.trigger("beforeTranslateRow",{row:i,newRecord:r}),i._top=e.topRow.top-e.getOffsetHeight(r),i.estimatedTop=!e.fixedRowHeight,i.render(t,r,!1),i._top=s,i.setBottom(e.topRow.top),i.estimatedTop=!1,e.topIndex--,e._rows.unshift(e._rows.pop()),i.offsetHeight}displayRecordAtBottom(){let e=this,t=e.topIndex+e.rowCount,r=e.store.getAt(t),i=e.topRow;return e.trigger("beforeTranslateRow",{row:i,newRecord:r}),i.dataIndex=t,i.setTop(e.bottomRow.bottom),i.render(t,r,!1),e.topIndex++,e._rows.push(e._rows.shift()),i.offsetHeight}};gr.featureClass="";var Du={x:1},oi=class extends ke{addScroller(e){(this.xScrollers||(this.xScrollers=[])).push(e)}addPartner(e,t=Du){typeof t=="string"&&(t={[t]:1}),t.x&&this.xScrollers.forEach((r,i)=>r.addPartner(e.xScrollers[i],"x")),t.y&&super.addPartner(e,"y")}removePartner(e){this.xScrollers.forEach((t,r)=>{t.isDestroyed||t.removePartner(e.xScrollers[r])}),super.removePartner(e)}updateOverflowX(e){this.xScrollers&&this.xScrollers.forEach(t=>t.overflowX=e),this.widget.virtualScrollers.classList[e===!1?"add":"remove"]("b-hide-display")}scrollIntoView(e,t){if(e.nodeType===Element.ELEMENT_NODE){for(let r of this.xScrollers)if(r.element.contains(e))return r.scrollIntoView(e,t)}else return super.scrollIntoView(e,t)}set x(e){this.xScrollers&&(this.xScrollers[0].x=e)}get x(){return this.xScrollers?this.xScrollers[0].x:0}};var Rt=class extends E{static get $name(){return"Bar"}static get type(){return"gridbar"}static get defaultConfig(){return{htmlCls:"",scrollable:{}}}get columns(){return this._columns||this.subGrid.columns}set columns(e){this._columns=e}fixCellWidths(){let e=this,t=!1,r;e.columns.traverse(i=>{let s=e.getBarCellElement(i.id),n=g.setLength(i.width),o=g.setLength(i.minWidth),l=g.setLength(i.maxWidth);if(s){if(x.isIE11?r=`calc(${n} - ${e.getLrPadding(s)}px)`:r=n,s.style.maxWidth=l,t=t||Boolean(i.flex),i.isParent&&i.width==null&&i.flex==null){let c=i.children.reduce((d,u)=>d+=!u.hidden&&u.flex||0,0);s.style.flex=c>0?`${c} 0 auto`:"",c>0&&i.traverse(d=>d.data.minWidth=null)}else if(parseInt(i.minWidth)>=0&&(s.style.minWidth=o),s.style.flex=s.style.flexBasis=s.style.width="",i.flex)!isNaN(parseInt(i.flex))&&i.children?s.style.flex=`${i.flex} 0 auto`:s.style.flex=i.flex;else if(parseInt(i.width)>=0){let c=i.parent;e.isHeader&&!c.isRoot&&!c.width?s.style.width=n:s.style.flexBasis=r}i.height>=0&&(s.style.height=g.setLength(i.height))}}),e.element.classList[t?"add":"remove"]("b-has-flex")}getLrPadding(e){if(!this.cellLrPadding){let t=e.ownerDocument.defaultView.getComputedStyle(e);this.cellLrPadding=parseInt(t.getPropertyValue("padding-left"))+parseInt(t.getPropertyValue("padding-right"))+parseInt(t.getPropertyValue("border-left-width"))+parseInt(t.getPropertyValue("border-right-width"))}return this.cellLrPadding}getBarCellElement(e){return this.element.querySelector(`[data-column-id="${e}"]`)}};Rt.initClass();var pr=class extends Rt{static get $name(){return"Header"}static get type(){return"gridheader"}startConfigure(e){e.scrollable.overflowX="hidden-scroll",super.startConfigure(e)}get subGrid(){return this._subGrid}set subGrid(e){this._subGrid=this.owner=e}get region(){return this.subGrid?.region}changeElement(e,t){let{region:r}=this;return this.getConfig("columns"),super.changeElement({className:{"b-grid-header-scroller":1,[`b-grid-header-scroller-${r}`]:r},children:[{reference:"headersElement",className:{"b-grid-headers":1,[`b-grid-headers-${r}`]:r},dataset:{region:r,reference:"headersElement",maxDepth:this.maxDepth}}]},t)}get overflowElement(){return this.headersElement}getColumnConfig(e){let{id:t,align:r,resizable:i,isLeaf:s,isParent:n,isLastInSubGrid:o,cls:l,childLevel:c,field:d,tooltip:u,children:f,isFocusable:h}=e;if(e.isVisible)return{className:{"b-grid-header":1,"b-grid-header-parent":n,[`b-level-${c}`]:1,[`b-depth-${e.meta.depth}`]:1,[`b-grid-header-align-${r}`]:r,"b-grid-header-resizable":i&&s,[l]:l,"b-last-parent":n&&o,"b-last-leaf":s&&o},[h?"tabIndex":""]:0,dataset:{columnId:t,[d?"column":""]:d,[u?"btip":""]:u},children:[{className:"b-grid-header-text",children:[{className:"b-grid-header-text-content"}]},f?{className:"b-grid-header-children",children:f.map(m=>this.getColumnConfig(m))}:null,{className:"b-grid-header-resize-handle"}]}}calculateMinWidthForSafari(){let e=0;return this.columns.visibleColumns.forEach(t=>{e+=t.calculateMinWidth()}),e}fixHeaderWidths(){this.fixCellWidths()}refreshHeaders(){let e=this;e.columns.traverse(t=>{let r=e.getBarCellElement(t.id);if(r){let i=t.headerText;t.headerRenderer&&(i=t.headerRenderer.call(t.thisObj||e,{column:t,headerElement:r})),t.icon&&(i=`<i class="${M.encodeHtml(t.icon)}"></i>`+(i||""));let s=r.querySelector(".b-grid-header-text-content");s&&(s.innerHTML=i||"")}}),e.fixHeaderWidths()}get columns(){let e=this,t=super.columns;return e.columnsDetacher||(e.columnsDetacher=t.on({change(){e.initDepths()},thisObj:e}),e.initDepths()),t}set columns(e){super.columns=e}initDepths(e=this.columns.topColumns,t=null){let r=this,i=0;t?.meta&&t.meta.depth++;for(let s of e){let{meta:n}=s;n.depth=0,s.children&&(r.initDepths(s.children.filter(r.columns.chainedFilterFn),s),n.depth&&t&&(t.meta.depth+=n.depth)),n.depth>i&&(i=n.depth)}return t||(r.maxDepth=i),i}getHeader(e){return this.getBarCellElement(e)}get contentElement(){return this.element.firstElementChild}refreshContent(){let e=this;_.sync({domConfig:{children:e.columns.topColumns.map(t=>e.getColumnConfig(t)),onlyChildren:!0,strict:!0,syncIdField:"columnId",releaseThreshold:0},targetElement:e.contentElement}),e.refreshHeaders()}onPaint({firstPaint:e}){e&&this.refreshContent()}};pr.initClass();var xl=/>[ \t\r\n]+</g,Tu=/\s\s+/g,L=class{static tpl(e,...t){let r=0,i=t.map((s,n)=>{let o=e[n];return Array.isArray(s)?o+=s.reduce((l,c)=>l+=(typeof c=="string"?c.trim():c)+`
`,""):(s===void 0&&(s=""),o+=typeof s=="string"?s.trim():s),r++,o}).join("");return r<=e.length&&(i+=e[e.length-1]),i.replace(xl,"><").replace(Tu," ").trim()}static docsTpl(e,...t){let r=0,i=t.map((s,n)=>{let o=e[n],l=o;return Array.isArray(s)?l+=s.reduce((c,d)=>c+=(typeof d=="string"?d.trim():d)+`
`,""):(s===void 0&&(s=""),l+=typeof s=="string"?s.trim():s),r++,l}).join("");return r<=e.length&&(i+=e[e.length-1]),i.replace(xl,"><").trim()}static repeat(e){return function(...t){return L.tpl(...t).repeat(e)}}static loop(e){}};var yr=class extends Rt{static get $name(){return"Footer"}static get type(){return"gridfooter"}startConfigure(e){e.scrollable.overflowX="hidden-scroll",super.startConfigure(e)}get subGrid(){return this._subGrid}set subGrid(e){this._subGrid=this.owner=e}refreshContent(){this.element.firstElementChild.innerHTML=this.contentTemplate(),this.fixFooterWidths()}onPaint({firstPaint:e}){e&&this.refreshContent()}template(){let e=this.subGrid.region;return L.tpl`
            <div class="b-grid-footer-scroller b-grid-footer-scroller-${e}">
                <div data-reference="footersElement" class="b-grid-footers b-grid-footers-${e}" data-region="${e}"></div>
            </div>
        `}get overflowElement(){return this.footersElement}getFooter(e){return this.getBarCellElement(e)}contentTemplate(){return this.columns.visibleColumns.map(t=>L.tpl`
                <div
                    class="b-grid-footer ${t.align?`b-grid-footer-align-${t.align}`:""} ${t.cls||""}"
                    data-column="${t.field||""}" data-column-id="${t.id}" data-all-index="${t.allIndex}"
                    >
                    ${t.footerText||""}
                </div>`).join("")}fixFooterWidths(){this.fixCellWidths()}};yr.initClass();var js={touchstart:"onElementTouchStart",touchmove:"onElementTouchMove",touchend:"onElementTouchEnd",mouseover:"onElementMouseOver",mouseout:"onElementMouseOut",mousedown:"onElementMouseDown",mousemove:"onElementMouseMove",mouseup:"onElementMouseUp",click:"onHandleElementClick",dblclick:"onElementDblClick",keydown:"onElementKeyDown",keyup:"onElementKeyUp",keypress:"onElementKeyPress",contextmenu:"onElementContextMenu"},El=a=>class extends(a||S){static get $name(){return"GridElementEvents"}static get configurable(){return{longPressTime:400,enableUndoRedoKeys:!0}}initInternalEvents(){let t=Object.keys(js),r=t.length,i={element:this.bodyElement,thisObj:this};for(let s=0;s<r;s++)i[t[s]]="handleEvent";O.on(i),O.on({focus:"onGridElementFocus",element:this.focusElement,thisObj:this})}getCellDataFromEvent(t){let r=this,i=g.up(t.target,".b-grid-cell");if(i){let s=ye.get(i),{id:n,columnId:o}=s,l=r.store.getById(n),c=r.columns.getById(o);return l?{cellElement:i,cellData:s,columnId:o,id:n,record:l,column:c,cellSelector:{id:n,columnId:o}}:null}}getHeaderDataFromEvent(t){let r=g.up(t.target,".b-grid-header");if(r){let i=b.assign({},r.dataset),{columnId:s}=i,n=this.columns.getById(s);return n?{headerElement:r,headerData:i,columnId:s,column:n}:null}}handleEvent(t){this.disabled||js[t.type]&&this[js[t.type]](t)}onElementTouchStart(t){let r=this,i=r.getCellDataFromEvent(t);g.isTouchEvent=!0,t.touches.length===1&&(r.longPressTimeout=r.setTimeout(()=>{r.onElementLongPress(t),t.preventDefault(),r.longPressPerformed=!0},r.longPressTime)),i&&!t.defaultPrevented&&r.onFocusGesture(i,t)}onElementTouchMove(t){let r=this;r.longPressTimeout&&(r.clearTimeout(r.longPressTimeout),r.longPressTimeout=null)}onElementTouchEnd(t){let r=this;r.longPressPerformed&&(t.cancelable&&t.preventDefault(),r.longPressPerformed=!1),r.longPressTimeout&&(r.clearTimeout(r.longPressTimeout),r.longPressTimeout=null)}onElementLongPress(t){}triggerCellMouseEvent(t,r){let i=this,s=i.getCellDataFromEvent(r);if(s){let n=i.columns.getById(s.columnId),o={grid:i,record:s.record,column:n,cellSelector:s.cellSelector,cellElement:s.cellElement,target:r.target,event:r};i.trigger("cell"+M.capitalize(t),o),t==="click"&&n.onCellClick?.(o)}}onElementMouseDown(t){let r=this,i=r.getCellDataFromEvent(t);r.skipFocusSelection=!0,r.isScrollbarClick(t)?t.preventDefault():(r.triggerCellMouseEvent("mousedown",t),i&&!t.defaultPrevented&&r.onFocusGesture(i,t))}isScrollbarClick({target:t,x:r,y:i}){if(t.matches(".b-vertical-overflow")){let s=t.getBoundingClientRect();return r>s.right-g.scrollBarWidth}else if(t.matches(".b-horizontal-overflow")){let s=t.getBoundingClientRect();return i>s.bottom-g.scrollBarWidth}}onElementMouseMove(t){this.mouseMoveEvent=t}onElementMouseUp(t){}onHandleElementClick(t){this.trigger("beforeElementClick",{event:t})!==!1&&this.onElementClick(t)}onElementClick(t){let r=this,i=r.getCellDataFromEvent(t);i&&(r.triggerCellMouseEvent("click",t),ye.get(i.cellElement).row.removeCls("b-hover"))}onFocusGesture(t,r){t&&!r.target.matches(".b-icon-tree-expand, .b-icon-tree-collapse")&&this.focusCell(t.cellSelector,{scroll:!1,doSelect:!0,event:r})}onElementDblClick(t){let{target:r}=t;if(this.triggerCellMouseEvent("dblClick",t),r.classList.contains("b-grid-header-resize-handle")){let i=g.up(r,".b-grid-header");this.columns.getById(i.dataset.columnId).resizeToFitContent()}}onElementMouseOver(t){if(!this.scrolling){let r=g.up(t.target,".b-grid-cell");if(r){let i=ye.get(r).row;i&&(typeof t.buttons!="number"||t.buttons===0)&&(this.hoveredRow=i),this.triggerCellMouseEvent("mouseOver",t)}this.trigger("mouseOver",{event:t})}}onElementMouseOut(t){this.hoveredRow=null,this.scrolling||(g.up(t.target,".b-grid-cell")&&this.triggerCellMouseEvent("mouseOut",t),this.trigger("mouseOut",{event:t}))}set hoveredRow(t){let r=this;r._hoveredRow&&!r._hoveredRow.isDestroyed&&(r._hoveredRow.removeCls("b-hover"),r._hoveredRow=null),t&&!r.scrolling&&(r._hoveredRow=t,t.addCls("b-hover"))}onElementKeyDown(t){let r=this,{target:i,currentTarget:s,ctrlKey:n,key:o}=t;if(t.handled)return;let l=r.focusedCell,c=r.store.stm;if(c&&n&&o.toLowerCase()==="z"&&r.enableUndoRedoKeys&&!r.features.cellEdit?.isEditing&&c.onUndoKeyPress(t),i.matches(".b-grid-header.b-depth-0"))r.handleHeaderKeyDown(t);else if(i===r.focusElement||x.isIE11&&s===r.focusElement){if(r.handleViewKeyDown(t),l){let d=l.element,u=r.columns.getById(d.dataset.columnId);u.onCellKeyDown?.({event:t,cellElement:d}),o===" "&&u.onCellClick&&u.onCellClick({grid:r,column:u,record:r.store.getById(l.id),cellElement:d,target:i,event:t})}}else if(o==="Escape"&&r.isActionableLocation){let d=b.clone(l);d.element=null,r.focusCell(d),g.focusWithoutScrolling(r.focusElement)}}handleViewKeyDown(t){let r=this;switch(t.key){case"ArrowLeft":return t.preventDefault(),r.navigateLeft(t);case"ArrowRight":return t.preventDefault(),r.navigateRight(t);case"ArrowUp":return t.preventDefault(),r.navigateUp(t);case"ArrowDown":return t.preventDefault(),r.navigateDown(t)}}handleHeaderKeyDown(t){let r=this,i=r.columns.getById(t.target.dataset.columnId);switch(i.onKeyDown&&i.onKeyDown(t),t.key){case"ArrowLeft":r.onHeaderLeftKey(i);break;case"ArrowRight":r.onHeaderRightKey(i);break;case"ArrowDown":t.preventDefault(),r.onHeaderDownKey(i);break;case"Enter":r.onHeaderEnterKey(i);break}}onHeaderLeftKey(t){let r=this.columns.getAdjacentVisibleLeafColumn(t,!1);r&&this.getHeaderElement(r.id).focus()}onHeaderRightKey(t){let r=this.columns.getAdjacentVisibleLeafColumn(t,!0);r&&this.getHeaderElement(r.id).focus()}onHeaderDownKey(t){let r=this.firstFullyVisibleRow;r&&this.focusCell({columnId:t.id,id:r.id})}onHeaderEnterKey(t){this.getHeaderElement(t.id).click()}onElementKeyPress(t){}onElementKeyUp(t){}onElementContextMenu(t){let r=this,i=r.getCellDataFromEvent(t);i&&(r.triggerCellMouseEvent("contextMenu",t),g.isTouchEvent&&r.onFocusGesture(i,t))}onInternalResize(t,r,i,s,n){let o=this;o._devicePixelRatio&&o._devicePixelRatio!==window.devicePixelRatio&&g.resetScrollBarWidth(),o._devicePixelRatio=window.devicePixelRatio,o._bodyRectangle=k.client(o.bodyContainer),super.onInternalResize(...arguments),i!==n&&(o._bodyHeight=o.bodyContainer.offsetHeight,o.isPainted&&o.rowManager.initWithHeight(o._bodyHeight)),o.refreshVirtualScrollbars(),r!==s&&o.setTimeout(()=>{o.isDestroyed||o.updateResponsive(r,s)},0)}get widgetClass(){}};var br=new Map,qt=new Map,li="Grid",ai={Grid:"GridBase",Scheduler:"SchedulerBase",SchedulerPro:"SchedulerProBase",Gantt:"GanttBase"},Ru=/\$\d+$/,pe=class{static registerFeature(e,t=!1,r=null,i=null){i=M.uncapitalize(i||Object.prototype.hasOwnProperty.call(e,"$name")&&e.$$name||e.name),i=i.replace(Ru,""),Array.isArray(r)||(r=[r||li]),r.forEach(s=>{let n=ai[s]||s,o=br.get(n)||new Map,l=qt.get(n)||new Map;o.set(i,e),l.set(e,t),br.set(n,o),qt.set(n,l)})}static getTypeNameFeatures(e=li){let t=ai[e]||e,r=br.get(t),i={};return r&&r.forEach((s,n)=>i[n]=s),i}static getTypeNameDefaultFeatures(e=li){let t=ai[e]||e,r=br.get(t),i=qt.get(t),s={};return r&&i&&r.forEach((n,o)=>{i.get(n)&&(s[o]=n)}),s}static getInstanceFeatures(e){return e.$meta.names.reduce((t,r)=>Object.assign(t,this.getTypeNameFeatures(r)),{})}static getInstanceDefaultFeatures(e){return e.$meta.names.reduce((t,r)=>Object.entries(this.getTypeNameFeatures(r)).reduce((i,[s,n])=>(this.isDefaultFeatureForTypeName(n,r)?i[s]=n:delete i[s],i),t),{})}static isDefaultFeatureForTypeName(e,t=li){let r=ai[t]||t,i=qt.get(r);return i&&i.get(e)||!1}static isDefaultFeatureForInstance(e,t){let r=t.$meta.names.slice().reverse(),i=null;for(let s=0,n=r.length;s<n&&i===null;++s){let o=qt.get(r[s]);o&&o.has(e)&&(i=o.get(e))}return i||!1}static reset(){br.clear(),qt.clear()}};var Mu={string:1,object:1,function:1},Sl=a=>class extends(a||S){static get $name(){return"GridFeatures"}set features(t){let r=this,i=pe.getInstanceDefaultFeatures(this);t=r._features=b.assign({},t),i&&Object.keys(i).forEach(n=>{n in t||(t[n]=!0)});let s=pe.getInstanceFeatures(this);for(let n of Object.keys(t)){let o=t[n];if(o){let l=!window.__bryntum_code_editor_changed;if(M.uncapitalize(n)!==n){let d=`Invalid feature name '${n}', must start with a lowercase letter`;if(l)throw new Error(d);console.error(d),r._errorDuringConfiguration=d}let c=s[n];if(!c){let d=`Feature '${n}' not available, make sure you have imported it`;if(l)throw new Error(d);console.error(d),r._errorDuringConfiguration=d;return}Reflect.defineProperty(t,n,r.createFeatureInitializer(t,n,c,o))}}}get features(){return this._features}createFeatureInitializer(t,r,i,s){let n=[this],o=i.prototype.construct;return Mu[typeof s]&&(n[1]=s),{configurable:!0,get(){return delete t[r],i.prototype.construct=function(...l){t[r]=this,o.apply(this,l),i.prototype.construct=o},new i(...n)}}}hasFeature(t){let{features:r}=this;if(r){let i=Object.getOwnPropertyDescriptor(this.features,t);if(i)return Boolean(i.value||i.get)}return!1}get widgetClass(){}};var Fu=Object.freeze({doSelect:!0}),ku=Object.freeze({x:!1,y:!1}),Dl=a=>class extends(a||S){static get $name(){return"GridNavigation"}get focusedCell(){let t=this._focusedCell;if(t&&this.getCell(t))return t;this.clearFocus()}get isActionableLocation(){let t=this._focusedCell;return Boolean(t&&t.element&&this.getCell(t).contains(t.element))}set focusedCell(t){this.focusCell(t,{doSelect:!1})}get focusedRecord(){if(this._focusedCell)return this.store.getById(this._focusedCell.id)}get cellCSSSelector(){let t=this,r=t._focusedCell,i=r&&t.getRowById(r.id);return!r||!i?"":`[data-index=${i.index}] [data-column-id=${r.columnId}]`}onGridElementFocus(t){let r=this,i={doSelect:!1,event:t};if(r._initialFocusedCellContext){let{cellSelector:s,options:n}=r._initialFocusedCellContext;r._focusedCell=null,r.focusCell(s,n),r._initialFocusedCellContext=null}else if(r._focusedCell)r.focusCell(r._focusedCell,i);else{let s=r.element.contains(t.relatedTarget)?null:r.lastFocusedCell;if(s){let n=r.getCell(s);if(!n||!g.isVisible(n)||!r.store.getById(s.id)){r.revertFocus();return}r.returningFocus=!0,r.focusCell(s,i),r.returningFocus=!1}else if(!r.scrolling&&!r.skipFocusSelection&&r.store.first){let{mouseMoveEvent:n,rowManager:o,_bodyRectangle:l}=r,c=n&&o.getRowAt(Math.min(Math.max(n.clientY,l.y),l.bottom))||r.firstFullyVisibleRow,d=n&&r.getCellDataFromEvent(n)||{id:c.id,columnId:r.columns.visibleColumns[0].id};r.getCell(d)&&r.focusCell(d,i)}}r.skipFocusSelection=!1}onFocusOut(t){super.onFocusOut(t),this.clearFocus()}afterHide(){super.afterHide(...arguments),this.lastFocusedCell=this.mouseMoveEvent=null}isFocused(t){return Boolean(this._focusedCell)&&this.isLocationEqual(t,this._focusedCell)}focusCell(t,r=Fu){if(!document.hasFocus()&&x.isMac&&r?.event?.button===2)return;let i=this,s=g.getActiveElement(i);t=i.normalizeCellContext(t===Object?Object.assign({},t):t);let n=r.doSelect!==!1,{event:o,scroll:l}=r,c=i.lastFocusedCell=i._focusedCell,d=i.isLocationEqual(t,c),u=c&&i.getCell(c),f=i.getSubGridFromColumn(t.columnId),h=i.getCell(t);if(o&&o.type==="mousedown"){for(let w=o.target;w!==h;w=w.parentElement)if(g.isFocusable(w)){t.element=w;return}}if(d)return o&&i.onCellNavigate&&i.onCellNavigate(i,null,i._focusedCell,o,n),t;u&&u.classList.remove("b-focused");let m=h||i.getCell({row:i.rowManager.topIndex,columnId:t.columnId}),p=k.from(f.element),y=k.from(i.bodyContainer),C=k.from(m).moveTo(null,p.y);if(l===!1?r=Object.assign({},r,ku):(r=Object.assign({},r,l),C.width>p.width||C.height>y.height?r.x=r.y=!1:r.column=t.columnId,i.scrollRowIntoView(t.id,r)),s!==i.focusElement&&!i.focusElement.contains(s)&&E.fromElement(s)?.owner!==i){i._initialFocusedCellContext={cellSelector:t,options:r},g.focusWithoutScrolling(i.focusElement),!i.isLocationEqual(t,i._focusedCell)&&!x.isIE11&&(i._initialFocusedCellContext=null);return}return h=i.getCell(t),h&&(t.element=h,h.classList.add("b-focused")),i._focusedCell=t,i.onCellNavigate&&i.onCellNavigate(i,c,i._focusedCell,o,n),i.trigger("navigate",{lastFocusedCell:c,focusedCell:i._focusedCell,event:o}),t}isLocationEqual(t,r){return t&&r&&t.id===r.id&&t.columnId===r.columnId&&(!t.element||!r.element||t.element===r.element)}blurCell(t){let r=this,i=r.getCell(t);i&&i.classList.remove("b-focused")}clearFocus(t){let r=this;r._focusedCell&&(r.lastFocusedCell=t?null:r._focusedCell,r.blurCell(r._focusedCell),r._focusedCell=null)}internalNextPrevCell(t=!0,r){let i=this,s=i._focusedCell;return s?i.focusCell({id:s.id,columnId:i.columns.getAdjacentVisibleLeafColumn(s.columnId,t,!0).id},{doSelect:!0,event:r}):null}navigateRight(t){return this.internalNextPrevCell(!0,t)}navigateLeft(t){return this.internalNextPrevCell(!1,t)}internalNextPrevRow(t,r=!0,i,s=!0){let n=this,o=n._focusedCell;if(!o)return!1;let l=n.store[`get${t?"Next":"Prev"}`](o.id,!1,r);if(l)return n.focusCell({id:l.id,columnId:o.columnId,scroll:{x:!1}},{doSelect:!0,event:i});if(!t&&s)return this.clearFocus(),this.getHeaderElement(o.columnId).focus()}navigateDown(t){return this.internalNextPrevRow(!0,!1,t)}navigateUp(t){return this.internalNextPrevRow(!1,!1,t)}get widgetClass(){}};var Tl=a=>class extends(a||S){static get $name(){return"GridResponsive"}static get defaultConfig(){return{responsiveLevels:Object.freeze({small:400,medium:600,large:"*"})}}getClosestBiggerLevel(t){let r=this,i=Object.keys(b.assign({},r.responsiveLevels)),s=null,n=99995,o=null;return i.forEach(l=>{let c=r.responsiveLevels[l];if(["number","string"].includes(typeof c)||(c=c.levelWidth),c==="*")o=l;else if(t<c){let d=c-t;d<n&&(n=d,s=l)}}),s||o}get responsiveLevel(){return this.getClosestBiggerLevel(this.width)}updateResponsive(t,r){let i=this,s=i.getClosestBiggerLevel(r),n=i.getClosestBiggerLevel(t);if(r===0||s!==n){let o=i.responsiveLevels[n];["number","string"].includes(typeof o)||i.applyState(o),i.columns.forEach(l=>{let c=l.responsiveLevels;c&&(c[n]?l.applyState(c[n]):c["*"]&&l.applyState(c["*"]))}),i.element.classList.remove("b-responsive-"+s),i.element.classList.add("b-responsive-"+n),i.trigger("responsive",{level:n,width:t,oldLevel:s,oldWidth:r})}}get widgetClass(){}};var Ou={string:1,number:1},Lu={dataset:1,batch:1},Rl=a=>class extends(a||S){static get $name(){return"GridSelection"}static get defaultConfig(){return{selectionMode:{row:!0,cell:!0,rowCheckboxSelection:!1,multiSelect:!0,checkbox:!1,showCheckAll:!1,deselectFilteredOutRecords:!1,includeChildren:!1,preserveSelectionOnPageChange:!1,preserveSelectionOnDatasetChange:!0},selectedRecordCollection:{}}}afterConfigure(){let t=this;if(t.selectionMode.checkbox){let r=xe.getColumnClass("check"),i=t.selectionMode.checkbox===!0?null:t.selectionMode.checkbox;if(!r)throw new Error("CheckColumn must be imported for checkbox selection mode to work");let s=t.checkboxSelectionColumn=new r(b.assign({id:`${t.id}-selection-column`,width:"4em",minWidth:"4em",field:null,cellCls:"b-checkbox-selection",region:t.items[0].region,showCheckAll:t.selectionMode.showCheckAll},i),t.columns);s.isSelectionColumn=!0,s.meta.depth=0,s._grid=t;let n=s.renderer;s.renderer=l=>{l.value=t.isSelected(l.record),n.call(s,l)},s.on({toggle:"onCheckChange",toggleAll:"onCheckAllChange",thisObj:t});let o=t.columns.indexOf(t.columns.findRecord("type","rownumber"))+1;t.columns.insert(o,s)}super.afterConfigure()}bindStore(t){this.detachListeners("selectionStoreFilter"),t.on({name:"selectionStoreFilter",filter:"onStoreFilter",thisObj:this}),super.bindStore?.(t)}unbindStore(t){this.detachListeners("selectionStoreFilter"),super.unbindStore(t)}onStoreFilter({records:t}){if(this.selectionMode.deselectFilteredOutRecords){let{filtersFunction:r}=this.store,i=this.selectedRecordCollection.values.filter(s=>!r(s));this.selectedRecordCollection.remove(i)}}onStoreRecordIdChange({record:t,oldValue:r}){super.onStoreRecordIdChange&&super.onStoreRecordIdChange(...arguments),this.selectedRecordCollection.get(r)===t&&this.selectedRecordCollection.rebuildIndices()}onSelectedRecordCollectionChange({source:t,action:r,added:i=[],removed:s}){let n=this;n._selectedCell&&!n.isSelectable(n._selectedCell)&&n.deselectCell(n._selectedCell),i=i.filter(o=>n.isSelectable(o)),n.triggerChangeEvent({mode:"row",action:i.length?"select":"deselect",selection:n.selectedRecords,selected:i,deselected:s},n.silent)}onCheckChange({source:t,checked:r,record:i}){let s=this,{selectionMode:n,store:o}=s,l=n.includeChildren&&n.multiSelect!==!1&&!i.isLeaf&&i.allChildren,c=[i,...l||[]];r?(s.selectRows(c,n.multiSelect!==!1),t.headerCheckbox&&s.selectedRecords.length===o.count-(o.groupRecords?o.groupRecords.length:0)&&(t.suspendEvents(),t.headerCheckbox.checked=!0,t.resumeEvents())):(s.deselectRows(c),t.headerCheckbox&&(t.suspendEvents(),t.headerCheckbox.checked=!1,t.resumeEvents()))}onCheckAllChange({checked:t}){this[t?"selectAll":"deselectAll"](this.store.isPaged&&this.selectionMode.preserveSelectionOnPageChange)}set selectedRecordCollection(t){t instanceof Re||(t=new Re(t)),this._selectedRecordCollection=t,t.on({change:"onSelectedRecordCollectionChange",thisObj:this})}get selectedRecordCollection(){return this._selectedRecordCollection}spliceSelectedRecords(t,r,i){this._selectedRecordCollection.splice(t,r,i)}isSelected(t){let r=this;return t?.isModel&&(t=t.id),Ou[typeof t]?r.selectedRecordCollection.includes(t):r._selectedCell&&r._selectedCell.id==t.id&&r._selectedCell.columnId===t.columnId}isSelectable(t){if(!t)return!1;let r=this.store.getById(t.id||t);return r&&!(r.meta&&r.isSpecialRow)}get selectedCell(){return this._selectedCell}set selectedCell(t){this.selectCell(t)}set selectionMode(t){t?.rowCheckboxSelection&&(t.row=!0,t.checkbox=t.checkbox||!0,t.cell=!1),this._selectionMode=t}get selectionMode(){return this._selectionMode}get selectedRecord(){return this.selectedRecordCollection.last||null}set selectedRecord(t){this.selectRow({record:t})}get selectedRecords(){return this.selectedRecordCollection.values}set selectedRecords(t){this.selectRows(t)}get selectedCellCSSSelector(){let t=this,r=t._selectedCell,i=r&&t.getRowById(r.id);return!r||!i?"":`[data-index=${i.dataIndex}] [data-column-id=${r.columnId}]`}selectRow({record:t,column:r=this.columns.visibleColumns[0],scrollIntoView:i=!0,addToSelection:s=!1}){let n=this;arguments[0].isModel?t=arguments[0]:t=n.store.getById(t),t?n.selectCell({id:t.id,column:r},i,s):n.deselectAll()}selectCell(t,r=!1,i=!1,s=!1){let n=this,{selectedRecordCollection:o,selectionMode:l}=n,c=n.normalizeCellContext(t),d=c.record||n.store.getById(c.id);if(!n.isSelectable(d)){n.deselectAll();return}if(r&&n.scrollRowIntoView(c.id,{column:c.columnId}),l.row&&(s&&(n.silent=(n.silent||0)+1),i?o.add(d):o.splice(0,o.count,d),s&&n.silent--,n.selectedRecordCollection.count===1&&(n.startCell=c,n.lastRange=null)),l.cell&&(c.columnId||c.column)&&!n.isSelected(c)){let u=n._selectedCell?[n._selectedCell]:[];n._selectedCell=c,n.triggerChangeEvent({mode:"cell",action:"select",selected:[c],deselected:u,selection:[c]},s)}return c}selectAll(){let t=this,{store:r}=t;r.isFiltered&&!t.selectionMode.deselectFilteredOutRecords?t.selectedRecordCollection.add(...(r.isGrouped?r.allRecords:r.records).filter(i=>!i.isSpecialRow)):t.selectRows(r.allRecords.filter(i=>!i.isSpecialRow),!0)}deselectAll(t=!1){let r=this;t?r.selectedRecordCollection.remove(...r.store.records):r.selectedRecordCollection.clear(),r._selectedCell&&r.deselectCell(r._selectedCell)}deselectRow(t){this.deselectRows(t)}selectRows(t,r=!1){let{store:i}=this,s=[];t=Array.isArray(t)?t:t==null?[]:[t];for(let n of t)n=i.getById(n),n&&s.push(n);r?this.selectedRecordCollection.add(s):this.selectedRecordCollection.splice(0,this.selectedRecordCollection.count,s)}deselectRows(t){t=Array.isArray(t)?t:[t];let r=t.map(i=>this.store.getById(i));this.selectedRecordCollection.remove(r)}deselectCell(t){let r=this,i=r.normalizeCellContext(t),s=r.selectionMode,n=i.record||r.store.getById(i.id),o=r._selectedCell;return s.row&&r.selectedRecordCollection.remove(n),s.cell&&i.columnId&&o&&o.id===i.id&&o.columnId===i.columnId&&(r._selectedCell=null,r.triggerChangeEvent({mode:"cell",action:"deselect",selected:[],deselected:[i],selection:[]})),i}selectRange(t,r){let{store:i,selectedRecordCollection:s}=this,n=i.indexOf(t),o=i.indexOf(r),l=Math.min(n,o),c=Math.max(n,o);if(l===-1||c===-1)throw new Error("Record not found in selectRange");s.splice(0,s.count,i.getRange(l,c+1,!1))}onStoreRemove(t){super.onStoreRemove&&super.onStoreRemove(t),t.isCollapse||this.selectedRecordCollection.remove(t.records)}onStoreDataChange({action:t,source:r}){let i=this,{selectionMode:s,checkboxSelectionColumn:n,selectedRecordCollection:o}=i;if(super.onStoreDataChange&&super.onStoreDataChange(...arguments),t==="pageLoad")s.preserveSelectionOnPageChange||i.deselectAll(),n?.updateCheckAllState(!r.find(l=>!o.includes(l)));else if(Lu[t]){let l=[];s.preserveSelectionOnDatasetChange===!1?i.deselectAll():(o.forEach(c=>{let d=r.getById(c.id);if(d){let u=o.indexOf(c);o.splice(u,1,d)}else l.push(c)}),o.remove(l))}}onStoreRemoveAll(){super.onStoreRemoveAll&&super.onStoreRemoveAll(),this.deselectAll()}handleMouseMultiSelect(t,r){let i=this,s=t.id;function n(o,l){let{store:c,selectedRecordCollection:d}=i,u=c.indexOf(o),f=c.indexOf(l),h=Math.min(u,f),m=Math.max(u,f);if(h===-1||m===-1)throw new Error("Record not found in selectRange");let p=c.getRange(h,m+1,!1).filter(y=>i.isSelectable(y));d.splice(0,i.lastRange||0,p),i.lastRange=p}(r.metaKey||r.ctrlKey)&&i.isSelected(s)?i.deselectRow(s):i.selectionMode.multiSelect&&(r.shiftKey&&i.startCell?n(i.startCell.id,s):(r.ctrlKey||r.metaKey)&&i.selectRow({record:s,scrollIntoView:!1,addToSelection:!0}))}onCellNavigate(t,r,i,s,n=!0){if(t.columns.getById(i.columnId)===t.checkboxSelectionColumn||t.selectionMode.rowCheckboxSelection||!n||t.returningFocus||s&&s.button===0&&s.target.closest(".b-tree-expander"))return;let o=r&&i.id===r.id,l=s&&s.type==="mousedown",c=l&&s.ctrlKey;if(s&&(!s.button||s.button===2)&&(s.shiftKey||c))t.handleMouseMultiSelect(i,s);else{let d=o&&(!s||s.shiftKey||s.ctrlKey),u=s&&t.isSelected(i.id),f=c;t.selectCell(i,!1,d||f||u)}(!t.startCell||c)&&(t.startCell=i,t.lastRange=null)}triggerChangeEvent(t,r){let i=this,{mode:s,selected:n,deselected:o}=t,{checkboxSelectionColumn:l}=i,c,d,u,f;if(s==="row"){for(c=0,d=n.length;c<d;c++)u=i.getRowFor(n[c]),u&&(u.addCls("b-selected"),l&&!l.hidden&&!n[c].isSpecialRow&&(u.getCell(l.id).widget.checked=!0));for(c=0,d=o.length;c<d;c++)u=i.getRowFor(o[c]),u&&(u.removeCls("b-selected"),l&&!l.hidden&&!o[c].isSpecialRow&&(u.getCell(l.id).widget.checked=!1))}else if(s==="cell"){for(c=0,d=n.length;c<d;c++)f=i.getCell(n[c]),f&&f.classList.add("b-selected");for(c=0,d=o.length;c<d;c++)f=i.getCell(o[c]),f&&f.classList.remove("b-selected")}r||i.trigger("selectionChange",t)}onCellClick({event:t,record:r}){let i=this;!i.selectionMode.checkbox&&i.selectionMode.multiSelect&&!t.shiftKey&&!t.metaKey&&!t.ctrlKey&&i.deselectRows(i.selectedRecords.filter(s=>s!==r))}doDestroy(){this.selectedRecordCollection?.destroy(),super.doDestroy()}get widgetClass(){}};var Iu=a=>a.columns.suspendEvents(),ju=a=>a.columns.resumeEvents(),Hu=a=>{a.columns.clearCaches(),a.columns.fillFromMaster()},Hs=(a,e)=>a.stateSortIndex-e.stateSortIndex,Ml=a=>class extends(a||S){static get $name(){return"GridState"}getState(){let t=this,r=t.element.style.cssText,i={rowHeight:t.rowHeight,readOnly:t.readOnly};if(r&&(i.style=r),t.selectedCell){let{id:s,columnId:n}=t.selectedCell;i.selectedCell={id:s,columnId:n}}return i.selectedRecords=t.selectedRecords.map(s=>s.id),i.columns=t.columns.map(s=>s.getState()),i.store=t.store.state,i.scroll=t.storeScroll(),i.subGrids={},t.eachSubGrid(s=>{let n=i.subGrids[s.region]=i.subGrids[s.region]||{};s.flex==null&&(n.width=s.width),n.collapsed=s.collapsed??!1,n.collapsed&&(n._beforeCollapseState=s._beforeCollapseState)}),i}applyState(t){let r=this;if("columns"in t){let i=!1,s=!1;r.columns.suspendEvents(),r.eachSubGrid(Iu),t.columns.forEach((n,o)=>{let l=r.columns.getById(n.id);if(l){let c=l.generation;l.applyState(n),i=i||l.generation!==c,l.stateSortIndex=o,l.allIndex!==o&&(s=i=!0)}}),i&&r.eachSubGrid(Hu),s&&(r.eachSubGrid(n=>{n.columns.records.sort(Hs),n.columns.allRecords.sort(Hs)}),r.columns.sort({fn:Hs,ascending:!0})),r.isPainted&&i&&r.renderContents(),r.columns.resumeEvents(),r.eachSubGrid(ju)}"subGrids"in t&&r.eachSubGrid(i=>{if(i.region in t.subGrids){let s=t.subGrids[i.region];"width"in s&&(i.width=s.width),"collapsed"in s&&(i.collapsed=s.collapsed,i._beforeCollapseState=s._beforeCollapseState)}}),"readOnly"in t&&(r.readOnly=t.readOnly),"rowHeight"in t&&(r.rowHeight=t.rowHeight),"style"in t&&(r.style=t.style),"selectedCell"in t&&(r.selectedCell=t.selectedCell),"store"in t&&(r.store.state=t.store),"selectedRecords"in t&&(r.selectedRecords=t.selectedRecords),"scroll"in t&&r.restoreScroll(t.scroll)}get widgetClass(){}};var As=Promise.resolve(),Au={block:"nearest"},ci=class extends ke{static get configurable(){return{propagate:!1}}scrollIntoView(e,t=Au){let r=this,{xDelta:i,yDelta:s}=r.getDeltaTo(e,t),n=i||s?r.scrollBy(i,s,t):As;return(t.highlight||t.focus)&&n.then(()=>{t.highlight&&(e instanceof k?e.translate(-i,-s).highlight():g.highlight(e)),t.focus&&e.focus&&e.focus()}),n}scrollBy(e,t,r){let i=t&&this.yScroller.scrollBy(0,t,r),s=e&&super.scrollBy(e,0,r);if(s&&s.cancel&&i&&i.cancel){let n=s.cancel,o=i.cancel;return s.cancel=i.cancel=()=>{n(),o()},Promise.all([s,i])}return s||i||As}scrollTo(e,t,r){let i=t!=null&&this.yScroller.scrollTo(null,t,r),s=e!=null&&super.scrollTo(e,null,r);if(r&&r.animate||this.syncPartners(),s&&s.cancel&&i&&i.cancel){let n=s.cancel,o=i.cancel;return s.cancel=i.cancel=()=>{n(),o()},Promise.all([s,i])}return s||i||As}get viewport(){let e=k.from(this.element);return e.intersect(k.from(this.yScroller.element))||new k(e.x,e.y,e.width,0)}set y(e){this.yScroller&&(this.yScroller.y=e)}get y(){return this.yScroller?this.yScroller.y:0}get maxY(){return this.yScroller?this.yScroller.maxY:0}get scrollHeight(){return this.yScroller?this.yScroller.scrollHeight:0}get clientHeight(){return this.yScroller?this.yScroller.clientHeight:0}};var Ut=class extends E{static get $name(){return"SubGrid"}static get type(){return"subgrid"}static get defaultConfig(){return{localizableProperties:["emptyText"],insertRowsBefore:null,appendTo:null,monitorResize:!0,headerClass:null,footerClass:null,collapsed:null,scrollable:{overflowX:!0},scrollerClass:ci,hasCalculatedWidth:null,sealedColumns:null,emptyText:null}}static get configurable(){return{element:!0,header:{},footer:{},virtualScrollerElement:!0,splitterElement:!0,headerSplitter:!0,scrollerSplitter:!0,footerSplitter:!0,resizable:null}}construct(e){let t=this;if(super.construct(e),this.rowManager.on("addrows",this.onAddRow,this),x.isFirefox){let{element:r}=t,i=t.grid.scrollable,s=0;r.addEventListener("wheel",({ctrlKey:n,deltaY:o,deltaX:l})=>{let c=Math.abs(o)>Math.abs(l);!n&&c&&!t.scrollEndDetacher&&i.y!==s&&(r.style.pointerEvents="none",s=i.y,t.scrollEndDetacher=i.on({scrollEnd:async()=>{s=i.y,r.style.pointerEvents="",t.scrollEndDetacher=null},once:!0}))})}}doDestroy(){let e=this;e.header.destroy(),e.footer.destroy(),e.fakeScroller?.destroy(),e.virtualScrollerElement.remove(),e.splitterElement.remove(),e.headerSplitter.remove(),e.scrollerSplitter.remove(),e.footerSplitter.remove(),super.doDestroy()}get barConfig(){let e=this,{width:t,flex:r}=e.element.style,i={subGrid:e,parent:e};return r?i.flex=r:t&&(i.width=t),i}changeHeader(e){return new this.headerClass(b.assign({id:this.id+"-header"},this.barConfig,e))}changeFooter(e){return new this.footerClass(b.assign({id:this.id+"-footer"},this.barConfig,e))}toggleSplitterCls(e,t=!0){let r=this;[r.splitterElement,r.headerSplitter,r.footerSplitter,r.scrollerSplitter].forEach(s=>s?.classList[t?"add":"remove"](e))}changeElement(e,t){let{region:r}=this;return super.changeElement({className:{"b-grid-subgrid":1,[`b-grid-subgrid-${r}`]:r,"b-grid-horizontal-scroller":1,"b-grid-subgrid-collapsed":this.collapsed},dataset:{region:r}},t)}get rowElementConfig(){return{className:"b-grid-row",children:this.columns.visibleColumns.map(e=>({className:"b-grid-cell",dataset:{column:e.field||"",columnId:e.id}}))}}changeVirtualScrollerElement(){let e=g.createElement({reference:"virtualScrollerElement",className:"b-virtual-scroller",dataset:{region:this.region},children:[{reference:"virtualScrollerWidth",className:"b-virtual-width"}]});return this.virtualScrollerWidth=e.virtualScrollerWidth,e.virtualScrollerElement}changeSplitterElement(){let e=g.createElement({reference:"splitterElement",className:{"b-grid-splitter":1,"b-grid-splitter-collapsed":this.collapsed,"b-hide-display":1},dataset:{region:this.region},children:[{className:"b-grid-splitter-inner b-grid-splitter-main",children:[{className:"b-grid-splitter-buttons",reference:"splitterButtons",children:[{tag:"i",className:"b-icon b-icon-collapse-gridregion"},{tag:"i",className:"b-icon b-icon-expand-gridregion"}]}]}]});return this.splitterButtons=e.splitterButtons,e.splitterElement}get splitterConfig(){return{className:this.splitterElement.className.trim(),children:[{className:"b-grid-splitter-inner"}],dataset:{region:this.region}}}changeHeaderSplitter(){return g.createElement(this.splitterConfig)}changeScrollerSplitter(){return g.createElement(this.splitterConfig)}changeFooterSplitter(){return g.createElement(this.splitterConfig)}hideSplitter(){let e=this;e.splitterElement.classList.add("b-hide-display"),e.headerSplitter.classList.add("b-hide-display"),e.scrollerSplitter.classList.add("b-hide-display"),e.footerSplitter.classList.add("b-hide-display"),e.$showingSplitter=!1}showSplitter(){let e=this;e.splitterElement.classList.remove("b-hide-display"),e.headerSplitter.classList.remove("b-hide-display"),e.scrollerSplitter.classList.remove("b-hide-display"),e.footerSplitter.classList.remove("b-hide-display"),e.$showingSplitter=!0}render(...e){let t=this;super.render(...e),t.grid&&(t.updateHasFlex(),t.element.parentNode.insertBefore(t.splitterElement,t.element.nextElementSibling),O.on({element:t.grid.element,delegate:`.b-grid-splitter[data-region=${t.region}]`,mouseover:"onSplitterMouseOver",mouseout:"onSplitterMouseOut",thisObj:t}),t._collapsed&&t.collapse())}refreshHeader(){this.header.refreshContent()}refreshFooter(){this.footer?.refreshContent()}eachWidget(e,t=!0){let r=this,i=[r.header,r.footer];for(let s=0;s<i.length;s++){let n=i[s];if(e(n)===!1)return;t&&n.eachWidget&&n.eachWidget(e,t)}}fixCellWidths(e){let{visibleColumns:t}=this.columns,r=e.firstElementChild,i=0;for(;r;){let s=t[i];s.minWidth&&(r.style.minWidth=g.setLength(s.minWidth)),s.maxWidth&&(r.style.maxWidth=g.setLength(s.maxWidth)),s.flex?(r.style.flex=s.flex,r.style.width=""):s.width?(r.style.width=g.setLength(s.width),x.isIE11&&(r.style.flex="",r.style.minWidth=g.setLength(s.calcMinWidth))):r.style.flex=r.style.width=r.style.minWidth="",r=r.nextElementSibling,i++}}get totalFixedWidth(){return this.columns.totalFixedWidth}fixWidths(){let e=this,{element:t,header:r,footer:i}=e;if(!e.collapsed){if(e.flex)r.flex=e.flex,i&&(i.flex=e.flex),t.style.flex=e.flex;else{if(e.hasCalculatedWidth&&!e.columns.some(n=>!n.hidden&&n.flex)&&e.totalFixedWidth!==e.width){e.width=e.totalFixedWidth,e.hasCalculatedWidth=!0;return}let s=e.width;if(!s){s=0;for(let n of e.columns)!n.flex&&!n.hidden&&(s+=n.width)}t.style.width=`${s}px`,r.width=s,i&&(i.width=s)}e.syncScrollingPartners(!1)}}fixRowWidthsInSafariEdge(){if(x.isSafari||x.isEdge){let e=this,{region:t,header:r}=e,i=r.calculateMinWidthForSafari();e.rowManager.forEach(s=>{let n=s.getElement(t);n&&(n.style.width=`${i}px`)}),r.headersElement.style.width=`${i}px`}}set width(e){let t=this;t.hasCalculatedWidth=!1,super.width=e,t.header.width=e,t.footer.width=e,t.isPainted&&t.onElementResize()}get width(){return super.width}set flex(e){let t=this;t.hasCalculatedWidth=!1,t.header.flex=e,t.footer.flex=e,super.flex=e,t.isPainted&&t.onElementResize()}get flex(){return super.flex}onInternalResize(e,t,r,i,s){let n=this,{grid:o}=n;super.onInternalResize(e,t,r,i,s),o&&(n.syncSplitterButtonPosition(),t!==i&&(o.trigger("horizontalScroll",{subGrid:n,grid:o,scrollLeft:n.scrollable.x}),n.fakeScroller&&n.refreshFakeScroll(),n.fixRowWidthsInSafariEdge()),n.trigger("afterInternalResize",n))}syncParallelSplitters(e){let t=this,{grid:r}=t;if(t.splitterElement&&t.$showingSplitter)t.toggleSplitterCls("b-grid-splitter-collapsed",e);else{let i=r.getSubGrid(r.getPreviousRegion(t.region));i&&i.splitterElement&&i.syncParallelSplitters(e)}}onSplitterMouseOver(){let e=this,{nextSibling:t}=e;!e.collapsed&&(!t||!t.collapsed)&&e.toggleSplitterCls("b-hover"),e.startSplitterButtonSyncing()}onSplitterMouseOut(){let e=this,{nextSibling:t}=e;e.toggleSplitterCls("b-hover",!1),!e.collapsed&&(!t||!t.collapsed)&&e.stopSplitterButtonSyncing()}startSplitterButtonSyncing(){let e=this;e.splitterElement&&(e.syncSplitterButtonPosition(),e.splitterSyncScrollListener||(e.splitterSyncScrollListener=e.grid.scrollable.on({scroll:"syncSplitterButtonPosition",thisObj:e})))}stopSplitterButtonSyncing(){this.splitterSyncScrollListener&&(this.splitterSyncScrollListener(),this.splitterSyncScrollListener=null)}syncSplitterButtonPosition(){let e=this;e.splitterButtons.style.transform=`translateY(${e.grid.scrollable.y+(e.grid.bodyHeight-(e.headerSplitter?e.grid.headerHeight:0))/2}px)`}get viewRectangle(){let{scrollable:e}=this;return new k(e.x,e.y,this.width||0,this.rowManager.viewHeight)}updateHasFlex(){let e=this.columns.visibleColumns.some(t=>t.flex);g.toggleClasses(this.element,["b-has-flex"],e)}updateResizable(e){let t=this;[t.splitterElement,t.headerSplitter,t.scrollerSplitter,t.footerSplitter].forEach(r=>g.toggleClasses(r,["b-disabled"],!e))}resizeColumnsToFitContent(){this.grid.beginGridMeasuring(),this.columns.visibleColumns.forEach(e=>{e.resizeToFitContent(null,null,!0)}),this.grid.endGridMeasuring()}get overflowingHorizontally(){let{scrollable:e}=this;return e.scrollWidth>e.clientWidth+(x.isEdge?1:0)}get overflowingVertically(){let{scrollable:e}=this;return e.scrollHeight>e.clientHeight+(x.isEdge?1:0)}refreshFakeScroll(){let e=this,{element:t,virtualScrollerElement:r,virtualScrollerWidth:i,header:s,footer:n,scrollable:o}=e,l=s.scrollable.scrollWidth;o.scrollWidth=l,r.style.width=t.style.width,r.style.flex=t.style.flex,e.collapsed||(e.overflowingHorizontally?(i.style.width=`${o.scrollWidth||0}px`,s.element.classList.add("b-overflowing"),n.element.classList.add("b-overflowing"),e.grid.virtualScrollers.classList.remove("b-hide-display")):(i.style.width=0,s.element.classList.remove("b-overflowing"),n.element.classList.remove("b-overflowing")))}initScroll(){let e=this,{scrollable:t,virtualScrollerElement:r}=e;e.syncPartnersOnFrame=e.createOnFrame(e.syncScrollingPartners),x.isFirefox&&t.element.addEventListener("wheel",i=>{i.deltaX&&(t.x+=i.deltaX,i.preventDefault())}),t.yScroller=e.grid.scrollable,t.yScroller.addScroller(t),e.fakeScroller=new ke({element:r,overflowX:!0}),t.on({scroll:"onSubGridScroll",scrollend:"onSubGridScrollEnd",thisObj:e}),t.addPartner(e.fakeScroller,"x"),t.addPartner(e.header.scrollable,"x"),t.addPartner(e.footer.scrollable,"x"),e.refreshFakeScroll()}onSubGridScrollEnd(){this.forceScrollUpdate||this.syncScrollingPartners(),this.scrolling=!1,g.scrollBarWidth||this.grid.virtualScrollers.classList.remove("b-scrolling")}onSubGridScroll(){this.forceScrollUpdate?(this.syncScrollingPartners(),this.forceScrollUpdate=!1):this.syncPartnersOnFrame()}set scrolling(e){this._scrolling=e}get scrolling(){return this._scrolling}syncScrollingPartners(e=!0){let t=this,{grid:r}=t;!t.scrolling&&e&&(t.scrolling=!0,g.scrollBarWidth||r.virtualScrollers.classList.add("b-scrolling")),r.trigger("horizontalScroll",{subGrid:t,grid:r,scrollLeft:t.scrollable.x})}scrollColumnIntoView(e,t){let r=this,i=r.header.scrollable;if(e=e instanceof ne?e:r.columns.get(e)||r.columns.getById(e)||r.columns.getAt(e),e){let s=r.header.getHeader(e.id);if(s)return i.scrollIntoView(k.from(s,null,!0),t)}}onAddRow({rows:e}){let t=this,r=t.rowElementConfig,i=document.createDocumentFragment();e.forEach(s=>{let n=g.createElement(r);i.appendChild(n),s.addElement(t.region,n),t.fixCellWidths(n)}),t.fixRowWidthsInSafariEdge(),t.element.insertBefore(i,t.insertRowsBefore)}get rowElements(){return this.fromCache(".b-grid-row",!0)}clearRows(){this.emptyCache();let e=this.element.querySelectorAll(".b-grid-row"),t=document.createRange();e.length&&(t.setStartBefore(e[0]),t.setEndAfter(e[e.length-1]),t.deleteContents())}addNewRowElement(){let e=g.append(this.element,this.rowElementConfig);return this.fixCellWidths(e),e}get emptyText(){return this._emptyText}set emptyText(e){this._emptyText=e,this.element.dataset.emptyText=e}get store(){return this.grid.store}get rowManager(){return this.grid?.rowManager}toggleTransitionClasses(e=!1){let t=this,r=t.grid,i=r.getSubGrid(r.getNextRegion(t.region)),s=r.resolveSplitter(i);i.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),i.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),t.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),t.header.element.classList[e?"remove":"add"]("b-grid-subgrid-animate-collapse"),s.classList[e?"remove":"add"]("b-grid-splitter-animate")}get collapsed(){return this._collapsed}set collapsed(e){this.isConfiguring?this._collapsed=e:e?this.collapse():this.expand()}async collapse(){let e=this,t=e.grid,r=t.getSubGrid(t.getNextRegion(e.region)),i=e.splitterElement?e:e.previousSibling,s=0;return t.eachSubGrid(n=>{n!==e&&!n._collapsed&&++s}),s===0&&await r.expand(),new Promise(n=>{if(!e._beforeCollapseState){e._beforeCollapseState={};let o=!1;e.width&&(o=!0,e.on({afterinternalresize:()=>{n(e)},thisObj:e,once:!0})),e._beforeCollapseState.width=e.width,e._beforeCollapseState.elementWidth=e.element.style.width,r.element.style.flex===""&&(e._beforeCollapseState.nextRegionWidth=r.width,r.width+=e._beforeCollapseState.width),e.element.style.flex!==""&&(e._beforeCollapseState.flex=e.element.style.flex,e.header.element.style.flex=e.element.style.flex=""),e.element.classList.add("b-grid-subgrid-collapsed"),e.virtualScrollerElement.classList.add("b-collapsed"),e.header.element.classList.add("b-collapsed"),e.footer.element.classList.add("b-collapsed"),e._collapsed=!0,e.width="",o||(e.syncParallelSplitters(!0),n(!1))}}).then(n=>{e.isDestroyed||(n!==!1&&(e.syncParallelSplitters(!0),i.startSplitterButtonSyncing?.()),e.grid.trigger("subGridCollapse",{subGrid:e}))})}async expand(){let e=this,t=e.grid,r=t.getSubGrid(t.getNextRegion(e.region)),i=e.splitterElement?e:e.previousSibling;return new Promise(s=>{if(e._beforeCollapseState!=null){let n=!1;e.width!==e._beforeCollapseState.elementWidth&&(n=!0,e.on({afterinternalresize:()=>{e.setTimeout(()=>s(e),10)},thisObj:e,once:!0})),r.element.style.flex===""&&(r.width=e._beforeCollapseState.nextRegionWidth),e.element.classList.remove("b-grid-subgrid-collapsed"),e._collapsed=!1,e.virtualScrollerElement.classList.remove("b-collapsed"),e.header.element.classList.remove("b-collapsed"),e.footer.element.classList.remove("b-collapsed"),e._beforeCollapseState.flex?(e.width=e._beforeCollapseState.width,e.header.flex=e.flex=e._beforeCollapseState.flex,e.footer.flex=e._beforeCollapseState.flex,e._width=null):e.width=e._beforeCollapseState.elementWidth,e.element.classList.remove("b-grid-subgrid-collapsed"),e._collapsed=!1,n||s(!1),delete e._beforeCollapseState}}).then(s=>{s!==!1&&(i.stopSplitterButtonSyncing(),e.syncParallelSplitters(!1),e.grid.trigger("subGridExpand",{subGrid:e}))})}};Ut.initClass();var Fl=a=>class extends(a||S){static get $name(){return"GridSubGrids"}static get properties(){return{subGrids:{}}}changeSubGridConfigs(t){let r=this,i=new Set;for(let s of r.columns){let{region:n}=s;n&&(t[n]||(t[n]={}),i.add(n))}t.normal&&b.isEmpty(t.normal)&&(t.normal=it.defaultConfig.subGridConfigs.normal);for(let s of i)r.createSubGrid(s,t[s]);return r.items=r.subGrids,t}createSubGrid(t,r=null){let i=this,s=i.columns.makeChained(c=>c.region===t,["region"]),n=b.assign({type:"subgrid",id:`${i.id}-${t}Subgrid`,grid:i,region:t,headerClass:i.headerClass,footerClass:i.footerClass,columns:s,weight:t},r||i.subGridConfigs[t]),o=!1;!n.flex&&!n.width&&(n.width=s.totalFixedWidth,o=!0);let l=i.subGrids[t]=Ut.create(n);return l.hasCalculatedWidth=o,t===i.regions[0]&&(l.isFirstRegion=!0),l}onChildAdd(t){if(t.isSubGrid){let r=this,{items:i,headerContainer:s,virtualScrollers:n,footerContainer:o}=r,l=i.indexOf(t)*2;r.hideHeaders||(g.insertAt(s,t.headerSplitter,l),g.insertAt(s,t.header.element,l)),g.insertAt(n,t.scrollerSplitter,l),g.insertAt(n,t.virtualScrollerElement,l),g.insertAt(o,t.footerSplitter,l),g.insertAt(o,t.footer.element,l),i.forEach((c,d)=>{d<i.length-1&&c.showSplitter()})}return super.onChildAdd(t)}onChildRemove(t){if(super.onChildRemove(t),t.isSubGrid){let{items:r}=this;delete this.subGrids[t.region],U.remove(this.regions,t.region),t.destroy(),r.length&&r[r.length-1].hideSplitter()}}doDestroy(){this.eachSubGrid(t=>t.destroy()),super.doDestroy()}eachSubGrid(t,r=null){this.items.forEach((i,s)=>{i.isSubGrid&&t.call(r||i,i,s++)})}callEachSubGrid(t,...r){let i=null;return this.items.forEach((s,n)=>{if(s[t]){let o=s[t](...r);n===0&&(i=o)}}),i}get regions(){return this.items.map(t=>t.region)}getLastRegions(){let t=this.regions.slice(-2);return t.length===2?t:[t[0],t[0]]}getNextRegion(t){let r=this.regions;return r[r.indexOf(t)+1]||r[r.length-2]}getPreviousRegion(t){return this.regions[this.regions.indexOf(t)-1]}getSubGrid(t){return this.subGrids[t]}getSubGridFromColumn(t){return t=t instanceof ne?t:this.columns.getById(t)||this.columns.get(t),this.getSubGrid(t.region)}resolveSplitter(t){let r=this.getLastRegions(),i=t instanceof Ut?t.region:t;return r[1]===i&&(i=r[0]),this.subGrids[i].splitterElement}get widgetClass(){}};var kl=a=>class extends a{static get $name(){return"LoadMaskable"}static get configurable(){return{loadMaskDefaults:{useTransition:!0,showDelay:1e3},loadMaskError:{icon:"b-icon b-icon-warning",autoClose:3e3,showDelay:0},loadMask:{text:"L{GridBase.loadMask}"},syncMask:{text:"L{GridBase.syncMask}"},localizableProperties:["loadMask.text","syncMask.text"]}}applyLoadMask(){let t=this,{loadMask:r}=t;r&&(t.masked=Ae.mergeConfigs(t.loadMaskDefaults,r))}applyMaskError(t){let{loadMaskError:r,masked:i}=this;i&&(b.assign(i.errorDefaults,r),i.error=t)}get widgetClass(){}};var Pu=Je.mergeLocales(xo,{ColumnPicker:{column:"Column",columnsMenu:"Columns",hideColumn:"Hide column",hideColumnShort:"Hide",newColumns:"New columns"},Filter:{applyFilter:"Apply filter",filter:"Filter",editFilter:"Edit filter",on:"On",before:"Before",after:"After",equals:"Equals",lessThan:"Less than",moreThan:"More than",removeFilter:"Remove filter"},FilterBar:{enableFilterBar:"Show filter bar",disableFilterBar:"Hide filter bar"},Group:{group:"Group",groupAscending:"Group ascending",groupDescending:"Group descending",groupAscendingShort:"Ascending",groupDescendingShort:"Descending",stopGrouping:"Stop grouping",stopGroupingShort:"Stop"},Search:{searchForValue:"Search for value"},Sort:{sort:"Sort",sortAscending:"Sort ascending",sortDescending:"Sort descending",multiSort:"Multi sort",removeSorter:"Remove sorter",addSortAscending:"Add ascending sorter",addSortDescending:"Add descending sorter",toggleSortAscending:"Change to ascending",toggleSortDescending:"Change to descending",sortAscendingShort:"Ascending",sortDescendingShort:"Descending",removeSorterShort:"Remove",addSortAscendingShort:"+ Ascending",addSortDescendingShort:"+ Descending"},GridBase:{loadFailedMessage:"Data loading failed!",syncFailedMessage:"Data synchronization failed!",unspecifiedFailure:"Unspecified failure",networkFailure:"Network error",parseFailure:"Failed to parse server response",noRows:"No records to display",moveColumnLeft:"Move to left section",moveColumnRight:"Move to right section",removeRow:"Delete",moveColumnTo:a=>`Move column to ${a}`},CellMenu:{removeRow:"Delete"},RowCopyPaste:{copyRecord:"Copy",cutRecord:"Cut",pasteRecord:"Paste"},PdfExport:{"Waiting for response from server":"Waiting for response from server...","Export failed":"Export failed","Server error":"Server error","Generating pages":"Generating pages..."},ExportDialog:{width:"40em",labelWidth:"12em",exportSettings:"Export settings",export:"Export",exporterType:"Control pagination",cancel:"Cancel",fileFormat:"File format",rows:"Rows",alignRows:"Align rows",columns:"Columns",paperFormat:"Paper format",orientation:"Orientation",repeatHeader:"Repeat header"},ExportRowsCombo:{all:"All rows",visible:"Visible rows"},ExportOrientationCombo:{portrait:"Portrait",landscape:"Landscape"},SinglePageExporter:{singlepage:"Single page"},MultiPageExporter:{multipage:"Multiple pages",exportingPage:({currentPage:a,totalPages:e})=>`Exporting page ${a}/${e}`},MultiPageVerticalExporter:{multipagevertical:"Multiple pages (vertical)",exportingPage:({currentPage:a,totalPages:e})=>`Exporting page ${a}/${e}`}});X.registerLocale("En",{desc:"English",locale:Pu});var Ol=new Promise(a=>a()),Ps="GridBase:store",$u={block:"nearest",inline:"nearest"},Nu={dataset:1,pageLoad:1,filter:1},it=class extends Oe.mixin(ei,ti,El,Sl,Dl,Tl,Rl,Ml,Fl,kl){static get $name(){return"GridBase"}static get type(){return"gridbase"}static get delayable(){return{onGridScroll:{type:"raf"},bufferedAfterColumnsResized:250,bufferedElementResize:250}}static get configurable(){return{autoHeight:null,enableSticky:null,enableTextSelection:null,fillLastColumn:!0,positionMode:"translate",showDirty:null,subGridConfigs:{normal:{flex:1}},store:{value:{},$config:"nullify"},rowManager:{value:{},$config:["nullify","lazy"]},scrollManager:{value:{},$config:["nullify","lazy"]},columns:{value:[],$config:"nullify"},minHeight:"10em",hideFooters:!0,contentElMutationObserver:!1}}static get defaultConfig(){return{rowHeight:null,fixedRowHeight:null,defaultRowHeight:45,emptyText:"L{noRows}",fullRowRefresh:!0,hideHeaders:null,preserveScrollOnDatasetChange:null,preserveFocusOnDatasetChange:!0,showRemoveRowInContextMenu:!0,data:null,defaultRegion:"normal",destroyStore:null,maskDefaults:{cover:"body",target:"element"},columnLines:!0,resizeToFitIncludesHeader:!0,animateRemovingRows:!x.isIE11,disableGridRowModelWarning:null,headerClass:pr,footerClass:yr,testPerformance:!1,rowScrollMode:"move",monitorResize:!0,features:!0,scrollable:{overflowY:!0},scrollerClass:oi,refreshSuspended:0,transitionDuration:500,contextMenuTriggerEvent:"contextmenu",localizableProperties:["emptyText"],asyncEventSuffix:""}}static getLKey(){return"48235"}static get properties(){return{_selectedRecords:[],_verticalScrollHeight:0,virtualScrollHeight:0,_scrollTop:null}}static get deprecatedEvents(){return{cellContextMenuBeforeShow:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`cellContextMenuBeforeShow` event is deprecated, in favor of `cellMenuBeforeShow` event. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."},cellContextMenuShow:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`cellContextMenuShow` event is deprecated, in favor of `cellMenuShow` event. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."},headerContextMenuBeforeShow:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`headerContextMenuBeforeShow` event is deprecated, in favor of `headerMenuBeforeShow` event. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."},headerContextMenuShow:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`headerContextMenuShow` event is deprecated, in favor of `headerMenuShow` event. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."},contextMenuItem:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`contextMenuItem` event is deprecated, in favor of `cellMenuItem` and `headerMenuItem` events. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."},contextMenuToggleItem:{product:"Grid",invalidAsOfVersion:"5.0.0",message:"`contextMenuToggleItem` event is deprecated, in favor of `cellMenuToggleItem` and `headerMenuToggleItem` events. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/4.0.0 for more information."}}}finishConfigure(e){let t=this;super.finishConfigure(e),X.on({locale:"onBeforeLocaleChange",prio:1,thisObj:t}),X.on({locale:"onLocaleChange",prio:-1,thisObj:t}),ae.on({theme:"onThemeChange",thisObj:t}),t.on({subGridExpand:"onSubGridExpand",prio:-1,thisObj:t}),t.bufferedFixElementHeights=t.buffer("fixElementHeights",350,t),t.setGridClassList(t.element.classList)}onSubGridExpand(){this.renderContents()}onBeforeLocaleChange(){this._suspendRenderContentsOnColumnsChanged=!0}onLocaleChange(){this._suspendRenderContentsOnColumnsChanged=!1,this.isPainted&&this.renderContents()}finalizeInit(){super.finalizeInit(),this.store.isLoading&&this.onStoreBeforeRequest()}changeScrollManager(e,t){return t?.destroy(),e?si.new({element:this.element},e):null}doDestroy(){let e=this;e.detachListeners(Ps),e.scrollManager?.destroy();for(let t of Object.values(e.features))t.destroy?.();e.columns.destroy(),super.doDestroy()}setGridClassList(e){Object.values(this.features).forEach(r=>{if(r.disabled)return;let i;Object.prototype.hasOwnProperty.call(r.constructor,"featureClass")?i=r.constructor.featureClass:i=`b-${r instanceof S?r.$$name:r.constructor.name}`,i&&e.add(i.toLowerCase())})}compose(){let{autoHeight:e,enableSticky:t,enableTextSelection:r,fillLastColumn:i,positionMode:s,showDirty:n}=this;return{class:{[`b-grid-${s}`]:1,"b-enable-sticky":t,"b-grid-notextselection":!r,"b-autoheight":e,"b-fill-last-column":i,"b-show-dirty":n}}}get bodyConfig(){let{autoHeight:e,hideFooters:t,hideHeaders:r}=this;return{reference:"bodyElement",className:{"b-autoheight":e,"b-grid-panel-body":1},children:{headerContainer:{tag:"header",className:{"b-grid-header-container":1,"b-hidden":r}},bodyContainer:{className:"b-grid-body-container",tabIndex:-1,children:{verticalScroller:{className:"b-grid-vertical-scroller"}}},virtualScrollers:{className:"b-virtual-scrollers b-hide-display",style:x.isFirefox?{height:`${g.scrollBarWidth}px`}:void 0},footerContainer:{tag:"footer",className:{"b-grid-footer-container":1,"b-hidden":t}}}}}get contentElement(){return this.verticalScroller}get overflowElement(){return this.bodyContainer}get focusElement(){return this.bodyContainer}updateHideFooters(e){this.footerContainer?.classList[e?"add":"remove"]("b-hidden")}changeColumns(e,t){let r=this;if(!e&&t)return r.isDestroying?t.owner===r&&t.destroy():t.removeAll(),t;if(e.isStore)return t?.owner===r&&t.destroy(),e.grid=r,e;if(Array.isArray(e)){if(t)return t.data=e,t;e={data:e}}if(t)throw new Error("Replacing ColumnStore is not supported");return xe.new({grid:r,owner:r},e)}updateColumns(e){let t=this;e.on({change:t.onColumnsChanged,sort:t.onColumnsChanged,thisObj:t}),e.on(vl(t.onColumnsResized,t)),x.isTouchDevice&&(t.touch=!0,e.forEach(r=>{let{touchConfig:i}=r;i&&r.applyState(i)}))}onColumnsChanged({action:e,changes:t,record:r,records:i,isMove:s}){let n=this,{columns:o,checkboxSelectionColumn:l}=n;if(!(!n.isPainted||s&&e==="remove")){if(e==="add")for(let c of i){let{region:d}=c;n.subGrids[d]||n.add(n.createSubGrid(d,n.subGridConfigs[d]))}if(e==="update"){if("width"in t||"minWidth"in t||"maxWidth"in t||"flex"in t){let c=r.region;o.visibleColumns.forEach(d=>{d.region===c&&d.repaintOnResize&&n.refreshColumn(d)});return}if("hidden"in t){let c=n.getSubGridFromColumn(r.id);c.header.fixHeaderWidths(),c.footer.fixFooterWidths(),c.updateHasFlex()}}if(e==="dataset"||e==="update"&&"region"in t){let c=o.getDistinctValues("region"),{toRemove:d,toAdd:u}=U.delta(c,n.regions,!0);n.remove(d.map(f=>n.getSubGrid(f))),n.add(u.map(f=>n.createSubGrid(f)))}if(l&&!o.includes(l)){let c=o.indexOf(o.findRecord("type","rownumber"))+1;o.insert(c,l,!0)}n._suspendRenderContentsOnColumnsChanged||n.renderContents(),n.afterColumnsChange({action:e,changes:t,column:r})}}onColumnsResized({changes:e,record:t}){let r=this;if(r.isConfiguring)return;let i=g.setLength(t.width),s=g.setLength(t.minWidth),n=g.setLength(t.maxWidth),o=r.getSubGridFromColumn(t.id);o.header.fixHeaderWidths(),o.footer.fixFooterWidths(),o.updateHasFlex(),(!r.cellEls||t!==r.lastColumnResized)&&(r.cellEls=g.children(r.element,`.b-grid-cell[data-column-id="${t.id}"]`),r.lastColumnResized=t);for(let l of r.cellEls)"width"in e&&(l.style.width=i,x.isIE11&&(l.style.flex="",l.style.minWidth=g.setLength(t.calcMinWidth))),"minWidth"in e&&(l.style.minWidth=s),"maxWidth"in e&&(l.style.maxWidth=n),"flex"in e&&(l.style.flex=t.flex??null);r.resizingColumns||r.afterColumnsResized()}afterColumnsResized(){let e=this;e.eachSubGrid(t=>{t.collapsed||(t.fixWidths(),t.fixRowWidthsInSafariEdge())}),e.lastColumnResized=e.cellEls=null,e.bufferedAfterColumnsResized(),e.onHeightChange()}bufferedAfterColumnsResized(){this.columns.usesAutoHeight&&this.refreshRows(),this.refreshVirtualScrollbars(),this.eachSubGrid(e=>{e.collapsed||e.refreshFakeScroll()})}processCellEditor(e){}bufferedElementResize(e,t,r,i){this.isPainted&&t!==i&&this.columns.usesFlexAutoHeight&&this.refreshRows()}onInternalResize(e,t,r,i,s){g.scrollBarWidth&&t<i&&this.eachSubGrid(n=>{n.flex&&n.onElementResize(n.element)}),super.onInternalResize(...arguments),this.bufferedElementResize(...arguments)}changeRowManager(e,t){let r=this;if(r._isRowMeasured||r.measureRowHeight(),t?.destroy(),e){let i=gr.new({grid:r,rowHeight:r.rowHeight,rowScrollMode:r.rowScrollMode||"move",autoHeight:r.autoHeight,fixedRowHeight:r.fixedRowHeight,listeners:{changeTotalHeight:"onRowManagerChangeTotalHeight",requestScrollChange:"onRowManagerRequestScrollChange",thisObj:r}},e);return r.relayEvents(i,["beforeRenderRow","renderRow"]),r._rowManager=null,i}}getRowHeight(e){return e.rowHeight}bindStore(e){let t=this.asyncEventSuffix,r={name:Ps,[`refresh${t}`]:"onStoreDataChange",[`add${t}`]:"onStoreAdd",[`remove${t}`]:"onStoreRemove",[`replace${t}`]:"onStoreReplace",[`removeAll${t}`]:"onStoreRemoveAll",[`move${t}`]:e.tree?null:"onFlatStoreMove",change:"relayStoreDataChange",idChange:"onStoreRecordIdChange",update:"onStoreUpdateRecord",beforeRequest:"onStoreBeforeRequest",afterRequest:"onStoreAfterRequest",exception:"onStoreException",commit:"onStoreCommit",thisObj:this};e.on(r),super.bindStore(e)}unbindStore(e){this.detachListeners(Ps),this.destroyStore&&e.destroy()}changeStore(e){return e==null?null:(typeof e=="string"&&(e=Y.getStore(e)),e.isStore||(e=b.assign({data:this.data,tree:Boolean(this.initialConfig.features?.tree)},e),e.data||delete e.data,e.modelClass||(e.modelClass=class extends Tt{}),e=new(e.readUrl?gt:Y)(e)),e)}updateStore(e,t){let r=this;t&&r.unbindStore(t),e&&(t&&r.deselectAll(),r.bindStore(e)),r.trigger("bindStore",{store:e,oldStore:t}),!r.isDestroying&&r.isPainted&&!r.refreshSuspended&&r._rowManager?.reinitialize()}onStoreUpdateRecord({source:e,record:t,changes:r}){let i=this;if(i.forceFullRefresh)i.rowManager.refresh(),i.forceFullRefresh=!1;else{let s;if(t.isFieldModified("id")&&(s=i.getRowFor(t.meta.modified.id)),s=s||i.getRowFor(t),!s)return;if(i.fullRowRefresh||t.isSpecialRow){let n=e.indexOf(t);n!==-1&&s.render(n,t)}else i.columns.visibleColumns.forEach(n=>{let o=n.field;if(!(n.constructor.simpleRenderer&&!Object.prototype.hasOwnProperty.call(n.data,"renderer"))||r[o]){let c=s.getCell(o);c&&s.renderCell({cellElement:c,record:t})}})}}refreshFromRowOnStoreAdd(e,t){let r=this,{rowManager:i}=r;i.renderFromRow(e),i.trigger("changeTotalHeight",{totalHeight:i.totalHeight}),r.store.count===1&&r.callEachSubGrid("refreshFakeScroll")}onMaskAutoClose(e){super.onMaskAutoClose(e),this.toggleEmptyText()}onStoreAdd({source:e,records:t,index:r,oldIndex:i,isChild:s,oldParent:n,parent:o,isMove:l,isExpandAll:c}){if(!this.isPainted||c)return;let d=l&&t.some(R=>{if(l[R.id]){let H=e.getById(R.meta.modified.parentId);return H.isExpanded(e)&&H.ancestorsExpanded(e)}});if(s&&!t[0].ancestorsExpanded(e)&&!d){if(!o.isLeaf){let R=this.rowManager.getRowById(o);R&&this.rowManager.renderRows([R])}return}this.rowManager.calculateRowCount(!1,!0,!0),e.isFiltered&&(r=e.indexOf(t[0]));let u=this,{rowManager:f}=u,{topIndex:h,rows:m,rowCount:p}=f,y=f.topIndex+f.rowCount-1,C=r,w=r+t.length-1,T=y>=e.count-t.length-1;n||i>-1||s&&l?f.refresh():C>=h&&C<h+p?u.refreshFromRowOnStoreAdd(m[C-h],...arguments):w>=h&&w<h+p?f.refresh():(T&&r>y&&f.fillBelow(u._scrollTop||0),f.estimateTotalHeight(!0))}onStoreException({action:e,type:t,response:r,exceptionType:i,error:s}){let n=this,o;switch(t){case"server":o=r.message||n.L("L{unspecifiedFailure}");break;case"exception":o=i==="network"?n.L("L{networkFailure}"):s&&s.message||n.L("L{parseFailure}");break}n.applyMaskError(`<div class="b-grid-load-failure">
                <div class="b-grid-load-fail">${n.L(e==="read"?"L{loadFailedMessage}":"L{syncFailedMessage}")}</div>
                <div class="b-grid-load-fail">${r&&r.url?r.url+" responded with":""}</div>
                <div class="b-grid-load-fail">${o}</div>
            </div>`)}onStoreDataChange({action:e,changes:t,source:r}){if(this.refreshSuspended)return;let i=this,s=r.isGrouped&&t&&r.groupers.some(n=>n.field in t);super.onStoreDataChange&&super.onStoreDataChange(...arguments),e==="dataset"&&i.rowManager.clearKnownHeights(),i.isPainted&&!s&&i.renderRows(Boolean(!(e in Nu)||i.preserveScrollOnDatasetChange)),i.toggleEmptyText()}onStoreRecordIdChange(){super.onStoreRecordIdChange&&super.onStoreRecordIdChange(...arguments)}onStoreBeforeRequest(){this.applyLoadMask()}onStoreAfterRequest(e){this.loadMask&&!e.exception&&(this.masked=null,this.toggleEmptyText())}needsFullRefreshOnStoreRemove(){let e=this._features;return e?.group&&!e.group.disabled||e?.groupSummary&&!e.groupSummary.disabled}onStoreRemove({records:e,isCollapse:t,isChild:r,isMove:i,isCollapseAll:s}){if(!this.isPainted||i||s)return;super.onStoreRemove&&super.onStoreRemove(...arguments);let n=2**53-1,o=this,{rowManager:l}=o,c=e.reduce((d,u)=>{let f=l.getRowById(u.id);return f&&(d.push(f),n=Math.min(n,l.rows.indexOf(f))),d},[]);if(l.invalidateKnownHeight(e),o.animateRemovingRows&&c.length&&!t&&!r){let d=c[0];o.isAnimating=!0,O.onTransitionEnd({element:d._elementsArray[0],property:"left",duration:o.transitionDuration,thisObj:o,handler(){o.isAnimating=!1,c.forEach(u=>!u.isDestroyed&&u.removeCls("b-removing")),l.refresh(),o.trigger("rowRemove")}}),c.forEach(u=>u.addCls("b-removing"))}else o.needsFullRefreshOnStoreRemove(...arguments)?l.refresh():(l.calculateRowCount(!1,!0,!0),l.rows[n]?l.renderFromRow(l.rows[n]):l.trigger("changeTotalHeight",{totalHeight:l.totalHeight}),o.trigger("rowRemove",{isCollapse:t}))}onFlatStoreMove({from:e,to:t}){let{rowManager:r}=this,{topIndex:i,rowCount:s}=r,[n,o]=[e,t].sort((l,c)=>l-c);n>=i&&n<i+s?r.renderFromRow(r.rows[n-i]):o>=i&&o<i+s&&r.refresh()}onStoreReplace({records:e,all:t}){let{rowManager:r}=this;if(t)r.clearKnownHeights(),r.refresh();else{let i=e.reduce((s,[,n])=>{let o=this.getRowFor(n);return o&&s.push(o),s},[]);r.invalidateKnownHeight(e),r.renderRows(i)}}relayStoreDataChange(e){if(!this.project)return this.trigger("dataChange",{...e,store:e.source,source:this})}onStoreRemoveAll(){super.onStoreRemoveAll&&super.onStoreRemoveAll(...arguments),this.isPainted&&(this.rowManager.clearKnownHeights(),this.renderRows(),this.toggleEmptyText())}onStoreCommit({changes:e}){if(this.showDirty&&e.modified.length){let t=[];e.modified.forEach(r=>{let i=this.rowManager.getRowFor(r);i&&t.push(i)}),this.rowManager.renderRows(t)}}get data(){return this._store?this._store.records:this._data}set data(e){this._store?this._store.data=e:this._data=e}get emptyText(){return this._emptyText}set emptyText(e){this._emptyText=e,this.eachSubGrid(t=>t.emptyText=e)}populateHeaderMenu({column:e,items:t}){let r=this,{subGrids:i,regions:s}=r,n=!0;Object.entries(i).forEach(([o,l])=>{if(!l.sealedColumns&&e.draggable&&o!==e.region&&(!e.parent&&i[e.region].columns.count>1||e.parent&&e.parent.children.length>1)){let c=l.element.compareDocumentPosition(i[e.region].element)===document.DOCUMENT_POSITION_PRECEDING,d=s.length>2?r.L("L{moveColumnTo}",r.optionalL(o)):r.L(c?"L{moveColumnRight}":"L{moveColumnLeft}");t[`${o}Region`]={targetSubGrid:o,text:d,icon:"b-fw-icon "+(c?"b-icon-column-move-right":"b-icon-column-move-left"),cls:n?"b-separator":"",onItem:({item:u})=>{e.traverse(f=>f.region=o),r.columns.insert(r.columns.indexOf(i[u.targetSubGrid].columns.last)+1,e),r.scrollColumnIntoView(e)}},n=!1}})}populateCellMenu({record:e,items:t}){let r=this;r.features?.contextMenu&&!r.features.contextMenu.disabled&&r.showRemoveRowInContextMenu&&!r.readOnly&&e&&!e.isSpecialRow&&(t.removeRow={text:"L{removeRow}",localeClass:this,icon:"b-fw-icon b-icon-trash",onItem:()=>r.store.remove(r.selectedRecords)})}getColumnDragToolbarItems(e,t){return t}normalizeCellContext(e){let{columns:t,store:r}=this;if(e instanceof r.modelClass)return{record:e,id:e.id,columnId:t.visibleColumns[0].id};if(!("columnId"in e)){if("field"in e){let i=t.get(e.field);e.columnId=i&&i.id}else if("column"in e){let i=typeof e.column=="number"?t.visibleColumns[e.column]:e.column;e.columnId=i&&i.id}"columnId"in e||(e.columnId=t.visibleColumns[0].id)}if("id"in e){if(e.element&&!r.getById(e.id)){let i=this.getRecordFromElement(e.element);i&&(e.id=i.id)}}else{let i="row"in e?r.getAt(e.row):e.record;i&&(e.id=i.id)}return e}getCell(e){let t,r=null;return e=this.normalizeCellContext(e),"id"in e&&(t=this.getRowById(e.id)),t&&"columnId"in e&&(r=t.getCell(e.columnId)),r}getHeaderElement(e){return e.isModel&&(e=e.id),this.fromCache(`.b-grid-header[data-column-id="${e}"]`)}getHeaderElementByField(e){let t=this.columns.get(e);return t?this.getHeaderElement(t):null}get bodyHeight(){return this._bodyHeight}get headerHeight(){let e=this;return e.isPainted&&!e._headerHeight&&(e._headerHeight=e.headerContainer.offsetHeight),e._headerHeight}getRecordFromElement(e){let t=e.closest(".b-grid-row");return t?this.store.getAt(t.dataset.index):null}getColumnFromElement(e){let t=g.up(e,".b-grid-cell, .b-grid-header");if(!t)return null;if(t.matches(".b-grid-header"))return this.columns.getById(t.dataset.columnId);let r=ye.get(t);return this.columns.getById(r.columnId)}updateAutoHeight(e){b.assertBoolean(e,"autoHeight")}get columnLines(){return this._columnLines}set columnLines(e){b.assertBoolean(e,"columnLines"),g.toggleClasses(this.element,"b-no-column-lines",!e),this._columnLines=e}fixSizes(){this.callEachSubGrid("fixWidths")}onRowManagerChangeTotalHeight({totalHeight:e,immediate:t}){return this.refreshTotalHeight(e,t)}refreshTotalHeight(e=this.rowManager.totalHeight,t=!1){let r=this;if(r.renderingRows||!r.isVisible)return!1;r.rowManager.bottomRow&&(e=Math.max(e,r.rowManager.bottomRow.bottom));let i=r.scrollable,s=Math.abs(r.virtualScrollHeight-e),n=r._bodyRectangle.height,o=e-n;if(s){let l=o-r._scrollTop<n*2||r._verticalScrollHeight&&r._verticalScrollHeight-n<r._scrollTop;i.scrollHeight=r.virtualScrollHeight=e,r.isPainted&&(r.scrolling&&!l||s<100)&&!t?r.bufferedFixElementHeights():(r.virtualScrollHeightDirty&&r.virtualScrollHeightDirty(),r.bufferedFixElementHeights.cancel(),r.fixElementHeights())}}fixElementHeights(){let e=this,t=e.virtualScrollHeight,r=`${t}px`;e._verticalScrollHeight=t,e.verticalScroller.style.height=r,e.virtualScrollHeightDirty=!1,e.autoHeight&&(e.bodyContainer.style.height=r,e._bodyHeight=t,e.refreshBodyRectangle()),e.refreshVirtualScrollbars()}refreshBodyRectangle(){return this._bodyRectangle=k.client(this.bodyContainer)}set scrolling(e){this._scrolling=e}get scrolling(){return this._scrolling}enableScrollingCloseToEdges(e){typeof e=="string"&&(e=this.subGrids[e]),this.scrollManager.startMonitoring({scrollables:[{element:e.scrollable.element,direction:"horizontal"},{element:this.scrollable.element,direction:"vertical"}]})}disableScrollingCloseToEdges(e){typeof e=="string"&&(e=this.subGrids[e]),this.scrollManager.stopMonitoring([e.element,this.scrollable.element])}onRowManagerRequestScrollChange({bottom:e}){this.scrollable.y=e-this.bodyHeight}initScroll(){let e=this;if(!e.scrollInitialized){let t,r=e.createOnFrame(()=>{t=e.scrollable.y,t!==e._scrollTop&&(e._scrollTop=t,e.scrolling||(e.scrolling=!0,e.eachSubGrid(i=>i.suspendResizeMonitor=!0)),e.rowManager.updateRenderedRows(t),e.trigger("scroll",{scrollTop:t}))});e.scrollInitialized=!0,e.scrollable.on({scroll:r,scrollend(){e.scrolling=!1,e.eachSubGrid(i=>i.suspendResizeMonitor=!1)}}),e.callEachSubGrid("initScroll"),x.isMobileSafari&&(e.scrollable.element.style.transform="translate3d(0, 0, 0)")}}async scrollRowIntoView(e,t=$u){let r=this,i=t.block||"nearest",{rowManager:s}=r,n=r.store.getById(e);if(n){let o;if(r.store.indexOf(n)===-1)return Ol;let l=r.scrollable,c=r.getRecordCoords(n),d=k.from(l.element);if(c.virtual){let u=c.block,f=i!=="nearest"?t:{block:u};if(o=l.scrollIntoView(c,{block:"center"}),s.scrollTargetRecordId=n,s.updateRenderedRows(l.y,!0),c=r.getRecordCoords(n),s.lastScrollTop=l.y,c.virtual)return Ol;t.animate?(l.suspendEvents(),i==="end"||i==="nearest"&&u==="end"?l.y-=d.bottom-c.bottom:(i==="start"||i==="nearest"&&u==="start")&&(l.y+=c.y-d.y),s.updateRenderedRows(l.y,!1,!0),u==="end"?l.y-=s.appendRowBuffer*s.rowHeight-1:l.y+=s.prependRowBuffer*s.rowHeight-1,l.scrollIntoView(r.getRecordCoords(n),Object.assign({},t,f)),l.resumeEvents()):(t.recursive||await o,await r.scrollRowIntoView?.(n,Object.assign({recursive:!0},t,f)))}else{let{column:u}=t;if(u){if(u.isModel||(u=r.columns.getById(u)||r.columns.get(u)),u){l=r.getSubGridFromColumn(u).scrollable;let f=k.from(s.getRowFor(n).getCell(u.id));c.x=f.x,c.width=f.width}}else t.x=!1;return l.scrollIntoView(c,t)}}}scrollColumnIntoView(e,t){return e=e instanceof ne?e:this.columns.get(e)||this.columns.getById(e)||this.columns.getAt(e),this.getSubGridFromColumn(e).scrollColumnIntoView(e,t)}scrollCellIntoView(e,t){return this.scrollRowIntoView(e.id,Object.assign({column:e.columnId},typeof t=="boolean"?{animate:t}:t))}scrollToBottom(e){return this.scrollRowIntoView(this.store.last,e)}scrollToTop(e){return this.scrollable.scrollBy(0,-this.scrollable.y,e)}storeScroll(){let e=this,t=e.storedScrollState={scrollTop:e.scrollable.y,scrollLeft:{}};return e.eachSubGrid(r=>{t.scrollLeft[r.region]=r.scrollable.x}),t}restoreScroll(e=this.storedScrollState){let t=this;t.eachSubGrid(r=>{let i=e.scrollLeft[r.region];r.scrollable.updateX(i),r.header.scrollable.updateX(i),r.footer.scrollable.updateX(i),r.fakeScroller?.updateX(i)}),t.scrollable.updateY(e.scrollTop)}beginGridMeasuring(){let e=this;if(e.$measureCellElements||(e.$measureCellElements=g.createElement({className:"b-grid-subgrid "+(!e._isRowMeasured&&e.hasFeature("stripe")?"b-stripe":""),reference:"subGridElement",style:{position:"absolute",top:"-10000px",left:"-100000px",visibility:"hidden",contain:"strict"},children:[{className:"b-grid-row",reference:"rowElement",children:[{className:"b-grid-cell",reference:"cellElement",style:{width:"auto",contain:x.isFirefox?"layout paint":"layout style paint"}}]}]})),e.getConfig("element"),e.verticalScroller.appendChild(e.$measureCellElements.subGridElement),!e.rendered){let t=e.appendTo||e.insertBefore||document.body,r=g.getRootElement(typeof t=="string"?document.getElementById(t):t);(!e.adopt||!r.contains(e.element))&&(r.appendChild(e.element),e.$removeAfterMeasuring=!0)}return e.$measureCellElements}endGridMeasuring(){this.$removeAfterMeasuring&&(this.element.remove(),this.$removeAfterMeasuring=!1),this.$measureCellElements.subGridElement.remove()}measureRowHeight(){let e=this,{rowElement:t}=e.beginGridMeasuring(),r=g.getStyleValue(t,["height","border-top-width","border-bottom-width"]),i=parseInt(r.height),s=x.isFirefox?devicePixelRatio:1,n=r["border-top-width"]?Math.round(s*parseFloat(r["border-top-width"])):0,o=r["border-bottom-width"]?Math.round(s*parseFloat(r["border-bottom-width"])):0;(e.rowHeight==null||e.rowHeight===e._rowHeightFromStyle)&&(e.rowHeight=!isNaN(i)&&i?i:e.defaultRowHeight,e._rowHeightFromStyle=e.rowHeight),e._rowBorderHeight=n+o,e._isRowMeasured=!0,e.endGridMeasuring()}onThemeChange({theme:e}){let t=this;t.isVisible?t.measureRowHeight():t.findListener("paint","measureRowHeight",t)===-1&&t.on({paint:"measureRowHeight",thisObj:t,once:!0}),t.trigger("theme",{theme:e})}refreshRows(e=!1){let{element:t,rowManager:r}=this;t.classList.add("b-notransition"),e?r.returnToTop():r.refresh(),t.classList.remove("b-notransition")}refreshColumn(e){if(e.isVisible){let{field:t}=e;this.rowManager.forEach(r=>{let i=r.getCell(t);r.renderCell({cellElement:i})})}}refreshVirtualScrollbars(){let e=this,{headerContainer:t,footerContainer:r,virtualScrollers:i,scrollable:s,hasVerticalOverflow:n}=e,{classList:o}=i,l=!o.contains("b-hide-display"),c=Object.values(e.subGrids).some(u=>u.overflowingHorizontally),d=c!==l;if(d&&i.classList.toggle("b-hide-display",!c),g.scrollBarWidth){let u=n||s.overflowY==="scroll";t.classList.toggle("b-show-yscroll-padding",u),r.classList.toggle("b-show-yscroll-padding",u),i.classList.toggle("b-show-yscroll-padding",u),d&&(c&&e.callEachSubGrid("refreshFakeScroll"),e.onHeightChange())}}get hasVerticalOverflow(){return this.scrollable.hasOverflow("y")}get contentHeight(){let e=this.rowManager;return Math.max(e.totalHeight,e.bottomRow?e.bottomRow.bottom:0)}onContentChange(){let e=this,t=e.rowManager;e.isVisible?(t.estimateTotalHeight(),e.paintListener=null,e.refreshTotalHeight(e.contentHeight),e.callEachSubGrid("refreshFakeScroll"),e.onHeightChange()):e.paintListener||(e.paintListener=e.on({paint:"onContentChange",once:!0,thisObj:e}))}triggerPaint(){this.isPainted||this.refreshBodyRectangle(),super.triggerPaint()}onHeightChange(){let e=this;e.refreshBodyRectangle(),e._bodyHeight=e.autoHeight?e.contentHeight:e.bodyContainer.offsetHeight}renderHeader(e,t){}renderFooter(e,t){}afterColumnsChange(){}beforeRenderCell(){}suspendRefresh(){this.refreshSuspended++}resumeRefresh(e){this.refreshSuspended&&!--this.refreshSuspended&&(e&&this.refreshRows(),this.trigger("resumeRefresh"))}renderRows(e=!0){let t=this,r=e&&t.storeScroll();t.refreshSuspended||(t.trigger("beforeRenderRows"),t.renderingRows=!0,t.element.classList.add("b-grid-refreshing"),e||(t.scrollable.y=t._scrollTop=0),t.rowManager.reinitialize(!e),t.trigger("renderRows"),t.renderingRows=!1,t.onContentChange(),e&&t.restoreScroll(r),t.element.classList.remove("b-grid-refreshing"))}renderContents(){let e=this,{element:t,headerContainer:r,footerContainer:i,rowManager:s}=e;if(e.emptyCache(),e.isPainted){e._headerHeight=null,e.callEachSubGrid("refreshHeader",r),e.callEachSubGrid("refreshFooter",i),e.renderHeader(r,t),e.renderFooter(i,t),e.fixSizes();let n=s.removeAllRows();s.calculateRowCount(!1,!0,!0),s.rowCount&&(s.setPosition(n),e.renderRows())}}onPaintOverride(){}onPaint({firstPaint:e}){let t=this;if(super.onPaint({firstPaint:e}),t.onPaintOverride()||!e)return;let{rowManager:r,store:i,element:s,headerContainer:n,bodyContainer:o,footerContainer:l}=t,c=g.scrollBarPadElement,d,u=0;t.columns.on({change:()=>d=!0,once:!0}),t.updateResponsive(t.width,0),d&&(t.callEachSubGrid("refreshHeader",n),t.callEachSubGrid("refreshFooter",l)),t.renderHeader(n,s),t.renderFooter(l,s),g.append(n,c),g.append(l,c),g.append(t.virtualScrollers,c),t.refreshBodyRectangle();let f=t.bodyContainer.offsetHeight;if(t.autoHeight?(t._bodyHeight=r.initWithHeight(s.offsetHeight-n.offsetHeight-l.offsetHeight,!0),o.style.height=t.bodyHeight+"px"):(t._bodyHeight=f,r.initWithHeight(t._bodyHeight,!0)),t.eachSubGrid(h=>{h.header.maxDepth>u&&(u=h.header.maxDepth)}),n.dataset.maxDepth=u,t.fixSizes(),(i.count||!i.isLoading)&&t.renderRows(),t.columns.usesAutoHeight){let{fonts:h}=document;h?.status!=="loaded"&&h.ready.then(()=>!t.isDestroyed&&t.refreshRows())}t.initScroll(),t.initInternalEvents()}render(){let e=this;e.requireSize=Boolean(e.owner),super.render(...arguments),e.autoHeight||(e.headerContainer.offsetHeight&&!e.bodyContainer.offsetHeight&&console.warn("Grid element not sized correctly, please check your CSS styles and review how you size the widget"),!("minHeight"in e.initialConfig)&&!("height"in e.initialConfig)&&parseInt(window.getComputedStyle(e.element).minHeight)===e.height&&console.warn(`The ${e.$$name} is sized by its predefined minHeight, likely this is not intended. Please check your CSS and review how you size the widget, or assign a fixed height in the config. For more information, see the "Basics/Sizing the component" guide in docs.`))}maskBody(e){let t=this;if(t.bodyContainer){t.unmaskBody();let{maskElement:r}=t.activeMask=Ae.mask(e,t.element);return r.style.marginTop=`${t.bodyContainer.offsetTop}px`,r.style.height=`${t.virtualScrollers.offsetTop+t.virtualScrollers.offsetHeight-t.bodyContainer.offsetTop}px`,t.activeMask}}unmaskBody(){let e=this;e.loadmaskHideTimer&&e.clearTimeout(e.loadmaskHideTimer),e.loadmaskHideTimer=null,e.activeMask&&e.activeMask.destroy(),e.activeMask=null}toggleEmptyText(){this.bodyContainer&&g.toggleClasses(this.bodyContainer,"b-grid-empty",!(this.rowManager.rowCount>0||this.store.isLoading||this.store.isCommitting))}};it.initClass();z.setVersion("grid","4.3.8");var $s=class extends tt{static get $name(){return"Fit"}static get type(){return"fit"}static get configurable(){return{containerCls:"b-fit-container",itemCls:"b-fit-item"}}};$s.initClass();var Cr=class extends Pe{static get $name(){return"Editor"}static get type(){return"editor"}static get configurable(){return{positioned:!0,hidden:!0,layout:"fit",align:{align:"t0-t0",offset:[0,0]},inputField:"textfield",blurAction:"complete",completeKey:"Enter",cancelKey:"Escape",invalidAction:"block",completeOnChange:null,isolateFields:!0}}afterConfigure(){let e=this;super.afterConfigure(),e.onTargetSizeChange=e.onTargetSizeChange.bind(e),O.on({element:e.element,keydown:"onKeyDown",thisObj:e}),e.on({hide:"afterEditorHide",thisObj:e}),X.on({locale:"onLocaleChange",thisObj:e})}onLocaleChange(){let{inputField:e}=this;e&&!e.isDestroyed&&(e.syncInputFieldValue?e.syncInputFieldValue(!0):!(e instanceof me))}startEdit({target:e,align:t=this.align,hideTarget:r=!1,matchSize:i=!0,matchFont:s=!0,fitTargetContent:n=!1,value:o,record:l,field:c=this.inputField.name,focus:d=!0}){let u=this,{inputField:f}=u,h=g.getStyleValue(e,"font-size"),m=g.getStyleValue(e,"font-family");if(u.trigger("beforeStart",{value:o})!==!1){if(l&&c&&(u.record=l,u.dataField=c,o===void 0&&(o=l[c])),i&&(e instanceof HTMLElement&&u.updateSize(e),e instanceof HTMLElement&&ce.addResizeListener(e,u.onTargetSizeChange)),f.input&&(s?(f.input.style.fontSize=h,f.input.style.fontFamily=m):f.input.style.fontSize=f.input.style.fontFamily=""),u._isSettingValues=!0,f.clearError&&f.clearError(),f.value=o,u._isSettingValues=!1,typeof t=="string"&&(t={align:t}),u.showBy({target:e,allowTargetOut:!0,...t}),n){let p=f.input.scrollWidth-f.input.clientWidth;p>0&&(u.width+=p+g.scrollBarWidth)}return d&&u.inputField.focus&&u.inputField.focus(),e.nodeType===Element.ELEMENT_NODE&&(e.classList.add("b-editing"),r&&e.classList.add("b-hide-visibility")),u.editing=!0,u.trigger("start",{value:f.value}),Array.isArray(f.value)&&f.editingRecords&&f.value[0]?.isModel?u.oldValue=f.value.map(p=>p.copy(p.id)):(u.oldValue=f.value,Array.isArray(u.oldValue)&&(u.oldValue=u.oldValue.slice())),f.initialValue=u.oldValue,!0}return!1}refreshEdit(){if(this.isVisible){let{record:e,dataField:t,inputField:r}=this;if(e&&t){let i=e[t];b.isEqual(r.value,i)||(r.value=i)}}}finishEdit(){let{target:e,aligningToElement:t}=this.lastAlignSpec;t&&(e.classList.remove("b-editing"),e.classList.remove("b-hide-visibility")),this.editing=!1,this.trigger("finishEdit")}onKeyDown(e){let t=this;switch(e.key){case t.completeKey:t.completeEdit(null,e),e.stopImmediatePropagation();break;case t.cancelKey:t.cancelEdit(e),e.stopImmediatePropagation();break}t.trigger?.("keydown",{event:e})}onFocusOut(e){super.onFocusOut(e);let t=this;!t.isFinishing&&t.editing&&t[`${t.blurAction}Edit`]?.call(t)}async completeEdit(e,t){let r=this,{inputField:i,oldValue:s,record:n}=r,o=i.invalidAction||(i.allowInvalid===!1?"block":r.invalidAction),{value:l}=i;if(!!r.isVisible){if(!i.isValid&&o!=="allow"){if(o==="block")return i.focus&&i.focus(),!1;if(o==="revert")return r.cancelEdit(t),!0}else{if(b.isEqual(l,s))return r.cancelEdit(t),!0;{let c={inputField:i,record:n,value:l,oldValue:s};if(r.trigger("beforeComplete",c)===!1)i.focus&&i.focus();else if(e||(e=c.finalize||c.editorContext&&c.editorContext.finalize),e){let d=await e(c);if(d===!0)r.onEditComplete();else{if(i.setError){let u=d||i.invalidValueError,f=()=>{h(),i.clearError(u)},h=i.on({change:f,input:f});i.setError(u)}o==="block"?i.focus&&i.focus():o==="revert"&&(i.value=s,d=!0),d=!1}return d}else return r.onEditComplete(),!0}}return!1}}cancelEdit(e){let t=this,{inputField:r,oldValue:i}=t,{value:s}=r;t.editing&&!t.isFinishing&&t.trigger("beforeCancel",{value:s,oldValue:i,event:e})!==!1&&(t.isFinishing=!0,t.hide(),t.trigger("cancel",{value:s,oldValue:i,event:e}),t.finishEdit(),t.isFinishing=!1)}onEditComplete(){let e=this,{record:t,dataField:r,inputField:i,oldValue:s}=e,{value:n}=i;if(!e.isFinishing){if(e.isFinishing=!0,e.hide(),t){let o=`set${M.capitalize(r)}`;t[o]?t[o](n):r.includes(".")?t.set(r,n):t[r]=n}e.trigger("complete",{value:n,oldValue:s}),e.finishEdit(),e.isFinishing=!1}}doDestroy(){this.createdInputField&&this.inputField.destroy(),super.doDestroy()}set owner(e){this._owner=e}get owner(){return this._owner||E.fromElement(this.element.parentNode)}changeInputField(e,t){let r=this;return t&&t.destroy(),typeof e=="string"&&(e={type:e}),e instanceof E||(e=E.create(e),r.createdInputField=!0),r.completeOnChange&&e.on({change:"onInputFieldChange",thisObj:r}),e.parent=r,e}updateInputField(e){this.removeAll(),this.add(e)}get inputField(){return this.items[0]}onInputFieldChange(){this.containsFocus&&this.completeEdit()}onTargetSizeChange(e,t,r){t&&r&&this.updateSize(e)}updateSize(e){let t=e.getBoundingClientRect();this.width=t.width-this.align.offset[0],this.height=t.height}afterEditorHide(){ce.removeResizeListener(this.lastAlignSpec.target,this.onTargetSizeChange)}};Cr.initClass();var Ll=[{ref:"cancelButton",cls:"b-messagedialog-cancelbutton b-gray",text:"L{Object.Cancel}",onClick:"up.onCancelClick"},{ref:"okButton",cls:"b-messagedialog-okbutton b-raised b-blue",text:"L{Object.Ok}",onClick:"up.onOkClick"}];x.isWindows&&Ll.reverse();var wr=class extends ve{static get $name(){return"MessageDialog"}static get type(){return"messagedialog"}static get configurable(){return{centered:!0,modal:!0,hidden:!0,autoShow:!1,closeAction:"hide",title:"\xA0",lazyItems:{$config:["lazy"],value:[{cls:"b-messagedialog-message",ref:"message"},{type:"textfield",cls:"b-messagedialog-input",ref:"input"}]},showClass:null,bbar:{overflow:null,items:Ll}}}construct(){this.okButton=this.yesButton=1,this.cancelButton=3,super.construct(...arguments)}async confirm(){return this.showDialog("confirm",...arguments)}async alert(){return this.showDialog("alert",...arguments)}async prompt({textField:e}){let t=this.widgetMap.input;return E.reconfigure(t,e),t.value="",this.showDialog("prompt",...arguments)}showDialog(e,{message:t="",title:r="\xA0",cancelButton:i,okButton:s,rootElement:n=document.body}){let o=this;return o.rootElement=n,o.getConfig("lazyItems"),o.title=o.optionalL(r),o.widgetMap.message.html=o.optionalL(t),o.showClass=`b-messagedialog-${e}`,s&&(s=typeof s=="string"?{text:s}:s),i&&(i=typeof i=="string"?{text:i}:i),s=Object.assign({},o.widgetMap.okButton.initialConfig,s),i=Object.assign({},o.widgetMap.cancelButton.initialConfig,i),s.text=o.optionalL(s.text),i.text=o.optionalL(i.text),E.reconfigure(o.widgetMap.okButton,s),E.reconfigure(o.widgetMap.cancelButton,i),o.show(),o.promise=new Promise(l=>{o.resolve=l})}show(){let e=g.getActiveElement(this.element);return this.owner=this.element.contains(e)?null:wr.fromElement(document.activeElement),super.show(...arguments)}updateShowClass(e,t){let{classList:r}=this.element;t&&r.remove(t),e&&r.add(e)}doResolve(e){let t=this,{resolve:r}=t;if(r){let i=t.showClass==="b-messagedialog-prompt";if(i&&e===t.okButton&&!t.widgetMap.input.isValid)return;t.resolve=t.reject=t.promise=null,r(i?{button:e,text:t.widgetMap.input.value}:e),t.hide()}}onInternalKeyDown(e){e.key==="Escape"&&(e.stopImmediatePropagation(),this.onCancelClick()),e.key==="Enter"&&(e.stopImmediatePropagation(),e.preventDefault(),this.onOkClick()),super.onInternalKeyDown(e)}onOkClick(){this.doResolve(Ns.okButton)}onCancelClick(){this.doResolve(Ns.cancelButton)}};wr.initClass();var Ns=new wr,vr=Ns;var Il=Object.prototype.hasOwnProperty,_s=null;function _u(a,e){return Object.defineProperty(a,"parser",{value:e}),e}var jl=class{constructor(e){this.formatter=e}format(e){return this.formatter.defaultFormat(e)}parse(e,t){return this.formatter.defaultParse(e,t)}resolvedOptions(){return null}},xr=class{static get(e){if(e==null)return this.NULL;let t=typeof e=="string"?e:JSON.stringify(e),r=this.cache,i=r.get(t);return i||(_s=t,i=new this(e),r.set(t,i)),i}static get cache(){return Il.call(this,"_cache")&&this._cache||(this._cache=new Map)}static get NULL(){return Il.call(this,"_null")?this._null:this._null=new this(null)}constructor(e){let t=this;if(t.cacheKey=_s,_s=null,t.initialize(),e===null)t.formatter=new jl(t);else{t.configure(e);for(let[r,i]of Object.entries(t.resolvedOptions()))i!=null&&r in t.defaults&&(t[r]=i)}}get parser(){return _u(this,new this.constructor.Parser(this))}defaultFormat(e){return e==null?e:String(e)}defaultParse(e){return e}format(e){return e==null?e:this.formatter.format(e)}parse(e,t){return e==null?e:this.parser.parse(e,t)}parseStrict(e){return this.parse(e,!0)}resolvedOptions(){return this.formatter.resolvedOptions()}};var di=M.escapeRegExp,Hl=/[\d+-]/g,ui=(a,e)=>new Intl.NumberFormat(a||void 0,e),Bu=/^(?:([$])\s*)?(?:(\d+)>)?\d+(,\d+)?(?:\.((\d*)(?:#*)|[*]))?(?:\s*([%])?)?$/,Al=class{constructor(e){let t=this,r=e.locale,i=ui(r,{maximumFractionDigits:3}),s=e.is.currency?t._decodeStyle(r,{style:"currency",currency:e.currency,currencyDisplay:e.currencyDisplay}):null,n=e.is.percent?t._decodeStyle(r,{style:"percent"}):null,o=i.format(1.2).replace(Hl,"")[0],l=i.format(1e9).replace(Hl,"")[0]||"";Object.assign(t,{currency:s,decimal:o,formatter:e,grouper:l,percent:n}),t.decimal=o,t.decimalRe=di(o,"g"),t.grouper=l,t.stripRe=new RegExp(`(?:\\s+|${di(l)})`+(s?`|(?:${di(s.text)})`:"")+(n?`|(?:${di(n.text)})`:""),"g")}decimalPlaces(e){e=e.replace(this.stripRe,"");let t=e.indexOf(this.decimal)+1;return t&&e.length-t}parse(e,t){return typeof e=="string"&&(e=e.replace(this.stripRe,"").replace(this.decimalRe,"."),e=t?Number(e):parseFloat(e),this.formatter.is.percent&&(e/=100)),e}_decodeStyle(e,t){let r=ui(e,t),i=ui(e,Object.assign(r.resolvedOptions(),{style:"decimal"})),s=r.format(0),n=i.format(0);return{suffix:s.startsWith(n),text:s.replace(n,"").trim()}}},Ge=class extends xr{static get $name(){return"NumberFormat"}initialize(){this._as={},this.is={decimal:!1,currency:!1,percent:!1,null:!0,from:null}}get truncator(){let e=this.maximumFractionDigits;return e==null?null:this.as({style:"decimal",maximumFractionDigits:Math.min(20,e+1)},"truncator")}configure(e){let t=this;typeof e!="string"?Object.assign(t,e):t.template=e;let r={},i=t.locale?X.locales[t.locale]:X.locale,s=i&&i.NumberFormat,n=t.template;if(s)for(let o in s)t[o]==null&&typeof s[o]!="function"&&(t[o]=s[o]);if(n){let o=Bu.exec(n),l=o[2],c=o[4];t.useGrouping=!!o[3],t.style=o[1]?"currency":o[6]?"percent":"decimal",l&&(t.integer=+l),c==="*"?t.fraction=[0,20]:c!=null&&(t.fraction=[o[5].length,c.length])}t._minMax("fraction",!0,!0),t._minMax("integer",!0,!1),t._minMax("significant",!1,!0);for(let o in t.defaults)t[o]!=null&&(r[o]=t[o]);t.is.from=t.from&&t.from.is,t.is[t.style]=!(t.is.null=!1),t.formatter=ui(t.locale,r)}as(e,t=null){let r=this.resolvedOptions()||{template:"9.*"},i=this._as,s=t&&i[t];return s||(typeof e=="string"?r.style=e:Object.assign(r,e),r.from=this,s=new Ge(r)),t&&(i[t]=s),s}defaultParse(e,t){return e==null?e:t?Number(e):parseFloat(e)}format(e){if(typeof e=="string"){let t=Number(e);e=isNaN(t)?this.parse(e):t}return super.format(e)}round(e){return this.parse(this.format(e))}truncate(e){let t=this,r=t.maximumFractionDigits,{truncator:i}=t,s=t.parse(e),n;return i&&(s=i.format(s),n=s.indexOf(i.parser.decimal),n>-1&&s.length-n-1>r&&(s=s.substr(0,n+r+1)),s=i.parse(s)),s}resolvedOptions(){let e=super.resolvedOptions();for(let t in e)e[t]===void 0&&(e[t]=this[t]);return e}_minMax(e,t,r){let i=this,s=i[e];if(s!=null){let n=M.capitalize(e),o=`maximum${n}Digits`,l=`minimum${n}Digits`;typeof s=="number"?(t&&(i[l]=s),r&&(i[o]=s)):(i[l]=s[0],i[o]=s[1])}}};Ge.Parser=Al;Object.assign(Ge.prototype,{defaults:{style:"decimal",currency:null,currencyDisplay:"symbol",locale:null,maximumFractionDigits:null,minimumFractionDigits:null,minimumIntegerDigits:null,maximumSignificantDigits:null,minimumSignificantDigits:null,useGrouping:!0},fraction:null,from:null,integer:null,significant:null,template:null});Object.assign(Ge.prototype,Ge.prototype.defaults);xr.number=(a,e)=>Ge.format(a,e);var Bs=class extends me{static get $name(){return"NumberField"}static get type(){return"numberfield"}static get alias(){return"number"}static get configurable(){return{min:null,max:null,step:1,largeStep:0,value:null,format:"",decimalPrecision:null,leadingZeroes:null,triggers:{spin:{type:"spintrigger"}},changeOnSpin:!0,inputType:null}}construct(e){super.construct(e);let t=this;t.input.addEventListener("dblclick",()=>{t.select()}),typeof t.changeOnSpin=="number"&&(t.bufferedSpinChange=t.buffer(t.triggerChange,t.changeOnSpin))}acceptValue(e,t){let r=!isNaN(e);if(r&&!this.hasTextSelection){r=!1;let i=this.input.value,s=parseFloat(i);i!==t&&(r=!this.acceptValue(s,i))}return r}okMax(e){return isNaN(this.max)||e<=this.max}okMin(e){return isNaN(this.min)||e>=this.min}internalOnKeyEvent(e){if(e.type==="keydown"){let t=this,r=e.key,i;if(r==="ArrowUp")t.doSpinUp(e.shiftKey),i=!0;else if(r==="ArrowDown")t.doSpinDown(e.shiftKey),i=!0;else if(!e.altKey&&!e.ctrlKey&&r&&r.length===1){let s=t.getAfterValue(r),n=t.formatter.parseStrict(s);i=!(n===t.value||s==="-"&&(isNaN(t.min)||t.min<0))&&!t.acceptValue(n,s)}r==="Enter"&&t._changedBySilentSpin&&(t.triggerChange(e,!0),t._changedBySilentSpin=!1),i&&e.preventDefault()}super.internalOnKeyEvent(e)}doSpinUp(e=!1){let t=this,r=(t.value||0)+(e?t.largeStep:t.step);t.okMin(r)||(r=t.min),t.okMax(r)&&t.applySpinChange(r)}doSpinDown(e=!1){let t=this,r=(t.value||0)-(e?t.largeStep:t.step);t.okMax(r)||(r=t.max),t.okMin(r)&&t.applySpinChange(r)}applySpinChange(e){let t=this;t._isUserAction=!0,t.changeOnSpin!==!0&&(t._changedBySilentSpin=!0,t.silenceChange=!0,t.bufferedSpinChange&&t.bufferedSpinChange(null,!0)),t.value=e,t._isUserAction=!1,t.silenceChange=!1}triggerChange(){this.silenceChange||super.triggerChange(...arguments)}onFocusOut(e){super.onFocusOut(...arguments);let t=this,{input:r}=t,i=r.value,s=t.formatter.truncate(i),n=isNaN(s)?i:t.formatValue(s);i!==n&&(r.value=n),t._changedBySilentSpin&&(t.triggerChange(e,!0),t._changedBySilentSpin=!1)}internalOnInput(e){let t=this,{formatter:r,input:i}=t,{parser:s}=r,n=i.value,o=s.decimalPlaces(n);if(r.truncator&&o){let l=n,c=r.truncate(n);if(!isNaN(c)&&(l=t.formatValue(c),s.decimalPlaces(l)<o)){let d=n.length-t.caretPos;i.value=l,t.caretPos=l.length-d}}super.internalOnInput(e)}formatValue(e){return this.formatter.format(e)}changeFormat(e){let t=this;if(e===""){let{leadingZeroes:r,decimalPrecision:i}=t;e=r?`${r}>9`:null,i!=null?e=`${e||""}9.${"#".repeat(i)}`:e&&(e+=".*")}return e}get formatter(){let e=this,t=e.format,r=e._formatter;return(!r||e._lastFormat!==t)&&(r=Ge.get(e._lastFormat=t),e._formatter=r),r}updateStep(e){this.element.classList[e?"remove":"add"]("b-hide-spinner"),this._step=e}changeLargeStep(e){return e||this.step*10}get validity(){let e=this.value,t={};return e!=null&&(t.rangeUnderflow=!this.okMin(e),t.rangeOverflow=!this.okMax(e)),t.valid=!t.rangeUnderflow&&!t.rangeOverflow,t}changeValue(e,t){let r=this;if(e||e===0){let i;typeof e!="number"&&(e=typeof e=="string"?r.formatter.parse(e):Number(e),i=isNaN(e),i&&(e="")),!i&&r.format&&(e=r.formatter.round(e))}else e=void 0;return super.changeValue(e,t)}get inputValue(){let e=this.value;return e!=null&&this.format&&(e=this.formatValue(e)),e}};Bs.initClass();var pt=class extends St{static get $name(){return"PickerField"}static get type(){return"pickerfield"}static get configurable(){return{editable:!0,pickerAlignElement:"inputWrap",value:null,triggers:{expand:{cls:"bars"}},autoClose:!0,autoExpand:null,picker:{value:{floating:!0},$config:["lazy","nullify"]},inputType:"text",monitorResize:!0,nullValue:null}}doDestroy(){this.globalTapListener?.(),super.doDestroy()}updateEditable(e){let t=this,r=t.element;super.updateEditable(...arguments),e===!1?(t.globalTapListener?.(),r.classList.add("b-not-editable"),O.on({element:t.nonEditableClickTarget,click:i=>{i.target===t.nonEditableClickTarget&&t.onTriggerClick(i)},thisObj:t})):t.globalTapListener=ae.on({globaltap:"showKeyboard",thisObj:t})}get nonEditableClickTarget(){return this.input}changePicker(e,t){throw new Error("changePicker(oldPicker, newPicker) must be implemented in PickerField subclass implementations")}get childItems(){if(this._picker)return[this.picker]}onEditComplete(){super.onEditComplete(),this.autoClosePicker()}onElementResize(e){let t=this;t.pickerVisible&&t.picker.requestAnimationFrame(t.picker.realign,null,t.picker),super.onElementResize(e)}internalOnKeyEvent(e){let t=this,r=!0;if(e.type==="keydown"&&!t.disabled)if(t.pickerVisible){let{picker:i}=t;e.key==="Escape"?(e.stopImmediatePropagation(),t.hidePicker(),r=!1):i.onInternalKeyDown?i.onInternalKeyDown(e):e.key==="ArrowDown"&&i.focusable&&i.focus()}else e.key==="ArrowDown"&&(e.stopImmediatePropagation(),e.preventDefault(),t.onTriggerClick(e));r&&super.internalOnKeyEvent(e)}onFocusIn(e){super.onFocusIn(e),this.autoExpand&&(this.minChars=0,this.onTriggerClick(e))}onFocusOut(e){this.autoClosePicker(),super.onFocusOut(e)}onTriggerClick(e){this.disabled||this.togglePicker("key"in e)}showKeyboard({event:e}){let t=this.input;g.isTouchEvent&&g.getActiveElement(t)===t&&e.target===t&&(ae.suspendFocusEvents(),t.blur(),t.focus(),ae.resumeFocusEvents())}togglePicker(e){this.pickerVisible?this.hidePicker():this.showPicker(e)}showPicker(e){let t=this,{picker:r}=t;t.pickerHideShowListenersAdded||(r.on({show:"onPickerShow",hide:"onPickerHide",thisObj:t}),t.pickerHideShowListenersAdded=!0),r.autoClose=t.autoClose,r.show(),r.isVisible&&e&&t.focusPicker()}onPickerShow(){let e=this;e.pickerVisible=!0,e.element.classList.add("b-open"),e.trigger("togglePicker",{show:!0}),e.pickerTapOutRemover=ae.on({globaltap:"onPickerTapOut",thisObj:e}),e.pickerKeyDownRemover=O.on({element:e.picker.element,keydown:"onPickerKeyDown",thisObj:e})}onPickerHide(){let e=this;e.pickerVisible=!1,e.element.classList.remove("b-open"),e.trigger("togglePicker",{show:!1}),e.pickerTapOutRemover&&e.pickerTapOutRemover(),e.pickerKeyDownRemover&&e.pickerKeyDownRemover()}onPickerTapOut({event:e}){this.owns(e.target)||this.autoClosePicker()}onPickerKeyDown(e){if(e.key==="Tab"){let t=g.getActiveElement(this.input),r=new KeyboardEvent("keydown",e);this.input.dispatchEvent(r),r.defaultPrevented&&e.preventDefault(),g.getActiveElement(this.input)===t?this.input.focus():e.preventDefault(),this.isDestroyed||this.hidePicker()}}autoClosePicker(){this.autoClose&&this.hidePicker()}hidePicker(){this.pickerVisible&&this.picker.hide()}focusPicker(){}focus(){let e=this.input;g.isTouchEvent&&this.editable&&(e.readOnly=!0,this.setTimeout(()=>e.readOnly=!1,500)),super.focus()}};var Mt=class extends re(S){static get configurable(){return{ownerCmp:null,target:null,keyEventTarget:null,processEvent:null,itemSelector:null,activeItem:null,focusCls:"b-active",keys:null,allowCtrlKey:null,allowShiftKey:null,scrollDuration:50,disabled:null,testConfig:{scrollDuration:1}}}updateOwnerCmp(e){this.itemSelector||(this.itemSelector=`.${this.ownerCmp.itemCls}`)}onKeyDown(e){let t=this,{ownerCmp:r,itemSelector:i,activeItem:s,itemsTabbable:n}=t,{target:o}=e,l=t.target.querySelector(i),c=(e.key||"").trim()||e.code,d=`${e.ctrlKey?"CTRL+":""}${e.shiftKey?"SHIFT+":""}${e.altKey?"ALT+":""}${c}`,u=o.matches(i)||o===t.keyEventTarget;if(!t.disabled&&l&&t.target.offsetParent&&u){if(!n){if(t.inlineFlow==null){let f=l.parentNode,h=g.getStyleValue(l,"position"),m=g.getStyleValue(l,"display"),p=g.getStyleValue(l,"float");t.inlineFlow=h==="absolute"||m==="inline"||m==="inline-block"||p==="left"||p==="right"||g.getStyleValue(f,"display")==="flex"&&g.getStyleValue(f,"flex-direction")==="row"}t.prevKey||(t.inlineFlow?(t.prevKey="ArrowLeft",t.nextKey="ArrowRight"):(t.prevKey="ArrowUp",t.nextKey="ArrowDown"))}if(t.processEvent&&(e=t.processEvent.call(r,e),!e))return;if(s)switch(c){case t.prevKey:if(t.disabled||e.ctrlKey&&!t.allowCtrlKey||e.shiftKey&&!t.allowShiftKey)return;e.preventDefault(),t.navigatePrevious(e);break;case t.nextKey:if(t.disabled||e.ctrlKey&&!t.allowCtrlKey||e.shiftKey&&!t.allowShiftKey)return;e.preventDefault(),t.navigateNext(e);break;default:{let f=t.keys&&t.keys[d];if(f&&!t.disabled?t.callback(f,t.thisObj||r,[e]):r.onInternalKeyDown&&r.onInternalKeyDown(e),g.getActiveElement(o)!==o&&e.preventDefault(),n)return}}else{if(n)return;t.activeItem=t.previousActiveItem||t.getDefaultNavigationItem(e)}t.activeItem!==s&&t.triggerNavigate(e)}}getDefaultNavigationItem(e){let{target:t,itemSelector:r,prevKey:i,nextKey:s}=this;if(t.compareDocumentPosition(e.target)&4&&e.key===i)return t.querySelector(`${r}:last-of-type`);if(t.compareDocumentPosition(e.target)&2&&e.key===s)return t.querySelector(`${r}`)}navigatePrevious(e){let t=this,r=t.previous;e.preventDefault(),r&&t.ownerCmp.scrollable.scrollIntoView(r,{animate:t.scrollDuration}).then(()=>{t.activeItem=r,t.triggerNavigate(e)})}navigateNext(e){let t=this,r=t.next;e.preventDefault(),r&&t.ownerCmp.scrollable.scrollIntoView(r,{animate:t.scrollDuration}).then(()=>{t.activeItem=r,t.triggerNavigate(e)})}get owner(){return this.ownerCmp}get previous(){return this.getAdjacent(-1)}get next(){return this.getAdjacent(1)}getAdjacent(e=1,t=this.activeItem){let r=this.treeWalker;if(r.currentNode=t,r[e<0?"previousNode":"nextNode"](),r.currentNode!==this.activeItem)return r.currentNode}onTargetFocusIn(e){let t=this,{target:r}=e,{itemsTabbable:i,skipScrollIntoView:s}=t;if(!r.matches(".b-focus-trap"))if(r.matches(t.itemSelector))t.skipScrollIntoView=!0,t.activeItem=r,t.skipScrollIntoView=s,t.activeItem&&i&&t.triggerNavigate(e);else{let n=E.fromElement(e.target);(!n||!t.owner.owns(n))&&!i&&e.relatedTarget?.matches?.(t.itemSelector)&&t.owner.previousSibling?.focus()}}onTargetFocusOut(e){let t=this,{relatedTarget:r}=e;r?.matches(".b-focus-trap")||(!r||!t.target.contains(r)||!r.matches(t.itemSelector))&&t.activeItem&&(t.activeItem=null,t.itemsTabbable&&t.triggerNavigate(e))}onTargetMouseDown(e){let t=this,r=e.target.closest(t.itemSelector);t.mouseDownEvent=e,t.ownerCmp.itemsFocusable===!1?t.onFocusGesture(e):r&&(e.preventDefault(),g.focusWithoutScrolling(r))}onTargetClick(e){let t=this,{skipScrollIntoView:r}=t;if(t.skipNextClick||t.mouseDownEvent?.ignoreNavigation){t.skipNextClick=!1;return}t.disabled||(t.skipScrollIntoView=!0,t.processEvent&&(e=t.processEvent.call(t.ownerCmp,e)),e&&(t.activeItem=e.target.closest(t.itemSelector),t.triggerNavigate(e)),t.skipScrollIntoView=r)}onFocusGesture(e){(e.target===this.ownerCmp.contentElement||e.target.closest(this.itemSelector)&&this.ownerCmp.itemsFocusable===!1)&&e.preventDefault()}acceptNode(e){return e.offsetParent&&e.matches&&e.matches(this.itemSelector)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}changeActiveItem(e){return e!=null&&this.ownerCmp.getItem&&(e=this.ownerCmp.getItem(e)),e}updateActiveItem(e,t){let r=this,{ownerCmp:i}=r,s=t&&r.target.contains(t);if(s&&(r.previousActiveItem=t),e!=null){if(r.skipScrollIntoView||i.scrollable?.scrollIntoView(e,{block:"nearest",focus:g.isFocusable(e)&&e!==g.getActiveElement(e),silent:r.scrollSilently}),e===t&&s)return;t&&t.classList.remove(r.focusCls),e.classList.add(r.focusCls),r._activeItem=e}else t&&(t.classList.remove(r.focusCls),t===g.getActiveElement(t)&&i.revertFocus()),r._activeItem=null}updateTarget(e,t){let r=this,i={element:e,thisObj:r,focusin:"onTargetFocusIn",focusout:"onTargetFocusOut"};r.itemsTabbable||(i.mousedown="onTargetMouseDown",i.click="onTargetClick"),Object.prototype.hasOwnProperty.call(r,"acceptNode")||(r.acceptNode=r.acceptNode.bind(r),r.acceptNode.acceptNode=r.acceptNode),O.on(i),r.treeWalker=r.setupTreeWalker(e,NodeFilter.SHOW_ELEMENT,r.acceptNode,!1),r.keyEventTarget||(r.keyEventTarget=e),(r.targetMutationMonitor=new MutationObserver(r.onTargetChildListChange.bind(r))).observe(e,{childList:!0,subtree:!0})}setupTreeWalker(e,t,r,i){return document.createTreeWalker(e,t,r,i)}onTargetChildListChange(){let e=this.activeItem;e&&(this.target.contains(e)?e.classList.add(this.focusCls):this.activeItem=this.target.querySelector(`${this.itemSelector}[data-id="${e.dataset.id}"]`)||null)}changeKeyEventTarget(e){this._keyEventTarget=e,O.on({element:e,keydown:"onKeyDown",thisObj:this})}triggerNavigate(e,t=this.activeItem){let r={event:e,item:t,oldItem:this.previousActiveItem};this.trigger("navigate",r),this.ownerCmp?.trigger("navigate",r)}};var yt=document.createRange(),st=class extends E{static get $name(){return"List"}static get type(){return"list"}static get configurable(){return{itemCls:"b-list-item",selectedCls:"b-selected",selectIconCls:"b-icon-check",items:null,displayField:"text",store:null,navigator:!0,scrollable:{overflowX:!1,overflowY:!0},itemsFocusable:!0,multiSelect:!1,toggleAllIfCtrlPressed:!1,selectAllItem:!1,itemTpl(e){let t=M.encodeHtml(e[this.displayField]);return(t==null||t==="")&&(t="&nbsp;"),t},groupHeaderTpl:(e,t)=>{let r=M.encodeHtml(t);return(r==null||r==="")&&(r="&nbsp;"),r},allowGroupSelect:!0,selected:{},activateOnMouseover:null}}construct(e,...t){let r=this;Array.isArray(e)&&(e={items:e}),super.construct(e,...t);let{element:i}=r,{classList:s}=i;r.multiSelect&&s.add("b-multiselect"),r.store?.count?r.refresh():s.add("b-empty"),O.on({element:i,delegate:r.itemSelector,mouseover:"onMouseOver",click:"onClick",thisObj:r})}doDestroy(){this.detachListeners("store"),this.navigator?.destroy(),super.doDestroy()}onFocusIn(e){let t=e._target.classList.contains(this.itemCls)?e._target.dataset.id:0;this.restoreActiveItem(this.navigator.previousActiveItem||this.getItem(t)),super.onFocusIn(e)}contentTpl(){let e=this,t=e.store.records.map((r,i)=>e.itemWrapperTpl(r,i));return e.multiSelect&&e.selectAllItem!==!1&&t.unshift(e.selectAllItemTpl()),L.tpl`${t}`}itemWrapperTpl(e,t){return L.tpl`<div class="${this.getItemClasses(e,t)}" data-index="${t}" data-id="${M.encodeHtml(e.id)}" ${this.itemsFocusable?'tabindex="-1"':""}>
            ${this.itemContentTpl(e,t)}</div>`}itemContentTpl(e,t){return"groupRowFor"in e.meta?this.groupHeaderTpl(e,M.capitalize(e.groupChildren[0][e.meta.groupField])):`${this.itemIconTpl(e,t)}${this.itemTpl(e,t)}`}itemIconTpl(e,t){return this.multiSelect?`<div class="b-selected-icon b-icon ${this.selectIconCls}"></div>`:""}selectAllItemTpl(){return`<div class="${this.itemCls} b-select-all-item" data-noselect data-select-all data-id="select-all">${this.itemIconTpl()}<div>${this.optionalL("Select All")}</div></div>`}getItemClasses(e){let t=this,r=t._navigator?.activeItem,i=r?.dataset.id==e.id,s="groupRowFor"in e.meta?"b-list-item-group-header":"",n=t.selected.includes(e);return`${t.itemCls} ${e.cls||""} ${n?t.selectedCls:""} ${i?t.navigator.focusCls:""} ${s}`}onBeforeStoreLoad(){this.mask(this.L("L{loading}"))}onAfterStoreRequest(){this.unmask()}onStoreChange({source:e,action:t,records:r,record:i,changes:s}){let n=this;switch(t){case"dataset":return;case"remove":n.selected.remove(r);break;case"clear":n.selected.clear();break;case"update":{let{id:o}=s;o&&g.setAttributes(n.contentElement.querySelector(`[data-id="${M.encodeHtml(o.oldValue)}"]`),{"data-id":o.value}),n.refreshItem(i);return}}n.refresh()}onStoreRefresh(){this.refresh()}refresh(){let e=this;if(e.isVisible){let{activeItem:t}=e.navigator;e.paintListener=null;let r=g.createElementFromTemplate(e.contentTpl(),{fragment:!0});e.clearItems().insertNode(r),t&&e.restoreActiveItem(t),e.refreshCount=(e.refreshCount||0)+1,e.element.classList[e.store.count>0?"remove":"add"]("b-empty")}else e.paintListener||(e.paintListener=e.on({paint:"refresh",thisObj:e,once:!0}))}clearItems(){let e=this,t=e.contentElement.querySelector(e.itemSelector),r=e.contentElement.lastChild;if(t){let i=e.contentElement.querySelectorAll(`${e.itemSelector}:not(.b-mask)`);yt.setStartBefore(t),yt.setEndAfter(i[i.length-1]),yt.deleteContents()}else r?(yt.setStartAfter(r),yt.setEndAfter(r)):(yt.setStart(e.contentElement,0),yt.setEnd(e.contentElement,0));return yt}refreshItem(...e){for(let t of e){let r=this.getItem(t);if(r){let i=this.store.indexOf(t),s=g.createElementFromTemplate(this.itemWrapperTpl(t,i));g.sync(s,r)}}}getItem(e){if(e!=null)return typeof e=="number"?this.contentElement.querySelector(`[data-index="${e}"]`):(e.nodeType===Element.ELEMENT_NODE&&(e=e.dataset.id),e?.id!=null&&(e=e.id),this.contentElement.querySelector(`[data-id="${M.encodeHtml(e)}"]`))}getRecord(e){return e.target&&(e=e.target),e=e.closest(this.itemSelector),this.store.getAt(parseInt(e.dataset.index))}updateItems(e){let t=this;t.store&&t.store.autoCreated&&t.store.destroy(),t.store=Y.getStore(e)}updateSelected(e){e&&e instanceof Re||(e=new Re(e)),this._selected=e,e.on({change:"onSelectionChange",thisObj:this})}get itemSelector(){return`.${this.itemCls}`}get selected(){return this._selected}get store(){return this._thisIsAUsedExpression(this.items),this._store}changeStore(e){let t=this;if(e instanceof Y||(e=new Y(e)),t.detachListeners("store"),e){let r={name:"store",change:"onStoreChange",refresh:"onStoreRefresh",thisObj:t};e.readUrl&&(r.beforeLoad="onBeforeStoreLoad",r.afterRequest="onAfterStoreRequest"),e.isGrouped&&(t.element.classList.add("b-grouped"),r.groupchange="onStoreRefresh"),e.on(r)}return e}updateStore(){this.refresh()}changeNavigator(e){let t=this,{element:r}=t;return r&&(e=(e.class||Mt).new({ownerCmp:t,target:r,keyEventTarget:r},e),e.keyEventTarget===r&&(r.tabIndex=0)),e}get minAlignHeight(){let e=this.element.lastElementChild,t=this.minHeight;if(t!=null)return this.store.count?Math.min(e.offsetTop+e.offsetHeight,t):0}alignTo(...e){super.minHeight=this.minAlignHeight,super.alignTo(...e)}hide(...e){return this.navigator.activeItem=null,super.hide(...e)}show(){let{refreshCount:e}=this,{previousActiveItem:t}=this.navigator;super.minHeight=this._minHeight;let r=super.show();return this.refreshCount===e&&this.restoreActiveItem(t,!0),r}restoreActiveItem(e=this.navigator.previousActiveItem,t="nearest"){let r=this,{navigator:i,lastAlignSpec:s}=r;if(e!=null){if(typeof t!="string"){let n=s?s.zone:1;t=n&1?"nearest":n?"start":"end"}e=r.getItem(e),e&&(r.scrollable.scrollIntoView(e,{block:t}),i.activeItem=e)}}onMouseOver(e){let t=this,r=e.currentTarget;!g.isTouchEvent&&r&&t.navigator&&t.activateOnMouseover&&t.setTimeout({fn:"handleMouseOver",delay:30,args:[r],cancelOutstanding:!0})}handleMouseOver(e){this.navigator.activeItem=e}onClick(e){let t=e.target.closest(this.itemSelector);t&&this.onItemClick(t,e)}onInternalKeyDown(e){let t=this,r=t.navigator.activeItem;switch(e.key){case" ":if(e.target.nodeName.toUpperCase()==="INPUT"&&!e.target.readOnly)break;case"Enter":r&&(this.onItemClick(r,e),e.stopImmediatePropagation(),e.preventDefault())}}onItemClick(e,t){let r=this,i=parseInt(e.dataset.index),s=r.store.getAt(i);if(r._isUserAction=!0,r.allowGroupSelect||s&&!s.isSpecialRow)if(e.contains(t.target.closest("[data-noselect]")))e.contains(t.target.closest("[data-select-all]"))&&r.onSelectAllClick(e,t);else{let n=r.selected,o=n.includes(s);r.multiSelect?(r.toggleAllIfCtrlPressed&&t.ctrlKey?s=r.store.getRange():r.allowGroupSelect&&s.isSpecialRow&&(o=!s.groupChildren.some(l=>!n.includes(l)),s=s.groupChildren),n[o?"remove":"add"](s)):n.splice(0,n.count,s)}r.lastClicked=s,r.trigger("item",{item:e,record:s,index:i,event:t,userAction:!0}),r._isUserAction=!1}onSelectionChange({action:e,removed:t,added:r,replaced:i}){let s=this,{selectedCls:n,unselectedCls:o}=s,l,c;if(e==="clear")for(c of s.element.querySelectorAll(`.${n}`))c.classList.remove(n),o&&c.classList.remove(o);else{for(l of t)c=s.getItem(l),c&&c.classList.remove(n);for(l of r)c=s.getItem(l),c&&c.classList.add(n)}s.selectAllItem&&s.updateSelectAllState()}onSelectAllClick(e,t){let r=this,i=e.classList.contains(r.selectedCls);r.selected[i?"remove":"add"](r.store.getRange())}updateSelectAllState(){let e=this,t=e.element.querySelector(".b-select-all-item"),r=e.selected.count===e.store.count,i=r?"add":"remove";t.classList[i](e.selectedCls)}};st.initClass();st.prototype.navigatorClass=Mt;var Er=class extends st{static get $name(){return"ChipView"}static get type(){return"chipview"}static get configurable(){return{itemCls:"b-chip",closable:!0,iconTpl:null,closeHandler:null}}itemContentTpl(e,t){let r=this;return L.tpl`${r.iconTpl?this.iconTpl(e):""}
            ${r.itemTpl(e,t)}
            ${r.closable?'<div class="b-icon b-close-icon b-icon-clear" data-noselect></div>':""}`}onInternalKeyDown(e){this.closable&&this.selected.count&&(e.key==="Delete"||e.key==="Backspace")?this.callback(this.closeHandler,this.owner,[this.selected.values,{isKeyEvent:!0}]):super.onInternalKeyDown(e)}updateClosable(e){this.element.classList[e?"add":"remove"]("b-chips-closable"),this.navigator.disabled=!e,this.isConfiguring||this.refresh()}onClick(e){let t=this,r=e.target.closest(`.${t.itemCls}`);if(t.closable&&e.target.classList.contains("b-close-icon")){let i=t.store.getAt(parseInt(r.dataset.index));t.callback(t.closeHandler,t.owner,[[i]])}else super.onClick(e)}};Er.initClass();var Vs="L{Field.fieldRequired}",Kt="L{Field.validateFilter}",Vu="L{Combo.recordNotCommitted}",Ft=class extends pt{static get $name(){return"Combo"}static get type(){return"combo"}static get alias(){return"combobox,dropdown"}static get configurable(){return{primaryFilter:{},picker:{type:"list",floating:!0,scrollAction:"realign",itemsFocusable:!1,activateOnMouseover:!0,align:{align:"t0-b0",axisLock:!0},maxHeight:324,scrollable:{overflowY:!0},autoShow:!1,focusOnHover:!1},multiSelect:null,items:null,store:null,valueField:void 0,displayField:"text",pickerWidth:null,minChars:null,selected:null,listItemTpl:null,displayValueRenderer:null,listCls:null,triggers:{expand:{cls:"b-icon-picker",handler:"onTriggerClick"}},filterParamName:null,encodeFilterParams:e=>e.map(t=>t.value),filterOnEnter:!1,hideTrigger:null,overlayAnchor:null,keyStrokeFilterDelay:null,defaultAction:"select",triggerAction:"all",filterOperator:"startsWith",caseSensitive:!1,hidePickerOnSelect:null,chipView:{$config:["lazy","nullify"],value:{type:"combochipview"}},chipStore:{$config:["lazy","nullify"],value:{}},filterSelected:null,emptyText:null,value:null,valueCollection:{$config:["nullify","lazy"],value:{}},validateFilter:!0,clearTextOnPickerHide:!0,destroyStore:!1,multiValueSeparator:",",createOnUnmatched:null,inlinePicker:null,testConfig:{keyStrokeFilterDelay:0}}}static get queryLast(){return"last"}construct(e){super.construct(...arguments),this.store||(this.items=[]),this.filterOnEnter&&(this.hideTrigger=!0)}startConfigure(e){this.usingRecordAsValue=e.valueField===null,super.startConfigure(...arguments)}afterConfigure(){super.afterConfigure();let e=this;b.hasOwn(e,"_value")||(e._value=e.valueField===e.displayField?"":null,e._lastValue=e._lastValue||e._value)}get childItems(){let{_chipView:e,_picker:t}=this,r=[];return e&&r.push(e),t&&r.push(t),r}get innerElements(){let e=this._chipView?.element,{input:t,inputElement:r}=this;return e&&_.sync({targetElement:t,domConfig:r}),[e||r]}updateInlinePicker(e){e&&(this.element.classList.add("b-inline-picker"),this.getConfig("picker"),this.triggers.expand=null,this.pickerVisible=!0)}hidePicker(){if(!this.inlinePicker)return super.hidePicker(...arguments)}changeChipStore(e){return e&&!(e instanceof Y)&&(e=new Y(Y.mergeConfigs({storage:this.valueCollection},e))),e}updateChipStore(e,t){t?.destroy()}changeChipView(e,t){let r=this;if(r.element.classList[e?"add":"remove"]("b-uses-chipview"),e){let{input:i}=r;return r.chipStore||(r.chipStore={}),zs.reconfigure(t,e,{defaults:{parent:r,insertBefore:i,store:r.chipStore,closable:!r.readOnly,navigator:{class:Pl,keyEventTarget:i}}})}t?.destroy()}updateChipView(e){let t=this;t._chipViewEventDetacher=t._chipViewEventDetacher?.(),t.chipStore=e?.store,e&&(e.element.appendChild(t.input),t._chipViewEventDetacher=O.on({element:e.element,mousedown:"onChipViewMousedown",thisObj:t}))}updateMultiSelect(e,t){let r=this,{input:i,element:s}=r,n=!r.isConfiguring,{value:o}=r;if(s.classList[e?"add":"remove"]("b-multiselect"),e){let{chipView:l}=r,{parentNode:c}=i,d=l?.element;d&&d!==c&&(c.insertBefore(d,i),d.appendChild(i),r.chipView.refresh()),i.value="",n&&!Array.isArray(o)&&(o=o?[o]:null)}else{let l=r._chipView,{parentNode:c}=i,d=l?.element;d===c&&(d.parentNode.insertBefore(i,d),d.remove(),s.classList.remove("b-uses-chipview")),n&&typeof o!="string"&&(o=o&&o.length?o[0]:null)}n&&(r.value=o)}onChipViewMousedown(e){e.preventDefault(),this.containsFocus||this.focus()}onChipClose(e,t={}){(t.isKeyEvent&&this.input.value===""||!t.isKeyEvent)&&(this._isUserAction=!0,this.valueCollection.remove(e),this._isUserAction=!1)}updateFilterParamName(e){this.hideTrigger!==!1&&(this.hideTrigger=Boolean(e))}updateHideTrigger(e){this.element.classList[e?"add":"remove"]("b-hide-trigger")}updateKeyStrokeFilterDelay(e){let t=this;e&&(t.filterList=t.buffer(t.doFilter,e))}updateReadOnly(e){super.updateReadOnly(...arguments),this._chipView&&(this._chipView.closable=!e)}updateFilterOperator(e){this.primaryFilter&&(this.primaryFilter.operator=e)}get minChars(){let e=this._minChars;return e??(this.remoteFilter?4:1)}get validateFilter(){return this._validateFilter&&!this.createOnUnmatched}get items(){return this.store.allRecords}changeItems(e){let t=this;if(e==null){if(t.store&&!t.store.isItemStore)return;e=[]}if(e instanceof Y){t.store=e;return}let r=t.displayField,i,s=t.valueField,n;if(Array.isArray(e)?n=e.map(o=>{let l=o;return o instanceof K?(i=o.constructor,s||(t.valueField=s=i.idField)):typeof o=="string"||typeof o=="number"?(s||(t.valueField=s=t.displayField),l={[s]:o,[r]:o}):(s||(t.valueField=s="value"),Array.isArray(o)&&(l={[s]:o[0],[r]:o[1]})),o.selected&&(t.value=l),l}):(s||(t.valueField=s="value"),n=[],Object.entries(e).forEach(([o,l])=>{n.push({[s]:o,[r]:l})})),t.store)t.store.data=n;else{let o=s===r?{name:"value",dataSource:r}:s;t.store=new Y({isItemStore:!0,data:n,idField:s,modelClass:i||class extends K{static get idField(){return t.valueField}static set idField(l){super.idField=l}static get fields(){return[o,r]}}})}}get value(){let e=this,{valueCollection:t,valueField:r}=e;if(r==null)return e.multiSelect?t.values.slice():t.first;let i;return e.multiSelect?i=t.count?t.map(s=>s[r]):e._lastValue||[]:i=t.count?t.first[r]:e._lastValue,i}set value(e){super.value=e}changeValue(e,t){let r=this;if(e===t){r.syncInputFieldValue(!0);return}if(!r.multiSelect&&Array.isArray(e)&&e.length>1)throw new Error("Multiple values cannot be set to a non-multiSelect Combo");r.triggerConfig("items"),r.store||(r.items=[]);let{valueField:i,displayField:s,store:n,valueCollection:o,_picker:l}=r,{storage:c}=n,d=r.hidePickerOnSelect??!r.multiSelect,u=r._isUserAction||l?._isUserAction||d&&r.pickerVisible||!1;if(!r.remoteFilter&&n.isAjaxStore&&!n.count){n.on("load",()=>r.value=e,{once:!0,thisObj:r}),r._lastValue=e;return}if(r.remoteFilter){if(e!=null){if(I.isObject(e)||e.isModel)this.store.data=[e],this.valueCollection.splice(0,this.valueCollection.count,this.store.first);else{let h=r.isConfiguring;r.primaryFilter.setConfig({value:e,disabled:!1}),n.performFilter(!0).then(()=>{let{isConfiguring:m}=r;r.isConfiguring=h,o.splice(0,o.count,n.allRecords),r.isConfiguring=m})}return}}else n.filtered&&(r.primaryFilter.disabled=!0,n.filter());let f;if(e!=null){let h=Array.isArray(e),m=h?e.slice():[e];for(let C=0,w=m.length;C<w;C++){let T=m[C];if(T instanceof K)c.includes(T)||n.add(T);else{let R=b.isObject(T);R&&(T=T[i]),f=c.getBy(s,T)||c.getBy(i,T)||o.getBy(s,T)||o.getBy(i,T),f instanceof Set&&(f=[...f][0]),f?(R&&f.set(m[C]),m[C]=f):(m.splice(C,1),w--,C--)}}let p=!m.length,y=o.generation;o.splice(0,o.count,m),p&&(r._value=h&&e.length===0?null:e,r._lastValue=r._value),(p||o.generation===y)&&r.syncInputFieldValue(),r.syncEmpty(),p&&!r.isConfiguring&&r.triggerFieldChange({value:e,oldValue:t,userAction:u,valid:r.isValid})}else if(o.count)o.clear();else{let h=r._value;r._value=null,r.syncInputFieldValue(),r.syncEmpty(),r.isConfiguring||r.triggerFieldChange({value:e,oldValue:h,userAction:u,valid:r.isValid})}r._lastValue=r._value}hasChanged(e,t){return this.multiSelect?!b.isEqual(e,t):super.hasChanged(...arguments)}onComboStoreChange({action:e}){e!=="filter"&&this.syncInputFieldValue(!0)}syncInputFieldValue(e){this.usesChipView||super.syncInputFieldValue(e)}get usesChipView(){return Boolean(this.multiSelect&&this._chipView)}get isEmpty(){return this.valueCollection.count===0}get inputValue(){let e=this,t=e.selected?e.selected[e.displayField]:e.value;return e.displayValueRenderer&&(t=e.callback(e.displayValueRenderer,e,[e.selected,e])),t??""}get nonEditableClickTarget(){return this.multiSelect?this.chipView.element:super.nonEditableClickTarget}changeValueCollection(e,t){if(t?.destroy(),e)return e.isCollection||(e=new Re({listeners:{noChange:"onValueCollectionNoChange",change:"onValueCollectionChange",prio:-1e3,thisObj:this}})),e}changePrimaryFilter(e){return e instanceof de||(typeof e=="function"&&(e={filterBy:e}),e=new de({id:"primary",disabled:!0,property:this.displayField,operator:this.filterOperator,caseSensitive:this.caseSensitive,...e})),e}changeStore(e){if(Array.isArray(e)){this.items=e;return}if(e){typeof e=="string"?e=Y.getStore(e):b.isObject(e)&&(e=new(e.readUrl?gt:Y)(e),this.destroyStore=!0);let t=this,r=t.remoteFilter||e.restfulFilter,{filterParamName:i,valueCollection:s,keyStrokeFilterDelay:n}=t,o=[];r&&i&&(e.filterParamName=i,t.encodeFilterParams&&(e.encodeFilterParams=t.encodeFilterParams)),!t.valueField&&!t.usingRecordAsValue&&(t.valueField=e.modelClass.idField),o.push(t.primaryFilter),r?t.filterSelected&&(e.storage.autoFilter=!0,e.storage.addFilter({id:`${t.id}-selected-filter`,filterBy:l=>!s.includes(l)})):t.filterSelected&&(t.selectedItemsFilter=l=>!s.includes(l),o.push(t.selectedItemsFilter),e.reapplyFilterOnAdd=!0),s.addIndex({property:t.displayField,unique:!1}),s.addIndex({property:t.valueField,unique:!0}),e.filter(o),r?t.keyStrokeFilterDelay=Math.max(300,n||0):t.keyStrokeFilterDelay=n??10}return e}updateStore(e,t){let r=this,{_picker:i}=r,s;if(this.destroyStore&&t&&t.destroy(),i&&(i.store=e),e.storage.addIndex({property:r.displayField,unique:!1}),e.storage.addIndex({property:r.valueField,unique:!0}),s={filter:"onStoreFilter"},r.displayValueRenderer&&((s||(s={})).change="onComboStoreChange",r.syncInputFieldValue()),r.detachListeners("store"),t){let n=r.value;r.isConfiguring=!0,r.value=null,r.isConfiguring=!1,r.value=n}s&&(s.name="store",s.thisObj=r,e.on(s))}get remoteFilter(){return Boolean(this.filterParamName||this._store?.restfulFilter)}get record(){return this.selected}get records(){return this.valueCollection.values.slice()}get selected(){return this.valueCollection.first}onEditComplete(){let e=this,t=e.valueCollection.count;super.onEditComplete(),t&&(e.clearError(Kt),e.syncInputFieldValue()),e.required&&!t&&e.setError(Vs)}onTriggerClick(){let e=this;if(!(e.remoteFilter&&e.filterOnEnter)){if(e.pickerVisible)e.hidePicker();else if(!e.readOnly&&!e.disabled)switch(e.triggerAction?.toLowerCase()){case"all":e.doFilter(null);break;case"last":e.doFilter(e.lastQuery);break;default:e.doFilter(e.input.value)}}}internalOnInput(e){let t=this,r=t.input.value,i=r.length;!t.editable||(t.syncEmpty(),t.syncInputWidth(),t.inputting=!0,t.inlinePicker||i>=t.minChars&&!t.filterOnEnter?t.filterList(r):(t.validateFilter&&!t.remoteFilter&&t[i?"setError":"clearError"](Kt),t.hidePicker()),t.inputting=!1,t.trigger("input",{value:r,event:e}))}syncInputWidth(){let e=this;if(e.usesChipView){let t=e.input,r=e._inputPadding||(e._inputPadding=g.getEdgeSize(t,"padding","lr")),i=t.value||"",s=g.measureText(i+"W",t,!1,e.element)+r.width;t.style.flex=`1 1 ${Math.ceil(s)}px`}}filterList(e){this.doFilter(e)}doFilter(e){let t=this,{store:r,picker:i}=t,s=e==null||e==="";t.lastQuery=e,t.primaryFilter.setConfig({value:e,disabled:s}),t.remoteFilter&&r.clear(!0),(t.filterPromise=r.filter())?.then(()=>t.filterPromise=null),t.inlinePicker||(i?.isVisible?i.lastAlignSpec.zone===0&&i.realign():t.showPicker()),r.count?s||(t.picker.navigator.activeItem=0):!t.remoteFilter&&!s&&t.validateFilter&&t.setError(Kt)}onStoreFilter({source:e}){let t=this,r=t._picker,i=r?.element.dataset,{count:s}=e;t.remoteFilter&&(s?r&&(r.navigator.activeItem=0):t.validateFilter&&t.setError(Kt),t.filterSelected&&t.valueCollection.count&&(e.storage.onFiltersChanged(),r&&r.refresh())),t.createOnUnmatched&&!s?i.addNewValue=t.L("L{addNewValue}")(t.primaryFilter.value):delete i?.addNewValue}onValueCollectionChange({source:e}){let t=this,{multiSelect:r,_picker:i}=t,s=t.hidePickerOnSelect??!r,n=r?e.values.slice():e.first,o=e.values.slice(),l=t._isUserAction||i?._isUserAction||s&&t.pickerVisible||!1,c=t._value;s&&t.hidePicker(),!e.count&&t.required?t.setError(Vs):(t.clearError(Vs),t.clearError(Kt)),t.validateFilter&&n&&t.clearError(Kt),t.filterSelected&&(t.remoteFilter?(t.store.storage.onFiltersChanged(),t._picker&&t._picker.refresh()):t.store.filter()),t._value=null,t._lastValue=null;let d=t.cacheCurrentValue(t.value);t.syncInputFieldValue(),t.syncEmpty(),t.isConfiguring||(t.triggerFieldChange({value:d,oldValue:c,userAction:l,valid:t.isValid}),t.trigger("select",{record:n,records:o,userAction:l}),t.defaultAction==="select"&&t.trigger("action",{value:d,record:n,records:o,userAction:l}))}cacheCurrentValue(e){return this._value=e}onValueCollectionNoChange({toAdd:e}){!this.inlinePicker&&!this.multiSelect&&e.length&&this.pickerVisible&&this.picker.hide()}showPicker(){let e=this,{picker:t}=e;e.readOnly||e.inlinePicker||(t.multiSelect=e.multiSelect,super.showPicker(),e.overlayAnchor&&!t.align.offset&&(t.align.offset=-t.anchorSize[1],t.realign()),!e.multiSelect&&e.selected&&t.restoreActiveItem(e.selected,!0),e.input.focus())}changePicker(e,t){let r=this,i=r.pickerWidth||e?.width,s=st.mergeConfigs({owner:r,store:r.store,selected:r.valueCollection,multiSelect:r.multiSelect,cls:r.listCls,displayField:r.displayField,forElement:r[r.pickerAlignElement],align:{matchSize:i==null,anchor:r.overlayAnchor,target:r[r.pickerAlignElement],minHeight:r.inlinePicker?null:Math.min(3,r.store.count)*40},[r.listItemTpl?"itemTpl":void 0]:r.listItemTpl,width:i,navigator:{keyEventTarget:r.input}},e);return r.inlinePicker&&Object.assign(s,{floating:!1,align:null,activateOnMouseover:!1,maxHeight:null,appendTo:r.element}),e=st.reconfigure(t,e?s:null,r),e&&(e.element.classList.add("b-combo-picker"),e.element.dataset.emptyText=r.emptyText||r.L("L{noResults}"),e.on({navigate:"onPickerNavigate",thisObj:r})),e}onPickerNavigate({event:e}){e.target.matches("[data-add-new-value]")&&this.addNewRecord(this.primaryFilter.value)}onPickerHide(){let e=this;super.onPickerHide(),e.multiSelect&&e.clearTextOnPickerHide&&(e.input.value="")}async internalOnKeyEvent(e){let t=this,r=t.input.value,i=r.length,{key:s}=e,{store:n,_picker:o,multiSelect:l}=t;if(e.type==="keydown"&&o?.isVisible&&o.navigator){let{activeItem:c}=o.navigator;if(c&&l&&s===t.multiValueSeparator){t.input.value="",t.primaryFilter.setConfig({value:"",disabled:!0}),n.filter(),o.onItemClick(c,e),o.hide(),e.preventDefault();return}if(!c&&t.createOnUnmatched&&(l&&s===t.multiValueSeparator||s==="Enter")){e.preventDefault(),await t.addNewRecord(r);return}}super.internalOnKeyEvent(...arguments),e.type==="keydown"&&s==="Enter"&&t.filterOnEnter&&i>=t.minChars&&(e.stopPropagation(),t.filterList(r))}async addNewRecord(e){let t=this,{store:r,_picker:i,valueCollection:s,multiSelect:n,primaryFilter:o}=t,l=r.remoteFilter&&r.autoCommit;t.filterPromise&&await t.filterPromise,l||(o.setConfig({value:"",disabled:!0}),r.filter());let[c]=r.add(t.callback(t.createOnUnmatched,t,[e]));if(r.isCommitting){let d;try{await r.commitPromise}catch(u){d=u.response?.parsedJson?.error}c.isPhantom&&(t.clearError(),t.setError(d||Vu,!1,!0),r.remove(c),r.removed.remove(c))}l&&(o.setConfig({value:"",disabled:!0}),r.filter()),t.input.value="",r.includes(c)&&s.splice(n?s.count:0,n?0:s.count,c),i?.hide()}changeCreateOnUnmatched(e){return e===!0&&(e=this.defaultRecordCreater),e}defaultRecordCreater(e){return this.store.createRecord({[this.displayField]:e})}},zs=class extends Er{static get $name(){return"ComboChipView"}static get type(){return"combochipview"}static get defaultConfig(){return{closeHandler:"up.onChipClose",itemsFocusable:!1,multiSelect:!0,itemTpl(e){return M.encodeHtml(e[this.owner.displayField])},scrollable:{overflowY:"auto"}}}},Pl=class extends Mt{static get defaultConfig(){return{allowShiftKey:!0}}onTargetClick(e){let t=this,r=e.target.closest(t.itemSelector);r&&!e.shiftKey&&!r.contains(e.target.closest("[data-noselect]"))&&t.ownerCmp.selected.clear(),t.inClickHandler=!0,t.activeItem=r,t.inClickHandler=!1}onKeyDown(e){e.key!=="Enter"&&super.onKeyDown(e)}updateActiveItem(e,t){let r=this.ownerCmp;super.updateActiveItem(e,t),e&&!this.inClickHandler&&r.selected.add(r.getRecord(e))}navigatePrevious(e){let t=this.ownerCmp;t.navigator.activeItem&&!e.shiftKey&&t.selected.clear(),this.previous?super.navigatePrevious(e):this.activeItem=null}navigateNext(e){let t=this.ownerCmp;t.navigator.activeItem&&!e.shiftKey&&t.selected.clear(),this.next?super.navigateNext(e):this.activeItem=null}};Ft.initClass();zs.initClass();var fi=60*1e3,Yt=60*fi,nt=24*Yt,zu=/(\d+)?:?(\d*)/,Ee=class{static format(e){let t=Math.floor(e/Yt),r=Math.floor(e/fi)%60;return`${t}:${r<10?"0":""}${r}`}static parse(e){let t=typeof e;if(t==="string"){let r=zu.exec(e);e=Number(r[1]||0)*Yt+Number(r[2]||0)*fi}else t!=="number"?e=D.getTimeOfDay(e):e<=24&&(e*=Yt);return Math.min(Math.max(Math.floor(e),0),nt)}constructor(e){let t=0,r,i;e?.isDayView?(t=e.dayStartShift,r=e.dayStartTime,i=e.dayEndTime):typeof e=="number"?t=r=i=e:e&&(t=e.startShift,r=e.timeStart,i=e.timeEnd),this.startShift=t=Ee.parse(t||0),this.timeEnd=(i==null?(t+nt)%nt:Ee.parse(i))||nt,this.timeStart=r==null?t:Ee.parse(r)}get startHour(){return Math.floor(this.timeStart/Yt)}get startTimeOffsetMs(){let{startShift:e,timeStart:t}=this;return t<e?nt-e+t:t-e}get today(){return this.startOfDay(new Date)}ceil(e){let t=this.startOfDay(e);return t<e&&t.setDate(t.getDate()+1),t}contains(e){return!this.outside(e)}dateKey(e){return e=this.shiftDate(e,-1),D.makeKey(e)}dayOfDate(e){return this.shiftDate(D.clearTime(e))}dayOfWeek(e){return e=this.shiftDate(e,-1),e.getDay()}delta(e,t="ms"){let{timeStart:r}=this,i=Ee.parse(e),s=(this.startShift&&i<r?i+nt:i)-r;return t==="ms"?s:D.as(t,s,"ms")}duration(e="ms"){let{timeStart:t,timeEnd:r}=this,i=t<r?r-t:nt-t+r;return e==="ms"?i:D.as(e,i,"ms")}equals(e){return this.startShift===e?.startShift&&this.timeStart===e.timeStart&&this.timeEnd===e.timeEnd}intersects(e,t){let r=this,{timeStart:i,timeEnd:s}=r,[n,o]=r._dateRangeArgs(e,t),[l,c]=r.timeRange(n,o);return i<s?l<c?l<s&&i<=c:l<s||i<=c:!(l<c)||l<s||i<=c}isIntraDay(e,t){let r=this,[i,s]=r._dateRangeArgs(e,t),n=r.startOfDay(i),o=nt-D.diff(n,s,"ms");return o<0?!1:o>0||n<i}outside(e){let{startShift:t,timeStart:r,timeEnd:i}=this,s=Ee.parse(e);return r<i?s<r?s<t?1:-1:s<i?0:s<t?-1:1:s<i||s>=r?0:s<t?1:-1}shiftDate(e,t=1){let{startShift:r}=this,i=typeof e;return e=i==="number"?new Date(e):i==="string"?D.parse(e):new Date(e.getTime()),t&&r&&e.setMilliseconds(t>0?r:-r),e}startOfDay(e){return e=this.shiftDate(e,-1),e=D.clearTime(e),e=this.shiftDate(e),e}timeRange(e,t){let[r,i]=this._dateRangeArgs(e,t);return[D.getTimeOfDay(r),D.getTimeOfDay(i)]}toString(){let{startShift:e,timeEnd:t,timeStart:r}=this,i=e?`@${Ee.format(e)}`:"",s=Ee.format(r);return r===t?e?i:s:`${s}-${Ee.format(t)}${i}`}_dateRangeArgs(e,t){return e.isModel?[e.startDate,e.endingDate]:[e,t]}};Ee.MIDNIGHT=new Ee({startShift:0,timeStart:0,timeEnd:24});Ee.MILLIS_PER_MINUTE=fi;Ee.MILLIS_PER_HOUR=Yt;Ee.MILLIS_PER_DAY=nt;var bt=class extends re(S){static get configurable(){return{date:{$config:{equal:"date"},value:D.clearTime(new Date)},month:null,year:null,weekStartDay:null,hideNonWorkingDays:null,nonWorkingDays:null,sixWeeks:null}}configure(e){super.configure(e),this.updateDayNumbers(),e.date&&(this.date=e.date)}changeDate(e){if(!this.isConfiguring){if(e=typeof e=="string"?D.parse(e,"YYYY-MM-DD"):new Date(e),isNaN(e))throw new Error("Month date ingestion must be passed a Date, or a valid YYYY-MM-DD date string");return e}}updateDate(e,t){let r=this,{dayColumnIndex:i}=r,s=D.getFirstDateOfMonth(e),n=D.getLastDateOfMonth(s),o=i[s.getDay()],l=i[n.getDay()],c=!t||e.getFullYear()!==t.getFullYear(),d=r.eventListeners&&(t?e.getDate()!==t.getDate()|(r.getWeekId(e)!==r.getWeekId(t))<<1|(e.getMonth()!==t.getMonth())<<2|c<<3:15);if(r._year=e.getFullYear(),r._month=e.getMonth(),r.startDayOfMonth=1-o,r.endDayOfMonth=n.getDate()+(6-l),r.sixWeeks&&(r.endDayOfMonth+=(6-r.weekCount)*7),(!r.weekBase||c)&&r.calculateWeekBase(),d){let u={newDate:e,oldDate:t,changes:{d:!0,w:Boolean(d&2),m:Boolean(d&12),y:Boolean(d&8)}};r.trigger("dateChange",u),d&2&&r.trigger("weekChange",u),d&12&&r.trigger("monthChange",u),d&8&&r.trigger("yearChange",u)}}calculateWeekBase(){let e=this,{dayColumnIndex:t}=e,r=new Date(e.year,0,1),i=new Date(e.year,11,31),s=e.month?e.getOtherMonth(r):e;e.dayColumnIndex[r.getDay()]>3?e.weekBase=s.startDate:e.weekBase=new Date(e.year,0,s.startDayOfMonth-7);let n=Math.floor(D.diff(e.weekBase,i,"day")/7);e.has53weeks=n===53&&t[i.getDay()]>2}getWeekStart(e){if(typeof e=="number")return D.add(this.weekBase,Math.max(e,1)*7,"day");let t=this,[r,i]=e;return r===t.year?t.getWeekStart(i):t.getOtherMonth(new Date(r,0,1)).getWeekStart(i)}getOtherMonth(e){let t=this,r=t===$l?new bt(null):$l;return r.configure({weekBase:null,weekStartDay:t.weekStartDay,nonWorkingDays:t.nonWorkingDays,hideNonWorkingDays:t.hideNonWorkingDays,sixWeeks:t.sixWeeks,date:new Date(e.getFullYear(),0,1)}),r.date=e,r.updateDate(r.date,r.date),r}changeYear(e){let t=new Date(this.date);t.setFullYear(e),this.date=t}changeMonth(e){let t=new Date(this.date);t.setMonth(e),this.date=t}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:D.weekStartDay}updateWeekStartDay(){let e=this;e.updateDayNumbers(),!e.isConfiguring&&e.date&&(e.weekBase=null,e.updateDate(e.date,e.date))}get nonWorkingDays(){return this._nonWorkingDays||D.nonWorkingDays}changeNonWorkingDays(e){return b.assign({},e)}updateNonWorkingDays(){this.updateDayNumbers()}updateHideNonWorkingDays(){this.updateDayNumbers()}updateSixWeeks(){this.isConfiguring||this.updateDate(this.date)}get dayCount(){return this.endDayOfMonth+1-this.startDayOfMonth}get weekCount(){return this.dayCount/7}get startDate(){let e=this;if(e.year!=null&&e.month!=null&&e.startDayOfMonth!=null)return new Date(e.year,e.month,e.startDayOfMonth)}get endDate(){let e=this;if(e.year!=null&&e.month!=null&&e.startDayOfMonth!=null)return new Date(e.year,e.month,e.endDayOfMonth)}eachDay(e){for(let t=this.startDayOfMonth;t<=this.endDayOfMonth;t++)e(new Date(this.year,this.month,t))}eachWeek(e){let t=this,{weekCount:r}=t;for(let i=t.startDayOfMonth,s=0;s<r;s++){let n=[],o=t.getWeekNumber(new Date(t.year,t.month,i));for(let l=0;l<7;l++,i++)n.push(new Date(t.year,t.month,i));e(o,n)}}getWeekNumber(e){let t=this;if(e=D.clearTime(e),e.getFullYear()!==t.year)return t.getOtherMonth(new Date(e.getFullYear(),0,1)).getWeekNumber(e);let r=Math.floor(D.diff(t.weekBase,e,"day")/7),i=e.getFullYear();if(r)r===53&&!t.has53weeks?(r=1,i++):r>53&&(r=r%52);else return t.getOtherMonth(new Date(t.year-1,0,1)).getWeekNumber(new Date(t.year,0,0));return[i,r]}getWeekId(e){let t=this.getWeekNumber(e);return t[0]*100+t[1]}getCellData(e,t,r=Ee.MIDNIGHT){let i=this,s=e.getDay(),n=i.visibleDayColumnIndex[s],o=i.nonWorkingDays[s],l=i.hideNonWorkingDays&&o;return(e<i.startDate||e>i.endDate)&&(i.month=e.getMonth()),{day:s,dayTime:r,visibleColumnIndex:n,isNonWorking:o,week:i.getOtherMonth(e).getWeekNumber(e),key:D.format(e,"YYYY-MM-DD"),columnIndex:i.dayColumnIndex[s],date:new Date(e),isOtherMonth:Math.sign(e.getMonth()+e.getFullYear()*12-(t.month+t.year*12)),visible:!l&&e>=t.startDate&&e<D.add(t.endDate,1,"day"),tomorrow:r.dayOfDate(D.add(e,1,"day")),isRowStart:n===0,isRowEnd:n===i.visibleColumnCount-1}}updateDayNumbers(){let e=this,{weekStartDay:t,nonWorkingDays:r,hideNonWorkingDays:i}=e,s=e.dayColumnIndex=[],n=e.canonicalDayNumbers=[],o=e.visibleDayColumnIndex=[],l=0;for(let c=0;c<7;c++){let d=(t+c)%7;n[c]=d,s[d]=c,(!i||!r[d])&&(o[d]=l++)}e.visibleColumnCount=l,e.weekLength=i?7-b.keys(r).length:7}},$l=new bt(null);var Sr=class extends Oe{static get $name(){return"CalendarPanel"}static get type(){return"calendarpanel"}static get configurable(){return{textContent:!1,date:{$config:{equal:"date"},value:null},month:{},year:null,weekStartDay:null,sixWeeks:!0,showWeekNumber:null,showWeekColumn:null,disabledDates:null,headerRenderer:null,weekRenderer:null,cellRenderer:null,disableWeekends:null,hideNonWorkingDays:null,hideNonWorkingDaysCls:"b-hide-nonworking-days",nonWorkingDays:null,tip:null,dayCellCls:"b-calendar-cell",dayHeaderCls:"b-calendar-day-header",disabledCls:"b-disabled-date",otherMonthCls:"b-other-month",weekendCls:"b-weekend",todayCls:"b-today",nonWorkingDayCls:"b-nonworking-day",dayNameFormat:"ddd",minRowHeight:{$config:["lazy"],value:null},minColumnWidth:{$config:["lazy"],value:null}}}construct(e){super.construct(e),this.refreshCount||this.refresh()}onPaint({firstPaint:e}){super.onPaint?.(...arguments),e&&(this.refreshCount||this.refresh(),this.getConfig("minColumnWidth"),this.getConfig("minRowHeight"))}get overflowElement(){return this.weeksElement}doDestroy(){this.tip?.destroy(),super.doDestroy()}changeMinRowHeight(e){let t=parseInt(g.getStyleValue(this.element,"--min-row-height"),10)||75;return isNaN(e)?e:Math.max(parseInt(e)||0,t)}updateMinRowHeight(e){this.weekElements.forEach(t=>g.setLength(t,"minHeight",e)),this.scrollable={overflowY:e?"auto":!1}}changeMinColumnWidth(e){let t=parseInt(g.getStyleValue(this.element,"--min-column-width"),10)||75;return e==null?e:Math.max(parseInt(e)||0,t)}updateMinColumnWidth(e){let t=this;t.weekdayCells.forEach(r=>g.setLength(r,"minWidth",e)),t.cellElements.forEach(r=>r.matches(`.${t.dayCellCls}`)&&g.setLength(r,"minWidth",e)),t.scrollable={overflowX:e?"auto":!1},t.overflowElement.classList[e?"add":"remove"]("b-min-columnwidth")}getDateFromEvent(e){let t=(e.nodeType===Element.ELEMENT_NODE?e:e.target).closest(`#${this.id} [data-date]`);if(t)return D.parseKey(t.dataset.date)}changeTip(e,t){let r=this;return ee.reconfigure(t,e,{owner:r,defaults:{type:"tooltip",owner:r,id:`${r.id}-cell-tip`,forElement:r.bodyElement,forSelector:`.${r.dayCellCls}`}})}updateTip(e){this.detachListeners("tip"),e?.on({pointerOver:"onTipOverCell",name:"tip",thisObj:this})}updateElement(e,t){let r=this;super.updateElement(e,t),r.updateHideNonWorkingDays(r.hideNonWorkingDays),r.weekdayCells=Array.from(e.querySelectorAll(".b-calendar-day-header")),r.weekElements=Array.from(e.querySelectorAll(".b-calendar-week")),r.weekDayElements=Array.from(e.querySelectorAll(".b-calendar-days")),r.cellElements=[];for(let i=0,{length:s}=r.weekDayElements;i<s;i++)r.cellElements.push(r.weekDayElements[i].previousSibling,...r.weekDayElements[i].children)}changeDate(e){if(e=typeof e=="string"?D.parse(e):new Date(e),isNaN(e))throw new Error("CalendarPanel date ingestion must be passed a Date, or a YYYY-MM-DD date string");return D.clearTime(e)}updateDate(e){this.month.date=e}updateDayNameFormat(){let e=new Date("2000-06-04T12:00:00");this.shortDayNames=[];for(let t=4;t<11;t++)e.setDate(t),this.shortDayNames.push(D.format(e,this.dayNameFormat))}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:D.weekStartDay}updateWeekStartDay(e){let t=this;if(t._month){t.month.weekStartDay=e,t.dayNames=[];for(let r=0;r<7;r++)t.dayNames[r]=t.shortDayNames[t.canonicalDayNumbers[r]];t.refreshCount&&t.refresh()}}updateHideNonWorkingDays(e){this.contentElement.classList[e?"add":"remove"](this.hideNonWorkingDaysCls),this.scrollable?.syncOverflowState(),this._month&&(this.month.hideNonWorkingDays=e)}get nonWorkingDays(){return this._nonWorkingDays||D.nonWorkingDays}changeNonWorkingDays(e){return b.assign({},e)}updateNonWorkingDays(e){this._month&&(this.month.nonWorkingDays=e,this.refresh(),this.scrollable?.syncOverflowState())}get visibleDayColumnIndex(){return this.month.visibleDayColumnIndex}get dayColumnIndex(){return this.month.dayColumnIndex}get canonicalDayNumbers(){return this.month.canonicalDayNumbers}get visibleColumnCount(){return this.month.visibleColumnCount}get weekLength(){return this.month.weekLength}get startDate(){return this.month.startDate}get duration(){return D.diff(this.month.startDate,this.month.endDate,"day")+1}get endDate(){let{endDate:e}=this.month;if(e)return D.add(e,1,"day")}changeMonth(e,t){let r=this;if(!(e instanceof bt)){if(typeof e=="number"){if(t){t.month=e;return}let i=r.date||D.clearTime(new Date);i.setMonth(e),e={date:i}}e=bt.new({weekStartDay:r.weekStartDay,nonWorkingDays:r.nonWorkingDays,hideNonWorkingDays:r.hideNonWorkingDays,sixWeeks:r.sixWeeks},e)}return e.on({dateChange:"onMonthDateChange",thisObj:r}),e}onMonthDateChange({source:e,newDate:t,oldDate:r,changes:i}){let s=this;s.year=e.year,s.isConfiguring||((i.m||i.y)&&s.refresh(),s.trigger("dateChange",{changes:i,value:t,oldValue:r}))}updateYear(e){this.month.year=e}updateShowWeekNumber(e){this.updateShowWeekColumn(e)}updateShowWeekColumn(e){let t=this;t.element.classList[e?"add":"remove"]("b-show-week-column"),t.floating&&(t.isAligning||t.realign())}updateSixWeeks(e){this.month&&(this.month.sixWeeks=e,this.refresh())}refresh(){this.doRefresh()}doRefresh(){this.getConfig("element");let e=this,t=D.clearTime(new Date),{weekElements:r,weekDayElements:i,date:s,month:n,dayCellCls:o,dayHeaderCls:l,disabledCls:c,otherMonthCls:d,weekendCls:u,todayCls:f,nonWorkingDayCls:h,nonWorkingDays:m,canonicalDayNumbers:p}=e;s||(e.date=t),e.getConfig("dayNameFormat");for(let T=0;T<7;T++){let R=e.weekdayCells[T],H=e.canonicalDayNumbers[T],A={[l]:1,[u]:D.weekends[H],[h]:m[H]};e.headerRenderer?(R.innerHTML="",e.callback(e.headerRenderer,e,[R,T,H])):g.setInnerText(R,e.shortDayNames[H]),g.syncClassList(R,A),R.dataset.columnIndex=T,R.dataset.cellDay=H}let y=0,C=0,w=6;for(let T=6;T>=0;T--)if(!m[p[T]]){w=T;break}for(n.eachWeek((T,R)=>{let H=i[y],A=[H.previousSibling,...H.children];r[y].dataset.week=`${T[0]},${T[1]}`,r[y].classList.remove("b-hide-display"),e.weekRenderer?e.callback(e.weekRenderer,e,[A[0],T]):A[0].innerHTML=T[1];for(let B=0;B<7;B++){let N=R[B],V=N.getDay(),j=A[B+1],le={[o]:1,[c]:e.isDisabledDate(N),[d]:N.getMonth()!==n.month,[u]:D.weekends[V],[f]:N.getTime()===t.getTime(),[h]:m[V],"b-last-working-day":B===w};g.syncClassList(j,le),j.dataset.date=D.makeKey(N),j.dataset.cellIndex=C,j.dataset.columnIndex=B,j.lastDomConfig&&(delete j.lastDomConfig.class,delete j.lastDomConfig.className),e.cellRenderer?e.callback(e.cellRenderer,e,[{cell:j,date:N,day:V,row:r[y],rowIndex:y,cellIndex:C,columnIndex:B,visibleColumnIndex:e.visibleDayColumnIndex[V],week:T}]):j.innerHTML=N.getDate(),C++}y++}),e.visibleWeekCount=y;y<6;y++)r[y].classList[e.sixWeeks?"remove":"add"]("b-hide-display");e.floating&&(e.isAligning||e.realign()),e.refreshCount=(e.refreshCount||0)+1,e.trigger("refresh")}isDisabledDate(e){let t=e.getDay(),{disabledDates:r,nonWorkingDays:i}=this;if(this.disableWeekends&&i[t])return!0;if(r)return Array.isArray(r)?(e=D.clearTime(e,!0),r.some(s=>!(D.clearTime(s,!0)-e))):this.callback(this.disabledDates,this,[e])}get bodyConfig(){let e=super.bodyConfig,t=[];e.children=[{tag:"div",className:"b-calendar-row b-calendar-weekdays",reference:"weekdaysHeader",children:[{class:"b-week-number-cell"},...U.fill(7,{class:this.dayHeaderCls}),g.scrollBarPadElement]},{className:"b-weeks-container notranslate",reference:"weeksElement",children:t}];for(let r=0;r<6;r++){let i={className:"b-calendar-row b-calendar-week",children:[{className:"b-week-number-cell"},{className:"b-calendar-days",children:[{},{},{},{},{},{},{}],syncOptions:{ignoreRefs:!0,strict:!1}}]};t.push(i)}return e}get firstVisibleDate(){for(let e=this,t=e.month.startDate;;t.setDate(t.getDate()+1))if(!e.hideNonWorkingDays||!e.nonWorkingDays[t.getDay()])return t}getCell(e){return typeof e!="string"&&(e=D.makeKey(e)),this.weeksElement.querySelector(`[data-date="${e}"]`)}onTipOverCell({source:e,target:t}){e.date=D.parseKey(t.dataset.date)}updateLocalization(){this.updateDayNameFormat(),this.updateWeekStartDay(this.weekStartDay),super.updateLocalization()}};Sr.initClass();var Nl=()=>D.getMonthNames().map((a,e)=>[e,a]),_l=[],Bl=new Date().getFullYear();for(let a=Bl-20;a<Bl+21;a++)_l.push(a);var Vl=class extends Ft{static get $name(){return"ReadOnlyCombo"}static get type(){return"readonlycombo"}static get configurable(){return{editable:!1,inputAttributes:{tag:"div",tabIndex:-1},highlightExternalChange:!1,triggers:{expand:!1},picker:{align:{align:"t-b",axisLock:!0,matchSize:!1},cls:"b-readonly-combo-list",scrollable:{overflowX:!1}}}}onSelect({record:e}){this.value=e.value}set value(e){let{store:t}=this,r=[];if(e<t.first.id)for(let i=e;i<t.first.id;i++)r.push({text:i});if(e>t.last.id)for(let i=t.last.id+1;i<=e;i++)r.push({text:i});t.add(r),super.value=e,this.input.innerHTML=this.input.value}get value(){return super.value}};Vl.initClass();var Dr=class extends Sr{static get $name(){return"DatePicker"}static get type(){return"datepicker"}static get delayable(){return{refresh:"raf"}}static get configurable(){return{activeDate:{value:null,$config:{equal:"date"}},focusable:!0,textContent:!1,tbar:{overflow:null,items:[{ref:"prevMonth",cls:"b-icon b-icon-prev",onAction:"up.gotoPrevMonth"},{type:"container",flex:1,defaultType:"readonlycombo",cls:"b-datepicker-title",items:[{ref:"monthField",cls:"b-datepicker-monthfield",items:Nl(),listeners:{select:"up.onMonthPicked"}},{ref:"yearField",cls:"b-datepicker-yearfield",items:_l,listeners:{select:"up.onYearPicked"}}]},{ref:"nextMonth",cls:"b-icon b-icon-next",onAction:"up.gotoNextMonth"}]},date:new Date,minDate:{value:null,$config:{equal:"date"}},maxDate:{value:null,$config:{equal:"date"}},focusDisabledDates:null,multiSelect:!1,editOnHover:!0,editMonth:!0,dayNameFormat:"dd"}}static get prototypeProperties(){return{outOfRangeCls:"b-out-of-range",activeCls:"b-active-date",selectedCls:"b-selected-date"}}construct(e){let t=this;e.editOnHover&&z.deprecate("Grid","5.0.0","`editOnHover` config deprecated, it now has no effect and will be removed in 5.0"),t.selection=e.date?[e.date]:[],super.construct(e),t.externalCellRenderer=t.cellRenderer,t.cellRenderer=t.internalCellRenderer,t.element.setAttribute("aria-activedescendant",`${t.id}-active-day`),O.on({element:t.weeksElement,click:"onCellClick",delegate:`.${t.dayCellCls}:not(.${t.disabledCls}):not(.${t.outOfRangeCls})`,thisObj:t}),t.widgetMap.monthField.readOnly=t.widgetMap.yearField.readOnly=!t.editMonth}doDestroy(){this.yearField?.destroy(),this.monthField?.destroy(),super.doDestroy()}get focusElement(){return this.element}internalCellRenderer({cell:e,date:t}){let r=this,{activeCls:i,selectedCls:s}=r,n={[i]:r.isActiveDate(t),[s]:r.isSelectedDate(t),[r.outOfRangeCls]:r.minDate&&t<r.minDate||r.maxDate&&t>r.maxDate};g.updateClassList(e,n),g.setInnerText(e,t.getDate()),e.setAttribute("aria-label",D.format(t,"MMMM D, YYYY")),r.isActiveDate(t)?e.id=`${r.id}-active-day`:e.removeAttribute("id"),r.externalCellRenderer?.(...arguments)}onCellClick(e){let t=e.target.closest("[data-date]");this.onUIDateSelect(D.parseKey(t.dataset.date),e)}onUIDateSelect(e,t){let r=this,{lastClickedDate:i,selection:s}=r;r.activeDate=e,r.lastClickedDate=e,r.isDisabledDate(e)||(r.activatingEvent=t,r.multiSelect?r.multiRange||(!i||!D.isSameDate(e,i))&&(i&&t.shiftKey?(s[1]=e,s.sort()):(s.length=0,s[0]=e),r.trigger("selectionChange",{selection:s,userAction:Boolean(t)})):!r.value||r.value.getTime()!==e.getTime()?r.value=e:r.floating&&r.hide(),r.activatingEvent=null)}onInternalKeyDown(e){let t=this,r=e.key.trim()||e.code,i=t.activeDate,s=new Date(i);if(r==="Escape"&&t.floating)return t.hide();if(i&&e.target===t.focusElement){do switch(r){case"ArrowLeft":e.preventDefault(),e.ctrlKey?s=t.gotoPrevMonth():s.setDate(s.getDate()-1);break;case"ArrowUp":e.preventDefault(),s.setDate(s.getDate()-7);break;case"ArrowRight":e.preventDefault(),e.ctrlKey?s=t.gotoNextMonth():s.setDate(s.getDate()+1);break;case"ArrowDown":e.preventDefault(),s.setDate(s.getDate()+7);break;case"Enter":return t.onUIDateSelect(i,e)}while(t.isDisabledDate(s)&&!t.focusDisabledDates);if(t.minDate&&s<t.minDate||t.maxDate&&s>t.maxDate)return;t.activeDate=s}}changeMinDate(e){return e?this.changeDate(e):null}updateMinDate(){this.refresh()}changeMaxDate(e){return e?this.changeDate(e):null}updateMaxDate(){this.refresh()}updateDate(e){super.updateDate(e),this.activeDate=e}changeActiveDate(e){if(e=e?this.changeDate(e):this.date||(this.date=D.clearTime(new Date)),isNaN(e))throw new Error("DatePicker date ingestion must be passed a Date, or a YYYY-MM-DD date string");return e}updateActiveDate(e){this.month.date=e,this.widgetMap.monthField.value=e.getMonth(),this.widgetMap.yearField.value=e.getFullYear(),this.isConfiguring||this.refresh()}set value(e){let t=this,{selection:r}=t,i;if(e){if(e=t.changeDate(e,t.value),e===void 0)return;(!t.value||e.getTime()!==t.value.getTime())&&(r.length=0,r[0]=e,i=!0),t.date=e}else i=r.length,r.length=0,t.date=new Date;i&&t.trigger("selectionChange",{selection:r,userAction:Boolean(t.activatingEvent)})}get value(){return this.selection[this.selection.length-1]}gotoPrevMonth(){let e=this,{activeDate:t}=e,r=t&&e.getCell(t)?t:e.date,i=D.add(r,-1,"month"),s=new Date(r).setDate(0);if(!e.minDate||s>=e.minDate)return e.date=i}gotoNextMonth(){let e=this,{activeDate:t}=e,r=t&&e.getCell(t)?t:e.date,i=D.add(r,1,"month"),s=new Date(i).setDate(1);if(!e.maxDate||s<=e.maxDate)return e.date=i}isActiveDate(e){return this.activeDate&&this.changeDate(e).getTime()===this.activeDate.getTime()}isSelectedDate(e){return this.selection.some(t=>D.isEqual(t,e,"day"))}onMonthPicked({record:e,userAction:t}){this.activeDate=D.add(this.activeDate,e.value-this.activeDate.getMonth(),"month"),t&&this.focusElement?.focus()}onYearPicked({record:e,userAction:t}){let r=new Date(this.activeDate);r.setFullYear(e.value),this.activeDate=r,t&&this.focusElement?.focus()}get yearItems(){let e=[],t=new Date().getFullYear();for(let r=t-20;r<t+21;r++)e.push(r);return e}updateLocalization(){let e=this.widgetMap.monthField,t=Nl();t[e.value].selected=!0,e.items=t,super.updateLocalization()}};Dr.initClass();var Ws=class extends pt{static get $name(){return"DateField"}static get type(){return"datefield"}static get alias(){return"date"}static get configurable(){return{format:"L",fallbackFormat:"YYYY-MM-DD",timeFormat:"HH:mm:ss:SSS",keepTime:!1,pickerFormat:null,validateDateOnly:null,triggers:{expand:{cls:"b-icon-calendar",handler:"onTriggerClick",weight:200},back:{cls:"b-icon b-icon-angle-left b-step-trigger",handler:"onBackClick",align:"start",weight:100},forward:{cls:"b-icon b-icon-angle-right b-step-trigger",handler:"onForwardClick",align:"end",weight:100}},calendarContainerCls:"",min:null,max:null,step:!1,stepTriggers:null,weekStartDay:null,picker:{type:"datepicker",floating:!0,scrollAction:"realign",align:{align:"t0-b0",axisLock:!0}},value:null}}changePicker(e,t){let r=this,i={owner:r,forElement:r[r.pickerAlignElement],minDate:r.min,maxDate:r.max,weekStartDay:r._weekStartDay,align:{anchor:r.overlayAnchor,target:r[r.pickerAlignElement]},onSelectionChange:({selection:s,source:n})=>{n.isVisible&&(r._isUserAction=!0,r._isPickerInput=!0,r.value=s[0],r._isPickerInput=!1,r._isUserAction=!1,n.hide())}};return r.calendarContainerCls&&(i.cls=r.calendarContainerCls),r.value?i.value=r.value:i.date=new Date,Dr.reconfigure(t,e,{owner:r,defaults:i})}get backShiftDate(){return D.add(this.value,-1*this._step.magnitude,this._step.unit)}onBackClick(){let e=this,{min:t}=e;if(!e.readOnly&&e.value){let r=e.backShiftDate;(!t||t.getTime()<=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}get forwardShiftDate(){return D.add(this.value,this._step.magnitude,this._step.unit)}onForwardClick(){let e=this,{max:t}=e;if(!e.readOnly&&e.value){let r=e.forwardShiftDate;(!t||t.getTime()>=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}showPicker(e){if(this.readOnly)return;let{_picker:t}=this;t&&(t.value=this.value,t.minDate=this.min,t.maxDate=this.max),super.showPicker(e)}focusPicker(){this.picker.focus()}get isValid(){let e=this;e.clearError("L{Field.minimumValueViolation}",!0),e.clearError("L{Field.maximumValueViolation}",!0);let t=e.value;if(t){let{min:r,max:i,validateDateOnly:s}=e;if(s&&(t=D.clearTime(t,!1)),r&&t<r)return e.setError("L{Field.minimumValueViolation}",!0),!1;if(i&&t>i)return e.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}transformDateValue(e){return e!=null&&(D.isDate(e)||(typeof e=="string"?e=D.parse(e,this.format)||D.parse(e,this.fallbackFormat):e=new Date(e)),D.isValidDate(e))?this.transformTimeValue(e):null}transformTimeValue(e){let t=this,{keepTime:r}=t;if(e=D.clone(e),!r)D.clearTime(e,!1);else if(r!=="entered"){let i=D.parse(r,t.timeFormat);D.isValidDate(i)?D.copyTimeValues(e,i):D.isValidDate(t.value)&&D.copyTimeValues(e,t.value)}else t._isPickerInput&&D.isValidDate(t.value)&&D.copyTimeValues(e,t.value);return e}changeMin(e){return this.transformDateValue(e)}updateMin(e){let{input:t,_picker:r}=this;t&&(e==null?t.removeAttribute("min"):t.min=e),r&&(r.minDate=e),this.syncInvalid()}changeMax(e){return this.transformDateValue(e)}updateMax(e){let{input:t,_picker:r}=this;t&&(e==null?t.removeAttribute("max"):t.max=e),r&&(r.maxDate=e),this.syncInvalid()}get weekStartDay(){return typeof this._weekStartDay=="number"?this._weekStartDay:D.weekStartDay}updateWeekStartDay(e){this._picker&&(this._picker.weekStartDay=e)}changeValue(e,t){let r=this,i=r.transformDateValue(e);if(e&&!i){r.setError("L{invalidDate}");return}if(r.clearError("L{invalidDate}"),r.hasChanged(t,i))return super.changeValue(i,t);r.inputting||r.syncInputFieldValue()}updateValue(e,t){let r=this._picker;r&&!this.inputting&&(r.value=e),super.updateValue(e,t)}changeStep(e,t){let r=typeof e;if(!e)return null;if(r==="number"?e={magnitude:Math.abs(e),unit:t?t.unit:"day"}:r==="string"&&(e=D.parseDuration(e)),e&&e.unit&&e.magnitude)return e.magnitude<0&&(e={magnitude:-e.magnitude,unit:e.unit}),e}updateStep(e){this.element.classList[e?"remove":"add"]("b-no-steppers"),this.syncInvalid()}hasChanged(e,t){return e?.getTime&&t?.getTime&&this.keepTime!=="entered"?!D.isEqual(D.clearTime(e),D.clearTime(t)):super.hasChanged(e&&e.getTime(),t&&t.getTime())}get inputValue(){let e=this.value;return e?D.format(e,this.format):""}updateFormat(){this.syncInputFieldValue(!0)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}internalOnKeyEvent(e){super.internalOnKeyEvent(e),e.key==="Enter"&&this.isValid&&this.picker.hide()}};Ws.initClass();var kt=class extends ve{static get $name(){return"TimePicker"}static get type(){return"timepicker"}static get defaultConfig(){return{items:{hour:{type:"number",min:0,max:23,highlightExternalChange:!1,format:"2>9"},label:{html:"<label>:</label>"},minute:{type:"number",min:0,max:59,highlightExternalChange:!1,format:"2>9"},amButton:{type:"button",text:"AM",toggleGroup:"am-pm",cls:"b-blue"},pmButton:{type:"button",text:"PM",toggleGroup:"am-pm",cls:"b-blue"}},float:"1",autoShow:!1,trapFocus:!0,value:D.getTime(0),format:null}}construct(e){super.construct(e);let t=this,{hour:r,minute:i,amButton:s,pmButton:n}=t.widgetMap;t._pm=!1,r.on("change",t.onFieldChange,t),i.on("change",t.onFieldChange,t),s.on("click",t.onAmButtonClick,t),n.on("click",t.onPmButtonClick,t),O.on({element:t.element,keydown:"onPickerKeyDown",thisObj:t,capture:!0}),t.refresh()}onFieldChange(){let e=this;e._time&&(e.value=e.pickerToTime())}onAmButtonClick(){let e=this;e._pm=!1,e._time&&(e.value=e.pickerToTime())}onPmButtonClick(){let e=this;e._pm=!0,e._time&&(e.value=e.pickerToTime())}onPickerKeyDown(e){let t=this;switch(e.key&&e.key.trim()||e.code){case"Escape":t.triggerTimeChange(t._initialValue),t.hide(),e.preventDefault();break;case"Enter":t.value=t.pickerToTime(),t.hide(),e.preventDefault();break}}pickerToTime(){let e=this,t=e._pm,{hour:r,minute:i}=e.widgetMap;r.format=e._is24Hour?"2>9":null;let s=r.value,n=new Date(e._time);return e._is24Hour||(t&&s<12&&(s=s+12),!t&&s===12&&(s=0)),n.setHours(s),n.setMinutes(i.value),e._min&&(n=D.max(e._min,n)),e._max&&(n=D.min(e._max,n)),n}triggerTimeChange(e){this.trigger("timeChange",{time:e})}set value(e){let t=this,r=!1;!e||!t._time?(t._time=kt.defaultConfig.value,r=!0):e.getTime()!==t._time.getTime()&&(t._time=e,r=!0),r&&(t.isVisible&&t.triggerTimeChange(t.value),t.refresh())}get value(){return this._time}set format(e){let t=this;t._format=e,t._is24Hour=D.is24HourFormat(t._format),t.refresh()}get format(){return this._format}set min(e){this._min=e}get min(){return this._min}set max(e){this._max=e}get max(){return this._max}set initialValue(e){this.value=e,this._initialValue=e}get initialValue(){return this._initialValue}refresh(){let e=this;if(!e.isConfiguring){let{hour:t,minute:r,amButton:i,pmButton:s}=e.widgetMap,n=e._time,o=e._is24Hour,l=n.getHours(),c=e._pm=l>=12;e.element.classList[o?"add":"remove"]("b-24h"),t.min=o?0:1,t.max=o?23:12,t.value=o?l:l%12||12,r.value=n.getMinutes(),i.pressed=!c,s.pressed=c,i.hidden=s.hidden=o}}};kt.initClass();var Gs=class extends pt{static get $name(){return"TimeField"}static get type(){return"timefield"}static get alias(){return"time"}static get configurable(){return{picker:{type:"timepicker",floating:!0,align:{align:"t0-b0",axisLock:!0}},format:"LT",triggers:{expand:{align:"end",handler:"onTriggerClick",compose:()=>({children:[{class:{"b-icon-clock-live":1}}]})},back:{align:"start",cls:"b-icon b-icon-angle-left b-step-trigger",handler:"onBackClick"},forward:{align:"end",cls:"b-icon b-icon-angle-right b-step-trigger",handler:"onForwardClick"}},min:null,max:null,step:"5m",stepTriggers:null,value:null}}changePicker(e,t){let r=this;return kt.reconfigure(t,e,{owner:r,defaults:{forElement:r[r.pickerAlignElement],owner:r,align:{anchor:r.overlayAnchor,target:r[r.pickerAlignElement]},onTimeChange({time:i}){r._isUserAction=!0,r.value=i,r._isUserAction=!1}}})}onBackClick(){let e=this,{min:t}=e;if(!e.readOnly&&e.value){let r=D.add(e.value,-1*e.step.magnitude,e.step.unit);(!t||t.getTime()<=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}onForwardClick(){let e=this,{max:t}=e;if(!e.readOnly&&e.value){let r=D.add(e.value,e.step.magnitude,e.step.unit);(!t||t.getTime()>=r)&&(e._isUserAction=!0,e.value=r,e._isUserAction=!1)}}get isValid(){let e=this;e.clearError("L{Field.minimumValueViolation}",!0),e.clearError("L{Field.maximumValueViolation}",!0);let t=e.value;if(t){if(t=t.getTime(),e._min&&e._min.getTime()>t)return e.setError("L{Field.minimumValueViolation}",!0),!1;if(e._max&&e._max.getTime()<t)return e.setError("L{Field.maximumValueViolation}",!0),!1}return super.isValid}hasChanged(e,t){return e&&e.getTime&&t&&t.getTime?e.getHours()!==t.getHours()||e.getMinutes()!==t.getMinutes()||e.getSeconds()!==t.getSeconds()||e.getMilliseconds()!==t.getMilliseconds():super.hasChanged(e,t)}showPicker(e){let t=this,{picker:r}=t;t.readOnly||(r.initialValue=t.value,r.format=t.format,r.maxTime=t.max,r.minTime=t.min,t.value=r.value,super.showPicker(e))}onPickerShow(){super.onPickerShow(),this.pickerKeyDownRemover=this.pickerKeyDownRemover?.()}focusPicker(){this.picker.focus()}transformTimeValue(e){return e!=null&&(D.isDate(e)||(typeof e=="string"?e=D.parse(e,this.format):e=new Date(e)),D.isValidDate(e))?D.getTime(e):null}changeMin(e){return this.transformTimeValue(e)}updateMin(e){let{input:t}=this;t&&(e==null?t.removeAttribute("min"):t.min=e),this.syncInvalid()}changeMax(e){return this.transformTimeValue(e)}updateMax(e){let{input:t}=this;t&&(e==null?t.removeAttribute("max"):t.max=e),this.syncInvalid()}changeValue(e,t){let r=this,i=r.transformTimeValue(e);if(e&&!i||r.isRequired&&e===""){r.setError("L{invalidTime}");return}if(r.clearError("L{invalidTime}"),r.hasChanged(t,i))return super.changeValue(i,t);r.inputting||r.syncInputFieldValue(!0)}updateValue(e,t){let{expand:r}=this.triggers;r&&e&&(r.element.firstElementChild.style.animationDelay=-((e.getHours()*60+e.getMinutes())/10)+"s"),super.updateValue(e,t)}changeStep(e,t){let r=typeof e;if(!e)return null;if(r==="number"?e={magnitude:Math.abs(e),unit:t?t.unit:"hour"}:r==="string"&&(e=D.parseDuration(e)),e&&e.unit&&e.magnitude)return e.magnitude<0&&(e={magnitude:-e.magnitude,unit:e.unit}),e}updateStep(e){this.element.classList[e?"remove":"add"]("b-no-steppers"),this.syncInvalid()}updateFormat(){this.syncInputFieldValue(!0)}get inputValue(){return D.format(this.value,this.format)}updateLocalization(){super.updateLocalization(),this.syncInputFieldValue(!0)}};Gs.initClass();var Wu={Enter:1,F2:1},Gu={ArrowUp:1,ArrowDown:1,ArrowLeft:1,ArrowRight:1,Escape:1,Enter:1,Tab:1,F2:1},qs=class extends we(fe){static get $name(){return"CellEdit"}static get defaultConfig(){return{autoSelect:!0,blurAction:"complete",continueEditingOnCellClick:!0,addNewAtEnd:null,autoEdit:null,editNextOnEnterPress:!0,editorClass:Cr,triggerEvent:"celldblclick",focusCellAnimationDuration:!1}}static get pluginConfig(){return{assign:["startEditing"],before:["onElementKeyDown","onElementMouseDown"],chain:["onElementClick","bindStore"]}}construct(e,t){super.construct(e,t);let r=this,i={renderRows:"onGridRefreshed",cellClick:"onCellClick",thisObj:r};r.grid=e,r.triggerEvent!=="cellclick"&&(i[r.triggerEvent]="onTriggerEditEvent"),r.autoEdit&&!("editNextOnEnterPress"in t)&&(r.editNextOnEnterPress=!1),e.on(i),e.rowManager.on({changeTotalHeight:"onGridRefreshed",thisObj:r}),r.bindStore(e.store)}bindStore(e){this.detachListeners("store"),e.on({name:"store",update:"onStoreUpdate",thisObj:this})}async confirm(e){let t=!0;return this.editorContext&&(vr.owner=this.editorContext.editor.inputField,e.rootElement=this.grid.rootElement,t=await vr.confirm(e),vr.owner=null),t===vr.yesButton}doDestroy(){this.grid.columns.allRecords.forEach(e=>{e._cellEditor?.destroy()}),super.doDestroy()}doDisable(e){e&&this.cancelEditing(!0),super.doDisable(e)}set disabled(e){super.disabled=e}get disabled(){let{grid:e}=this;return Boolean(super.disabled||e.disabled||e.readOnly)}get isEditing(){return Boolean(this.editorContext)}get activeRecord(){return this.editorContext?.record||null}getEditorForCell({cell:e,column:t,selector:r,editor:i}){let s=this,{grid:n}=s,o=t._cellEditor,l=0;return t.editTargetSelector&&(l=e.querySelector(t.editTargetSelector).offsetLeft),i.autoSelect=s.autoSelect,o?(o.inputField!==i&&(o.remove(o.items[0]),o.add(i)),o.align.offset[0]=l):o=t._cellEditor=new s.editorClass({constrainTo:null,cls:"b-cell-editor",inputField:i,blurAction:"none",invalidAction:t.invalidAction,completeKey:!1,cancelKey:!1,owner:n,align:{align:"t0-t0",offset:[l,0]},listeners:s.getEditorListeners()}),t.instantUpdate&&!i.cellEditValueSetter&&(b.wrapProperty(i,"value",null,c=>{let{editorContext:d}=s;d?.editor.isValid&&!b.isEqual(d.record[d.column.field],c)&&(d.record[d.column.field]=c)}),i.cellEditValueSetter=!0),Object.assign(o.element.dataset,{rowId:r.id,columnId:r.columnId,field:t.field}),o.inputField.revertOnEscape=t.revertOnEscape,s.editor=o}getEditorListeners(){return{focusOut:"onEditorFocusOut",focusIn:"onEditorFocusIn",start:"onEditorStart",beforeComplete:"onEditorBeforeComplete",complete:"onEditorComplete",cancel:"onEditorCancel",thisObj:this}}onEditorStart({source:e}){let t=this,r=t.editorContext=e.cellEditorContext;if(r){let{grid:i}=t,{cell:s}=r;s.classList.add("b-editing"),t.triggerEvent!=="cellclick"&&i.on({cellclick:"onCellClickWhileEditing"},t),t.removeEditingListeners=ae.addListener({globaltap:"onTapOut",thisObj:t}),i.trigger("startCellEdit",{grid:i,editorContext:r})}}onEditorBeforeComplete(e){let{grid:t}=this,r=e.source,i=r.cellEditorContext;return e.grid=t,e.editorContext=i,t.trigger("beforeFinishCellEdit",e)}onEditorComplete({source:e}){let{grid:t}=this,r=e.cellEditorContext;r.value=e.inputField.value,t.trigger("finishCellEdit",{grid:t,editorContext:r}),this.cleanupAfterEdit(r)}onEditorCancel({event:e}){let{editorContext:t,muteEvents:r,grid:i}=this;t&&this.cleanupAfterEdit(t),r||i.trigger("cancelCellEdit",{grid:i,event:e})}cleanupAfterEdit(e){let t=this,{editor:r}=e;e.cell.classList.remove("b-editing"),r.cellEditorContext=t.editorContext=null,t.grid.un({cellclick:"onCellClickWhileEditing",viewportResize:"onViewportResizeWhileEditing"},t),t.removeEditingListeners(),ae.suspendFocusEvents(),r.element.remove(),ae.resumeFocusEvents()}getAdjacentEditableCell(e,t){let{grid:r}=this,{store:i,columns:s}=r,{visibleColumns:n}=s,o=e.id,l=s.getAdjacentVisibleLeafColumn(e.columnId,t);for(;o;)if(l){if(l.editor&&l.canEdit(i.getById(o)))return{id:o,columnId:l.id};l=s.getAdjacentVisibleLeafColumn(l,t)}else{let c=i.getAdjacent(e.id,t,!1,!0);o=c?.id,c&&(l=t?n[0]:n[n.length-1])}return null}doAddNewAtEnd(){let e=typeof this.addNewAtEnd=="object"?b.clone(this.addNewAtEnd):{},{grid:t}=this,r=t.store.add(e)[0];return t.rowManager.getRowFor(r)||t.rowManager.displayRecordAtBottom(),r}getEditingContext(e){e=this.grid.normalizeCellContext(e);let t=this,{grid:r}=t,i=r.columns.getById(e.columnId),s=r.store.getById(e.id);if(i&&i.isVisible&&i.editor&&s&&!s.isSpecialRow&&i.canEdit(s)){let n=s&&i.getRawValue(s);return{column:i,record:s,value:n===void 0?null:n,selector:e,editor:i.editor}}else return!1}startEditing(e={}){let t=this;if(!t.disabled){let{grid:r}=t,i=r.normalizeCellContext(e),s=t.getEditingContext(i);if(!s||(t.editorContext&&t.cancelEditing(),r.store.isTree&&r.expandTo(e.id),r.focusCell(e),s.cell=r.getCell(e),r.trigger("beforeCellEditStart",{grid:r,editorContext:s})===!1))return!1;g.focusWithoutScrolling(r.focusElement);let n=s.editor=t.getEditorForCell(s),{cell:o,record:l,column:c}=s;return n.inputField.highlightExternalChange=!1,n.cellEditorContext=s,n.render(t.grid.getSubGridFromColumn(c).element),n.startEdit({target:o,field:n.inputField.name||s.column.field,value:s.value,record:l}),!0}return!1}cancelEditing(e=!1,t){let r=this,{editorContext:i,editor:s,grid:n}=r;i&&(s.containsFocus&&(r.editorContext=null,!n.isDestroying&&s.inputField.owns(g.getActiveElement(n))&&g.focusWithoutScrolling(n.focusElement),r.editorContext=i),r.muteEvents=e,s.cancelEdit(t),r.muteEvents=!1)}async finishEditing(){let e=this,{editorContext:t}=e,r=!1;if(t){let{column:i}=t;e.finishEditingPromise=t.editor.completeEdit(i.bindCallback(i.finalizeCellEdit)),r=await e.finishEditingPromise,await e.grid.waitForAnimations(),e.finishEditingPromise=null}return r}async onCellClickWhileEditing({event:e,cellSelector:t}){let r=this;r.finishEditingPromise||r.editorContext&&!r.editorContext.editor.owns(e.target)&&(r.getEditingContext(t)?await r.finishEditing()?r.continueEditingOnCellClick&&r.startEditing(t):(r.grid.focusCell(r.editorContext.selector),r.editor.inputField.focus()):r.finishEditing())}onCellClick({source:e,cellSelector:t,target:r,event:i,column:s}){if(s.onCellClick)return;let n=e.focusedCell||{};if(r.closest(".b-tree-expander"))return this.cancelEditing(void 0,i),!1;g.isTouchEvent&&t.id==n.id&&t.columnId==n.columnId?this.startEditing(t):this.triggerEvent==="cellclick"&&this.onTriggerEditEvent({cellSelector:t,target:r})}async onTriggerEditEvent({cellSelector:e,target:t}){t.closest(".b-tree-expander")||this.editorContext&&!await this.finishEditing()||this.startEditing(e)}onStoreUpdate({changes:e,record:t}){let{editorContext:r}=this;r?.editor.isVisible&&t===r.record&&r.editor.dataField in e&&r.editor.refreshEdit()}onGridRefreshed(){let e=this,{grid:t}=e;if(e.editorContext&&t.focusedCell){let r=t.getCell(t.focusedCell);r?e.editorContext.editor.showBy(r):e.cancelEditing()}}async onElementKeyDown(e){let t=this;if(!(e.handled||!t.grid.focusElement.contains(e.target))){if(t.editorContext){switch(e.key){case"Enter":t.onEnterKeyPress(e);break;case"F2":e.preventDefault(),t.finishEditing();break;case"Escape":e.stopPropagation(),e.preventDefault(),t.cancelEditing(void 0,e);break;case"Tab":t.onTabKeyPress(e);break}Gu[e.key]&&(e.handled=!0)}else{let{key:r,ctrlKey:i}=e,s=r==="Backspace",n=t.autoEdit&&!i&&(r.length===1||s);if((n||Wu[r])&&t.grid.focusedCell){if(t.startEditing(t.grid.focusedCell)){let{inputField:o}=t.editor,{input:l}=o;n&&l&&(o.internalOnKeyEvent(e),e.defaultPrevented||(l.value=s?"":r,o.internalOnInput(e),o.moveCaretToEnd()))}e.handled=!0,e.preventDefault()}}if(e.handled)return!1}}async onEnterKeyPress(e){let t=this,{grid:r}=t;if(e.preventDefault(),e.stopPropagation(),await t.finishEditing()){if(t.isDestroyed)return;if(!t.isEditing){if(e.ctrlKey||e.metaKey||e.altKey||r.touch)return;e.shiftKey?r.internalNextPrevRow(!1,!0,e,!1)&&t.editNextOnEnterPress&&t.startEditing(r.focusedCell):(t.addNewAtEnd&&r.store.getById(r.focusedCell?.id)===r.store.last&&await t.doAddNewAtEnd(),r.internalNextPrevRow(!0,!0)&&t.editNextOnEnterPress&&t.startEditing(r.focusedCell))}}}async onTabKeyPress(e){e.preventDefault();let t=this,{focusedCell:r}=t.grid;if(r){let i=!e.shiftKey,s=t.getAdjacentEditableCell(r,i);if(!s&&i&&t.addNewAtEnd&&await t.finishEditing()===!0&&(await this.doAddNewAtEnd(),s=t.getAdjacentEditableCell(r,i)),s){let n=!0;t.isEditing&&(n=await t.finishEditing()),n&&(t.grid.focusCell(s,{animate:t.focusCellAnimationDuration}),t.startEditing(s))}}}onElementMouseDown(e){e.button===2&&this.editorContext&&e.preventDefault()}onEditorFocusOut(e){let t=this,{grid:r,editor:i,editorContext:s}=t;s&&!i.isFinishing&&i.inputField.owns(e._target)&&(e.toWidget!==r||r.isLocationEqual(r.focusedCell,s.selector))&&(t.blurAction==="cancel"?t.cancelEditing(void 0,e):t.finishEditingPromise||t.finishEditing())}onEditorFocusIn(e){let t=e.toWidget;t===this.editor.inputField&&this.autoSelect&&t.selectAll&&!t.readOnly&&!t.disabled&&t.selectAll()}onTapOut({event:e}){let t=this;t.grid.bodyContainer.contains(e.target)||t.editor.owns(e.target)||(t.blurAction==="cancel"?t.cancelEditing(void 0,e):t.finishEditing())}onElementClick(e){e.target.classList.contains("b-grid-body-container")&&this.editorContext&&this.finishEditing()}};pe.registerFeature(qs,!0);var zl=!1,Xt=class extends ne{static get defaults(){return{tree:!0,hideable:!1,minWidth:150}}static get fields(){return[{name:"expandIconCls",defaultValue:"b-icon b-icon-tree-expand"},{name:"collapseIconCls",defaultValue:"b-icon b-icon-tree-collapse"},{name:"collapsedFolderIconCls"},{name:"expandedFolderIconCls"},{name:"indentSize",defaultValue:1.7},{name:"leafIconCls",defaultValue:"b-icon b-icon-tree-leaf"},{name:"editTargetSelector",defaultValue:".b-tree-cell-value"}]}static get type(){return"tree"}constructor(e,t){super(...arguments);let r=this;r.internalCellCls="b-tree-cell",r.shouldHtmlEncode=r.htmlEncode,r.setData("htmlEncode",!1),r.renderer&&(r.originalRenderer=r.renderer),r.renderer=r.treeRenderer.bind(r)}treeRenderer(e){let t=this,{grid:r,column:i,cellElement:s,row:n,record:o,isExport:l}=e,c=o.instanceMeta(r.store),d={className:"b-tree-cell-value"},u=[d],f={className:"b-tree-cell-inner",tag:o.href?"a":"div",href:o.href,target:o.target,children:u},h={"b-tree-parent-row":0,"b-tree-collapsed":0,"b-tree-expanded":0,"b-loading-children":0},m,p,{value:y}=e;if(t.originalRenderer){let w=t.originalRenderer(e),T=r.hasFrameworkRenderer?.({cellContent:w,column:i});m=typeof w=="object"&&!T,y=T?"":w===!1?s.innerHTML:w,e.rendererHtml=w}if(m||(y=String(y??"")),l)return y;if(o.isLeaf)s.classList.add("b-tree-leaf-cell"),p=e.iconCls||o.iconCls||t.leafIconCls;else{let w=!o.isExpanded(r.store),T=w?t.expandIconCls:t.collapseIconCls,R=w?t.collapsedFolderIconCls:t.expandedFolderIconCls;h["b-tree-parent-row"]=1,h["b-tree-collapsed"]=w,h["b-tree-expanded"]=!w,h["b-loading-children"]=c.isLoadingChildren,s.classList.add("b-tree-parent-cell"),u.unshift({tag:"i",className:{"b-tree-expander":1,[T]:1,"b-empty-parent":!c.isLoadingChildren&&o.children!==!0&&!o.children?.length}}),zl=p=e.iconCls||o.iconCls||R}p&&u.splice(u.length-1,0,{tag:"i",className:{"b-tree-icon":1,[p]:1}}),n.isRow&&n.assignCls(h),m||t.shouldHtmlEncode||!y.includes("<")?(m&&Object.assign(d,y),d.children=d.children||[],d.children.unshift(m?null:y)):d.html=y;let C=o.childLevel*t.indentSize+(o.isLeaf?zl?2:p?.5:.4:0);return f.style=`padding-left:${C}em`,f}};xe.registerColumnType(Xt,!0);Xt.exposeProperties();var qu=Promise.resolve(),Tr=class extends fe.mixin(we){static get $name(){return"Tree"}static get defaultConfig(){return{expandOnCellClick:!1}}static get pluginConfig(){return{assign:["collapseAll","expandAll","collapse","expand","expandTo","toggleCollapse"],before:["navigateRight","navigateLeft"],chain:["onElementClick","onElementKeyDown","bindStore"]}}construct(e,t){super.construct(e,t);let r=this,i=e.columns.find(s=>s instanceof Xt);Object.assign(r,{grid:e,rowManager:e.rowManager,treeColumn:i}),e.store&&this.bindStore(e.store)}doDisable(e){}get store(){return this.grid.store}bindStore(e){this.detachListeners("store"),e.on({name:"store",beforeLoadChildren:"onBeforeLoadChildren",loadChildren:"onLoadChildren",loadChildrenException:"onLoadChildrenException",beforeToggleNode:"onBeforeToggleNode",thisObj:this})}async toggleCollapse(e,t,r=!1){let i=this,{store:s,grid:n}=i,{rowManager:o}=n,l=s.getById(e),c=l.instanceMeta(s);if(await s.toggleCollapse(l,t)){let d=o.getRowFor(l);if(d){let u=d.getCell(i.treeColumn.id);u&&d.renderCell({cellElement:u,record:l})}i.isTogglingNode||(n.element.classList.add("b-toggling-node"),i.isTogglingNode=!0,i.requestAnimationFrame(()=>{n.element.classList.remove("b-toggling-node"),i.isTogglingNode=!1})),n.trigger(c.collapsed?"collapseNode":"expandNode",{source:n,record:l}),n.trigger("toggleNode",{source:n,record:l,collapse:c.collapsed})}}async collapse(e){return this.toggleCollapse(e,!0)}async expand(e){return this.toggleCollapse(e,!1)}onBeforeToggleNode({record:e,collapse:t}){this.grid.trigger("beforeToggleNode",{record:e,collapse:t})}onBeforeLoadChildren({source:e,params:t}){let r=e.getById(t[e.modelClass.idField]),i=this.grid.rowManager.getRowFor(r);i&&i.addCls("b-loading-children")}onLoadChildren({source:e,params:t}){let r=e.getById(t[e.modelClass.idField]),i=this.grid.rowManager.getRowFor(r);i&&i.removeCls("b-loading-children")}onLoadChildrenException({record:e}){let t=this.grid.rowManager.getRowFor(e);t&&t.removeCls("b-loading-children")}expandOrCollapseAll(e=!0,t=this.store.rootNode){let{grid:r,store:i}=this,s=[],n=[];return r.trigger("beforeToggleAllNodes",{source:r,collapse:e}),i.suspendEvents(),i.traverse(o=>{let l=o.instanceMeta(i);o.isLeaf||(e&&!l.collapsed?(this.toggleCollapse(o,!0,!0),n.push(...o.children)):!e&&l.collapsed&&(Array.isArray(o.children)&&n.push(...o.children),s.push(this.toggleCollapse(o,!1,!0))))},t,t===i.rootNode),i.resumeEvents(),(e?qu:Promise.all(s)).then(()=>{r.refreshRows(e),n.length&&(e?i.trigger("remove",{records:n,isCollapse:!0,isCollapseAll:!0}):i.trigger("add",{records:n,isExpand:!0,isExpandAll:!0})),r.trigger("toggleAllNodes",{source:r,collapse:e})})}async collapseAll(){return this.expandOrCollapseAll(!0)}async expandAll(){return this.expandOrCollapseAll(!1)}async expandTo(e){let t=this,r=t.store.getById(e);if(r.instanceMeta(t.store).hiddenByCollapse===!1)return;let s=!1,n=r.parent,o=[];for(;n&&!n.isRoot;)o.push(n),n=n.parent;await o.reverse().forEach(async l=>{t.isDestroyed||(l.instanceMeta(t.store).collapsed&&(s=!0),await t.toggleCollapse(l,!1,!0))}),s&&t.grid.refreshRows(),t.isDestroyed||await t.grid.scrollRowIntoView(r)}onElementClick(e){let t=this,r=e.target,i=t.grid.getCellDataFromEvent(e),s=r.closest(".b-tree-expander");(s||t.expandOnCellClick&&i&&i.record.isParent)&&(s&&e.preventDefault(),t.toggleCollapse(i.record))}onElementKeyDown(e){let t=this.grid;e.target===t.focusElement&&e.key===" "&&t.focusedCell&&(e.preventDefault(),this.toggleCollapse(t.focusedCell.id))}navigateRight(e){let t=this,r=t.grid,i=r.focusedCell;if(i){let s=r.store.getById(i.id);if(r.columns.getById(i.columnId).tree&&(e.shiftKey||r.columns.count===1))return s.isParent&&s.instanceMeta(r.store).collapsed?t.expand(s):r.navigateDown(e),!1}}navigateLeft(e){let t=this,r=t.grid,i=r.focusedCell;if(i){let s=r.store.getById(i.id);if(r.columns.getById(i.columnId).tree&&(e.shiftKey||r.columns.count===1))return s.isParent&&!s.instanceMeta(r.store).collapsed?t.collapse(s):s.parent&&r.focusCell({id:s.parent.id,columnId:i.columnId}),!1}}};Tr.featureClass="b-tree";pe.registerFeature(Tr,!1,"Grid");pe.registerFeature(Tr,!0,"TreeGrid");var Us=class extends fe{static get $name(){return"QuickFind"}static get defaultConfig(){return{mode:"header",find:""}}static get pluginConfig(){return{chain:["onElementKeyDown","onElementKeyPress","onCellNavigate"]}}static get properties(){return{hitCls:"b-quick-hit",hitCellCls:"b-quick-hit-cell",hitCellBadgeCls:"b-quick-hit-cell-badge",hitTextCls:"b-quick-hit-text"}}construct(e,t){super.construct(e,t),Object.assign(this,{grid:e,treeWalker:e.setupTreeWalker(e.element,NodeFilter.SHOW_TEXT,()=>NodeFilter.FILTER_ACCEPT,!1)})}doDisable(e){e&&this.clear(),super.doDisable(e)}get store(){return this.grid.store}showQuickFind(){let e=this,t=e.grid.getHeaderElement(e.columnId);if(t){if(!e.headerField){let[r,i,s]=g.createElement({tag:"div",className:"b-quick-hit-header",children:[{tag:"div",className:"b-quick-hit-field"},{tag:"div",className:"b-quick-hit-badge"}]},!0);e.mode==="header"?t.appendChild(r):(r.className+=" b-quick-hit-mode-grid",e.grid.element.appendChild(r)),e.headerField={header:r,field:i,badge:s,colHeader:t}}e.headerField.field.innerHTML=e.find,e.headerField.badge.innerHTML=e.found.length,t.classList.add("b-quick-find-header"),e.renderListenerInitialized||(e.grid.rowManager.on({rendercell:e.renderCell,thisObj:e}),e.renderListenerInitialized=!0)}}hideQuickFind(){let e=this,{grid:t,headerField:r}=e;for(let i of e.prevFound||e.found){let s=t.getRowById(i.id);if(s){s.forceInnerHTML=!0;let n=s.getCell(e.columnId);n._content=null,s.renderCell({cellElement:n,record:i.data}),s.forceInnerHTML=!1}}r&&(r.header.parentNode.removeChild(r.header),r.colHeader.classList.remove("b-quick-find-header"),e.headerField=null),e.renderListenerInitialized&&(t.rowManager.un({rendercell:e.renderCell},e),e.renderListenerInitialized=!1),t.trigger("hideQuickFind")}search(e,t=this.columnId){let r=this,{grid:i}=r,s=i.columns.getById(t)||i.columns.get(t),n=r.store.findByField(s.field,e),o=1;Object.assign(r,{foundMap:{},prevFound:r.found,found:n,find:e,columnId:s.id,findRe:new RegExp(`(\\s+)?(${M.escapeRegExp(String(e))})(\\s+)?`,"ig")}),e?r.showQuickFind():r.hideQuickFind();for(let l of g.children(i.element,`.${r.hitCls}`))l.classList.remove(r.hitCls,r.hitCellCls),l._originalContent&&(l.innerHTML=l._originalContent,l._originalContent=null);if(!!n){n.length>0&&r.gotoClosestHit(i.focusedCell,n);for(let l of n){r.foundMap[l.id]=o++;let c=i.getRowById(l.data.id);if(c?.renderCell({cellElement:c.getCell(s.id)}),o>1e3)break}i.trigger("quickFind",{find:e,found:n})}}clear(){this.found?.length&&this.search("")}get foundCount(){return this.found?.length??0}gotoHit(e){let t=this.found[e];return t&&this.grid.focusCell({columnId:this.columnId,id:t.id}),!!t}gotoClosestHit(e,t){let r=e?this.grid.store.indexOf(e.id):0,i=t.slice().sort((s,n)=>Math.abs(s.index-r)-Math.abs(n.index-r));this.gotoHit(t.indexOf(i[0]))}gotoFirstHit(){this.gotoHit(0)}gotoLastHit(){this.gotoHit(this.found.length-1)}gotoNextHit(){let e=this,{grid:t}=e,r=t._focusedCell?.id??t.lastFocusedCell?.id,i=t.store.indexOf(r)||0,s=e.found.find(n=>n.index>i);s?t.focusCell({columnId:e.columnId,id:s.id}):e.gotoFirstHit()}gotoPrevHit(){let e=this,{grid:t,found:r}=e,i=t._focusedCell?.id??t.lastFocusedCell?.id,s=t.store.indexOf(i)||0,n;if(!!r.length){for(let o=r.length-1;o--;o>=0)if(r[o].index<s){n=r[o];break}n?t.focusCell({columnId:e.columnId,id:n.id}):e.gotoLastHit()}}renderCell({cellElement:e,column:t,record:r}){let i=this,{classList:s}=e,{treeWalker:n,findRe:o,hitTextCls:l}=i,c=i.columnId===t.id&&i.foundMap?.[r.id];if(c){s.add(i.hitCls),e.isQuickHit=!0,e._originalContent=e.innerHTML;let d=n.currentNode=g.down(e,".b-grid-cell-value,.b-tree-cell-value")||e;for(let u=n.nextNode();u&&d.contains(u);){let f=u,h=u.nodeValue,m=[];u=n.nextNode();let p=o.lastIndex;for(let y=o.exec(h);y;y=o.exec(h)){let C=h.substring(p,y.index),w=y[1]?"\xA0":"",T=y[2],R=y[3]?"\xA0":"";m.push(`${M.encodeHtml(C)}${w}<span class="${l}">${T}</span>${R}`),p=o.lastIndex}m.push(M.encodeHtml(h.substring(p))),f.parentNode.insertBefore(g.createElementFromTemplate(m.join(""),{fragment:!0}),f),f.remove()}g.createElement({parent:e,className:i.hitCellBadgeCls,text:c})}}onElementKeyDown(e){let t=this,r=t.grid.features.filter;t.disabled||e.target.closest(".b-widget:not(.b-gridbase)")||t.find.length>0&&(e.key==="Backspace"?(e.preventDefault(),t.find=t.find.substr(0,t.find.length-1),t.search(t.find)):e.key==="Escape"?(e.preventDefault(),t.find="",t.search(t.find)):e.key==="F3"||e.key.toLowerCase()==="g"&&e.ctrlKey?(e.preventDefault(),e.shiftKey?t.gotoPrevHit():t.gotoNextHit()):r&&t.columnId&&t.foundCount&&e.ctrlKey&&e.shiftKey&&e.key==="F"&&(t.clear(),r.showFilterEditor(t.grid.columns.getById(t.columnId),t.find)))}onElementKeyPress(e){let t=this,{grid:r}=t;if(!(t.disabled||e.target.closest(".b-widget:not(.b-gridbase)")||e.key==="Enter")&&r._focusedCell){let i=r.columns.getById(r._focusedCell.columnId);i&&i.searchable!==!1&&(t.columnId=r._focusedCell.columnId,e.key===" "&&e.preventDefault(),e.key?.length===1&&(t.find+=e.key,t.search(t.find)))}}onCellNavigate(e,t,r){let i=this;(i.prevFound||i.found)&&(!r||r.columnId!==i.columnId)&&i.clear()}};pe.registerFeature(Us);var hi=class extends Tt{static get fields(){return["access","classDescription","description","deprecated","events","extends","filename","fields","folder","fullName","functions","href","isGuide","mixins","modulePath","private","props","singleton","virtual"]}get readableName(){return(this.fullName||this.name).replace(/\//g,".")}get isModule(){return Boolean(this.data.filename)}get guideCategory(){let e;return this.fullName.match(/\//g).length<3?null:(this.bubbleWhile(t=>t.parent.name==="Guides"?(e=t.name,!1):!0),e)}get guideName(){return this.fullName.match(/upgrades\/|whats-new\//)?`${this.fullName.split("/")[0]} ${this.name}`:this.name}get guideIcon(){let e={Angular:"fab b-fa-angular",React:"fab b-fa-react",Vue:"fab b-fa-vuejs","Upgrade FA icons to Pro":"fab b-fa-font-awesome-flag","Npm repository":"fab b-fa-npm","Node.js":"fab b-fa-node",SharePoint:"fab b-fa-microsoft",Introduction:"desktop",Licenses:"file-alt",Tutorial:"graduation-cap"};return this.parent.name.includes("Salesforce")?"fab b-fa-salesforce":this.parent.name.includes("Migration")?"exchange-alt":e[this.name]||this.guideCategoryIcon}get guideCategoryIcon(){return{Basics:"cog",Customization:"palette",Integration:"plug","Include in your app":"code",Upgrading:"upload","What's new":"star","Working with data":"database",Advanced:"cogs"}[this.guideCategory]||"book-open"}};var mi=class extends it{static get $name(){return"NavigationTree"}static get configurable(){return{rowHeight:35,hideHeaders:!0,readOnly:!0,emptyText:"",features:{cellEdit:!1,tree:{expandOnCellClick:!0},quickFind:{mode:"grid"}},store:{tree:!0,modelClass:hi,sorters:[{field:"name",ascending:!0,fn(e,t){if(!e.childLevel&&!t.childLevel||e.isGuide||e.cls==="guide-parent"||t.isGuide||t.cls==="guide-parent")return 0;let r=e.isLeaf,i=t.isLeaf;return r===i?null:r?1:-1}}]},columns:[{text:"Name",field:"name",width:150,type:"tree",htmlEncode:!1,renderer({record:e,cellElement:t,row:r}){return e.data.mixin&&t.classList.add("mixin"),e.data.feature&&t.classList.add("feature"),e.data.plugin&&t.classList.add("plugin"),e.data.singleton&&t.classList.add("singleton"),r.assignCls({private:e.data.access==="private",deprecated:e.data.deprecated}),e.isModule&&t.classList.add("module"),e.name}}]}}buildDocsTree(e){let t=this,r=[{id:"guides",name:"Guides",expanded:!0,children:t.buildGuideTree(t.guides),href:"#guides",cls:"guide"},{id:"demos",name:"Examples",target:"_blank",iconCls:"b-icon b-fa-external-link-alt",href:"../examples"},{id:"apidiff",name:"API Diff Table",iconCls:"b-icon b-fa-list",href:"#apidiff"},{id:"react",name:"React components",expanded:!1,cls:"react",children:[]},{id:"api",name:"API docs",expanded:!1,cls:"api",href:"#api",children:[]}],i={},s=r.find(o=>o.id==="api"),n=r.find(o=>o.id==="react");if(["calendar","gantt","schedulerpro"].includes(t.product)&&r.splice(2,0,{id:"engineDocs",name:"Scheduling Engine API Docs",target:"_blank",href:"./engine/",iconCls:"b-icon b-fa-external-link-alt"}),e.classes){s.expanded=!0;for(let o of e.classes)t.getParent(i,s.children,o.folder)?.children.push(o)}if(e.components){n.expanded=!0,s.expanded=!1;for(let o of e.components)t.getParent(i,n.children,o.folder)?.children.push(o)}(!e.components||!e.components.length)&&r.splice(r.findIndex(o=>o.id==="react"),1),t.store.data=r,window.bryntum.router.adjustStoreLinks(t.store)}getParent(e,t,r){if(!r)return null;if(e[r])return e[r];let i=r.split("/"),s="",n=null;return i.forEach((o,l)=>{s+=o;let c=e[s];c||(c=e[s]={id:s,name:o,children:[]},n&&n.children.push(c),l===0&&t.push(c)),n=c,s+="/"}),n}buildGuideTree(e){return Object.entries(e).map(([t,r])=>typeof r=="string"?{id:r,isGuide:!0,iconCls:"b-icon b-fa-book",name:t,fullName:r,cls:"guide",href:`#${r}`}:{name:t,children:this.buildGuideTree(r),cls:"guide-parent"})}};var Wl=a=>L.docsTpl`
    <div class="search-hit ${a.data.type} ${a.data.cls||""} ${a.data.scope==="static"?"static":""}" data-hash="${a.data.hash}">
        <dl>
            <dt>${a.data.name}</dt>
            <dd>${a.data.fullName}</span>
        </dl>
    </div>
`;var Gl=(a,e)=>a.every(t=>e.includes(t)),Ks=(a,e,t)=>t(a)&&!t(e)?-1:!t(a)&&t(e)?1:0,ql=(a,e,t)=>{let r;if((r=Ks(a.type,e.type,i=>i==="class"))!==0)return r;if(t=t.toLowerCase().trim(),t!==""){let i=a.name.toLowerCase(),s=e.name.toLowerCase();if((r=Ks(i,s,n=>n===t))!==0)return r;if(t.includes(" ")){let n=t.split(" ");if((r=Ks(i,s,o=>Gl(n,o)))!==0)return r}}return a.fullName<e.fullName?-1:1},gi=class extends Pe{static get $name(){return"Tools"}static get configurable(){return{adopt:"tools",settings:null,items:[{id:"search-combo",ref:"searchField",type:"combo",cls:"b-bright",listCls:"search-results",changeOnKeyStroke:!0,displayField:"fullName",valueField:"hash",clearable:!0,items:[],icon:null,minChars:2,pickerWidth:400,keyStrokeFilterDelay:300,primaryFilter:{filterBy(e){let t=this.value.toLowerCase().trim();return t.length<3?e.name.toLowerCase()===t:Gl(t.split(" "),e.fullName.toLowerCase())}},triggers:{filter:{align:"start",cls:"b-fa b-fa-search"},expand:!1},listItemTpl:Wl,onAction:"up.onSearch",validateFilter:!1},{tag:"a",id:"upgradesButton",cls:"b-upgrade-guide-button",html:"Upgrades",elementAttributes:{href:"#upgrade-guide"}},{tag:"a",html:"Support",elementAttributes:{href:"https://bryntum.com/support/"}},{tag:"a",ref:"examplesLink",html:"Examples",elementAttributes:{href:"../examples",target:"_blank"}},{tag:"a",id:"guidesLink",ref:"guidesLink",html:"Guides",elementAttributes:{href:"#guides"}},{type:"button",id:"menu-button",ref:"showMembersButton",ariaLabel:"Menu",text:"Show",cls:"b-transparent",ripple:null,menu:{ref:"showMembersMenu",width:250,anchor:!0,items:[{ref:"showPublic",name:"showPublic",checked:!0,text:"Show public members"},{ref:"showInternal",name:"showInternal",checked:!1,text:"Show internal members"},{ref:"showPrivate",name:"showPrivate",checked:!1,text:"Show private members"},{ref:"showInherited",name:"showInherited",checked:!0,cls:"b-separator",text:"Show inherited members",separator:!0},{ref:"groupMembers",name:"groupMembers",checked:!0,cls:"b-separator",text:"Group members",separator:!0}],onToggle:"up.onShowMenuItemToggle",onBeforeShow:"up.onBeforeShowMenuShow"}},{id:"downloadTrial",type:"button",html:"Free Trial",cls:"b-raised b-green",hidden:!window.bryntum.router?.isOnline,href:"https://bryntum.com/download/"}]}}construct(e){super.construct(...arguments);let t=this,{searchField:r}=t.widgetMap,{store:i}=r;i.on({filter(){i.sort({fn(s,n){return ql(n,s,r.input.value)},ascending:!1})}})}generateSearchItems(e,t,r){let i=[];for(let o of e.classes)if(o.access==="private"&&r.showPrivate||o.access==="internal"&&r.showInternal||(o.access==="public"||!o.access)&&r.showPublic){let l=o.fullName.replace(/\//g,".");i.push({type:"class",data:o,name:o.name,fullName:l,hash:o.fullName}),o.functions?.forEach(c=>{c.hide||i.push({type:"function",data:o,name:c.name,fullName:l+"."+c.name,scope:c.scope,hash:o.fullName+"#function-"+c.name+(c.scope==="static"?"-static":"")})}),o.configs?.forEach(c=>{c.hide||i.push({type:"config",data:o,name:c.name,fullName:l+"."+c.name,hash:o.fullName+"#config-"+c.name})}),o.fields?.forEach(c=>{c.hide||i.push({type:"field",data:o,name:c.name,fullName:l+"."+c.name,hash:o.fullName+"#field-"+c.name})}),o.properties?.forEach(c=>{c.hide||i.push({type:"property",data:o,name:c.name,fullName:l+"."+c.name,scope:c.scope,hash:o.fullName+"#property-"+c.name+(c.scope==="static"?"-static":"")})}),o.events?.forEach(c=>{c.hide||i.push({type:"event",data:o,name:c.name,fullName:l+"."+c.name,hash:o.fullName+"#event-"+c.name})}),o.typedefs?.forEach(c=>{c.hide||i.push({type:"typedef",data:o,name:c.name,fullName:l+"."+c.name,hash:o.fullName+"#typedef-"+c.name})})}i.push.apply(i,t.map(o=>({type:"guide",data:o,cls:"b-fa b-fa-book",name:"Guide: "+o.name,fullName:o.name,hash:o.data.fullName})));let{searchField:s}=this.widgetMap,n=s.input.value;i.sort((o,l)=>ql(o,l,n)),s.store.data=i}onSearch({value:e}){if(e){let t="#"+e,r=window.location.hash===t,{router:i}=window.bryntum;r?window.dispatchEvent(new Event("hashchange")):i?.isOnline?i.routeTo(i.getRoute(t)):window.location.hash=e,this.resetSearchField()}else this.onSearchClear()}resetSearchField(){let{searchField:e}=this.widgetMap;e.suspendEvents(),e.clear(),e.resumeEvents()}onShowMenuItemToggle({source:e}){if(e.isVisible){let t={};e.owner.items.forEach(r=>{t[r.name]=r.checked}),this.trigger("settingsChange",{settings:t})}}onBeforeShowMenuShow(){let{settings:e}=this,t=this.widgetMap.showMembersButton.menu.widgetMap;t.showPublic.checked=e.showPublic,t.showInternal.checked=e.showInternal,t.showPrivate.checked=e.showPrivate,t.showInherited.checked=e.showInherited,t.groupMembers.checked=e.groupMembers}};var Rr=class extends Pe.mixin(Vt){static get $name(){return"ButtonGroup"}static get type(){return"buttongroup"}static get configurable(){return{defaultType:"button",cls:null,items:null,color:null,toggleGroup:null,valueSeparator:",",columns:null,hideWhenEmpty:!0,defaultBindProperty:"value"}}onChildAdd(e){super.onChildAdd(e),e.on({click:"onItemClick",thisObj:this,prio:1e4})}onChildRemove(e){e.un({click:"onItemClick",thisObj:this}),super.onChildRemove(e)}onItemClick(){this._value=null}createWidget(e){let t=this;return t.constructor.resolveType(e.type||"button").isButton&&(t.color&&!e.color&&(e.color=t.color),t.toggleGroup&&!e.toggleGroup&&(typeof t.toggleGroup=="boolean"&&(t.toggleGroup=Rr.generateId("toggleGroup")),e.toggleGroup=t.toggleGroup)),t.columns&&(e.width=`${100/t.columns}%`),e=super.createWidget(e),t.relayEvents(e,["click","action","toggle"]),e}updateRotate(e){this.eachWidget(t=>{t.rotate!==!1&&(t.rotate=e)})}get value(){if(!this._value){let e=[];this.items.forEach(t=>{t.pressed&&t.value!==void 0&&e.push(t.value)}),this._value=e.join(this.valueSeparator)}return this._value}set value(e){Array.isArray(e)||(e==null?e=[]:typeof e=="string"?e=e.split(this.valueSeparator):e=[e]),this._value=e,this.items.forEach(t=>{t.value!==void 0&&(t.pressed=e.indexOf(t.value)>-1)})}get disabled(){return super.disabled}set disabled(e){super.disabled=e,this.items.forEach(t=>t.disabled=e)}get widgetClassList(){let e=super.widgetClassList;return this.columns&&e.push("b-columned"),e}};Rr.initClass();var Ys=class extends fe{static get $name(){return"Group"}static get configurable(){return{field:null,groupSortFn:null,renderer:null}}construct(e,t){let r=this;e.features.tree||(r._thisIsAUsedExpression(e.features.groupSummary),t=r.processConfig(t),r.grid=e,super.construct(e,t),r.bindStore(e.store),e.rowManager.on({beforeRenderRow:"onBeforeRenderRow",renderCell:"renderCell",prio:1100,thisObj:r}))}processConfig(e){return typeof e=="string"?{field:e,ascending:null}:e}setConfig(e){e===null?this.store.clearGroupers():super.setConfig(this.processConfig(e))}bindStore(e){this.detachListeners("store"),e.on({name:"store",group:"onStoreGroup",thisObj:this})}updateRenderer(e){this.groupRenderer=e}updateField(e){this.store.group({field:e,ascending:this.ascending,fn:this.groupSortFn})}updateGroupSortFn(e){this.isConfiguring||this.store.group({field:this.field,ascending:this.ascending,fn:e})}doDestroy(){super.doDestroy()}doDisable(e){let{store:t}=this;if(e&&t.isGrouped){let{sorters:r}=t;r.unshift(...t.groupers),t.clearGroupers(),t.sort(r)}super.doDisable(e)}get store(){return this.grid.store}static get pluginConfig(){return{assign:["collapseAll","expandAll"],chain:["renderHeader","populateHeaderMenu","getColumnDragToolbarItems","onElementTouchStart","onElementClick","onElementKeyDown","bindStore"]}}toggleCollapse(e,t){this.internalToggleCollapse(e,t)}internalToggleCollapse(e,t,r=!1){let i=this,{store:s}=i,n=s.getById(e);!n.isGroupHeader||(t=t===void 0?!n.meta.collapsed:t,t?s.collapse(n):s.expand(n),i.grid.trigger("toggleGroup",{groupRecord:n,collapse:t}),r||i.grid.rowManager.renderFromRecord(n))}collapseAll(){let e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach(t=>e.internalToggleCollapse(t,!0,!0)),e.grid.refreshRows(!0))}expandAll(){let e=this;e.store.isGrouped&&!e.disabled&&(e.store.groupRecords.forEach(t=>e.internalToggleCollapse(t,!1,!0)),e.grid.refreshRows())}onBeforeRenderRow({row:e}){let t=e.grid.store.getById(e.id);e.forceInnerHTML=e.forceInnerHTML||t?.isGroupHeader}renderCell(e){let t=this,{cellElement:r,row:i,column:s}=e,{meta:n}=e.record,o={"b-group-row":0,"b-grid-group-collapsed":0};if(!t.disabled&&t.store.isGrouped)if("groupRowFor"in n){if(s.type==="action")return;s.clearCell(r),o["b-grid-group-collapsed"]=n.collapsed,o["b-group-row"]=1,s===t.groupHeaderColumn&&r.classList.add("b-group-title"),t.buildGroupHeader(e)}else r.classList.remove("b-group-title");i.assignCls(o)}buildGroupHeader(e){let t=this,{record:r,cellElement:i,column:s,persist:n}=e,{grid:o}=t,l=r.meta,{groupRowFor:c}=l,{groupSummary:d}=o.features,u=l.childCount-(d&&d.target!=="header"?1:0),f=null,h=!0;if(n||s){let m=o.columns.get(l.groupField),p=e.isFirstColumn=s===t.groupHeaderColumn;m?.groupRenderer?p&&(f=m.groupRenderer({...e,groupRowFor:c,groupRecords:r.groupChildren,groupColumn:m,count:u}),h=!1):t.groupRenderer&&(f=t.groupRenderer({...e,groupRowFor:c,groupRecords:r.groupChildren,groupColumn:m,count:u,isFirstColumn:p})),p&&f==null&&h&&g.getChildElementCount(i)===0&&(f=M.encodeHtml(`${c==="__novalue__"?"":c} (${u})`))}else t.groupRenderer&&(f=t.groupRenderer(e));return typeof f=="string"?i.innerHTML=f:typeof f=="object"&&_.sync({targetElement:i,domConfig:{onlyChildren:!0,children:Array.isArray(f)?f:[f]}}),g.getChildElementCount(i)>0&&(i._hasHtml=!0),i.innerHTML}get groupHeaderColumn(){return this.grid.columns.visibleColumns.find(e=>!e.groupHeaderReserved)}renderHeader(e){let{store:t,grid:r}=this;if(t.isGrouped)for(let i of t.groupers){let s=r.columns.get(i.field),n=s&&r.getHeaderElement(s.id);n&&(n.classList.add("b-group"),n.classList.add(i.ascending?"b-asc":"b-desc"))}}populateHeaderMenu({column:e,items:t}){let r=this;e.groupable!==!1&&(t.groupAsc={text:"L{groupAscending}",localeClass:r,icon:"b-fw-icon b-icon-group-asc",cls:"b-separator",weight:400,disabled:r.disabled,onItem:()=>r.store.group(e.field,!0)},t.groupDesc={text:"L{groupDescending}",localeClass:r,icon:"b-fw-icon b-icon-group-desc",weight:410,disabled:r.disabled,onItem:()=>r.store.group(e.field,!1)}),r.store.isGrouped&&(t.groupRemove={text:"L{stopGrouping}",localeClass:r,icon:"b-fw-icon b-icon-clear",cls:e.groupable?"":"b-separator",weight:420,disabled:r.disabled,onItem:()=>r.store.clearGroupers()})}getColumnDragToolbarItems(e,t){let r=this,{store:i,disabled:s}=r;t.push({text:"L{groupAscendingShort}",group:"L{group}",localeClass:r,icon:"b-icon b-icon-group-asc",ref:"groupAsc",cls:"b-separator",weight:110,disabled:s,onDrop:({column:o})=>i.group(o.field,!0)}),t.push({text:"L{groupDescendingShort}",group:"L{group}",localeClass:r,icon:"b-icon b-icon-group-desc",ref:"groupDesc",weight:110,disabled:s,onDrop:({column:o})=>i.group(o.field,!1)});let n=i.groupers?.some(o=>o.field===e.field)&&!s;return t.push({text:"L{stopGroupingShort}",group:"L{group}",localeClass:r,icon:"b-icon b-icon-clear",ref:"groupRemove",disabled:!n,weight:110,onDrop:({column:o})=>i.removeGrouper(o.field)}),t}onStoreGroup({groupers:e}){let{grid:t}=this,{element:r}=t,i=r&&g.children(r,".b-grid-header.b-group");if(r){for(let s of i)g.removeClasses(s,["b-group","b-asc","b-desc"]);if(e)for(let s of e){let n=t.getHeaderElementByField(s.field);n&&g.addClasses(n,["b-group",s.ascending?"b-asc":"b-desc"])}}}onElementTouchStart(e){let t=this,{target:r}=e,i=g.up(r,".b-grid-header"),s=i&&t.grid.getColumnFromElement(i);e.touches.length>1&&s&&s.groupable!==!1&&!t.disabled&&t.store.group(s.field)}onElementClick(e){let t=this,{store:r}=t,{target:i}=e,s=g.up(i,".b-group-row"),n=g.up(i,".b-grid-header"),o=n?.dataset.column;if(!(i.classList.contains("b-resizer")||t.disabled||i.classList.contains("b-action-item"))){if(n&&o){let l=r.groupers?.find(c=>c.field===o);if(l&&!e.shiftKey)return r.group(o,!l.ascending),!1;e.shiftKey&&t.grid.columns.get(o).groupable!==!1&&(e.altKey?r.removeGrouper(o):r.group(o))}if(s)return t.internalToggleCollapse(ye.get(s).id),!1}}onElementKeyDown(e){let t=this,{grid:r}=t;!t.disabled&&t.store.isGrouped&&e.target===r.focusElement&&e.key===" "&&r.focusedCell&&(e.preventDefault(),t.internalToggleCollapse(r.focusedCell.id))}};pe.registerFeature(Ys,!0,["Grid","Scheduler"]);var Xs=class extends fe{static get $name(){return"CellTooltip"}static get defaultConfig(){return{tooltipRenderer:null}}construct(e,t){let r=this;super.construct(e,r.processConfig(t))}initTip(){let e=this;e.tip=ee.new({forElement:e.client.element,forSelector:".b-grid-row:not(.b-group-row) .b-grid-cell",hoverDelay:1e3,trackMouse:!1,cls:"b-celltooltip-tip",getHtml:e.getTooltipContent.bind(e),listeners:{pointerOver:"onPointerOver",thisObj:e}},e.initialConfig),e.relayEvents(e.tip,["beforeshow","show"])}onPointerOver({target:e}){let t=this.client.getColumnFromElement(e);return t.tooltipRenderer!==!1&&Boolean(t.tooltipRenderer||this.tooltipRenderer)}processConfig(e){return typeof e=="function"?{tooltipRenderer:e}:e}setConfig(e){super.setConfig(this.processConfig(e))}doDestroy(){this.tip&&this.tip.destroy(),super.doDestroy()}doDisable(e){e?this.tip&&(this.tip.destroy(),this.tip=null):this.initTip(),super.doDisable(e)}getTooltipContent({tip:e,activeTarget:t,event:r}){let i=this,s=i.client.getRecordFromElement(t),n=i.client.getColumnFromElement(t),o={cellElement:t,record:s,column:n,event:r,tip:e,cellTooltip:i},l;return!i.forSelector&&s===i.lastRecord&&s.generation===i.lastRecordGeneration&&n===i.lastColumn?i.tip._html:(i.lastRecord=s,i.lastRecordGeneration=s.generation,i.lastColumn=n,n.tooltipRenderer?l=n.tooltipRenderer(o):i.tooltipRenderer&&n.tooltipRenderer!==!1&&(l=i.tooltipRenderer(o)),l===!1&&z.deprecate("Grid","5.0.0","Returning false to indicate loading is deprecated. Please see https://bryntum.com/docs/grid/guide/Grid/upgrades/3.0.1 for more information"),l)}};pe.registerFeature(Xs);var pi=class extends fe{static get $name(){return"Sort"}static get configurable(){return{multiSort:!0,prioritizeColumns:!1}}static get properties(){return{ignoreRe:new RegExp(["b-grid-header-resize-handle","b-filter-icon"].join("|")),sortableCls:"b-sortable",sortedCls:"b-sort",sortedAscCls:"b-asc",sortedDescCls:"b-desc"}}construct(e,t){t=this.processConfig(t),this.grid=e,this.bindStore(e.store),super.construct(e,t)}processConfig(e){return typeof e=="string"||Array.isArray(e)?{field:e,ascending:null}:e}setConfig(e){super.setConfig(this.processConfig(e))}bindStore(e){this.detachListeners("store"),e.on({name:"store",beforeSort:"onStoreBeforeSort",sort:"syncHeaderSortState",thisObj:this})}set field(e){let t=this.grid.columns.get(e);t&&typeof t.sortable=="object"&&(t.sortable.field=t.sortable.property||e,e=t.sortable),this.store.sort(e,this.ascending)}get store(){return this.grid.store}static get pluginConfig(){return{chain:["onElementClick","populateHeaderMenu","getColumnDragToolbarItems","renderHeader","onPaint","bindStore"]}}syncHeaderSortState(){let e=this,{grid:t}=e;if(!t.hideHeaders&&t.isPainted){let r=e.store.sorters,i=r.length,s=new P,n;for(let o of t.columns.visibleColumns){let l=o.element,c=o.textWrapper?.dataset;c?.sortIndex&&delete c.sortIndex,s.value=l.classList,o.sortable!==!1?(s.add(e.sortableCls),n=r.find(d=>d.field===o.field||d.sortFn&&d.sortFn===o.sortable.sortFn),n?(i>1&&c&&(c.sortIndex=r.indexOf(n)+1),s.add(e.sortedCls),n.ascending?(s.add(e.sortedAscCls),s.remove(e.sortedDescCls)):(s.add(e.sortedDescCls),s.remove(e.sortedAscCls))):(s.remove(e.sortedCls),s["b-group"]||(s.remove(e.sortedAscCls),s.remove(e.sortedDescCls)))):s.remove(e.sortableCls),g.syncClassList(l,s)}}}populateHeaderMenu({column:e,items:t}){let r=this,{store:i}=r,s={...e.sortable,field:e.field,columnOwned:!0};if(e.sortable!==!1&&(t.sortAsc={text:"L{sortAscending}",localeClass:r,icon:"b-fw-icon b-icon-sort-asc",cls:"b-separator",weight:300,disabled:r.disabled,onItem:()=>i.sort(s,!0)},t.sortDesc={text:"L{sortDescending}",localeClass:r,icon:"b-fw-icon b-icon-sort-desc",weight:310,disabled:r.disabled,onItem:()=>i.sort(s,!1)},r.multiSort&&r.grid.columns.records.some(n=>n.sortable))){let n=i.sorters.find(o=>o.field===e.field||e.sortable.sortFn&&e.sortable.sortFn===o.sortFn);t.multiSort={text:"L{multiSort}",localeClass:r,icon:"b-fw-icon b-icon-sort",weight:320,disabled:r.disabled,menu:{addSortAsc:{text:n?"L{toggleSortAscending}":"L{addSortAscending}",localeClass:r,icon:"b-fw-icon b-icon-sort-asc",disabled:n&&n?.ascending,weight:330,onItem:()=>i.addSorter(s,!0)},addSortDesc:{text:n?"L{toggleSortDescending}":"L{addSortDescending}",localeClass:r,icon:"b-fw-icon b-icon-sort-desc",disabled:n&&!n.ascending,weight:340,onItem:()=>i.addSorter(s,!1)},removeSorter:{text:"L{removeSorter}",localeClass:r,icon:"b-fw-icon b-icon-remove",weight:350,disabled:!n,onItem:()=>{i.removeSorter(s.field)}}}}}}getColumnDragToolbarItems(e,t){let r=this,{store:i,disabled:s}=r;if(e.sortable!==!1){let n=i.sorters.find(o=>o.field===e.field);t.push({text:"L{sortAscendingShort}",group:"L{sort}",localeClass:r,icon:"b-icon b-icon-sort-asc",ref:"sortAsc",cls:"b-separator",weight:105,disabled:s,onDrop:({column:o})=>i.sort(o.field,!0)},{text:"L{sortDescendingShort}",group:"L{sort}",localeClass:r,icon:"b-icon b-icon-sort-desc",ref:"sortDesc",weight:105,disabled:s,onDrop:({column:o})=>i.sort(o.field,!1)},{text:"L{addSortAscendingShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-sort-asc",ref:"multisortAddAsc",disabled:s||n&&n.ascending,weight:105,onDrop:({column:o})=>i.addSorter(o.field,!0)},{text:"L{addSortDescendingShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-sort-desc",ref:"multisortAddDesc",disabled:s||n&&!n.ascending,weight:105,onDrop:({column:o})=>i.addSorter(o.field,!1)},{text:"L{removeSorterShort}",group:"L{multiSort}",localeClass:r,icon:"b-icon b-icon-remove",ref:"multisortRemove",weight:105,disabled:s||!n,onDrop:({column:o})=>i.removeSorter(o.field)})}return t}onStoreBeforeSort({sorters:e}){let{columns:t}=this.client;for(let r=0;r<e.length;r++){let i=e[r],s=(i.columnOwned||this.prioritizeColumns)&&t.get(i.field);s?.sortable?.sortFn&&(e[r]={...i,...s.sortable,columnOwned:!0})}}onElementClick(e){let t=this,r=t.store,i=e.target,s=g.up(i,".b-grid-header.b-sortable"),n=s?.dataset.column;if(!(t.ignoreRe.test(i.className)||t.disabled)&&s&&n){let o=t.grid.columns.getById(s.dataset.columnId);if(r.isGrouped&&r.groupers.find(c=>c.field===n)&&!e.shiftKey)return;if(o.sortable&&!e.shiftKey)if(e.ctrlKey&&e.altKey)r.removeSorter(o.field);else{let c={columnOwned:!0,field:o.field};typeof o.sortable=="object"&&b.assign(c,o.sortable),r.sort(c,null,e.ctrlKey)}}}renderHeader(){this.syncHeaderSortState()}onPaint(){this.syncHeaderSortState()}};pi.featureClass="b-sort";pe.registerFeature(pi,!0);var yi=class extends S{static get defaultConfig(){return{target:null,defaultColumnWidth:100,exportDateAsInstance:!0,showGroupHeader:!0,columns:null,indent:!0,indentationSymbol:"\xA0\xA0\xA0\xA0"}}export(e={}){let t=this;return e=b.assign({},t.config,e),t.normalizeColumns(e),t.generateExportData(e)}generateExportData(e){let t=this,r=t.generateColumns(e);return{rows:t.generateRows(e),columns:r}}normalizeColumns(e){let t=e.columns||this.target.columns.visibleColumns.filter(r=>r.exportable!==!1);e.columns=t.map(r=>typeof r=="string"?this.target.columns.find(i=>i.field===r)||{field:r}:r)}generateColumns(e){return e.columns.map(t=>this.processColumn(t,e))}generateRows(e){let{columns:t}=e;if(!t.length)return[];let r=this,{target:i}=r;return i.store.map(s=>r.processRecord(s,t,e)).filter(s=>s?.length)}getColumnType(e,t=this.target.store){let r=e.exportedType||"object";if(e.exportedType===void 0&&e.field){let i=t.modelClass.getFieldDefinition(e.field);i&&i.type!=="auto"&&(r=i.type)}return r}processColumn(e,t){let r=this,{target:i}=r,{defaultColumnWidth:s}=t,{field:n,text:o,width:l,minWidth:c}=e;if(n in i.store.modelClass.fieldMap||(n=""),!o||!l){let d=i.columns.find(u=>u.field===n);o||(o=d&&d.text||n),l==null&&(l=d&&d.width||s)}return l=Math.max(l||s,c||s),{field:n,value:o,width:l,type:r.getColumnType(e)}}processRecord(e,t,r){let{target:i}=this,{showGroupHeader:s,indent:n,indentationSymbol:o}=r,l;return e?e.isSpecialRow?s&&e.meta.groupRowFor&&(l=t.map(c=>i.features.group.buildGroupHeader({cellElement:g.createElement(),grid:i,record:e,column:c}))):l=t.map(c=>{let d=c.field?.includes(".")?e.get(c.field):e[c.field],u=c.renderer||c.defaultRenderer;return u&&!(d&&c.isDateColumn&&r.exportDateAsInstance)&&(d=u.call(c,{value:d,record:e,column:c,grid:i,isExport:!0})),n&&c.tree&&(d=`${o.repeat(e.childLevel)}${d}`),d}):l=t.map(()=>""),l}};var bi=class{constructor(e){this._value=e}get value(){return this._value}toString(){return Boolean(this.value)?"\u2713":""}};var Js=class extends fe{static get $name(){return"ExcelExporter"}static get defaultConfig(){return{filename:null,dateFormat:"YYYY-MM-DD",exporterClass:yi,exporterConfig:null,zipcelx:null,convertEmptyValueToEmptyString:!0}}processValue(e){return e==null||Number.isNaN(e)||typeof e=="function"||typeof e=="object"&&String(e)==="[object Object]"?"":e}generateExportData(e){let t=this,{rows:r,columns:i}=t.exporter.export(e.exporterConfig);return{rows:r.map(s=>s.map((n,o)=>{n instanceof Date?n=D.format(n,e.dateFormat):typeof n=="boolean"&&(n=new bi(n)),t.convertEmptyValueToEmptyString&&(n=t.processValue(n));let l=i[o]?.type==="number"?"number":"string";return{value:n,type:l}})),columns:i.map(s=>{let{field:n,value:o,width:l,type:c}=s;return c="string",{field:n,value:o,width:l,type:c}})}}export(e={}){let t=this,r=t.zipcelx||window.zipcelx;if(!r)throw new Error('ExcelExporter: "zipcelx" library is required');if(t.disabled)return;e=b.assign({},t.config,e),e.filename||(e.filename=t.client.$$name);let{filename:i}=e,{rows:s,columns:n}=t.generateExportData(e);return r({filename:i,sheet:{data:[n].concat(s),cols:n}})}construct(e,t){super.construct(e,t),this.zipcelx||typeof zipcelx!="undefined"&&(this.zipcelx=window.zipcelx)}get exporter(){let e=this;return e._exporter||(e._exporter=e.exporterClass.new({target:e.client},e.exporterConfig))}};pe.registerFeature(Js,!1,"Grid");var Ul=class extends Ft{static get $name(){return"ReleaseCombo"}static get type(){return"releasecombo"}static get configurable(){return{type:"combo",editable:!1,valueField:"name",displayField:"name",width:100,pickerWidth:200}}};Ul.initClass();var Qs=class extends ne{static get type(){return"value"}static get defaults(){return{flex:1,htmlEncode:!1,renderer({value:e,record:t,isExport:r}){if(!t.isSpecialRow)return String(e)==="[object Object]"&&(e.type?e=e.type:e.name?e=e.name:e=M.safeJsonStringify(e)),e===void 0?"":r?e:`<div class="valuewrap">${M.encodeHtml(e)}</div>`}}}};xe.registerColumnType(Qs,!0);var Ci=class extends gt{static get configurable(){return{idField:"name",fields:["name",{name:"date",type:"date"}],currentVersion:null,sorters:[{field:"date",ascending:!1}],readUrl:"https://bryntum.com/dist/docs/api/releases/",fetchOptions:{credentials:"omit"}}}get currentRelease(){return this._currentRelease||(this._currentRelease=this.findRecord("name",this.currentVersion)),this._currentRelease}set currentRelease(e){this._currentRelease=this.findRecord("name",e)}get previousRelease(){let e=this.indexOf(this.currentRelease);return this.getAt(e+1)}};var be=new Ci,Mr=class extends it{static get $name(){return"DiffGrid"}static get configurable(){return{rowHeight:50,autoHeight:!0,readOnly:!0,enableTextSelection:!0,version:null,docsJsonRoot:z.isTestEnv?"../tests/docs/docsJsonData":"https://bryntum.com/dist/docs/api",emptyText:"No differences found",features:{group:{field:"module",groupRenderer:({groupRowFor:e,isFirstColumn:t})=>t&&e.replace(/\//g,".")},sort:"symbolName",excelExporter:!0,cellTooltip:{hoverDelay:300,textContent:!0,tooltipRenderer:({record:e,column:t})=>M.encodeHtml(String(e[t.field]))}},tbar:[{type:"releasecombo",ref:"leftCombo",store:be},{type:"widget",style:"margin:0 1em 0 .5em",html:"vs."},{type:"releasecombo",ref:"rightCombo",store:be},{text:"Compare",cls:"b-green",onAction:"up.onCompareClick"},"->",{type:"buttongroup",ref:"statusFilter",items:[{type:"button",text:"Removed",pressed:!0,toggleable:!0,onToggle:"up.onFilterButtonToggle"},{type:"button",text:"Changed",pressed:!0,toggleable:!0,onToggle:"up.onFilterButtonToggle"},{type:"button",text:"New",pressed:!1,toggleable:!0,onToggle:"up.onFilterButtonToggle"}]},{type:"button",tooltip:"Export to Excel",ariaLabel:"Export to Excel",icon:"b-icon b-fa-file-excel",onAction:"up.onExport"},{type:"button",tooltip:"Toggle fullscreen",ariaLabel:"Toggle fullscreen",icon:"b-icon b-fa-expand",onAction:"up.onToggleFullscreen"}],columns:[{id:"status",text:"Status",cellCls:"status",field:"status",htmlEncode:!1,width:110,renderer({value:e,isExport:t}){let r;switch(e){case"new":r="star";break;case"removed":r="trash";break;case"changed":r="pen";break;case"deprecated":r="exclamation-triangle";break}return t?e:`<i class="b-icon b-fa-fw b-fa-${r}"></i>`+M.encodeHtml(e)}},{text:"Name",field:"symbolName",flex:1,renderer:({record:e,cellElement:t,isExport:r})=>{if(e.isSpecialRow)return;e.memberCategory&&t?.classList.add(e.memberCategory);let i;return e.status==="deprecated"?e.symbolName:(e.symbolName?i=`${e.symbolName}${e.symbolAttributeName?`->${e.symbolAttributeName}`:""} [${e.name}]`:i=e.name,i+(r?` [${e.memberCategory}]`:""))}},{type:"value",id:"left",field:"left"},{type:"value",id:"right",field:"right"}],store:{fields:["name","left","right","path","module","symbolName","symbolAttributeName","memberCategory"]}}}async construct(){super.construct(...arguments),be.currentVersion=this.version,be.on({load:"onReleasesLoaded",thisObj:this}),be.load({id:this.productId})}compareToPrevious(e){be.count>0?(be.currentRelease=e,this.compare(be.currentRelease?.name,be.previousRelease?.name)):this.diffVersion=e}async onReleasesLoaded(){if(this.diffVersion&&(be.currentRelease=this.diffVersion,this.diffVersion=null),window.bryntum.isOnline)be.filter(e=>!e.name.match(/-(alpha|beta|rc)/));else{let e=await ue.fetch(`data/docs_${this.productId}.js`),t=await e.text();z.isTestEnv||(be.insert(0,{name:"latest",date:new Date}),be.currentRelease="latest",be.currentRelease.docs=this.prepareDocsJson(JSON.parse(t.substr("window.docsJson=".length))),be.sort())}be.count<2?(this.store.removeAll(),this.tbar.eachWidget(e=>e.disable())):this.compare(be.currentRelease?.name,be.previousRelease?.name)}async compare(e,t){let r=this;if(r.store.removeAll(),!e||!t)return;r.mask("Loading");let{leftCombo:i,rightCombo:s}=r.widgetMap,n=r.loadDocs(e),o=r.loadDocs(t),[l,c]=await Promise.all([n,o]);if(i.value=e,s.value=t,!l){r.mask({text:e+" could not be loaded",icon:"b-icon b-icon-warning",autoClose:4e3});return}if(!c){r.mask({text:t+" could not be loaded",icon:"b-icon b-icon-warning",autoClose:4e3});return}let d=e<t?l:c,u=e>t?l:c,f=Dt.diff(d.classes,u.classes);r.unmask();let h=r.columns.getById("left"),m=r.columns.getById("right");h.text=e,m.text=t,e<t?(h.field="left",m.field="right"):(h.field="right",m.field="left"),r.data=r.processDiff(f),r.applyFilters()}prepareDocsJson(e){let t=r=>{r.modulePath&&(r.name="module:"+r.modulePath)};return e?.classes?.forEach(t),e}async loadDocs(e){let t=be.getById(e);if(!t.docs){let r=await ue.fetch(`${this.docsJsonRoot}/${this.productId}/${e}.json`,{parseJson:!0,credentials:"omit"}).catch(i=>{});t.docs=this.prepareDocsJson(r?.parsedJson)}return t.docs}processDiff(e){return e.map(t=>{let r=/\/properties|\/events|\/configs|\/functions|\/typedefs|\/fields/,i=t.path||"",s=i.split(r);if(t.memberCategory=i.match(r)?.[0].substr(1),s[1]){let n=s[s.length-1].substr(1),o=n.split("/");t.symbolCategory=o.length>1?o.pop():"",t.symbolName=o.join(".")}return t})}onCompareClick(){let{leftCombo:e,rightCombo:t}=this.widgetMap;e.value===t.value?Ie.show("Choose two different versions"):this.compare(e.value,t.value)}onFilterButtonToggle({pressed:e,source:t}){let r=t.text.toLowerCase();e?this.store.removeFilter(r):this.store.filter({id:r,property:"status",operator:"!=",value:t.text.toLowerCase()})}async onExport(){let{leftCombo:e,rightCombo:t}=this.widgetMap;window.zipcelx||await g.loadScript("https://bryntum.com/dist/grid/examples/exporttoexcel/zipcelx.js"),this.features.excelExporter.export({filename:`${e.value}-vs-${t.value}`})}onToggleFullscreen(){this.autoHeight=Te.isFullscreen,Te.isFullscreen?Te.exit():Te.request(this.element)}applyFilters(){this.store.filter(this.widgetMap.statusFilter.items.filter(e=>!e.pressed).map(e=>{let t=e.text.toLowerCase();return{id:t,property:"status",operator:"!=",value:t}}))}};window.DiffGrid=Mr;var Uu="457b99e11a8e92da82ed6e1743dfae4fac71ea3d",Ku=window.location.search.includes("video=1"),wi=class{constructor(e){let t=window.bryntum.router.isBryntumOnline,r=(()=>{try{let i=window.top.location.href}catch{return!0}return!1})();if(super.constructor(...arguments),Object.assign(this,e),t||r){let i=document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src="https://app.therootcause.io/rootcause-full.js",i.addEventListener("load",this.start.bind(this)),document.head.appendChild(i)}}start(){if(!window.RC){console.log("ERROR: RootCause not initialized");return}this.rootCause=window.logger=new RC.Logger({captureScreenshot:!0,recordUserActions:!1,applicationId:Uu,autoStart:!0,treatFailedAjaxAsError:!0,treatResourceLoadFailureAsError:!0,version:this.apiVersion,recordSessionVideo:Ku,ignoreErrorMessageRe:/Script error|Unexpected token var|ResizeObserver/i,ignoreFileRe:/^((?!bryntum).)*$/,onBeforeLog(e){if(e.isJsError&&(!e.file||!e.file.includes(".js")||e.file.includes("chrome-extension")))return!1},recorderConfig:{shouldIgnoreDomElementId:e=>/^(b_|b-)/.test(e),ignoreCssClasses:["b-sch-event-hover","b-contains-focus","b-hover","b-dirty","b-focused"]}})}stop(){let{recorder:e}=this.rootCause;e?.active&&e.stop()}};var Jt=class extends Oe{static get $name(){return"FiddlePanel"}static get type(){return"fiddlepanel"}static get configurable(){return{url:null,language:"javascript",changeTimeout:500,readOnly:!1,hideChrome:!1,title:"LIVE DEMO",tools:[{cls:"b-icon b-fa-expand",tooltip:"Fullscreen",ariaLabel:"Fullscreen",handler:"up.onFullscreenButtonClick"},{tooltip:"Open in CodePen",ariaLabel:"Open in CodePen",cls:"codepen-icon",handler:"up.openInCodePen"},{cls:"b-icon b-icon-code",tooltip:"Show code editor",ariaLabel:"Show code editor",handler:"up.onCodeButtonClick"}],items:{code:{type:"widget",tag:"pre",cls:"codeContainer hide-code",html:'<code contenteditable="true" spellcheck="false"></code>'},result:{type:"widget",cls:"fiddlePanelResult"}}}}construct(e){e.hideChrome&&(e.tools=e.title=null),super.construct(...arguments),e.alignLeft&&this.element.classList.add("alignLeft")}onPaint({firstPaint:e}){if(super.onPaint(...arguments),e){let t=this;t.url&&t.loadDemoCode(t.url),t.readOnly||(t.update=t.buffer("runCode",t.changeTimeout),O.on({element:t.codeElement,input(){t.codeModified=!0,t.update()},keydown(r){r.key==="Enter"&&(document.execCommand("insertHTML",!1,"<br>"),r.preventDefault())},thisObj:t})),g.createElement({tag:"i",parent:t.widgetMap.code.element,className:"b-fa b-fa-copy copy-to-clipboard",dataset:{btip:"Copy to clipboard"}}),O.on({element:t.element,click:"onElementClick",thisObj:t})}}onElementClick(e){if(e.target.matches(".copy-to-clipboard")){let t=e.target.parentElement.innerText;x.copyToClipboard(t)&&Toast.show({html:"Code copied to clipboard",rootElement:this.rootElement})}}async loadDemoCode(e){let t=this;t.mask({text:"Loading example...",mode:"bright"}),t.element.dataset.url=e;let r=await t.loadResource(t.url),i=await r.text();if(t.isDestroyed)return;let s=t.codeElement;s.classList.add(t.language),s.textContent=i,s.innerHTML=s.innerHTML.replace(/<br>/g,`
`),hljs.highlightElement(t.codeElement),this.widgetMap.code.height=s.offsetHeight,this.runCode(s.textContent),this.element.classList.add("ready"),t.unmask()}onCodeChanged(){this.runCode()}runCode(e=this.codeElement.textContent){let t=this;t.destroyWidgets();try{new Function("targetElement",e)(t.resultElement),"error"in t.resultElement.dataset&&t.setTimeout(()=>delete t.resultElement.dataset.error,300)}catch(r){if(t.codeModified)t.resultElement.dataset.error="\u26A0 \uFE0F"+r.message;else throw r}}onCodeButtonClick(){let{codeWrap:e}=this;e.classList.toggle("hide-code"),e.classList.contains("hide-code")||this.setTimeout(()=>e.firstElementChild.focus(),200)}showCode(){this.codeWrap.classList.remove("hide-code")}get codeWrap(){return this.widgetMap.code.element}get codeElement(){return this.widgetMap.code.element.firstElementChild}get resultElement(){return this.widgetMap.result.element}onFullscreenButtonClick(){Te.isFullscreen?this.exitFullscreen():this.requestFullscreen()}loadResource(e){return fetch(e+"?version="+this.apiVersion)}openInCodePen(){let e=this,t=e.productId,r=g.createElement({tag:"form",style:"display:none",action:"https://codepen.io/pen/define?editors=001&__resourceRoot="+encodeURIComponent(location.href),target:"_blank",parent:e.element,method:"post",children:[{tag:"input",type:"hidden",name:"data",value:M.safeJsonStringify({title:"Bryntum Live Demo",css_external:[`https://bryntum.com/dist/${t}/build/${t}.material.css`,`https://bryntum.com/docs/${t}/docs-all.css`].join(";"),js_external:[`https://bryntum.com/dist/${t}/build/${t}.umd.js`,"https://bryntum.com/fiddle/expose-globals.js"].join(";"),js:this.widgetMap.code.element.textContent.replace(/targetElement/g,"document.body")})}]});r.submit(),r.remove()}destroyWidgets(){g.children(this.resultElement,"> .b-widget").forEach(e=>{window.WidgetHelper.getById(e.id).destroy()}),this.resultElement.innerHTML=""}doDestroy(){this.destroyWidgets(),Te.unFullscreenChange(this.onFullScreenChange),super.doDestroy()}};Jt.initClass();window.FiddlePanel=Jt;var Ve=a=>L.docsTpl`
        ${a.access?`<div class="badge access ${a.access}">${a.access}</div>`:""}
        ${a.async?'<div class="badge async">ASYNC</div>':""}
        ${a.calculated?'<div class="badge calculated">CALCULATED</div>':""}
        ${a.deprecated?'<div class="badge deprecated">DEPRECATED</div>':""}
        ${a.preventable?'<div class="badge preventable" title="Preventable: You can return false to prevent the operation">PREVENTABLE</div>':""}
        ${a.propagating?'<div class="badge propagating">PROPAGATING</div>':""}
        ${a.readonly?'<div class="badge access readonly">READONLY</div>':""}
        ${a.onOwner?'<div class="badge on-owner" title="On-owner: Event fires or method executes on owning component">ON-OWNER</div>':""}
        ${a.fromFeature?'<div class="badge from-feature" title="From-feature: Event or method added by feature">FROM-FEATURE</div>':""}
        ${a.scope==="static"?`<div class="badge scope ${a.scope}">${a.scope}</div>`:""}
    `;var Kl=a=>L.docsTpl`
<div class="summary-items ${a.title}">
    ${a.data.map(e=>`
         <a class="summary-item" href="#${a.recordData.fullName}#${a.prefix}-${e.name}${e.scope==="static"?"-static":""}">
             <label class="name">${e.name}</label>
            ${Ve(e)}
        </a>
    `)}
</div>`;var Yu={configs:"config",properties:"property",functions:"function",events:"event",fields:"field",typedefs:"typedef"},vi=class extends ee{static get $name(){return"SummaryTooltip"}static get defaultConfig(){return{textContent:!1,forElement:document.getElementById("content"),forSelector:".summary > .summary-icon:not(.none)",allowOver:!0,cls:"summary-tooltip",scrollable:{overflowY:!0},header:{dock:"top",cls:"summary-title",titleAlign:"center"},scrollAction:"realign"}}onBeforeShow(){let e=this.activeTarget,t=this.store.getById(window.bryntum.router.id),r=e.id.substring("summary-".length);this.populate(t,r)}populate(e,t){let r=this,i=e.data,s={recordData:i,data:i[t].sort((o,l)=>o.name<l.name?-1:1),type:t,prefix:Yu[t],title:t.substring(0,1).toUpperCase()+t.substring(1)},{headerElement:n}=r;n.classList.remove(r.contentType),n.classList.add(s.type),r.contentType=s.type,r.title=s.title,r.html=window.bryntum.router.adjustHtmlLinks(Kl(s))}};var xi=class{constructor(){let e=this,{queryString:t}=x;window.bryntum.isBryntumOnline=e.isBryntumOnline=x.isBryntumOnline(),e.isPrerender=t.prerender!=null,window.bryntum.isOnline=e.isOnline=e.isBryntumOnline||t.online!=null||Boolean(e.headBase),window.onpopstate=()=>{window.bryntum.isOnline&&window.onhashchange()}}get navLocation(){let e={},{hash:t}=window.location,r=t&&t!=="#"&&decodeURIComponent(t.replace("#","")),{pathname:i}=window.location;if(i=i.endsWith("/")?i.slice(0,-1):i,i.includes("/api/"))e.id=i.split("/api/")[1],e.anchor=r;else if(i.includes("/guide/")){let s=i.split("/guide/")[1];if(s==="upgrade-guide")e.id=s;else{let n=/(.*?\/)(.*)/.exec(s);n?.[2]?s.startsWith("engine/")?e.id=`../${n[1]}${n[2]}.md`:["licenses","readme"].includes(n[2])?e.id=`${n[1]}${n[2]}.md`:e.id=`${n[1]}guides/${n[2]}.md`:e.id=s}e.anchor=r}else if(t){let s=r.split("#");e.id=s[0],e.anchor=s[1],e.id?.startsWith("guides/")&&(e.id=`${window.productName}/${e.id}`)}return e}get id(){return this.navLocation.id}get anchor(){return this.navLocation.anchor}isRouteLink(e){return Boolean(["api/","guide/"].find(t=>e.startsWith(t)))}get headBase(){return document.head.querySelector("base")?.getAttribute("href")}get baseUrl(){let e=this.headBase;return e&&!e.startsWith("http")&&(e=`${window.location.protocol}//${window.location.host}${e}`),e}routeTo(e){if(!this.isOnline||!this.baseUrl||!e||/^(http|\.+\/|\/)/.test(e))return;let t=new URL(`${this.baseUrl}${e}`);return["online","prerender"].forEach(r=>{x.queryString[r]!=null&&t.searchParams.set(r,"true")}),window.history.pushState({},e,t.toString()),window.onhashchange(),!0}getRoute(e){if(e?.includes("#")){if(e.includes("guides/")){let t=/#(.*?)\/guides\/(.*)?/.exec(e);if(t)return`guide/${t[1]}/${t[2].replace(".md","")}`}if(/#\S+\.md/.test(e))return e.replace(/#[./]+/,"#").replace(/#(\S+)\.md/,"guide/$1");if(e.startsWith("#"))return e.replace("#","api/")}return e&&(e==="../examples"&&this.isOnline&&(e=`/examples/${window.product==="schedulerpro"?"scheduler-pro":window.product}`),e.includes("examples/")&&!e.endsWith("/")&&(e=`${e}/`)),e}adjustDomLinks(){!this.isOnline||document.querySelectorAll("a").forEach(e=>{let t=this.getRoute(e.getAttribute("href"));t&&e.setAttribute("href",t)})}adjustHtmlLinks(e){return this.isOnline?e.replace(/(href|src)="(\S*?)"/gm,(t,r,i)=>`${r}="${this.getRoute(i)}"`):e}adjustStoreLinks(e){!this.isOnline||e.allRecords.forEach(t=>{let r=this.getRoute(t.href);r&&(t.href=r)})}};var Ei=class extends ee{static get $name(){return"SectionTooltip"}static get defaultConfig(){return{forElement:document.getElementById("content"),forSelector:".sectionHeader i"}}construct(){super.construct(...arguments),O.on({element:this.element,click:"hide",thisObj:this})}onBeforeShow(){let e=this.activeTarget;this.html=e.dataset.tooltip}};var Si=class extends ee{static get $name(){return"TypeTooltip"}static get configurable(){return{forElement:document.getElementById("content"),forSelector:".type-differs a, .type-differs i",textContent:!0,scrollAction:"realign",cls:"type-tooltip"}}onBeforeShow(){let e=this.activeTarget.parentElement,{name:t}=e.dataset,r=e.parentElement.matches(".field"),i=this.app.currentRecord.data[r?"fields":"properties"].find(n=>n.name===t),s=r?["Load type","Return type"]:["Set type","Get type"];i&&(this.html=`
                <div class="label">${s[0]}</div><div class="accepts">${i.accepts.join(" / ")}</div>
                <div class="label">${s[1]}</div><div class="output">${i.type.join(" / ")}</div>
            `)}};var Xe=a=>{if(!a.inheritedFrom)return"";let e=a.inheritedFrom.split("/"),t=e[e.length-1];return`<a href="#${a.inheritedFrom}" class="inherited" title="Defined in ${a.inheritedFrom}">${t}</a>`};var Yl='<span class="separator">/</span>',Xu="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/",Ju="https://developer.mozilla.org/en-US/docs/Web/API/",Qu=["Array","Boolean","Date","Error","Function","Map","Number","Object","Promise","String","Symbol","null","undefined"],Zu=/^(\w+(?:\.\w+)+)(?:#(\w+))(\[])?$/,ef=/^Array\.<([^>]+)>$/,Xl=(a,e,t,r)=>{let i='target="_blank"',s="";if(a instanceof Object)return a.names&&a.names.map(Xl).join(Yl);let n=ef.exec(a);if(n&&(a=n[1]),a=a.replace(/\(\)/g,""),a.includes(".")){let o=Zu.exec(a);i="",o?(a=o[2]+(o[3]||""),s=`#${o[1].replace(/\./g,"/")}#typedef-${a}`):s="#"+a.replace(/\./g,"/"),s=`${e||""}${s}`}else a==="Class"?s="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes":a!=="*"?(a!=="null"&&a!=="undefined"&&(a=a[0].toUpperCase()+a.substr(1)),s=(Qu.indexOf(a.replace("[]",""))>=0?Xu:Ju)+a):i="";return s=s.replace("[]",""),t&&(a="..."+a),L.docsTpl`<a ${i} class="type ${r?"output":""}" ${s?`href="${s}"`:""}>${a}${n?"[]":""}</a>`},ze=(a,e=!0,t=!1,r=!1)=>{let{type:i,url:s}=a,n=a.accepts||i,o=Boolean(a.accepts?.length);return!i||i.length===0?"":(o&&n.sort((l,c)=>i.includes(c)-i.includes(l)),(e?": ":"")+(n instanceof Array?n:[n]).map(l=>{let c=o&&i.includes(l);return Xl(l,s,r,c)}).join(Yl)+(o?'<i class="b-fa b-fa-info-circle"></i>':"")+(t?'<div class="suffix">:</div>':""))};var Jl=a=>{if(!a.fields?.length)return"";let e=(t,r)=>(r?`#${r.fullName}#`:"")+`field-${encodeURIComponent(t.name)}`;return L.docsTpl`
    <section class="fields">
        <h2 class="sectionHeader">Fields<i class="b-fa b-fa-question-circle" data-tooltip="Fields belong to a Model class and define the Model data structure"></i></h2>
        <ul>
        ${a.fields.map(t=>L.docsTpl`
            ${a.isNewCategory(t)?`<h3 class="categoryHeader">${t.category}</h3>`:""}
            <li 
                name="${t.name.toLowerCase()}"
                id="${e(t)}"
                class="member field ${t.expandable?"expandable":""} ${t.access} ${t.deprecated?"deprecated":""}"
            >
                <div class="name ${t.accepts?.length?"type-differs":""}" data-name="${t.name}">
                    <a href="${e(t,a)}">${t.name}</a>
                    ${t.type?ze(t):""}
                    ${t.defaultValue!=null?`<span class="default">${t.defaultValue}</span>`:""}
                    <div class="filler"></div>
                    <div class="scope ${t.scope}"></div>
                    ${Ve(t)}
                    ${Xe(t)}
                </div>
                <div class="description">
                    ${t.description}
                </div>
            </li>
        `)}
        </ul>
    </section>
    `};var Ql=a=>a.examples?.length?L.docsTpl`
    <section class="snippets">
        <h2 class="examples-heading">Snippet${a.examples.length>1?"s":""}</h2>
        ${a.examples.map(e=>L.docsTpl`
        <pre><code class="javascript">${e}</code></pre>
        `)}
    </section>
    `:"";var Di,Ti,Zs=[],tf=(a,e)=>{for(Zs.length=0,Di={},Ti={};a;)(a.mixins||[]).forEach(t=>Di[t.fullName]=1),(a.features||[]).forEach(t=>Ti[t.fullName]=1),Zs.push(a.fullName),a=a.extends&&a.extends.length>0&&e.getById(a.extends[0]);return Zs.reverse()},Zl=(a,e)=>L.docsTpl`
    ${a.classType?`<div class="badge classType ${a.feature?"featureId":""}" data-btip="Used when defining container items by type">${a.feature?"id":"type"}: ${a.classType}</div>`:""}

    <h3>Inheritance tree</h3>
    <ul class="class-hierarchy">
    ${tf(a,e).map((t,r)=>`<li style="margin-left:${r}em"><a href="#${t}">${t.replace(/\//g,".")}</a></li>`)}
    </ul>

    ${Object.keys(Di).length>0?L.docsTpl`
    <h3>Mixins</h3>
    <ul class="inherited-mixins">
        ${Object.keys(Di).sort().map(t=>`<li><a href="#${t}">${t.replace(/\//g,".")}</a></li>`)}
    </ul>
    `:""}
    
    ${Object.keys(Ti).length>0?L.docsTpl`
    <h3>Features</h3>
    <ul class="inherited-mixins">
        ${Object.keys(Ti).sort().map(t=>`<li><a href="#${t}">${t.replace(/\//g,".")}</a></li>`)}
    </ul>
    `:""}

`;var ea=a=>a.externalExamples?.length?L.docsTpl`
    <section class="external-examples">
        ${a.externalExamples.map(e=>L.docsTpl`
        <div class="external-example" data-file="${e}">
        </div>
        `)}
    </section>
    `:"";window.updateIframeHeight=()=>{let a=document.querySelector(".external-example iframe");a&&(document.querySelector(".external-example").classList.remove("loading"),a.style.height=a.contentWindow.document.body.scrollHeight+"px")};var We=(a,e="Parameters",t=!1)=>!a?.length||t&&!a.some(r=>r.isSubParam)?"":L.docsTpl`
    ${e?`<h3>${e}</h3>`:""}
    <ul class="parameters">
        ${a.map(r=>L.docsTpl`
        ${t&&!r.isSubParam?"":L.docsTpl`
        <li class="parameter ${r.isSubParam?"subparameter-"+(r.name.split(".").length-1):""}">
            <span class="name">${r.name.split(".").pop()}
                <span>${r.type?ze(r,!0,!1,r.isRestParam):""}</span>
            </span>
            ${"default"in r?`<span class="default">${r.default}</span>`:""}
            ${"optional"in r?'<span class="optional"></span>':""}
            ${r.description?`<div class="description">${r.description}</div>`:""}
        </li>
       `}
       `)}
    </ul>
    `;var ta=a=>{if(!a.configs?.length)return"";let e=(t,r)=>(r?`#${r.fullName}#`:"")+`config-${encodeURIComponent(t.name)}`;return L.docsTpl`
    <section class="configs">
        <h2 class="sectionHeader">Configs<i class="b-fa b-fa-question-circle" data-tooltip="Configs are options you supply in a configuration object when creating an instance of this class"></i></h2>
        <ul>
        ${a.configs.map(t=>L.docsTpl`
            ${a.isNewCategory(t)?`<h3 class="categoryHeader">${t.category}</h3>`:""}
            <li 
                name="${t.name.toLowerCase()}"
                id="${e(t)}"
                class="member config ${t.expandable?"expandable":""} ${t.access} ${t.deprecated?"deprecated":""}"
            >
                <div class="name">
                    <a href="${e(t,a)}">${t.name}</a>
                    ${t.type?ze(t):""}
                    ${t.defaultValue!=null?`<span class="default">${t.defaultValue}</span>`:""}
                    <div class="filler"></div>
                    ${Ve(t)}
                    ${t.scope&&t.scope!=="inner"?`<div class="scope ${t.scope}"></div>`:""}
                    ${Xe(t)}
                </div>
                <div class="description">
                    ${t.description}
                    ${(t.parameters&&t.parameters.length)>0||t.returns||t.properties?`<div class="config-body">
                        ${We(t.parameters)}
                        ${t.returns?L.docsTpl`
                        <h3>Returns</h3>
                        <div class="returns">
                            ${(t.returns.length?t.returns:[t.returns]).map(r=>L.docsTpl`
                                ${ze(r,!1,Boolean(r.description))}
                                <div class="description">${r.description}</div>
                            `)}
                        </div>
                        `:""}
                        ${We(t.properties,"")}
                    </div>`:""}
                </div>
            </li>
        `)}
        </ul>
    </section>
    `};var ra=(a,e)=>{let t=(r,i)=>(i?`#${i.fullName}#`:"")+`property-${encodeURIComponent(r.name)}${r.scope==="static"?"-static":""}`;return L.docsTpl`
    ${a.isNewCategory(e)?`
    <h3 class="categoryHeader">${e.category}</h3>`:""}
    <li name="${e.name.toLowerCase()}" id="${t(e)}" class="member property ${e.expandable?"expandable":""} ${e.access} ${e.deprecated?"deprecated":""}">
        <div class="name ${e.accepts?.length?"type-differs":""}" data-name="${e.name}">
            <a href="${t(e,a)}">${e.name}</a>
            ${e.type?ze(e):""}
            ${e.defaultValue!=null?`<span class="default">${e.defaultValue}</span>`:""}
            <div class="filler"></div>
            ${Ve(e)}
            ${Xe(e)}
        </div>
        <div class="description">
            ${e.description}
            ${We(e.properties,"",!0)}
        </div>
    </li>
    `},ia=a=>{if(!a.properties?.length)return"";let e=a.properties.filter(r=>r.scope!=="static"),t=a.properties.filter(r=>r.scope==="static");return L.docsTpl`
    <section class="properties">
        <h2 class="sectionHeader">Properties<i  class="b-fa b-fa-question-circle" data-tooltip="Properties are getters/setters or publicly accessible variables on this class"></i></h2>
        <ul class="properties static-header${t.length?"":" hidden"}">
            ${t.map(r=>ra(a,r))}
        </ul>
        <ul class="properties instance-header${!e.length||!t.length?" hidden":""}">
            ${e.map(r=>ra(a,r))}
        </ul>
    </section>`};var sa=(a,e)=>{let t=(r,i)=>(i?`#${i.fullName}#`:"")+`function-${encodeURIComponent(r.name)}${r.scope==="static"?"-static":""}`;return L.docsTpl`
    ${e.isNewCategory(a)?`<h3 class="categoryHeader">${a.category}</h3>`:""}
        <li name="${a.name.toLowerCase()}" id="${t(a)}" class="member function ${a.expandable?"expandable":""} ${a.access}  ${a.deprecated?"deprecated":""}">
            <div class="name">
                <a href="${t(a,e)}">${a.name}</a>(
                <span class="function-name-parameters">
                    ${(a.parameters||[]).filter(r=>!r.isSubParam).map((r,i)=>L.docsTpl`
                        ${r.isRestParam?"...":""}${r.name}${"default"in r?`<span class="default">${r.default}</span>`:""}
                    `).join(", ")}
                    </span>
                )
                ${a.returns?`<div class="returns">${ze(a.returns)}</div>`:""}
                <div class="filler"></div>
                ${Ve(a)}
                ${Xe(a)}
            </div>
            <div class="description">${a.description}
                <div class="function-body">
                    ${a.examples?a.examples.map(r=>L.docsTpl`
                    <div class="example">
                        <pre><code class="javascript">${r}</code></pre>
                    </div>
                    `):""}
                    ${We(a.parameters)}
                    ${a.returns?`
                    <h3>Returns</h3>
                    <div class="returns">
                         ${ze(a.returns,!1,Boolean(a.returns.description))}
                         ${a.returns.description?`<div class="description">${a.returns.description}</div>`:""}
                    </div>
                    `:""}
                </div>
            </div>
       </li>
`},na=a=>{if(!a.functions?.length)return"";let e=a.functions.filter(r=>r.scope!=="static"),t=a.functions.filter(r=>r.scope==="static");return L.docsTpl`
    <section class="functions">
        <h2 class="sectionHeader">Functions<i  class="b-fa b-fa-question-circle" data-tooltip="Functions are methods available for calling on the class"></i></h2>
        <ul class="functions static-header${t.length?"":" hidden"}">
            ${t.map(r=>r.scope==="static"?sa(r,a):"")}
        </ul>
        <ul class="functions instance-header${!e.length||!t.length?" hidden":""}">
            ${e.map(r=>r.scope!=="static"||!r.scope?sa(r,a):"")}
        </ul>
    </section>
`};var oa=a=>{if(!a.events?.length)return"";let e=(t,r)=>(r?`#${r.fullName}#`:"")+`event-${encodeURIComponent(t.name)}`;return L.docsTpl`
    <section class="events">
        <h2 class="sectionHeader">Events<i  class="b-fa b-fa-question-circle" data-tooltip="Events are triggered for certain actions in this class and can be listened for to react to those actions in your code"></i></h2>
        <ul>
        ${a.events.map(t=>L.docsTpl`
            <li 
                name="${t.name.toLowerCase()}"
                id="${e(t)}"
                class="member event ${t.expandable?"expandable":""} ${t.access} ${t.deprecated?"deprecated":""}"
            >
                <div class="name">
                    <a href="${e(t,a)}">${t.name}</a>
                    <div class="filler"></div>
                    ${Ve(t)}
                    ${Xe(t)}
                </div>
                <div class="description">${t.description}
                <div class="event-body">
                    ${We([{name:"event",type:"Object",description:"The Bryntum event object"}])}
                    ${We(t.parameters,"",!1)}
                </div>
            </li>
        `).join("")}
        </ul>
    </section>
    `};var rf=(a,e)=>{let t=(r,i)=>(i?`#${i.fullName}#`:"")+`typedef-${encodeURIComponent(r.name)}`;return L.docsTpl`
    <li name="${a.name.toLowerCase()}" id="${t(a)}" class="member typedef expandable ${a.access}">
        <div class="name">
            <a href="${t(a,e)}">${a.name}</a>
            <div class="filler"></div>
            ${a.access?`<div class="badge access ${a.access}">${a.access}</div>`:""}
        </div>
        <div class="description">${a.description}
            ${L.docsTpl`
            <div class="typedef-body">
                ${We(a.properties,"Properties")}
            </div>`}
        </div>
    </li>
    `},la=a=>a.typedefs?.length?L.docsTpl`
    <section class="fields">
        <h2 class="sectionHeader">Type Definitions<i class="b-fa b-fa-question-circle"
            data-tooltip="Object shapes declared for informational purposes or code generation"></i>
        </h2>
        <ul>
            ${a.typedefs.map(e=>rf(e,a))}
        </ul>
    </section>
    `:"";var{bryntum:aa}=window,ca=(a,e)=>L.docsTpl`
<header class="content-header">
    <div class="column">
        <h1 class="title ${a.mixin?"mixin":""} ${a.plugin?"plugin":""} ${a.feature?"feature":""} ${a.singleton?"singleton":""}">
            <span class="title-text">${a.fullName.replace(/\//g,".")}</span>
            ${a.access==="private"?`<div class="badge access private">${a.access}</div>`:""}
            ${a.virtual?'<div class="badge access virtual">ABSTRACT</div>':""}
            ${a.deprecated?'<div class="badge deprecated">DEPRECATED</div>':""}
        </h1>
    </div>
    <div class="summary">
        ${a.demo?`<a id="demo-link" href="${aa.isOnline||a.demo.product!==aa.product?`https://bryntum.com/examples/${a.demo.product}`:"../examples"}/${a.demo.demo}" target="_blank"></a>`:""}
        ${a.props?`<a id="summary-props" class="summary-icon summary-props ${!a.props||a.props.length===0?"none":""}"></a>`:`<a href="#${a.fullName}#fields" aria-label="Fields" id="summary-fields" class="summary-icon summary-field ${!a.fields||a.fields.length===0?"none":""}"></a>
     <a href="#${a.fullName}#configs" aria-label="Configs" id="summary-configs" class="summary-icon summary-config ${!a.configs||a.configs.length===0?"none":""}"></a>
     <a href="#${a.fullName}#properties" aria-label="Properties" id="summary-properties" class="summary-icon summary-property ${!a.properties||a.properties.length===0?"none":""}"></a>
     <a href="#${a.fullName}#functions" aria-label="Functions" id="summary-functions" class="summary-icon summary-function ${!a.functions||a.functions.length===0?"none":""}"></a>
     <a href="#${a.fullName}#events" aria-label="Events" id="summary-events" class="summary-icon summary-event ${!a.events||a.events.length===0?"none":""}"></a>
     <a href="#${a.fullName}#typedefs" aria-label="Typedefs" id="summary-typedefs" class="summary-icon summary-typedefs ${!a.typedefs||a.typedefs.length===0?"none":""}"></a>`}
    </div>
</header>
<div class="content-body">
    <div class="content-holder">
            <div class="left-pane">
                <section class="description" id="class-description">
                    ${a.description}
                    ${a.singleton?"<p>Note: Class is a singleton and all members listed below can be accessed as static ones.</p>":""}
                </section>
            
                ${ea(a)}
            
                ${Ql(a)}
            
                <div class="no-results">No results</div>
                        
                ${Jl(a)}
            
                ${a.singleton?"":ta(a)}
            
                ${ia(a)}
            
                ${na(a)}
            
                ${oa(a)}
            
                ${la(a)}
            </div>
            <div class="right-pane">
                ${Zl(a,e)}
                
                <div class="class-contents-container">
                    <h3 class="class-contents-heading">Contents</h3>
                    <ul class="class-contents contents-list"></ul>
                </div>              
            </div>
    </div>
</div>
`;var sf=new window.showdown.Converter({tables:!0,noHeaderId:!0}),da=a=>{let e=a.data.content;return L.docsTpl`
        <div class="left-pane">${sf.makeHtml(e)}</div>
        <div class="right-pane">
            <h3>Contents</h3>
            <ol class="toc contents-list"></ol>
        </div>
    `};var ua=a=>L.docsTpl`
    ${a.isLeaf?`<li><a href="#${a.data.fullName}">${a.name}</a></li>`:`<li class="namespace"><i class="b-fa b-fa-folder"></i><span>${a.name}</span><ul>${a.children.map(ua).join("")}</ul></li>`}
`,fa=ua;var nf=a=>{let e=[];return a.traverse(t=>{!t.isLeaf&&t.childLevel===2&&e.push(t)}),e},ha=a=>L.docsTpl`
<h1>API Overview</h1>
<div class="content-body">
    ${a.children.map(e=>`<div class="rootnamespace"><h2>${e.name}</h2><div class="namespace-child-wrap">${nf(e).map(t=>`<section>${fa(t)}</section>`).join("")}</div></div>`).join("")}
</div>
`;var of=a=>{let e=[],t=[];return a.traverse(r=>{r.isLeaf&&(r.parent.name==="Guides"?t.push(r):e.push(r))}),[...t,...e]},ma=a=>L.docsTpl`
<h1>Guides</h1>
<div class="content-body">
    ${of(a).map((e,t,r)=>{let i="",s=e.guideIcon;return e.guideCategory&&(t===0||r[t-1].guideCategory!==e.guideCategory)&&(i=`<h2>${e.guideCategory}</h2>`),s.includes(" ")||(s=`b-icon b-fa-${s}`),`${i}<a href="${e.href}" class="guide">
                <i class="${s}"></i>
                <strong>${e.guideName}</strong>
    </a>`}).join("")}
</div>
`;var ga=a=>L.docsTpl`
<h1 class="path-not-found b-fa b-fa-frown">
    Oops, we could not find this resource
</h1>
<div class="path-not-found-description">
    <p><strong>${a.path}</strong> could not be found.</p>
    <p><a href="#">Click here to go back to the docs</a></p>
</div>
`;var lf=new window.showdown.Converter({tables:!0,noHeaderId:!0}),af=a=>`<h2>API Version diff</h2>
        <p><a href="?v=${a}#apidiff">Click here</a> to see a full version diff of this version compared to the version before</p>`,pa=a=>L.docsTpl`
    <div class="left-pane">
        ${lf.makeHtml(a.data.content).replace("</h1>","</h1>"+af(a.name))}
    </div>
    <div class="right-pane">
        <h3>Contents</h3>
        <ol class="toc contents-list"></ol>
    </div>
`;var cf={PRIVATE:"This member should not be used outside of the class it is defined in",INTERNAL:"This member should not be used by non-framework code",READONLY:"This member cannot be set",ABSTRACT:"This class cannot be instantiated, it serves as a base for concrete classes",CALCULATED:"This member is calculated and should not be set manually",PROPAGATING:"This method triggers a change propagation process for dependent tasks"},ya="highlight-hit",df=/\n\n/g,uf=/<br><br>/ig,Qt=(a,e)=>{if(!a.description){if(!a.access&&!a.hide){let t=e===a?e.name:`${e.name}#${a.name}`;console.error(t+" missing description")}a.description=""}},ff=a=>[a.parent?.name,a.parent?.parent?.name].includes("Upgrading");window.AjaxHelper=ue;window.ApiDiffHelper=Dt;hljs.configure({ignoreUnescapedHTML:!0});function en(a,e){if(e){let t=a.filter(r=>e.includes(r.name));U.remove(a,...t)}}function hf(a){return encodeURIComponent(a.replace(/\s|"/g,"-").replace(/[& +$,:;=?@"#{}|^~[`%!'<>\]./()*\\\n\t\b\v\u00A0]/g,"").toLowerCase())}var tn=class extends S.mixin(we,re){get guidePaths(){return window.guides}constructor(){super();let e=this;document.body.classList.add("b-theme-material");let t=x.queryString.page;t&&(document.location.hash=t),e.router=window.bryntum.router,e.categorySorter=e.categorySorter.bind(e),e.stickyHeaderHeight=0,e.contentEl=document.getElementById("content"),e.animateScroll=!0,document.getElementById("app").classList.add("ready"),e.contentEl.addEventListener("mousedown",e.onContentAreaMouseDown.bind(e)),e.contentEl.addEventListener("click",e.onContentAreaClick.bind(e)),window.onhashchange=e.onHashChange.bind(e),e.filterMembersByAccess=e.filterMembersByAccess.bind(e),e.settings=localStorage.getItem("bryntum-docs-settings"),window.bryntum.product=e.product=window.product,e.startHash=`${window.productName}/readme.md`,e.apiVersion=window.VersionHelper.getVersion(window.product),e.defaultSettings={showPublic:!0,showInternal:!1,showPrivate:!1,showInherited:!0,groupMembers:!0},e.settings?e.settings=JSON.parse(e.settings):e.settings={...e.defaultSettings},["tree","tools"].forEach(o=>{let l=document.getElementById(o);l&&(l.innerHTML="")}),g.removeEachSelector(document.body,"#splitter");let r=`b-${e.product}-docs-state`,i=e.navigationTree=new mi({id:"tree",adopt:"tree",guides:e.guidePaths,product:e.product}),s=JSON.parse(x.getLocalStorageItem(r));s&&(delete s.store,i.state=s),new hr({id:"splitter",insertBefore:document.getElementById("content"),onEnd(){x.setLocalStorageItem(r,JSON.stringify(i.state)),e.updateExpandable()}});let n=e.createOnFrame(()=>e.updateExpandable());O.on({element:window,resize(){n()}}),e.tools=new gi({settings:e.settings,listeners:{settingschange:e.onSettingsChange,thisObj:e}}),e.badgeTooltip=new ee({textContent:!0,scrollAction:"realign",forElement:e.contentEl,forSelector:".badge",getHtml({tip:o}){return cf[o.activeTarget.innerText]}}),e.codeTooltip=new ee({forElement:e.contentEl,forSelector:"i.b-icon-code:not(.pressed)",html:"Show code"}),e.memberTooltip=new vi({store:i.store}),e.sectionTooltip=new Ei({textContent:!0,scrollAction:"realign"}),e.typeTooltip=new Si({app:e}),e.memberFilter=new St({id:"memberFilter",placeholder:"Filter",clearable:!0,keyStrokeChangeDelay:100,triggers:{filter:{align:"start",cls:"b-fa b-fa-filter"}},listeners:{change:e.onMemberFilterChange,clear:e.onMemberFilterChange,thisObj:e}}),location.search.match(/[\\?&]reset/)?e.resetSettings():e.onDocsDataLoaded(),document.getElementById("versionId").innerHTML=e.apiVersion,e.errorMonitor=new wi,E.tooltip.hideDelay=100,E.tooltip.hoverDelay=300,document.body.addEventListener("click",e.onRouteClick.bind(e),{capture:!0}),e.preparePrerender()}set animateScroll(e){this._animateScroll=e,document.body.classList[e?"remove":"add"]("prevent-animations")}get animateScroll(){return this._animateScroll}loadResource(e,t=!0,r=!1){return ue.get(`data/${e}${t?"?version="+this.apiVersion:""}`,{parseJson:r})}filterMembersByAccess(e){let{settings:t}=this,{access:r}=e;return t.showPublic&&(r&&r==="public"||!r)||t.showInternal&&r==="internal"||t.showPrivate&&r==="private"}async onDocsDataLoaded(){let e=this,t={classes:[],components:[]};e.processLoadedSymbols(window.docsJson,t),e.navigationTree.buildDocsTree(t);let r=e.navigationTree.store.query(i=>i.isGuide);e.tools.generateSearchItems(t,r,e.settings),await e.onHashChange(),e.trigger("load")}processLoadedSymbols(e,t){let r=this;function i(n){return(n?n instanceof Array?n:n.split("/"):[]).map(l=>(l.indexOf("Array.<")===0&&(l=l.substring(7,l.length-1)+"[]"),l))}function s(n){n&&(Array.isArray(n)?n.forEach(s):n.type&&n.type.names&&n.type.names[0]&&(n.type=n.type.names[0]))}e.classes&&(t.classes.push.apply(t.classes,e.classes.map(n=>{let o=Object.assign({},n);n.path=n.path.replace(/\\/gm,"/");let l=n.access==="public"||!n.access;if(n.access==="private"&&r.settings.showPrivate||n.access==="internal"&&r.settings.showInternal||l&&r.settings.showPublic){let c=n.path.match(/lib\/(.*)/);o.folder=c&&c[1],l&&!n.classDescription&&Qt(n,n),n.classDescription&&(n.description&&(o.constructor.description=n.description),o.description=n.classDescription),o.description=(o.description||"").replace(df,"<br/><br/>"),o.id=o.fullName=o.folder+"/"+o.name,o.href=`#${o.id}`,n.constructor&&(o.functions=[],n.constructor.description&&o.functions.push(n.constructor)),n.functions&&(o.functions=n.functions.filter(r.filterMembersByAccess),o.functions.sort(r.functionSorter.bind(r)),o.functions.forEach(d=>{Qt(d,n),d.expandable=d.description.split("</p>").length>2,d.parameters&&d.parameters.length&&(d.expandable=!0,d.parameters.forEach(u=>{u.type=i(u.type)})),d.returns&&d.returns.type&&(d.expandable=!0,d.returns.type=i(d.returns.type))})),n.properties&&(o.properties=n.properties.filter(r.filterMembersByAccess),o.properties.sort(r.categorySorter),o.properties.forEach(d=>{Qt(d,n),d.expandable=d.description.split("</p>").length>2,d.description.includes("<pre")&&(d.expandable=!0),s(d),s(d.properties),d.properties&&d.properties.length>1&&(d.expandable=!0),s(d.returns),d.type&&(d.type=i(d.type))})),n.configs&&(o.configs=n.configs.filter(r.filterMembersByAccess),o.configs.sort(r.categorySorter),o.configs.forEach(d=>{Qt(d,n),d.expandable=d.description.split("</p>").length>2,d.description.includes("<pre")&&(d.expandable=!0),s(d.type),s(d.properties),d.parameters&&d.parameters.length&&(d.expandable=!0,d.parameters.forEach(u=>{u.type=i(u.type)})),d.returns&&d.returns.type&&(d.returns.type=i(d.returns.type)),d.type&&(d.type=i(d.type))})),n.fields&&(o.fields=n.fields.filter(r.filterMembersByAccess),o.fields.sort(r.categorySorter),o.fields.forEach(d=>{Qt(d,n),d.expandable=d.description.split("</p>").length>2,s(d.type),s(d.properties),s(d.returns),d.type&&(d.type=i(d.type))})),n.events&&(o.events=n.events.filter(r.filterMembersByAccess),o.events.sort(r.sorter("name")),o.events.forEach(d=>{Qt(d,n),d.expandable=d.description.split("</p>").length>2,d.parameters&&(d.expandable=!0,d.parameters.forEach(u=>{u.type=i(u.type)}))})),n.mixin&&(o.mixin=!0),["mixes","features"].forEach(d=>{let u=d==="mixes"?"mixins":d;o[u]=o[d]&&o[d].map(f=>{let h=f.split("/");return{fullName:f,name:h[h.length-1]}})}),n.features?.forEach(d=>{let u=f=>{let h=e.classes.find(p=>p.modulePath===d),m=h?.[f]?.filter(p=>p.onOwner).map(p=>Object.assign({},p,{description:`${p.description}<br>Added by feature: <a href="#${d}">${d.replace(/\//gm,".")}</a>`,fromFeature:!0,onOwner:!1}));if(m?.length>0){let p=o[f]||[],y=m.filter(C=>!p.find(w=>w.name===C.name));o[f]=p.concat(y)}};u("events"),u("functions")})}return o})),t.classes.sort(r.sorter("fullName"))),e.components&&(e.components.forEach(n=>{n.props&&n.props.sort((o,l)=>{let c=r.sorter("category")(o,l);return c!==0?c:r.sorter("name")(o,l)})}),t.components=e.components)}sorter(e){return(t,r)=>{let i=t[e],s=r[e];return i==null&&s!=null?-1:s==null&&i!=null?1:i<s?-1:i>s?1:0}}categorySorter(e,t){if(this.settings.groupMembers){if(e.category==="Common"&&t.category!=="Common")return-1;if(t.category==="Common"&&e.category!=="Common")return 1;let r=this.sorter("category")(e,t);if(r!==0)return r}return this.sorter("name")(e,t)}functionSorter(e,t){return e.name==="constructor"?-1:t.name==="constructor"?1:this.categorySorter(e,t)}buildInheritedJson(e,t=e,r=!1){if(!e.extends&&!e.mixes)return e;let i=this,s=r||e.singleton,n=e.extends||[],o=e.mixes||[],l=e.extendsconfigs||[],c=[];return c.push(...n.concat(o).map(d=>({id:d}))),c.push(...l.map(d=>({scope:"configs",id:d}))),t.uninherit&&t.uninherit.forEach(d=>{U.remove(c,d)}),c.forEach(({scope:d,id:u})=>{let f=o.includes(u),h=i.navigationTree.store.getById(u);if(!h)return;let{data:m}=h;function p(y,C){if(m[y]?.length){t[y]||(t[y]=[]);let w=t[y];m[y].forEach(T=>{let R=w.find(H=>H.name===T.name);if(R?.hide)U.remove(w,R);else if(!R||R.inheritedFrom&&f){let H=w.findIndex(B=>B.name===T.name);H>=0&&w.splice(H,1);let A=b.clone(T);if(A.inheritedFrom=u,!A.category){let B=u.split("/");A.category=B[B.length-1]}w.push(A)}}),w.sort(C)}}d?p(d,i.categorySorter):(s||p("configs",i.categorySorter),p("properties",i.categorySorter),p("events",i.sorter("name")),p("fields",i.categorySorter),p("functions",i.functionSorter.bind(i)),p("features")),i.buildInheritedJson(m,t,s)}),en(t.configs,e.hideConfigs),en(t.properties,e.hideProperties),en(t.functions,e.hideFunctions),t}preparePrerender(){let e=this;e.router.isPrerender&&(e.router.adjustStoreLinks(e.navigationTree.store),document.body.classList.add("prerender"))}async onSettingsChange({settings:e}){Object.assign(this.settings,e),localStorage.setItem("bryntum-docs-settings",JSON.stringify(this.settings)),window.docsJson&&await this.onDocsDataLoaded()}async resetSettings(){await this.onSettingsChange({settings:this.defaultSettings})}async loadGuide(e){let t=this;if(e.fullName===t.currentRecord?.fullName)return;if(e.data.content){t.updateContent(e);return}if(t.isContentPrerendered=document.querySelector(`#content[data-id="${e.fullName}"]`),x.queryString.empty!=null)return;let r=t.isContentPrerendered?null:new Ae({text:"Loading guide...",mode:"bright",target:t.contentEl,listeners:{show(){t.isMaskShown=!0}}});try{t._loadPromise&&t._loadPromise._record===e&&t._loadPromise.abort();let i=e.id.startsWith("guides/")?`${window.productName}/${e.id}`:e.id;t._loadPromise=t.loadResource(i),t._loadPromise._record=e;let s=await t._loadPromise;s.ok?(e.data.content=await s.text(),t.updateContent(e)):t.onPathNotFound(e.fullName)}finally{t._loadPromise=null,r?.destroy()}}openUpgradeGuide(){let e=this,t;e.navigationTree.store.allRecords.forEach(r=>{r.id.startsWith(`${window.productName}/guides/upgrades/`)&&(t=r)}),t&&(e.router?.isOnline?e.router.routeTo(`guide/${window.productName}/upgrades/${t.name}`):window.location.hash=t.id)}showApiDiffGrid(){let e=this;e.contentEl.innerHTML='<div class="left-pane"></div>';let t=document.createElement("h1"),r=e.contentEl.firstElementChild;t.className="diff-header",t.innerHTML="API Diff Table",r.appendChild(t),e._apiDiffGrid||(e._apiDiffGrid=new Mr({appendTo:r,productId:e.product,version:e.apiVersion})),r.appendChild(e._apiDiffGrid.element);let i=x.queryString.v||e.apiVersion;e._apiDiffGrid.compareToPrevious(i)}hideApiDiffGrid(){this._apiDiffGrid&&this._apiDiffGrid.element.remove()}async onHashChange(){let e=this,{router:t}=window.bryntum,r=t.id||e.startHash,i=e.navigationTree.store.getById(r);if(await e.memberTooltip.hide(!1),i!==e.currentRecord&&(e.memberFilter.clear(),e.tools.resetSearchField()),r==="upgrade-guide"){e.openUpgradeGuide();return}if(!i){if(!r.includes("guides")){e.onPathNotFound(r);return}i=new e.navigationTree.store.modelClass({id:r,isLeaf:!0,fullName:r,url:r,isGuide:!0,virtual:!0})}if(i.isLeaf){if(!i.virtual&&e.navigationTree.features.tree.expandTo(r),e.navigationTree.selectCell({column:"id",id:i.id},!1,!1,!0),r==="apidiff")e.updateContent(i);else if(i.isGuide)await e.loadGuide(i);else if(i!==e.currentRecord){let s=i.data;e.settings.groupMembers?s.isNewCategory=o=>o.category&&o.category!==s.currentCategory?(s.currentCategory=o.category,!0):!1:s.isNewCategory=()=>!1;let n=e.settings.showInherited?e.buildInheritedJson(s):s;Object.assign(i.data,n),e.updateContent(i)}if(await this.waitForFiddlesLoaded(),!e.skipScrollIntoView){let{anchor:s}=t,n=s&&document.getElementById(encodeURIComponent(s));n&&(n.matches(".expandable, .overflowing, .collapsible-heading")&&e.toggleNodeExpanded(n,!0),e.setTimeout(()=>{e.scrollMemberIntoView(n)},10))}}else(i.name==="API docs"||i.name==="Guides")&&e.updateContent(i)}async waitForFiddlesLoaded(){let e=this;return new Promise(t=>{if(!document.querySelector(".b-fiddlepanel:not(.ready)")){t();return}e.loadInterval=e.setInterval(()=>{document.querySelector(".b-fiddlepanel:not(.ready)")||(e.clearInterval(e.loadInterval),t())},250)})}scrollMemberIntoView(e){let t=r=>r.scrollIntoView();e&&(window.getComputedStyle(e).position==="sticky"?(e.style.position="unset",t(e),e.style.position=""):t(e),this.preventHighlight||(g.removeClsGlobally(this.contentEl,ya),e.classList.add(ya)))}onPathNotFound(e){let{contentEl:t}=this;t.className="path-not-found",t.innerHTML=ga({path:e}),this.currentRecord=null,this.router.adjustDomLinks(),this.trigger("contentUpdated",null)}updateContent(e){let t=this,r=t.memberFilter,i=r.element,s=t.contentEl,n=e.id!=="apidiff";if(e===t.currentRecord)return;let o,l;s.style.display="none",t.hideApiDiffGrid(),t.adjustExampleLinks(e),r.clear(),i.remove(),t.removeExternalExamples(),e.id==="apidiff"?(t.showApiDiffGrid(),l="api-diff"):e.isGuide?(ff(e)?o=pa(e):o=da(e),l="guide"):e.name==="API docs"?(o=ha(e),l="apioverview"):e.name==="Guides"?(o=ma(e),l="guideoverview"):(o=ca(e.data,t.navigationTree.store),l="api"),s.className=l,n&&(s.innerHTML=o,t.processContent(e),l==="api"&&t.postProcessClassDocs(),(l==="api"||l==="guide")&&(t.createAnchors(e),t.generateContentsList(e)),t.initExternalExamples(),t.highlightInlineCodeBlocks()),t.currentRecord=e,t.scrollDetacher?.(),s.dataset.id=e.id,s.style.display="",s.scrollTop=0,t.updateExpandable(),e.isGuide&&!e.name&&(e.name="Guide"),document.title=`${e.isGuide||!e.data.fullName?e.name:e.fullName} | Bryntum ${window.productName}`,(l==="api"||l==="guide")&&(t.scrollDetacher=O.on({element:s.querySelector(".content-body")||s,throttled:100,scroll:"onScroll",thisObj:t}));let{logger:c}=window;c?.recorder?.active&&document.querySelectorAll("*").length>3e3&&c.recorder.stop(),t.router.adjustDomLinks(),t.trigger("contentUpdated",e)}onScroll(e){let t=this,r=e.target.getBoundingClientRect(),i=document.elementFromPoint(r.left+r.width/2,r.top+15);if(i?.tagName==="H2"){let s=document.getElementById(`contents-link-${i.dataset.refId}`);t.activeContentsEntry?.classList.remove("active"),t.activeContentsEntry=s,s?.classList.add("active")}else t.activeContentsEntry?.classList.remove("active"),t.activeContentsEntry=null}highlightInlineCodeBlocks(){Array.from(this.contentEl.querySelectorAll("pre:not(.codeContainer) code")).forEach(e=>{let t=document.createElement("i");t.className="b-fa b-fa-copy copy-to-clipboard",t.dataset.btip="Copy to clipboard",e.parentElement.appendChild(t),e.innerHTML=e.innerHTML.replace(uf,`

`),hljs.highlightElement(e)})}adjustExampleLinks(e){let t=/(href="|src="|]\()\.\.\/examples/gm,{examplesPaths:r}=window,{isBryntumOnline:i}=this.router,s=(o,l,c)=>{["content","data","description"].forEach(d=>{o.data[d]&&(o.data[d]=o.data[d].replace(l,c))})},n=!0;r&&r.forEach(({product:o,replacement:l,online:c})=>{if((c==null||i===c)&&e.fullName?.startsWith(`${o}/`)){let d=o==="SchedulerPro"?"scheduler-pro":o.toLowerCase();s(e,t,l||`$1https://bryntum.com/examples/${d}`),i&&(n=!1)}}),i&&n&&s(e,t,"$1/examples/"+this.product)}postProcessClassDocs(){let e=this,t=e.memberFilter.element,r=e.contentEl,i=r.querySelector(".content-body");r.querySelector(".content-header").appendChild(t),e.badgeTooltip.clippedTo=i,e.sectionTooltip.clippedTo=i}processContent(e){Array.from(this.contentEl.querySelectorAll('a[href^="##"]')).forEach(t=>{t.href=t.href.replace("##",`#${e.fullName}#`)}),Array.from(this.contentEl.querySelectorAll("img")).forEach(t=>{let r=t.attributes.src.value;/(?!engine)^[A-Z]/.test(r)&&(t.src=r.replace(/(\w+)\//,"data/$1/images/"))})}generateContentsList(e){let t=Array.from(this.contentEl.querySelectorAll("h2")),r=this.contentEl.querySelector(".contents-list");r.innerHTML=t.map(i=>{let{textContent:s,id:n}=i;return`<li id="contents-link-${n}"><a href="#${e.fullName}#${n}">${s}</a></li>`}).join("")}createAnchors(e){Array.from(this.contentEl.querySelectorAll(["h2","h3","h4","section > h2","section > h3","section > h4"].map(r=>`.left-pane > ${r}`).join(","))).forEach(r=>{let i=hf(r.textContent);r.id=r.dataset.refId=i,g.createElement({class:"b-fa b-fa-link anchor-link",tag:"a",href:`#${e.fullName}#${i}`,parent:r,dataset:{btip:"Copy link to clipboard"}})})}updateExpandable(){let e=this.contentEl,t=[];Array.from(e.querySelectorAll(".overflowing")).forEach(r=>{r.classList.remove("overflowing")}),Array.from(e.querySelectorAll(".member:not(.expandable) > .description")).forEach(r=>{r.scrollHeight>r.offsetHeight+5&&t.push(r)}),t.forEach(r=>r.parentElement.classList.add("overflowing"))}async onContentAreaMouseDown(e){let t=this,r=e.target;r.tagName.toLowerCase()==="a"&&(r.parentElement.matches(".name")&&r.parentElement.firstElementChild===r?(t.skipScrollIntoView=!0,t.setTimeout(()=>t.skipScrollIntoView=!1,500)):r.closest(".contents-list")&&r.getAttribute("href")===location.hash&&await t.onHashChange()),t.lastMouseDownEvent=e}onContentAreaClick(e){let t=this,r=e.target;if(r.classList.contains("anchor-link"))x.copyToClipboard(r.href)&&Ie.show("Link copied to clipboard"),e.preventDefault();else if(r.classList.contains("copy-to-clipboard")&&!r.closest(".codeContainer")){let i=r.parentElement.querySelector("code"),s;i.classList.contains("shell")?s=Array.from(i.querySelectorAll(":scope > :not(.hljs-meta)")).map(n=>n.textContent.trim()).join(`
`):s=r.parentElement.innerText,x.copyToClipboard(s)&&Ie.show("Code copied to clipboard")}else if(t.lastMouseDownEvent&&O.getDistanceBetween(e,t.lastMouseDownEvent)<=10){let i=(r.tagName.toLowerCase()!=="a"||r.closest(".name"))&&r.closest(".member");t.preventHighlight=!0,t.toggleNodeExpanded(i||e.target),t.setTimeout(()=>{t.preventHighlight=!1},200)}}async onRouteClick(e){this.router?.routeTo(e.target.getAttribute("href")||e.target.parentNode?.getAttribute("href"))&&e.preventDefault()}toggleNodeExpanded(e,t){let r=this,i=e.classList.contains("member"),s,n;if(i?(n=e,e.classList.contains("expandable")||e.classList.contains("overflowing")?s=e.querySelector(".description"):s=null):e.matches("h2.collapsible-heading")&&(s=e.nextElementSibling,n=s,e.classList.toggle("expanded",t)),s)if(n.classList.toggle("expanded",t),t||!s.style.maxHeight){if(s.style.maxHeight=s.scrollHeight+"px",i){let o=t?"start":"nearest";r.animateScroll?r.setTimeout(()=>e.scrollIntoView({block:o}),300):e.scrollIntoView({block:o})}}else s.style.maxHeight=""}onMemberFilterChange({value:e}){let t=this,{contentEl:r}=t;if(e&&(e=e.trim().toLowerCase().replace(/[^a-zA-Z]+/g,"")),g.forEachSelector(r,".filter-hit",i=>i.classList.remove("filter-hit")),e){let i=r.querySelectorAll(`.member[name*=${e}]`);r.classList.add("filtered"),Array.from(i).forEach(s=>{for(s.classList.add("filter-hit"),s.parentElement.parentElement.classList.add("filter-hit");s=s.previousElementSibling;)if(s.matches(".categoryHeader")){s.classList.add("filter-hit");break}}),i.length?t.scrollMemberIntoView(i[0]):(document.querySelector(".no-results").classList.add("filter-hit"),r.querySelector(".content-body").scrollTop=0)}else r.classList.remove("filtered")}removeExternalExamples(){E.queryAll("fiddlepanel").forEach(e=>e.destroy())}initExternalExamples(){let e=this;Array.from(e.contentEl.querySelectorAll("div.external-example")).forEach(r=>{let i=`${r.dataset.file.replace(/^(\w+)\//,"data/$1/examples/")}?version=${e.apiVersion}`,s=r.className.replace("external-example","");window.isRootDocsBrowser&&(i="../../../Grid/docs/data/"+i),new Jt({adopt:r,apiVersion:e.apiVersion,productId:e.product,hideChrome:s.includes("hideChrome"),alignLeft:s.includes("alignLeft"),url:i,items:{result:{cls:"fiddlePanelResult "+s}}})})}};window.bryntum.router=new xi;window.DocsBrowserInstance=new tn;window.DocsBrowser=tn;})();
